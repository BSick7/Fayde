<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.6.2.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            var stage = new Kinetic.Stage('container', 600, 600);
            var forelayer = new Kinetic.Layer();

            for (var i = 0; i < 1000; i++) {
                var shape = new Kinetic.Shape(function () {
                    var canvas = this.getCanvas();
                    var context = this.getContext();
                    drawRectangle.call(this, context, this.Rect);
                }, "shape" + i.toString());
                shape.Rect = {
                    Left: randomInt(0, 500),
                    Top: randomInt(0, 500)
                };
                shape.Rect.Width = randomInt(shape.Rect.Left, 600);
                shape.Rect.Height = randomInt(shape.Rect.Top, 600);
                forelayer.add(shape);
            }

            stage.add(forelayer);
        };

        function drawRectangle(context, rect) {
            context.beginPath();
            context.rect(this.Rect.Left, this.Rect.Top, this.Rect.Width, this.Rect.Height);
            context.fillStyle = "#000000";
            context.fill();
            context.lineWidth = 3;
            context.strokeStyle = "#ffffff";
            context.stroke();
        }

        function randomInt(low, high) {
            return Math.round((Math.random() * (high - low)) + low);
        }
    </script>
</head>
<body>
    <div>
        <div id="container" style="width: 600px; height: 600px;">
	        <canvas id="testCanvas" width="600" height="600">
	        </canvas>
        </div>
    </div>
</body>
</html>
