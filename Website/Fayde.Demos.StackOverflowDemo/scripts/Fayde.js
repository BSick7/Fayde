var __extends=this.__extends||function(d,a){function g(){this.constructor=d}for(var e in a)a.hasOwnProperty(e)&&(d[e]=a[e]);g.prototype=a.prototype;d.prototype=new g},Fayde;
(function(d){(function(a){(function(a){a[a.NoWrap=0]="NoWrap";a[a.Wrap=1]="Wrap";a[a.WrapWithOverflow=2]="WrapWithOverflow"})(a.TextWrapping||(a.TextWrapping={}));(function(a){a[a.Disabled=0]="Disabled";a[a.Auto=1]="Auto";a[a.Hidden=2]="Hidden";a[a.Visible=3]="Visible"})(a.ScrollBarVisibility||(a.ScrollBarVisibility={}));(function(a){a[a.None=0]="None"})(a.TextTrimming||(a.TextTrimming={}));(function(a){a[a.Release=0]="Release";a[a.Press=1]="Press";a[a.Hover=2]="Hover"})(a.ClickMode||(a.ClickMode=
{}));(function(a){a[a.Bottom=0]="Bottom";a[a.Right=1]="Right";a[a.Mouse=2]="Mouse";a[a.Left=3]="Left";a[a.Top=4]="Top"})(a.PlacementMode||(a.PlacementMode={}));(function(a){a[a.Single=0]="Single";a[a.Multiple=1]="Multiple";a[a.Extended=2]="Extended"})(a.SelectionMode||(a.SelectionMode={}));(function(a){a[a.Closed=0]="Closed";a[a.Opening=1]="Opening";a[a.Buffering=4]="Buffering";a[a.Playing=5]="Playing";a[a.Paused=6]="Paused";a[a.Stopped=7]="Stopped"})(a.MediaElementState||(a.MediaElementState={}))})(d.Controls||
(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(){function e(c){this.Owner=c;this._Cache=[];this._Containers=[];this._RealizedCount=0;this._Items=[];this.ItemsChanged=new MulticastEvent}e.prototype.GenerateNext=function(c){if(!this._GenerationState)throw new InvalidOperationException("Cannot call GenerateNext before calling StartAt");var b=this.Owner,f=b.Items,h=this._GenerationState,a=h.Position,e=this.IndexFromGeneratorPosition(a);c.Value=null==this._Containers[e];h.AllowStartAtRealizedItem||(c.Value||
0!==a.Offset)||(e+=h.Step,c.Value=null==this._Containers[e]);if(0>e||e>=f.Count)return c.Value=!1,null;if(!c.Value)return a.Index=e,a.Offset=h.Step,this._Containers[e];var g,f=f.GetValueAt(e);b.IsItemItsOwnContainer(f)?(f instanceof d.DependencyObject&&(g=f),c.Value=!0):0<this._Cache.length?(g=this._Cache.pop(),c.Value=!1):(g=b.GetContainerForItem(),c.Value=!0);g instanceof d.FrameworkElement&&!(f instanceof d.UIElement)&&(g.DataContext=f);this._Items[e]=f;this._Containers[e]=g;c.Value&&this._RealizedCount++;
a.Index=e;a.Offset=h.Step;return g};e.prototype.GetItemContainerGeneratorForPanel=function(c){return this.Owner.Panel===c?this:null};e.prototype.PrepareItemContainer=function(c){var b=this.ItemFromContainer(c);this.Owner.PrepareContainerForItem(c,b)};e.prototype.Recycle=function(c,b){this._KillContainers(c,b,!1)};e.prototype.Remove=function(c,b){this._KillContainers(c,b,!1)};e.prototype.RemoveAll=function(){for(var c,b,f=this._Containers,h=this._Items,a=this.Owner;void 0!==(c=f.shift())&&void 0!==
(b=h.shift());)a.ClearContainerForItem(c,b);this._RealizedCount=0};e.prototype.StartAt=function(c,b,f){var h=this;if(this._GenerationState)throw new InvalidOperationException("Cannot call StartAt while a generation operation is in progress");return this._GenerationState={AllowStartAtRealizedItem:f,Position:{Index:c.Index,Offset:c.Offset},Step:b?1:-1,Dispose:function(){return h._GenerationState=null}}};e.prototype.IndexFromContainer=function(c){return this._Containers.indexOf(c)};e.prototype.ContainerFromIndex=
function(c){return this._Containers[c]};e.prototype.ItemFromContainer=function(c){c=this._Containers.indexOf(c);return 0>c?void 0:this._Items[c]};e.prototype.ContainerFromItem=function(c){if(null!=c)return c=this._Items.indexOf(c),0>c?void 0:this._Containers[c]};e.prototype.GeneratorPositionFromIndex=function(c){if(0>c)return{Index:-1,Offset:0};if(0===this._RealizedCount)return{Index:-1,Offset:c+1};if(c>this.Owner.Items.Count)return{Index:-1,Offset:0};for(var b=-1,f=0,h=this._Containers,a=h.length,
d=0;d<a&&b+f<c;d++)null!=h[d]?(b++,f=0):f++;return{Index:b,Offset:f}};e.prototype.IndexFromGeneratorPosition=function(c){var b=c.Index;c=c.Offset;if(-1===b)return 0>c?this.Owner.Items.Count+c:c-1;if(b>this.Owner.Items.Count)return-1;for(var f=this._Containers,h=f.length,a=0;a<h&&0<=b;a++)null!=f[a]&&b--;return a+c-1};e.prototype.OnOwnerItemsItemsChanged=function(c){var b,f,h;switch(c.Action){case d.Collections.NotifyCollectionChangedAction.Add:b=c.NewItems.length;d.ArrayEx.Fill(this._Containers,c.NewStartingIndex,
b,null);d.ArrayEx.Fill(this._Items,c.NewStartingIndex,b,null);f=0;h=this.GeneratorPositionFromIndex(c.NewStartingIndex);h.Offset=1;break;case d.Collections.NotifyCollectionChangedAction.Remove:b=c.OldItems?c.OldItems.length:1;f=this._GetNumAlreadyRealizedItems(c.OldItems);h=this.GeneratorPositionFromIndex(c.OldStartingIndex);this.Remove(h,f);break;case d.Collections.NotifyCollectionChangedAction.Replace:f=b=1;h=this.GeneratorPositionFromIndex(c.NewStartingIndex);this.Remove(h,1);var e=this.GeneratorPositionFromIndex(c.NewStartingIndex),
e=this.StartAt(e,!0,!0);try{this.PrepareItemContainer(this.GenerateNext({Value:null}))}finally{e.Dispose()}break;case d.Collections.NotifyCollectionChangedAction.Reset:b=c.OldItems?c.OldItems.length:0;f=this._RealizedCount;h={Index:-1,Offset:0};this.RemoveAll();break;default:Warn("*** Critical error in ItemContainerGenerator.OnOwnerItemsItemsChanged. NotifyCollectionChangedAction."+c.Action+" is not supported")}c=new a.Primitives.ItemsChangedEventArgs(c.Action,b,f,{Index:-1,Offset:0},h);this.ItemsChanged.Raise(this,
c)};e.prototype._GetNumAlreadyRealizedItems=function(c){for(var b=0,f=c.length,h=0;h<f;h++)null!=this.ContainerFromItem(c[h])&&b++;return b};e.prototype._KillContainers=function(c,b,f){if(0!==c.Offset)throw new ArgumentException("position.Offset must be zero as the position must refer to a realized element");c=this.IndexFromGeneratorPosition(c);this._Items.splice(c,b);f?this._Cache=this._Cache.concat(this._Containers.splice(c,b)):this._Containers.splice(c,b);this._RealizedCount-=b};return e}();a.ItemContainerGenerator=
g})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));(function(d){(function(a){(function(a){var d=function(){return function(){this.CanVerticallyScroll=this.CanHorizontallyScroll=!1;this.ScrollOwner=null;this.MaxDesiredHeight=this.MaxDesiredWidth=this.ExtentHeight=this.ExtentWidth=this.ViewportHeight=this.ViewportWidth=this.CachedOffsetY=this.CachedOffsetX=this.OffsetY=this.OffsetX=0}}();a.ScrollData=d})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){d.Clone=function(a){if(void 0!==a){if(null===a)return null;if(a instanceof d.XamlObject)return a.Clone();if("number"===typeof a||"string"===typeof a)return a;switch(a.constructor._TypeName){case "Uri":case "rect":case "size":case "FontFamily":case "Point":case "Color":case "PropertyPath":case "RepeatBehavior":case "Duration":case "KeyTime":case "GridLength":case "CornerRadius":case "Thickness":return a.Clone()}return new a.constructor}}})(Fayde||(Fayde={}));
(function(d){(function(a){a[a.Horizontal=0]="Horizontal";a[a.Vertical=1]="Vertical"})(d.Orientation||(d.Orientation={}));(function(a){a[a.Visible=0]="Visible";a[a.Collapsed=1]="Collapsed"})(d.Visibility||(d.Visibility={}));d.CursorType={Default:"",Hand:"pointer",IBeam:"text",Wait:"wait",SizeNESW:"ne-resize",SizeNWSE:"nw-resize",SizeNS:"n-resize",SizeWE:"w-resize"};(function(a){a[a.Left=0]="Left";a[a.Center=1]="Center";a[a.Right=2]="Right";a[a.Stretch=3]="Stretch"})(d.HorizontalAlignment||(d.HorizontalAlignment=
{}));(function(a){a[a.Top=0]="Top";a[a.Center=1]="Center";a[a.Bottom=2]="Bottom";a[a.Stretch=3]="Stretch"})(d.VerticalAlignment||(d.VerticalAlignment={}));(function(a){a[a.LeftToRight=0]="LeftToRight";a[a.RightToLeft=1]="RightToLeft"})(d.FlowDirection||(d.FlowDirection={}));(function(a){a[a.Thin=100]="Thin";a[a.ExtraLight=200]="ExtraLight";a[a.Light=300]="Light";a[a.Normal=400]="Normal";a[a.Medium=500]="Medium";a[a.SemiBold=600]="SemiBold";a[a.Bold=700]="Bold";a[a.ExtraBold=800]="ExtraBold";a[a.Black=
900]="Black";a[a.ExtraBlack=950]="ExtraBlack"})(d.FontWeight||(d.FontWeight={}));(function(a){a[a.Left=0]="Left";a[a.Center=1]="Center";a[a.Right=2]="Right"})(d.TextAlignment||(d.TextAlignment={}));(function(a){a[a.None=0]="None";a[a.Underline=1]="Underline"})(d.TextDecorations||(d.TextDecorations={}));(function(a){a[a.MaxHeight=0]="MaxHeight";a[a.BlockLineHeight=1]="BlockLineHeight"})(d.LineStackingStrategy||(d.LineStackingStrategy={}))})(Fayde||(Fayde={}));
(function(d){var a=function(){function a(){}a.GetParent=function(a){if(!(a instanceof d.FrameworkElement))throw new InvalidOperationException("Reference is not a valid visual DependencyObject");if(a=a.XamlNode.VisualParentNode)return a.XObject};a.GetRoot=function(a){if(!(a instanceof d.FrameworkElement))throw new InvalidOperationException("Reference is not a valid visual DependencyObject");if(a=a.XamlNode.GetVisualRoot())return a.XObject};a.GetChild=function(a,c){if(!(a instanceof d.FrameworkElement))throw new InvalidOperationException("Reference is not a valid visual DependencyObject");
var b=a.XamlNode.SubtreeNode.XObject;if(b instanceof d.XamlObjectCollection)return b.GetValueAt(c);if(b instanceof d.UIElement&&0===c)return b;throw new IndexOutOfRangeException(c);};a.GetChildrenCount=function(a){if(!(a instanceof d.FrameworkElement))throw new InvalidOperationException("Reference is not a valid visual DependencyObject");a=a.XamlNode.SubtreeNode;var c=a.XObject;return a.XObject instanceof d.XamlObjectCollection?c.Count:c instanceof d.UIElement?1:0};a.FindElementsInHostCoordinates=
function(a,c){return c.XamlNode.LayoutUpdater.FindElementsInHostCoordinates(a).map(function(b){return b.XObject})};a.__Debug=function(e,c){var b;e instanceof d.UIElement?b=e.XamlNode:e instanceof d.UINode?b=e:e instanceof d.LayoutUpdater&&(b=e.Node);var f;f=b?b.GetVisualRoot():(f=App.Current.RootVisual)?f.XamlNode:null;if(!f)return"[No top node.]";c||(c=a.__DebugUIElement);return a.__DebugTree(f,b,1,c)};a.__DebugTree=function(d,c,b,f){var h="";if(d===c)for(var n=0;n<b;n++)h+=">>>>>>>>";else for(n=
0;n<b;n++)h+="\t";n=d.XObject;h+=n.constructor._TypeName;(n=n._ID)&&(h+="["+n+"]");var n=d.Name,h=h+" [",s=d.NameScope,h=s?s.IsRoot?h+"+":h+"-":h+"^",h=h+(n+"]");f&&(h+=f(d,b));h+="\n";d=d.GetVisualTreeEnumerator();if(!d)return h;for(;d.MoveNext();)n=d.Current,h+=a.__DebugTree(n,c,b+1,f);return h};a.__DebugUIElement=function(e,c){if(!e)return"";var b="(",b=e.XObject.Visibility===d.Visibility.Visible?b+"Visible":b+"Collapsed",f=e.LayoutUpdater;if(f){var b=b+" ",h=f.VisualOffset;h&&(b+=h.toString());
f=size.fromRaw(f.ActualWidth,f.ActualHeight);b=b+" "+f.toString()}b+=")";(f=a.__DebugGrid(e,c))&&(b+="\n"+f);return b};a.__DebugGrid=function(a,c){var b;a instanceof d.Controls.GridNode&&(b=a.XObject);if(!b)return"";var f=b.RowDefinitions,h=f.Count,n=b.ColumnDefinitions,g=n.Count;b="";for(var p=0;p<c;p++)b+="\t";var k="";if(0<h)for(k=k+b+("  Rows ("+h+"):\n"),f=f.GetEnumerator(),p=0;f.MoveNext();)h=f.Current,k+=b,k+="\t["+p+"] -> "+h.ActualHeight+"\n",p++;if(0<g)for(k+=b,k+="  Columns ("+g+"):\n",
n=n.GetEnumerator(),p=0;n.MoveNext();)g=n.Current,k+=b,k+="\t["+p+"] -> "+g.ActualWidth+"\n",p++;return k};a.__DebugUIElementLayout=function(d,c){if(!d)return"";var b=d.LayoutUpdater,f=a._SerializeDirt(b.DirtyFlags),f=f+a._SerializeFlags(b.Flags),f=f+" ("+b.HiddenDesire.toString(),f=f+" ",f=f+b.RenderSize.toString();return f+=")"};a.__DebugLayout=function(d){return a.__Debug(d,a.__DebugUIElementLayout)};a._SerializeDirt=function(a){var c="";a&_Dirty.ChildrenZIndices&&(a&=~_Dirty.ChildrenZIndices,
c+="ZI+");a&_Dirty.Arrange&&(a&=~_Dirty.Arrange,c+="A+");a&_Dirty.Measure&&(a&=~_Dirty.Measure,c+="M+");a&_Dirty.HitTestVisibility&&(a&=~_Dirty.HitTestVisibility,c+="HTV+");a&_Dirty.RenderVisibility&&(a&=~_Dirty.RenderVisibility,c+="RV+");a&_Dirty.LocalClip&&(a&=~_Dirty.LocalClip,c+="LC+");a&_Dirty.Clip&&(a&=~_Dirty.Clip,c+="C+");a&_Dirty.LocalProjection&&(a&=~_Dirty.LocalProjection,c+="LP+");a&_Dirty.LocalTransform&&(a&=~_Dirty.LocalTransform,c+="LT+");a&_Dirty.Transform&&(a&=~_Dirty.Transform,c+=
"T+");c&&(c=c.substr(0,c.length-1));var b="";a&_Dirty.Invalidate&&(a&=~_Dirty.Invalidate,b+="I+");a&_Dirty.Bounds&&(b+="B+");b&&(b=b.substr(0,b.length-1));return"["+c+":"+b+"]"};a._SerializeFlags=function(a){var c="";a&d.UIElementFlags.DirtySizeHint&&(a&=~d.UIElementFlags.DirtySizeHint,c+="S+");a&d.UIElementFlags.DirtyMeasureHint&&(a&=~d.UIElementFlags.DirtyMeasureHint,c+="M+");a&d.UIElementFlags.DirtyArrangeHint&&(a&=~d.UIElementFlags.DirtyArrangeHint,c+="A+");a&d.UIElementFlags.TotalHitTestVisible&&
(a&=~d.UIElementFlags.TotalHitTestVisible,c+="THT+");a&d.UIElementFlags.TotalRenderVisible&&(a&=~d.UIElementFlags.TotalRenderVisible,c+="TRV+");a&d.UIElementFlags.HitTestVisible&&(a&=~d.UIElementFlags.HitTestVisible,c+="HT+");a&d.UIElementFlags.RenderVisible&&(c+="RV+");c&&(c=c.substring(0,c.length-1));return"["+c+"]"};a.__GetById=function(a){var c=App.Current.RootVisual;if(c=c?c.XamlNode:null)for(var c=d.DeepTreeWalker(c),b;b=c.Step();)if(b.XObject._ID===a)return b.XObject};return a}();d.VisualTreeHelper=
a})(Fayde||(Fayde={}));
(function(d){function a(b,f){var c=b.Property,a=f.Property;return c===a?0:c._ID>a._ID?1:-1}function g(b,f,c){c=c.Setters.GetEnumerator(!0);for(var a;c.MoveNext();)if(a=c.Current,a instanceof d.Setter){var e=a.Property;e&&!f[e._ID]&&(f[e._ID]=a,b.push(a))}}function e(b,f){var c=void 0,a=d.VisualTreeDirection.Logical,e=[b];f&&(a=f);return{Step:function(){if(c)for(var b=c.GetVisualTreeEnumerator(a),f=0;b.MoveNext();)e.splice(f,0,b.Current),f++;if(b=e.shift())return c=b;c=void 0},SkipBranch:function(){c=
void 0}}}function c(b,f){if(!b)return f?-1:0;if(!f)return 1;var c=b.XObject.TabIndex,a=f.XObject.TabIndex;return null==c?null!=a?-1:0:null==a?1:c>a?1:c===a?0:-1}function b(b){for(;b;){if(b instanceof d.Controls.ControlNode)return b.XObject.TabNavigation;b=b.VisualParentNode}return d.Input.KeyboardNavigationMode.Local}d.SingleStyleWalker=function(b){for(var f=[],c=[];b;)g(c,f,b),b=b.BasedOn;c.sort(a);return{Step:function(){return c.shift()}}};d.MultipleStylesWalker=function(b){var f=[];if(b){for(var c=
[],d=[],e=b.length,m=0;m<e;m++)for(var l=b[m];l;)-1<d.indexOf(l)||(g(f,c,l),d.push(l),l=l.BasedOn);f.sort(a)}return{Step:function(){return f.shift()}}};d.DeepTreeWalker=e;var f=function(){function h(b,f,c){this._Root=b;this._Current=f;this._Forwards=c;this._TabSorted=[]}h.prototype.FocusChild=function(){for(var h,a,g=-1,k=e(this._Root);h=k.Step();)h!==this._Root&&h instanceof d.Controls.ControlNode&&(this._TabSorted.push(h),k.SkipBranch());1<this._TabSorted.length&&(this._TabSorted.sort(c),this._Forwards||
(this._TabSorted=this._TabSorted.reverse()));k=this._TabSorted.length;for(h=0;h<k;h++)this._TabSorted[h]===this._Current&&(g=h);if(-1!==g&&b(this._Root)===d.Input.KeyboardNavigationMode.Once)return!this._Forwards&&this._Root instanceof d.Controls.ControlNode?this._Root.TabTo():!1;k=this._TabSorted.length;if(0<k)for(var m=0;m<k&&(m+g+1!==k||b(this._Root)===d.Input.KeyboardNavigationMode.Cycle);m++)if(h=this._TabSorted[(m+g+1)%k],a=h instanceof d.Controls.ControlNode,!a||h.XObject.IsEnabled)if(!this._Forwards&&
(new f(h,void 0,void 0)).FocusChild()||a&&h.TabTo()||this._Forwards&&(new f(h,void 0,void 0)).FocusChild())return!0;return-1!==g&&!this._Forwards&&this._Root instanceof d.Controls.ControlNode?this._Root.TabTo():!1};h.Focus=function(c,h){var a=!1,e=c,g=c,l;if(l=g.VisualParentNode){a:{for(l=g.VisualParentNode;l;){if(l instanceof d.Controls.ControlNode){l=l.XObject.TabNavigation;break a}l=d.Input.KeyboardNavigationMode.Local;break a}l=d.Input.KeyboardNavigationMode.Local}l=l===d.Input.KeyboardNavigationMode.Once}if(l||
!h&&g&&g.VisualParentNode)for(;(g=g.VisualParentNode)&&!(g instanceof d.Controls.ControlNode)&&g.VisualParentNode;);do{a=a||(new f(g,e,h)).FocusChild();if(!a&&b(g)===d.Input.KeyboardNavigationMode.Cycle)return!0;e=g;for(g=g.VisualParentNode;g&&!(g instanceof d.Controls.ControlNode)&&g.VisualParentNode;)g=g.VisualParentNode}while(!a&&g);a||(a=a||(new f(e,null,h)).FocusChild());return a};return h}();d.TabNavigationWalker=f})(Fayde||(Fayde={}));
(function(d){(function(a){(function(b){b[b.VisualTree=0]="VisualTree";b[b.ApplicationResources=1]="ApplicationResources";b[b.GenericXaml=2]="GenericXaml";b[b.Count=3]="Count"})(a.StyleIndex||(a.StyleIndex={}));var g=a.StyleIndex;(function(b){b[b.None=0]="None";b[b.VisualTree=1<<g.VisualTree]="VisualTree";b[b.ApplicationResources=1<<g.ApplicationResources]="ApplicationResources";b[b.GenericXaml=1<<g.GenericXaml]="GenericXaml";b[b.All=b.VisualTree|b.ApplicationResources|b.GenericXaml]="All"})(a.StyleMask||
(a.StyleMask={}));var e=a.StyleMask,c=function(){function b(){}b.Set=function(f,c,a){a||(a=b.GetImplicitStyles(f,c));if(a)for(var d=new BError,e=g.Count,k=0;k<e;k++){var m=a[k];if(m&&!m.Validate(f,d)){d.ThrowException();return}}b.SetImpl(f,c,a)};b.SetImpl=function(f,c,a){a&&b.ApplyStyles(f,c,a)};b.Clear=function(f,c){var a=f.XamlNode,d=a._ImplicitStyles;d&&(d=d.slice(0),c&e.GenericXaml&&(d[g.GenericXaml]=null),c&e.ApplicationResources&&(d[g.ApplicationResources]=null),c&e.VisualTree&&(d[g.VisualTree]=
null),b.ApplyStyles(f,a._StyleMask&~c,d))};b.ApplyStyles=function(b,c,a){var e=b.XamlNode,p=e._ImplicitStyles,k=!p||c!==e._StyleMask;if(!k)for(var m=0;m<g.Count;m++)if(a[m]!==p[m]){k=!0;break}if(k){for(var k=b._PropertyStorage,p=d.MultipleStylesWalker(p),m=d.MultipleStylesWalker(a),l=p.Step(),q=m.Step(),r,t,u,x=void 0,v;l||q;)l&&(v=r=l.Property),q&&(v=t=q.Property,x=q.ConvertedValue),(u=k[v._ID])||(u=k[v._ID]=v.Store.CreateStorage(b,v)),v.Store.SetImplicitStyle(u,x),r&&(l=p.Step()),t&&(q=m.Step());
e._ImplicitStyles=a;e._StyleMask=c}};b.GetImplicitStyles=function(f,c){var a=f.constructor,s=a._TypeName,p=void 0;if(0!=(c&e.GenericXaml)&&f instanceof d.Controls.Control&&(p=f.GetDefaultStyle(),!p)){var k=f.DefaultStyleKey;k&&(p=b.GetGenericXamlStyleFor(k))}var k=void 0,m=App.Current.Resources;0!=(c&e.ApplicationResources)&&((k=m.Get(a))||(k=m.Get(s)));var l=void 0;if(0!=(c&e.VisualTree))for(var m=f,q=f.XamlNode,r=q instanceof d.Controls.ControlNode;q;)if(m=q.XObject,m.TemplateOwner&&!f.TemplateOwner)m=
m.TemplateOwner,q=m.XamlNode;else{if(!r&&m===f.TemplateOwner)break;if(m=m.Resources)if((l=m.Get(a))||(l=m.Get(s)),l)break;q=q.VisualParentNode}a=[];a[g.GenericXaml]=p;a[g.ApplicationResources]=k;a[g.VisualTree]=l;return a};b.GetGenericXamlStyleFor=function(b){var c=App.GetGenericResourceDictionary();if(c)return c.Get(b)};return b}();a.ImplicitStyleBroker=c})(d.Providers||(d.Providers={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(){function a(){}a.Set=function(c,b){var f=c.XamlNode,h=c._PropertyStorage,a=d.SingleStyleWalker(f._LocalStyle),e=d.SingleStyleWalker(b);b.Seal();for(var g=a.Step(),k=e.Step(),m,l,q,r=void 0,t;g||k;)g&&(t=m=g.Property),k&&(t=l=k.Property,r=k.ConvertedValue),(q=h[t._ID])||(q=h[t._ID]=t.Store.CreateStorage(c,t)),t.Store.SetLocalStyleValue(q,r),m&&(g=a.Step()),l&&(k=e.Step());f._LocalStyle=b};return a}();a.LocalStyleBroker=g})(d.Providers||(d.Providers={}))})(Fayde||
(Fayde={}));(function(d){d.UnsetValue={}})(Fayde||(Fayde={}));
(function(d){(function(a){function g(b,f){var c=b._PropertyStorage,a=c[f._ID];a||(c[f._ID]=a=f.Store.CreateStorage(b,f));return a}(function(b){b[b.IsEnabled=0]="IsEnabled";b[b.LocalValue=1]="LocalValue";b[b.LocalStyle=2]="LocalStyle";b[b.ImplicitStyle=3]="ImplicitStyle";b[b.Inherited=4]="Inherited";b[b.InheritedDataContext=5]="InheritedDataContext";b[b.DefaultValue=6]="DefaultValue";b[b.Lowest=6]="Lowest";b[b.Highest=0]="Highest";b[b.Count=7]="Count"})(a.PropertyPrecedence||(a.PropertyPrecedence=
{}));var e=a.PropertyPrecedence;a.GetStorage=g;var c=function(){function b(){}b.prototype.GetValue=function(b){var c;return void 0!==(c=b.Local)||void 0!==(c=b.LocalStyleValue)||void 0!==(c=b.ImplicitStyleValue)?c:b.Property.DefaultValue};b.prototype.GetValuePrecedence=function(b){return void 0!==b.Local?e.LocalValue:void 0!==b.LocalStyleValue?e.LocalStyle:void 0!==b.ImplicitStyleValue?e.ImplicitStyle:e.DefaultValue};b.prototype.SetLocalValue=function(b,c){if(void 0===c||c===d.UnsetValue)this.ClearValue(b);
else{var a=b.Property;c&&a.GetTargetType()===String&&"string"!==typeof c&&(c=c.toString());var g={IsValid:!1};c=a.ValidateSetValue(b.OwnerNode.XObject,c,g);g.IsValid&&(g=b.Precedence-e.LocalValue,!a.AlwaysChange&&0>g?b.Local=c:(a=void 0,a=0<g?this.GetValue(b):b.Local,b.Local=c,this.OnPropertyChanged(b,e.LocalValue,a,c)))}};b.prototype.SetLocalStyleValue=function(b,c){var a=b.Precedence-e.LocalStyle;if(0>a)b.LocalStyleValue=c;else{var d=void 0,d=0<a?this.GetValue(b):b.LocalStyleValue;b.LocalStyleValue=
c;this.OnPropertyChanged(b,e.LocalStyle,d,c)}};b.prototype.SetImplicitStyle=function(b,c){var a=b.Precedence-e.ImplicitStyle;if(0>a)b.ImplicitStyleValue=c;else{var d=void 0,d=0<a?this.GetValue(b):b.ImplicitStyleValue;b.ImplicitStyleValue=c;this.OnPropertyChanged(b,e.ImplicitStyle,d,c)}};b.prototype.ClearValue=function(b){var c=b.Local;void 0!==c&&(b.Local=void 0,this.OnPropertyChanged(b,e.LocalValue,c,void 0))};b.prototype.OnPropertyChanged=function(b,c,a,e){var g=b.Property;void 0===e&&(c=this.GetValuePrecedence(b),
e=this.GetValue(b));b.Precedence=c;if(g.AlwaysChange||a!==e)if(b.Property.IsCustom||(a instanceof d.XamlObject&&a.XamlNode.Detach(),e instanceof d.XamlObject&&(c=new BError,e.XamlNode.AttachTo(b.OwnerNode,c)||c.ThrowException())),a={Property:g,OldValue:a,NewValue:e},e=b.OwnerNode.XObject,g.ChangedCallback&&g.ChangedCallback(e,a),b=b.PropListeners)for(g=b.length,c=0;c<g;c++)b[c].OnPropertyChanged(e,a)};b.prototype.ListenToChanged=function(b,c,a,d){b=g(b,c);var e=b.PropListeners;e||(e=b.PropListeners=
[]);var k={Detach:function(){var b=e.indexOf(k);-1<b&&e.splice(b,1)},Property:c,OnPropertyChanged:function(b,f){a.call(d,b,f)}};e.push(k);return k};b.prototype.CreateStorage=function(b,c){return{OwnerNode:b.XamlNode,Property:c,Precedence:e.DefaultValue,Animations:void 0,Local:void 0,LocalStyleValue:void 0,ImplicitStyleValue:void 0,PropListeners:void 0}};b.prototype.Clone=function(b,c){var a=this.CreateStorage(b,c.Property);a.Precedence=c.Precedence;a.Local=d.Clone(c.Local);var e=a.Animations=c.Animations;
if(e)for(var g=0;g<e.length;g++)e[g].PropStorage=a;return a};return b}();a.PropertyStore=c;c.Instance=new c})(d.Providers||(d.Providers={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){a[a.TemplatedParent=1]="TemplatedParent";a[a.Self=2]="Self";a[a.FindAncestor=3]="FindAncestor"})(a.RelativeSourceMode||(a.RelativeSourceMode={}));(function(a){a[a.TwoWay=0]="TwoWay";a[a.OneWay=1]="OneWay";a[a.OneTime=2]="OneTime";a[a.OneWayToSource=3]="OneWayToSource"})(a.BindingMode||(a.BindingMode={}));(function(a){a[a.Default=0]="Default";a[a.PropertyChanged=1]="PropertyChanged";a[a.Explicit=3]="Explicit"})(a.UpdateSourceTrigger||(a.UpdateSourceTrigger={}));
(function(a){a[a.AttachedProperty=0]="AttachedProperty";a[a.Property=1]="Property";a[a.Indexed=2]="Indexed";a[a.None=3]="None"})(a._PropertyNodeType||(a._PropertyNodeType={}))})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(c){c[c.None=0]="None";c[c.AttachedProperty=1]="AttachedProperty";c[c.Indexed=2]="Indexed";c[c.Property=3]="Property"})(a.PropertyNodeType||(a.PropertyNodeType={}));var d=a.PropertyNodeType,e=function(){function c(b){this.Path=b}c.prototype.Step=function(b){var f=d.None,c=this.Path;if(0===c.length)return b.typeName=null,b.propertyName=null,b.index=null,f;var a=0;if("("===c.charAt(0)){f=d.AttachedProperty;a=c.indexOf(")");if(-1===a)throw new ArgumentException("Invalid property path. Attached property is missing the closing bracket");
c.indexOf("'");var e,p,k,m;e=c.indexOf("'");if(0<e){e++;p=c.indexOf("'",e+1);if(0>p)throw new Exception("Invalid property path, Unclosed type name '"+c+"'.");k=c.indexOf(".",p);if(0>k)throw new Exception("Invalid properth path, No property indexer found '"+c+"'.");k++}else{e=1;p=c.indexOf(".",e);if(0>p)throw new Exception("Invalid property path, No property indexer found on '"+c+"'.");k=p+1}m=a;b.typeName=c.slice(e,p);b.propertyName=c.slice(k,m);b.index=null;c.length>a+1&&"."===c.charAt(a+1)&&a++;
c=c.substr(a+1)}else if("["===c.charAt(0))f=d.Indexed,a=c.indexOf("]"),b.typeName=null,b.propertyName=null,b.index=parseInt(c.substr(1,a-1)),c=c.substr(a+1),"."===c.charAt(0)&&(c=c.substr(1));else{f=d.Property;a:{a=c;e=[".","["];p=void 0;if(e)for(p||(p=0);p<a.length;p++)for(k=a.charAt(p),m=0;m<e.length;m++)if(k===e[m]){a=p;break a}a=-1}-1===a?(b.propertyName=c,c=""):(b.propertyName=c.substr(0,a),c="."===c.charAt(a)?c.substr(a+1):c.substr(a));b.typeName=null;b.index=null}this.Path=c;return f};return c}();
a.PropertyPathParser=e})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(){function f(f,d,g,p){d=!1!==d;g=!0===g;this.IsDataContextBound=!0===p;this.Path=f;this.IsDataContextBound=p;p=null;if(f&&"."!==f)for(var k={typeName:void 0,propertyName:void 0,index:void 0},m=new a.PropertyPathParser(f);(f=m.Step(k))!==a.PropertyNodeType.None;){var l=new c(d,!1);p=l;switch(f){case a.PropertyNodeType.AttachedProperty:case a.PropertyNodeType.Property:l.Next=new e(k.typeName,k.propertyName);break;case a.PropertyNodeType.Indexed:l.Next=new b(k.index)}this.FinalNode?
this.FinalNode.Next=l:this.Node=l;this.FinalNode=l.Next}else this.FinalNode=this.Node=p=new c(d,g);p.BindToView=p.BindToView||g;this.FinalNode.Listen(this)}Object.defineProperty(f.prototype,"Value",{get:function(){return this._Value},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"IsPathBroken",{get:function(){var b=this.Path;if(this.IsDataContextBound&&(!b||1>b.length))return!1;for(b=this.Node;b;){if(b.IsBroken)return!0;b=b.Next}return!1},enumerable:!0,configurable:!0});f.prototype.GetValue=
function(b){this.Update(b);b=this.FinalNode.Value;this.Update(null);return b};f.prototype.Update=function(b){this.Source=b;this.Node.SetSource(b)};f.prototype.Listen=function(b){this._Listener=b};f.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};f.prototype.IsBrokenChanged=function(b){this.ValueInternal=b.Value;(b=this._Listener)&&b.IsBrokenChanged()};f.prototype.ValueChanged=function(b){this.ValueInternal=b.Value;(b=this._Listener)&&b.ValueChanged()};return f}();a.PropertyPathWalker=
g;var g=function(){function b(){}Object.defineProperty(b.prototype,"IsBroken",{get:function(){return this._IsBroken},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"Source",{get:function(){return this._Source},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"Value",{get:function(){return this._Value},enumerable:!0,configurable:!0});b.prototype.Listen=function(b){this._NodeListener=b};b.prototype.Unlisten=function(b){this._NodeListener===b&&(this._NodeListener=
null)};b.prototype.OnSourceChanged=function(b,f){};b.prototype.OnSourcePropertyChanged=function(b,f){};b.prototype.UpdateValue=function(){AbstractMethod("PropertyPathNode.UpdateValue")};b.prototype.SetValue=function(b){AbstractMethod("PropertyPathNode.SetValue")};b.prototype.SetSource=function(b){if(null==b||!Nullstone.Equals(b,this._Source)){var f=this._Source;f&&Nullstone.ImplementsInterface(f,d.INotifyPropertyChanged_)&&f.PropertyChanged.Unsubscribe(this.OnSourcePropertyChanged,this);(this._Source=
b)&&Nullstone.ImplementsInterface(this._Source,d.INotifyPropertyChanged_)&&this._Source.PropertyChanged.Subscribe(this.OnSourcePropertyChanged,this);this.OnSourceChanged(f,this._Source);this.UpdateValue();this.Next&&this.Next.SetSource(this._Value)}};b.prototype.UpdateValueAndIsBroken=function(b,f){var c=this._IsBroken!==f,a=!Nullstone.Equals(this.Value,b);this._IsBroken=f;this._Value=b;a?(c=this._NodeListener)&&c.ValueChanged(this):c&&(c=this._NodeListener)&&c.IsBrokenChanged(this)};b.prototype._CheckIsBroken=
function(){return!this.Source||!this.PropertyInfo&&!this.DependencyProperty};return b}(),e=function(b){function c(h,a){b.call(this);this._STypeName=h;this._PropertyName=a}__extends(c,b);c.prototype.SetValue=function(b){this.DependencyProperty?this.Source.SetValue(this.DependencyProperty,b):this.PropertyInfo&&this.PropertyInfo.SetValue(this.Source,b)};c.prototype.UpdateValue=function(){if(this.DependencyProperty)this.ValueType=this.DependencyProperty.GetTargetType(),this.UpdateValueAndIsBroken(this.Source.GetValue(this.DependencyProperty),
this._CheckIsBroken());else if(this.PropertyInfo){this.ValueType=null;try{this.UpdateValueAndIsBroken(this.PropertyInfo.GetValue(this.Source),this._CheckIsBroken())}catch(b){this.UpdateValueAndIsBroken(null,this._CheckIsBroken())}}else this.ValueType=null,this.UpdateValueAndIsBroken(null,this._CheckIsBroken())};c.prototype.OnSourceChanged=function(c,h){b.prototype.OnSourceChanged.call(this,c,h);var a;h instanceof d.DependencyObject&&(a=h);var e=this._DPListener;e&&(e.Detach(),this._DPListener=null);
this.PropertyInfo=this.DependencyProperty=null;this.Source&&(a&&(e=DependencyProperty.GetDependencyProperty(this.Source.constructor,this._PropertyName))&&(this.DependencyProperty=e,this._DPListener=e.Store.ListenToChanged(a,e,this.OnPropertyChanged,this)),this.DependencyProperty&&this.DependencyProperty.IsAttached||(this.PropertyInfo=PropertyInfo.Find(this.Source,this._PropertyName)))};c.prototype.OnPropertyChanged=function(b,f){try{this.UpdateValue(),this.Next&&this.Next.SetSource(this.Value)}catch(c){}};
c.prototype.OnSourcePropertyChanged=function(b,f){if(f.PropertyName===this._PropertyName&&this.PropertyInfo){this.UpdateValue();var c=this.Next;c&&c.SetSource(this.Value)}};return c}(g),c=function(b){function c(h,a){b.call(this);this.BindsDirectlyToSource=!0===h;this.BindToView=!0===a}__extends(c,b);c.prototype.OnSourceChanged=function(c,h){b.prototype.OnSourceChanged.call(this,c,h);this.DisconnectViewHandlers();this.ConnectViewHandlers(h,h)};c.prototype.ViewChanged=function(b,f){this.DisconnectViewHandlers(!0);
this.ConnectViewHandlers(null,f.NewValue);this.ViewCurrentChanged(this,EventArgs.Empty)};c.prototype.ViewCurrentChanged=function(b,f){this.UpdateValue();this.Next&&this.Next.SetSource(this.Value)};c.prototype.SetValue=function(){throw new NotSupportedException("SetValue");};c.prototype.UpdateValue=function(){if(this.BindsDirectlyToSource)this.ValueType=null==this.Source?null:this.Source.constructor,this.UpdateValueAndIsBroken(this.Source,this._CheckIsBroken());else{var b=this.Source,f;this.Source instanceof
a.CollectionViewSource?(b=null,f=this.Source.View):Nullstone.ImplementsInterface(this.Source,a.ICollectionView_)&&(f=this.Source);f?this.BindToView?(this.ValueType=f.constructor,this.UpdateValueAndIsBroken(f,this._CheckIsBroken())):(this.ValueType=null==f.GetCurrentItem()?null:f.GetCurrentItem().constructor,this.UpdateValueAndIsBroken(f.GetCurrentItem(),this._CheckIsBroken())):(this.ValueType=null==b?null:b.constructor,this.UpdateValueAndIsBroken(b,this._CheckIsBroken()))}};c.prototype._CheckIsBroken=
function(){return null==this.Source};c.prototype.ConnectViewHandlers=function(b,f){b instanceof a.CollectionViewSource&&(this._ViewPropertyListener=a.CollectionViewSource.ViewProperty.Store.ListenToChanged(b,a.CollectionViewSource.ViewProperty,this.ViewChanged,this),f=b.View);Nullstone.ImplementsInterface(f,a.ICollectionView_)&&(this._View=f,this._View.CurrentChanged.Subscribe(this.ViewCurrentChanged,this))};c.prototype.DisconnectViewHandlers=function(b){b||(b=!1);this._ViewPropertyListener&&!b&&
(this._ViewPropertyListener.Detach(),this._ViewPropertyListener=null);this._View&&this._View.CurrentChanged.Unsubscribe(this.ViewCurrentChanged,this)};return c}(g),b=function(b){function c(h){b.call(this);this._IsBroken=!1;var a=parseInt(h,10);isNaN(a)?this._Index=h:this._Index=a}__extends(c,b);Object.defineProperty(c.prototype,"Index",{get:function(){return this._Index},enumerable:!0,configurable:!0});c.prototype.UpdateValue=function(){if(null==this.PropertyInfo)this._IsBroken=!0,this.ValueType=
null,this.UpdateValueAndIsBroken(null,this._IsBroken);else try{var b=this.PropertyInfo.GetValue(this.Source,this._Index);this._IsBroken=!1;this.ValueType=this.PropertyInfo.PropertyType;this.UpdateValueAndIsBroken(b,this._IsBroken)}catch(f){this._IsBroken=!0,this.ValueType=null,this.UpdateValueAndIsBroken(null,this._IsBroken)}};c.prototype.SetValue=function(b){null!=this.PropertyInfo&&this.PropertyInfo.SetValue(this.Source,this._Index,b)};c.prototype._CheckIsBroken=function(){return this._IsBroken||
b.prototype._CheckIsBroken.call(this)};c.prototype.OnSourcePropertyChanged=function(b,f){this.UpdateValue();null!=this.Next&&this.Next.SetSource(this.Value)};c.prototype.OnSourceChanged=function(c,h){b.prototype.OnSourceChanged.call(this,c,h);null!=this.Listener&&(this.Listener.Detach(),this.Listener=null);Nullstone.ImplementsInterface(h,d.Collections.INotifyCollectionChanged_)&&h.CollectionChanged.Subscribe(this.CollectionChanged,this);this._GetIndexer()};c.prototype._GetIndexer=function(){this.PropertyInfo=
null;null!=this._Source&&(this.PropertyInfo=IndexedPropertyInfo.Find(this._Source))};c.prototype.CollectionChanged=function(b,f){this.UpdateValue();null!=this.Next&&this.Next.SetSource(this.Value)};return c}(g)})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));var _Dirty;
(function(d){d[d.Transform=1]="Transform";d[d.LocalTransform=2]="LocalTransform";d[d.LocalProjection=4]="LocalProjection";d[d.Clip=8]="Clip";d[d.LocalClip=16]="LocalClip";d[d.LayoutClip=32]="LayoutClip";d[d.RenderVisibility=64]="RenderVisibility";d[d.HitTestVisibility=128]="HitTestVisibility";d[d.Measure=256]="Measure";d[d.Arrange=512]="Arrange";d[d.ChildrenZIndices=1024]="ChildrenZIndices";d[d.Bounds=1048576]="Bounds";d[d.NewBounds=2097152]="NewBounds";d[d.Invalidate=4194304]="Invalidate";d[d.InUpDirtyList=
1073741824]="InUpDirtyList";d[d.InDownDirtyList=-2147483648]="InDownDirtyList";d[d.DownDirtyState=d.Transform|d.LocalTransform|d.LocalProjection|d.Clip|d.LocalClip|d.LayoutClip|d.RenderVisibility|d.HitTestVisibility|d.ChildrenZIndices]="DownDirtyState";d[d.UpDirtyState=d.Bounds|d.Invalidate]="UpDirtyState"})(_Dirty||(_Dirty={}));
(function(d){function a(a,c,b,f,h,d,s){var p=function(){return function(c,a){d&&d(c,a);f(b)&&h()}}();(new g(p,d,s)).LoadGeneric(a,c)}var g=function(){function e(c,b,f){this.OnSuccess=c;this.OnSubSuccess=b;this.OnError=f;this._IsScriptLoaded=this._IsXamlLoaded=!1;this._XamlResult=this._ScriptResult=this._BaseHref=null}e.prototype.Load=function(c,b){var f=this;this._BaseHref=c;(new d.AjaxJsonRequest(function(b){return f._HandleXamlSuccess(b)},function(b){return f._HandleXamlFailed(b)})).Get(c,"p="+
b);Nullstone.ImportJsFile(c+"?js=true&p="+b,function(b){return f._HandleScriptSuccess(b)})};e.prototype.LoadGeneric=function(c,b){var f=this;this._BaseHref=c;(new d.AjaxJsonRequest(function(b){return f._HandleXamlSuccess(b)},function(b){return f._HandleXamlFailed(b)})).Get(c,b);Nullstone.ImportJsFile(c+"?js=true&"+b,function(b){return f._HandleScriptSuccess(b)})};e.prototype._HandleScriptSuccess=function(c){this._IsScriptLoaded=!0;this._ScriptResult=c.Script;this._CheckIfLoaded()};e.prototype._HandleXamlSuccess=
function(c){this._IsXamlLoaded=!0;this._XamlResult=c;this._CheckIfLoaded()};e.prototype._HandleXamlFailed=function(c){this.OnError(c)};e.prototype._CheckIfLoaded=function(){var c=this;this._IsXamlLoaded&&this._IsScriptLoaded&&this.ResolveDependencies(function(){return c.OnSuccess(c._XamlResult,c._ScriptResult)},function(b){return c.OnError(b)})};e.prototype.ResolveDependencies=function(c,b){function f(b){e[b]=!0;for(b=0;b<d;b++)if(!e[b])return!1;return!0}var h=this._XamlResult.GetHeader("Dependencies");
if(h){var h=h.split("|"),d=h.length;if(1>d)c();else{for(var e=[],g=0;g<d;g++)e[g]=!1;for(g=0;g<d;g++)a(this._BaseHref,h[g],g,f,c,this.OnSubSuccess,b)}}else c()};return e}();d.XamlResolver=g})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){a[a.Absolute=0]="Absolute";a[a.RelativeToBoundingBox=1]="RelativeToBoundingBox"})(a.BrushMappingMode||(a.BrushMappingMode={}));(function(a){a[a.Pad=0]="Pad";a[a.Reflect=1]="Reflect";a[a.Repeat=2]="Repeat"})(a.GradientSpreadMethod||(a.GradientSpreadMethod={}));(function(a){a[a.None=0]="None";a[a.Fill=1]="Fill";a[a.Uniform=2]="Uniform";a[a.UniformToFill=3]="UniformToFill"})(a.Stretch||(a.Stretch={}));(function(a){a[a.Left=0]="Left";a[a.Center=1]="Center";a[a.Right=
2]="Right"})(a.AlignmentX||(a.AlignmentX={}));(function(a){a[a.Top=0]="Top";a[a.Center=1]="Center";a[a.Bottom=2]="Bottom"})(a.AlignmentY||(a.AlignmentY={}));(function(a){a[a.Fixed=0]="Fixed";a[a.Animated=1]="Animated"})(a.TextHintingMode||(a.TextHintingMode={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function a(){}a.Calculate=function(c,b,f,h){0===c.y?0>c.x?a.W(c,b,f,h):a.E(c,b,f,h):0===c.x?0>c.y?a.N(c,b,f,h):a.S(c,b,f,h):0>c.x&&0>c.y?a.NW(c,b,f,h):0>c.x&&0<c.y?a.SW(c,b,f,h):0<c.x&&0>c.y?a.NE(c,b,f,h):0<c.x&&0<c.y&&a.SE(c,b,f,h)};a.E=function(c,b,f,h){for(var a=h.X+h.Width;b.x>=h.X;)b.x-=c.x;for(;f.x<=a;)f.x+=c.x};a.W=function(c,b,f,h){for(var a=h.X+h.Width;b.x<=a;)b.x-=c.x;for(;f.x>=h.X;)f.x+=c.x};a.S=function(c,b,f,h){for(var a=h.Y+h.Height;b.y>=h.Y;)b.y-=
c.y;for(;f.y<=a;)f.y+=c.y};a.N=function(c,b,f,h){for(var a=h.Y+h.Height;b.y<=a;)b.y-=c.y;for(;f.y>=h.Y;)f.y+=c.y};a.NW=function(c,b,f,h){for(var a=h.X+h.Width,d=h.Y+h.Height;b.x<=a&&b.y<=d;)b.x-=c.x,b.y-=c.y;for(;f.x>=h.X&&f.y>=h.Y;)f.x+=c.x,f.y+=c.y};a.SW=function(c,b,f,h){for(var a=h.X+h.Width,d=h.Y+h.Height;b.x<=a&&b.y>=h.Y;)b.x-=c.x,b.y-=c.y;for(;f.x>=h.X&&f.y<=d;)f.x+=c.x,f.y+=c.y};a.NE=function(c,b,f,h){for(var a=h.X+h.Width,d=h.Y+h.Height;b.x>=h.X&&b.y<=d;)b.x-=c.x,b.y-=c.y;for(;f.x<=a&&f.y>=
h.Y;)f.x+=c.x,f.y+=c.y};a.SE=function(c,b,f,h){for(var a=h.X+h.Width,d=h.Y+h.Height;b.x>=h.X&&b.y>=h.Y;)b.x-=c.x,b.y-=c.y;for(;f.x<=a&&f.y<=d;)f.x+=c.x,f.y+=c.y};return a}();a.GradientMetrics=d})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){a.ParseGeometry=function(a){return(new g(a)).ParseGeometryImpl()};a.ParseShapePoints=function(a){return(new g(a)).ParseShapePoints()};var g=function(){function e(c){this.index=0;this.str=c;this.len=c.length}e.prototype.ParseGeometryImpl=function(){for(var c=new Point,b,f,h,e=new Point,g=d.Shapes.FillRule.EvenOdd,p=!1,k=!1,m=new Point,l=new Point,q=new d.Shapes.RawPath;this.index<this.len;){for(var r;this.index<this.len&&" "===(r=this.str.charAt(this.index));)this.index++;
this.index++;var t=!1;switch(r){case "f":case "F":r=this.str.charAt(this.index);if("0"===r)g=d.Shapes.FillRule.EvenOdd;else if("1"===r)g=d.Shapes.FillRule.NonZero;else return null;this.index++;r=this.str.charAt(this.index);break;case "m":t=!0;case "M":b=this.ParsePoint();if(null==b)break;t&&(b.X+=c.X,b.Y+=c.Y);q.Move(b.X,b.Y);e.X=c.X=b.X;e.Y=c.Y=b.Y;for(this.Advance();this.MorePointsAvailable()&&null!=(b=this.ParsePoint());)t&&(b.X+=c.X,b.Y+=c.Y),q.Line(b.X,b.Y);c.X=b.X;c.Y=b.Y;p=k=!1;break;case "l":t=
!0;case "L":for(;this.MorePointsAvailable()&&null!=(b=this.ParsePoint());)t&&(b.X+=c.X,b.Y+=c.Y),q.Line(b.X,b.Y),c.X=b.X,c.Y=b.Y,this.Advance();p=k=!1;break;case "h":t=!0;case "H":var u=this.ParseDouble();if(null==u)break;t&&(u+=c.X);c=new Point(u,c.Y);q.Line(c.X,c.Y);p=k=!1;break;case "v":t=!0;case "V":u=this.ParseDouble();if(null==u)break;t&&(u+=c.Y);c=new Point(c.X,u);q.Line(c.X,c.Y);p=k=!1;break;case "c":t=!0;case "C":for(;this.MorePointsAvailable()&&null!=(b=this.ParsePoint());){t&&(b.X+=c.X,
b.Y+=c.Y);this.Advance();if(null==(f=this.ParsePoint()))break;t&&(f.X+=c.X,f.Y+=c.Y);this.Advance();if(null==(h=this.ParsePoint()))break;t&&(h.X+=c.X,h.Y+=c.Y);this.Advance();q.Bezier(b.X,b.Y,f.X,f.Y,h.X,h.Y);b.X=h.X;b.Y=h.Y}c.X=h.X;c.Y=h.Y;p=!0;m.X=f.X;m.Y=f.Y;k=!1;break;case "s":t=!0;case "S":for(;this.MorePointsAvailable()&&null!=(f=this.ParsePoint());){t&&(f.X+=c.X,f.Y+=c.Y);this.Advance();if(null==(h=this.ParsePoint()))break;t&&(h.X+=c.X,h.Y+=c.Y);p?(b.X=2*c.X-m.X,b.Y=2*c.Y-m.Y):b=c;q.Bezier(b.X,
b.Y,f.X,f.Y,h.X,h.Y);p=!0;m.X=f.X;m.Y=f.Y;c.X=h.X;c.Y=h.Y;this.Advance()}k=!1;break;case "q":t=!0;case "Q":for(;this.MorePointsAvailable()&&null!=(b=this.ParsePoint());){t&&(b.X+=c.X,b.Y+=c.Y);this.Advance();if(null==(f=this.ParsePoint()))break;t&&(f.X+=c.X,f.Y+=c.Y);this.Advance();q.Quadratic(b.X,b.Y,f.X,f.Y);c.X=f.X;c.Y=f.Y}k=!0;l.X=b.X;l.Y=b.Y;p=!1;break;case "t":t=!0;case "T":for(;this.MorePointsAvailable()&&null!=(f=this.ParsePoint());)t&&(f.X+=c.X,f.Y+=c.Y),k?(b.X=2*c.X-l.X,b.Y=2*c.Y-l.Y):b=
c,q.Quadratic(b.X,b.Y,f.X,f.Y),k=!0,l.X=b.X,l.Y=b.Y,c.X=f.X,c.Y=f.Y,this.Advance();p=!1;break;case "a":t=!0;case "A":for(;this.MorePointsAvailable()&&null!=(b=this.ParsePoint());){p=this.ParseDouble();k=0!==this.ParseDouble();u=d.Shapes.SweepDirection.Counterclockwise;0!==this.ParseDouble()&&(u=d.Shapes.SweepDirection.Clockwise);if(null==(f=this.ParsePoint()))break;t&&(f.X+=c.X,f.Y+=c.Y);q.EllipticalArc(b.X,b.Y,p,k,u,f.X,f.Y);c.X=f.X;c.Y=f.Y;this.Advance()}p=k=!1;break;case "z":case "Z":q.Close(),
c.X=e.X,c.Y=e.Y,p=k=!1}}c=new a.PathGeometry;c.OverridePath(q);c.FillRule=g;return c};e.prototype.ParseShapePoints=function(){for(var c=[],b;this.MorePointsAvailable()&&null!=(b=this.ParsePoint());)c.push(b);return c};e.prototype.ParsePoint=function(){var c=this.ParseDouble();if(null==c)return null;for(var b;this.index<this.len&&(" "===(b=this.str.charAt(this.index))||","===b);)this.index++;if(this.index>=this.len)return null;b=this.ParseDouble();return null==b?null:new Point(c,b)};e.prototype.ParseDouble=
function(){this.Advance();var c=!1;this.Match("-")?(c=!0,this.index++):this.Match("+")&&this.index++;if(this.Match("Infinity"))return this.index+=8,c?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;if(this.Match("NaN"))return NaN;for(var b="";this.index<this.len;){var f=this.str.charCodeAt(this.index),h=String.fromCharCode(f);if(48<=f&&57>=f)b+=h;else if(46===f)b+=h;else if("E"===h||"e"===h)b+=h;else break;this.index++}if(0===b.length)return null;b=parseFloat(b);return c?-b:b};e.prototype.Match=
function(c){for(var b,f,h=0;h<c.length&&this.index+h<this.len;h++)if(b=c.charAt(h),f=this.str.charAt(this.index+h),b!==f)return!1;return!0};e.prototype.Advance=function(){for(var c;this.index<this.len;){c=this.str.charCodeAt(this.index);if(65<=c&&90>=c||97<=c&&122>=c||48<=c&&57>=c)break;c=String.fromCharCode(c);if("."===c)break;if("-"===c)break;if("+"===c)break;this.index++}};e.prototype.MorePointsAvailable=function(){for(var c;this.index<this.len&&(","===(c=this.str.charAt(this.index))||" "===c);)this.index++;
if(this.index>=this.len)return!1;if("."===c||"-"===c||"+"===c)return!0;c=this.str.charCodeAt(this.index);return 48<=c&&57>=c};return e}()})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(){function c(){}c.Create=function(b,f){var c=b.GetValue(f);void 0===c&&(c=f.GetTargetType(),c=c===Number?0:c===String?"":new c);return{Animation:void 0,PropStorage:d.Providers.GetStorage(b,f),IsDisabled:!1,BaseValue:c,CurrentValue:void 0,StopValue:void 0}};c.Attach=function(b){var f=b.PropStorage,c=f.Animations;c||(f.Animations=c=[]);var a=c[c.length-1];c.push(b);a?(b.StopValue=a.StopValue,a.IsDisabled=!0):b.StopValue=f.Local};c.Detach=function(b){var f=
b.PropStorage.Animations;if(!f)return!1;var h=f.length;if(1>h)return!1;var a=f.lastIndexOf(b);if(a===h-1){if(f.pop(),1<h&&(b=f[h-2],b.IsDisabled))return b.IsDisabled=!1,c.ApplyCurrent(b),!0}else f.splice(a,1),f[a].StopValue=b.StopValue;return!1};c.ApplyCurrent=function(b){var f=b.CurrentValue;if(void 0!==f){var c=b.PropStorage;a.Debug&&window.console&&console.log("ANIMATION:ApplyCurrent:"+c.OwnerNode.Name+"->"+c.Property.Name+"="+f);c.Property.Store.SetLocalValue(c,b.CurrentValue)}};c.ApplyStop=function(b){var f=
b.PropStorage,c=b.StopValue;a.Debug&&window.console&&console.log("ANIMATION:ApplyStop:"+f.OwnerNode.Name+"->"+f.Property.Name+"="+(null!=c?c.toString():""));f.Property.Store.SetLocalValue(f,b.StopValue)};return c}();a.AnimationStore=e})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(){function c(){}c.QuadraticArrayYForX=function(b,f,h){for(var a=0;a<h;a++)if(f<b[a].c2.x)return c.QuadraticYForX(f,b[a]);return 0};c.QuadraticYForX=function(b,f){var c=f.c2.x-f.c0.x;if(0>=c)return 0;b=(b-f.c0.x)/c;return(1-b)*(1-b)*f.c0.y+2*b*(1-b)*f.c1.y+b*b*f.c2.y};c.SubdivideCubicAtLevel=function(b,f,h){c.RecursiveSubdivide(b,f,1,0,h)};c.RecursiveSubdivide=function(b,f,h,a,d){var e={b1:null,b2:null};c.SubdivideCubic(e,d);d=e.b1;e=e.b2;if(h===
f)return b[a]=d,b[a+1]=e,a+2;a=c.RecursiveSubdivide(b,f,h+1,a,d);return a=c.RecursiveSubdivide(b,f,h+1,a,e)};c.SubdivideCubic=function(b,f){var h={x:0,y:0},a={x:0,y:0},d={x:0,y:0},e={x:0,y:0},g={x:0,y:0},m={x:0,y:0};c.HalfLerpPoint(h,f.c0,f.c1);c.HalfLerpPoint(e,f.c1,f.c2);c.HalfLerpPoint(m,f.c2,f.c3);c.HalfLerpPoint(a,h,e);c.HalfLerpPoint(g,e,m);c.HalfLerpPoint(d,a,g);b.b1={c0:f.c0,c1:h,c2:a,c3:d};b.b2={c0:d,c1:g,c2:m,c3:f.c3}};c.HalfLerpPoint=function(b,f,c){b.x=f.x+0.5*(c.x-f.x);b.y=f.y+0.5*(c.y-
f.y)};c.ConvertCubicsToQuadratics=function(b,f){for(var h=[],a=0;a<f;a++)h.push(c.QuadraticFromCubic(b[a]));return h};c.QuadraticFromCubic=function(b){return{c0:{x:b.c0.x,y:b.c0.y},c1:{x:(b.c1.x+b.c2.x)/2,y:(b.c1.y+b.c2.y)/2},c2:{x:b.c3.x,y:b.c3.y}}};return c}();a.Curves=d})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){(function(a){a[a.EaseOut=0]="EaseOut";a[a.EaseIn=1]="EaseIn";a[a.EaseInOut=2]="EaseInOut"})(a.EasingMode||(a.EasingMode={}));(function(a){a[a.HoldEnd=0]="HoldEnd";a[a.Stop=1]="Stop"})(a.FillBehavior||(a.FillBehavior={}))})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));var vec2;(function(d){var a="undefined"!==typeof Float32Array?Float32Array:Array;d.createFrom=function(d,e){var c=new a(2);c[0]=d;c[1]=e;return c}})(vec2||(vec2={}));
var vec4;(function(d){var a="undefined"!==typeof Float32Array?Float32Array:Array;d.create=function(d){var e=new a(4);d?(e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=d[3]):(e[0]=0,e[1]=0,e[2]=0,e[3]=0);return e};d.createFrom=function(d,e,c,b){var f=new a(4);f[0]=d;f[1]=e;f[2]=c;f[3]=b;return f}})(vec4||(vec4={}));var mat3;
(function(d){function a(a){var c=new g(9);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8]):c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=0;return c}var g="undefined"!==typeof Float32Array?Float32Array:Array;d.create=a;d.inverse=function(d,c){var b=d[0],f=d[1],h=d[2],n=d[3],g=d[4],p=d[5],k=d[6],m=d[7],l=d[8],q=l*g-p*m,r=-l*n+p*k,t=m*n-g*k,u=b*q+f*r+h*t;if(!u)return null;u=1/u;c||(c=a());c[0]=q*u;c[1]=(-l*f+h*m)*u;c[2]=(p*f-h*g)*u;c[3]=r*u;c[4]=(l*b-h*k)*
u;c[5]=(-p*b+h*n)*u;c[6]=t*u;c[7]=(-m*b+f*k)*u;c[8]=(g*b-f*n)*u;return c};d.multiply=function(a,c,b){b||(b=a);var f=a[0],h=a[1],d=a[2],g=a[3],p=a[4],k=a[5],m=a[6],l=a[7];a=a[8];var q=c[0],r=c[1],t=c[2],u=c[3],x=c[4],v=c[5],A=c[6],y=c[7];c=c[8];b[0]=q*f+r*g+t*m;b[1]=q*h+r*p+t*l;b[2]=q*d+r*k+t*a;b[3]=u*f+x*g+v*m;b[4]=u*h+x*p+v*l;b[5]=u*d+x*k+v*a;b[6]=A*f+y*g+c*m;b[7]=A*h+y*p+c*l;b[8]=A*d+y*k+c*a;return b};d.set=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=
a[7];c[8]=a[8];return c};d.identity=function(a){a||(a=d.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};d.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};d.clone=function(a){return"undefined"!==typeof Float32Array?new Float32Array(a):a.slice(0)};d.toAffineMat4=function(a,c){c||(c=mat4.create());c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=a[4];c[6]=0;c[7]=a[5];c[8]=0;c[9]=0;c[10]=1;c[11]=
0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.transformVec2=function(a,c,b){b||(b=c);var f=c[0];c=c[1];b[0]=f*a[0]+c*a[3]+a[2];b[1]=f*a[1]+c*a[4]+a[5];return b};d.translate=function(a,c,b){a[2]+=c;a[5]+=b;return a};d.createTranslate=function(a,c,b){b||(b=d.create());b[0]=1;b[1]=0;b[2]=a;b[3]=0;b[4]=1;b[5]=c;b[6]=0;b[7]=0;b[8]=1;return b};d.scale=function(a,c,b){a[0]*=c;a[1]*=c;a[2]*=c;a[3]*=b;a[4]*=b;a[5]*=b;return a};d.createScale=function(a,c,b){b||(b=d.create());b[0]=a;b[1]=0;b[2]=0;b[3]=0;b[4]=
c;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.createRotate=function(a,c){c||(c=d.create());var b=Math.cos(a),f=Math.sin(a);c[0]=b;c[1]=-f;c[2]=0;c[3]=f;c[4]=b;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.createSkew=function(a,c,b){b||(b=d.create());b[0]=1;b[1]=Math.tan(c);b[2]=0;b[3]=Math.tan(a);b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b}})(mat3||(mat3={}));var mat4;
(function(d){var a="undefined"!==typeof Float32Array?Float32Array:Array;d.create=function(d){var e=new a(16);d&&(e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=d[3],e[4]=d[4],e[5]=d[5],e[6]=d[6],e[7]=d[7],e[8]=d[8],e[9]=d[9],e[10]=d[10],e[11]=d[11],e[12]=d[12],e[13]=d[13],e[14]=d[14],e[15]=d[15]);return e};d.set=function(a,d){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d};d.equal=
function(a,d){return a===d||1E-6>Math.abs(a[0]-d[0])&&1E-6>Math.abs(a[1]-d[1])&&1E-6>Math.abs(a[2]-d[2])&&1E-6>Math.abs(a[3]-d[3])&&1E-6>Math.abs(a[4]-d[4])&&1E-6>Math.abs(a[5]-d[5])&&1E-6>Math.abs(a[6]-d[6])&&1E-6>Math.abs(a[7]-d[7])&&1E-6>Math.abs(a[8]-d[8])&&1E-6>Math.abs(a[9]-d[9])&&1E-6>Math.abs(a[10]-d[10])&&1E-6>Math.abs(a[11]-d[11])&&1E-6>Math.abs(a[12]-d[12])&&1E-6>Math.abs(a[13]-d[13])&&1E-6>Math.abs(a[14]-d[14])&&1E-6>Math.abs(a[15]-d[15])};d.identity=function(a){a||(a=d.create());a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.inverse=function(a,d){d||(d=a);var c=a[0],b=a[1],f=a[2],h=a[3],n=a[4],s=a[5],p=a[6],k=a[7],m=a[8],l=a[9],q=a[10],r=a[11],t=a[12],u=a[13],x=a[14],v=a[15],A=c*s-b*n,y=c*p-f*n,w=c*k-h*n,z=b*p-f*s,B=b*k-h*s,D=f*k-h*p,C=m*u-l*t,I=m*x-q*t,F=m*v-r*t,H=l*x-q*u,J=l*v-r*u,G=q*v-r*x,E=A*G-y*J+w*H+z*F-B*I+D*C;if(!E)return null;E=1/E;d[0]=(s*G-p*J+k*H)*E;d[1]=(-b*G+f*J-h*H)*E;d[2]=(u*D-
x*B+v*z)*E;d[3]=(-l*D+q*B-r*z)*E;d[4]=(-n*G+p*F-k*I)*E;d[5]=(c*G-f*F+h*I)*E;d[6]=(-t*D+x*w-v*y)*E;d[7]=(m*D-q*w+r*y)*E;d[8]=(n*J-s*F+k*C)*E;d[9]=(-c*J+b*F-h*C)*E;d[10]=(t*B-u*w+v*A)*E;d[11]=(-m*B+l*w-r*A)*E;d[12]=(-n*H+s*I-p*C)*E;d[13]=(c*H-b*I+f*C)*E;d[14]=(-t*z+u*y-x*A)*E;d[15]=(m*z-l*y+q*A)*E;return d};d.multiply=function(a,d,c){c||(c=a);var b=a[0],f=a[1],h=a[2],n=a[3],s=a[4],p=a[5],k=a[6],m=a[7],l=a[8],q=a[9],r=a[10],t=a[11],u=a[12],x=a[13],v=a[14];a=a[15];var A=d[0],y=d[1],w=d[2],z=d[3];c[0]=
A*b+y*s+w*l+z*u;c[1]=A*f+y*p+w*q+z*x;c[2]=A*h+y*k+w*r+z*v;c[3]=A*n+y*m+w*t+z*a;A=d[4];y=d[5];w=d[6];z=d[7];c[4]=A*b+y*s+w*l+z*u;c[5]=A*f+y*p+w*q+z*x;c[6]=A*h+y*k+w*r+z*v;c[7]=A*n+y*m+w*t+z*a;A=d[8];y=d[9];w=d[10];z=d[11];c[8]=A*b+y*s+w*l+z*u;c[9]=A*f+y*p+w*q+z*x;c[10]=A*h+y*k+w*r+z*v;c[11]=A*n+y*m+w*t+z*a;A=d[12];y=d[13];w=d[14];z=d[15];c[12]=A*b+y*s+w*l+z*u;c[13]=A*f+y*p+w*q+z*x;c[14]=A*h+y*k+w*r+z*v;c[15]=A*n+y*m+w*t+z*a;return c};d.transformVec4=function(a,d,c){c||(c=d);var b=d[0],f=d[1],h=d[2];
d=d[3];c[0]=a[0]*b+a[1]*f+a[2]*h+a[3]*d;c[1]=a[4]*b+a[5]*f+a[6]*h+a[7]*d;c[2]=a[8]*b+a[9]*f+a[10]*h+a[11]*d;c[3]=a[12]*b+a[13]*f+a[14]*h+a[15]*d;return c};d.toAffineMat3=function(a,d){d||(d=mat3.create());d[0]=a[0];d[1]=a[1];d[2]=a[3];d[3]=a[4];d[4]=a[5];d[5]=a[7];d[6]=0;d[7]=0;d[8]=1;return d};d.clone=function(a){return"undefined"!==typeof Float32Array?new Float32Array(a):a.slice(0)};d.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+
", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"};d.createTranslate=function(a,e,c,b){b||(b=d.create());b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a;b[13]=e;b[14]=c;b[15]=1;return b};d.createScale=function(a,e,c,b){b||(b=d.create());b[0]=a;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=e;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.createPerspective=function(a,e,c,b,f){f||(f=d.create());a=
1/Math.tan(a/2);var h=c-b;f[0]=a/e;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=a;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=b/h;f[11]=-1;f[12]=0;f[13]=0;f[14]=c*b/h;f[15]=0;return f};d.createViewport=function(a,e,c){c||(c=d.create());c[0]=a/2;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-e/2;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=a/2;c[13]=e/2;c[14]=0;c[15]=1;return c};d.createRotateX=function(a,e){e||(e=d.create());var c=Math.sin(a),b=Math.cos(a);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=b;e[6]=c;e[7]=0;e[8]=0;e[9]=-c;
e[10]=b;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};d.createRotateY=function(a,e){e||(e=d.create());var c=Math.sin(a),b=Math.cos(a);e[0]=b;e[1]=0;e[2]=-c;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=c;e[9]=0;e[10]=b;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};d.createRotateZ=function(a,e){e||(e=d.create());var c=Math.sin(a),b=Math.cos(a);e[0]=b;e[1]=c;e[2]=0;e[3]=0;e[4]=-c;e[5]=b;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};d.translate=function(a,d,
c,b){a[12]+=d;a[13]+=c;a[14]+=b;return a};d.scale=function(a,d,c,b){a[0]*=d;a[4]*=d;a[8]*=d;a[12]*=d;a[1]*=c;a[5]*=c;a[9]*=c;a[13]*=c;a[2]*=b;a[6]*=b;a[10]*=b;a[14]*=b;return a}})(mat4||(mat4={}));
(function(d){var a=function(){function a(c){this.xmlhttp=c}a.prototype.CreateJson=function(){var c=this.xmlhttp.responseText;if(!c)return null;if(window.JSON&&JSON.parse)try{return JSON.parse(c)}catch(b){}try{return(new Function("return "+c))()}catch(f){throw new InvalidJsonException(c,f);}};a.prototype.GetHeader=function(c){return this.xmlhttp.getResponseHeader(c)};return a}();d.AjaxJsonResult=a;var g=function(){function d(c,b){this.OnSuccess=c;this.OnError=b;this.xmlhttp=null}d.prototype.Get=function(c,
b){this._PrepareRequest();var f=c;b&&(f+="?"+b);this.xmlhttp.open("GET",f,!0);this.xmlhttp.send()};d.prototype.Post=function(c,b,f){this._PrepareRequest();b&&(c+="?"+b);this.xmlhttp.open("POST",c,!0);this.xmlhttp.send(f)};d.prototype.Cancel=function(){this.xmlhttp.abort()};d.prototype._PrepareRequest=function(){var c=this,b=new XMLHttpRequest;b.onreadystatechange=function(){return c._HandleStateChange()};this.xmlhttp=b};d.prototype._HandleStateChange=function(){if(4===this.xmlhttp.readyState){var c=
this.xmlhttp;this.xmlhttp=void 0;200===c.status?this.OnSuccess(new a(c)):this.OnError("Unsuccessful request: "+c.status)}};return d}();d.AjaxJsonRequest=g})(Fayde||(Fayde={}));(function(d){(function(a){(function(a){a.Debug=!1})(a.Animation||(a.Animation={}));(function(a){a.Debug=!1})(a.VSM||(a.VSM={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
var Nullstone=function(){function d(){}d.RegisterType=function(a,d,e){a._TypeName=d;a._BaseClass=Object.getPrototypeOf(a.prototype).constructor;a._Interfaces=e};d.Equals=function(a,d){return null==a&&null==d?!0:null==a||null==d?!1:a===d?!0:a.Equals?a.Equals(d):!1};d.DoesInheritFrom=function(a,d){for(var e=a;e&&e!==d;)e=e._BaseClass;return null!=e};d.GetPropertyDescriptor=function(a,d){if(a){var e=Object.getOwnPropertyDescriptor(a.constructor.prototype,d);return e?e:Object.getOwnPropertyDescriptor(a,
d)}};d.HasProperty=function(a,d){return a?a.hasOwnProperty(d)?!0:a.constructor.prototype.hasOwnProperty(d):!1};d.RegisterInterface=function(a){return{Name:a}};d.ImplementsInterface=function(a,d){if(!a)return!1;var e=a.constructor;if(!e)return!1;var c;do if((c=e._Interfaces)&&-1<c.indexOf(d))return!0;while(e=e._BaseClass);return!1};d.ImportJsFile=function(a,d){for(var e={IsCompleted:!1,Script:void 0,OnComplete:d||function(){},DoOnComplete:function(b){this.OnComplete=b||function(){};this.IsCompleted&&
this.OnComplete()}},c=document.getElementsByTagName("script"),b=null,f=0;f<c.length;f++)if(b=c[f],b.src===a){e.IsCompleted=!0;e.Script=b;e.OnComplete(e);return}b=document.createElement("script");e.Script=b;b.type="text/javascript";b.src=a;b.onreadystatechange=function(b){"completed"===this.readyState&&e.OnComplete(e)};b.onload=function(){e.OnComplete(e)};document.getElementsByTagName("head")[0].appendChild(b);return e};d.ImportJsFiles=function(a,g){for(var e={IsCompleted:!1,Scripts:[],OnComplete:g||
function(){},DoOnComplete:function(b){this.OnComplete=b||function(){};this.IsCompleted&&this.OnComplete()}},c=[],b=a.length,f=function(f){c.push(f);c.length===b&&(e.IsCompleted=!0,e.OnComplete(e))},h=0;h<b;h++){var n=d.ImportJsFile(a[h]);e.Scripts.push(n.Script);n.DoOnComplete(f)}return e};return d}();function NotImplemented(d){window.console&&console.warn&&console.warn("NotImplemented: "+d)}function Warn(d){window.console&&console.warn&&console.warn(d)}
var PropertyInfo=function(){function d(){}d.prototype.GetValue=function(a){if(this.GetFunc)return this.GetFunc.call(a)};d.prototype.SetValue=function(a,d){this.SetFunc&&this.SetFunc.call(a,d)};d.Find=function(a,g){var e=a,c=a instanceof Function;c&&(e=new a);if(e=Nullstone.GetPropertyDescriptor(e,g))return c=new d,c.GetFunc=e.get,c.GetFunc||(c.GetFunc=function(){return this[g]}),c.SetFunc=e.set,!c.SetFunc&&e.writable&&(c.SetFunc=function(b){this[g]=b}),c;e=c?a:a.constructor;c=new d;c.GetFunc=e.prototype["Get"+
g];c.SetFunc=e.prototype["Set"+g];return c};return d}(),IndexedPropertyInfo=function(){function d(){}Object.defineProperty(d.prototype,"PropertyType",{get:function(){},enumerable:!0,configurable:!0});d.prototype.GetValue=function(a,d){if(this.GetFunc)return this.GetFunc.call(a,d)};d.prototype.SetValue=function(a,d,e){this.SetFunc&&this.SetFunc.call(a,d,e)};d.Find=function(a){var g=a;a instanceof Function&&(g=new a);if(g instanceof Array)return a=new d,a.GetFunc=function(a){return this[a]},a.SetFunc=
function(a,c){this[a]=c},a;if(g instanceof Fayde.XamlObjectCollection)return a=new d,a.GetFunc=function(a){return this.GetValueAt(a)},a.SetFunc=function(a,c){return this.SetValueAt(a,c)},a};return d}(),StringEx=function(){function d(){}d.Format=function(a){for(var d=[],e=0;e<arguments.length-1;e++)d[e]=arguments[e+1];return a.replace(/{(\d+)}/g,function(c,b){var f=parseInt(b);return"undefined"!=typeof d[f]?d[f]:c})};return d}();
(function(d){(function(a){(function(a){a[a.Move=0]="Move";a[a.Line=1]="Line";a[a.Rect=2]="Rect";a[a.Quadratic=3]="Quadratic";a[a.Bezier=4]="Bezier";a[a.EllipticalArc=5]="EllipticalArc";a[a.Arc=6]="Arc";a[a.ArcTo=7]="ArcTo";a[a.Close=8]="Close"})(a.PathEntryType||(a.PathEntryType={}));(function(a){a[a.None=0]="None";a[a.Empty=1]="Empty";a[a.Normal=2]="Normal";a[a.Degenerate=4]="Degenerate";a[a.Radii=8]="Radii"})(a.ShapeFlags||(a.ShapeFlags={}));(function(a){a[a.Flat=0]="Flat";a[a.Square=1]="Square";
a[a.Round=2]="Round";a[a.Triangle=3]="Triangle"})(a.PenLineCap||(a.PenLineCap={}));(function(a){a[a.Miter=0]="Miter";a[a.Bevel=1]="Bevel";a[a.Round=2]="Round"})(a.PenLineJoin||(a.PenLineJoin={}));(function(a){a[a.EvenOdd=0]="EvenOdd";a[a.NonZero=1]="NonZero"})(a.FillRule||(a.FillRule={}));(function(a){a[a.Counterclockwise=0]="Counterclockwise";a[a.Clockwise=1]="Clockwise"})(a.SweepDirection||(a.SweepDirection={}))})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function d(){this._Path=[];this._EndY=this._EndX=0}Object.defineProperty(d.prototype,"EndX",{get:function(){return this._EndX},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"EndY",{get:function(){return this._EndY},enumerable:!0,configurable:!0});d.prototype.Move=function(c,b){this._Path.push({type:a.PathEntryType.Move,x:c,y:b});this._EndX=c;this._EndY=b};d.prototype.Line=function(c,b){this._Path.push({type:a.PathEntryType.Line,x:c,y:b});
this._EndX=c;this._EndY=b};d.prototype.Rect=function(c,b,f,h){this._Path.push({type:a.PathEntryType.Rect,x:c,y:b,width:f,height:h})};d.prototype.RoundedRectFull=function(c,b,f,a,d,e,g,k){f=c+f;a=b+a;this.Move(c+d,b);this.Line(f-e,b);0<e&&this.Quadratic(f,b,f,b+e);this.Line(f,a-g);0<g&&this.Quadratic(f,a,f-g,a);this.Line(c+k,a);0<k&&this.Quadratic(c,a,c,a-k);this.Line(c,b+d);0<d&&this.Quadratic(c,b,c+d,b);this.Close()};d.prototype.RoundedRect=function(c,b,f,a,d,e){0===d&&0===e?this.Rect(c,b,f,a):(f=
c+f,a=b+a,this.Move(c+d,b),this.Line(f-d,b),this.Quadratic(f,b,f,b+e),this.Line(f,a-e),this.Quadratic(f,a,f-d,a),this.Line(c+d,a),this.Quadratic(c,a,c,a-e),this.Line(c,b+e),this.Quadratic(c,b,c+d,b),this.Close())};d.prototype.Quadratic=function(c,b,f,h){this._Path.push({type:a.PathEntryType.Quadratic,cpx:c,cpy:b,x:f,y:h});this._EndX=f;this._EndY=h};d.prototype.Bezier=function(c,b,f,h,d,e){this._Path.push({type:a.PathEntryType.Bezier,cp1x:c,cp1y:b,cp2x:f,cp2y:h,x:d,y:e});this._EndX=d;this._EndY=e};
d.prototype.Ellipse=function(c,b,f,a){var d=f/2,e=a/2,g=c+f,k=b+a,m=c+d,l=b+e;f===a?this.Arc(m,l,d,0,2*Math.PI,!1):(f=0.5522848*d,e*=0.5522848,this.Move(c,l),this.Bezier(c,l-e,m-f,b,m,b),this.Bezier(m+f,b,g,l-e,g,l),this.Bezier(g,l+e,m+f,k,m,k),this.Bezier(m-f,k,c,l+e,c,l),this.Close())};d.prototype.EllipticalArc=function(c,b,f,h,d,e,g){this._Path.push({type:a.PathEntryType.EllipticalArc,width:c,height:b,rotationAngle:f,isLargeArcFlag:h,sweepDirectionFlag:d,ex:e,ey:g})};d.prototype.Arc=function(c,
b,f,h,d,e){this._Path.push({type:a.PathEntryType.Arc,x:c,y:b,r:f,sAngle:h,eAngle:d,aClockwise:e})};d.prototype.ArcTo=function(c,b,f,h,d){this._Path.push({type:a.PathEntryType.ArcTo,cpx:c,cpy:b,x:f,y:h,r:d});this._EndX=f;this._EndY=h};d.prototype.Close=function(){this._Path.push({type:a.PathEntryType.Close})};d.prototype.DrawRenderCtx=function(c){this.DrawCanvasCtx(c.CanvasContext)};d.prototype.DrawCanvasCtx=function(c){c.beginPath();for(var b=this._Path,f=0;f<b.length;f++){var h=b[f];switch(h.type){case a.PathEntryType.Move:c.moveTo(h.x,
h.y);break;case a.PathEntryType.Line:c.lineTo(h.x,h.y);break;case a.PathEntryType.Rect:c.rect(h.x,h.y,h.width,h.height);break;case a.PathEntryType.Quadratic:c.quadraticCurveTo(h.cpx,h.cpy,h.x,h.y);break;case a.PathEntryType.Bezier:c.bezierCurveTo(h.cp1x,h.cp1y,h.cp2x,h.cp2y,h.x,h.y);break;case a.PathEntryType.Arc:c.arc(h.x,h.y,h.r,h.sAngle,h.eAngle,h.aClockwise);break;case a.PathEntryType.ArcTo:c.arcTo(h.cpx,h.cpy,h.x,h.y,h.r);break;case a.PathEntryType.Close:c.closePath()}}};d.prototype.CalculateBounds=
function(c){for(var b=this._Path,f=null,h=null,n=c=null,g=null,p=null,k=null,k=null,m=0;m<b.length;m++){var l=b[m];switch(l.type){case a.PathEntryType.Move:null==c&&null==g?(c=n=l.x,g=p=l.y):(c=Math.min(l.x,c),g=Math.min(l.y,g),n=Math.max(l.x,n),p=Math.max(l.y,p));f=l.x;h=l.y;break;case a.PathEntryType.Line:c=Math.min(l.x,c);g=Math.min(l.y,g);n=Math.max(l.x,n);p=Math.max(l.y,p);f=l.x;h=l.y;break;case a.PathEntryType.Rect:c=Math.min(l.x,c);g=Math.min(l.y,g);n=Math.max(l.x+l.width,n);p=Math.max(l.y+
l.height,p);break;case a.PathEntryType.Quadratic:k=d._CalculateQuadraticBezierRange(f,l.cpx,l.x);c=Math.min(c,k.min);n=Math.max(n,k.max);k=d._CalculateQuadraticBezierRange(h,l.cpy,l.y);g=Math.min(g,k.min);p=Math.max(p,k.max);f=l.x;h=l.y;break;case a.PathEntryType.Bezier:k=d._CalculateCubicBezierRange(f,l.cp1x,l.cp2x,l.x);c=Math.min(c,k.min);n=Math.max(n,k.max);k=d._CalculateCubicBezierRange(h,l.cp1y,l.cp2y,l.y);g=Math.min(g,k.min);p=Math.max(p,k.max);f=l.x;h=l.y;break;case a.PathEntryType.Arc:l.sAngle!==
l.eAngle&&(k=d._CalculateArcRange(l.x,l.y,l.r,l.sAngle,l.eAngle,l.aClockwise),c=Math.min(c,k.xMin),n=Math.max(n,k.xMax),g=Math.min(g,k.yMin),p=Math.max(p,k.yMax));break;case a.PathEntryType.ArcTo:k=d._CalculateArcToRange(f,h,l.cpx,l.cpy,l.x,l.y,l.r),c=Math.min(c,k.xMin),n=Math.max(n,k.xMax),g=Math.min(g,k.yMin),p=Math.max(p,k.yMax),f=l.x,h=l.y}}b=new rect;rect.set(b,c,g,n-c,p-g);return b};d._CalculateQuadraticBezierRange=function(c,b,f){var a=Math.min(c,f),d=Math.max(c,f);if(a<=b&&b<=d)return{min:a,
max:d};var e=(c-b)/(c-2*b+f);c=c*Math.pow(1-e,2)+2*b*(1-e)*e+f*Math.pow(e,2);a>b?a=Math.min(a,c):d=Math.max(d,c);return{min:a,max:d}};d._CalculateCubicBezierRange=function(c,b,f,a){var d=Math.min(c,a),e=Math.max(c,a);if(d<=b&&b<=e&&d<=f&&f<=e)return{min:d,max:e};var g=2*c-4*b+2*f,k=-c+3*b+a-3*f,m=Math.sqrt(g*g-4*(b-c)*k);if(!isNaN(m)){var l;l=(-g+m)/(2*k);if(0<=l&&1>=l){var q=1-l;l=c*q*q*q+3*b*l*q*q+3*f*q*l*l+a*l*l*l;d=Math.min(d,l);e=Math.max(e,l)}l=(-g-m)/(2*k);0<=l&&1>=l&&(q=1-l,l=c*q*q*q+3*b*
l*q*q+3*f*q*l*l+a*l*l*l,d=Math.min(d,l),e=Math.max(e,l))}return{min:d,max:e}};d._CalculateArcRange=function(c,b,f,a,n,g){var p=c+f*Math.cos(a);a=b+f*Math.sin(a);var k=c+f*Math.cos(n);n=b+f*Math.sin(n);return d._CalculateArcPointsRange(c,b,p,a,k,n,f,g)};d._CalculateArcToRange=function(c,b,f,a,d,e,g){NotImplemented("RawPath._CalculateArcToRange");return{xMin:c,xMax:c,yMin:b,yMax:b}};d._CalculateArcPointsRange=function(c,b,f,a,n,g,p,k){var m=Math.min(f,n),l=Math.max(f,n),q=Math.min(a,g),r=Math.max(a,
g),t=c-p;d._ArcContainsPoint(f,a,n,g,t,b,k)&&(m=Math.min(m,t));t=c+p;d._ArcContainsPoint(f,a,n,g,t,b,k)&&(l=Math.max(l,t));t=b-p;d._ArcContainsPoint(f,a,n,g,c,t,k)&&(q=Math.min(q,t));b+=p;d._ArcContainsPoint(f,a,n,g,c,b,k)&&(r=Math.max(r,b));return{xMin:m,xMax:l,yMin:q,yMax:r}};d._ArcContainsPoint=function(c,b,f,a,d,e,g){c=(f-c)*(e-b)-(d-c)*(a-b);return 0===c||0<c&&g||0>c&&!g?!0:!1};d.Merge=function(c,b){c._Path=c._Path.concat(b._Path);c._EndX+=b._EndX;c._EndY+=b._EndY};d.prototype.Serialize=function(){for(var c=
"",b=this._Path.length,f=this._Path,h=0;h<b;h++){0<h&&(c+=" ");var d=f[h];switch(d.type){case a.PathEntryType.Move:c+="M"+d.x.toString()+" "+d.y.toString();break;case a.PathEntryType.Line:c+="L"+d.x.toString()+" "+d.y.toString();break;case a.PathEntryType.Quadratic:c+="Q"+d.cpx.toString()+" "+d.cpy.toString()+", "+d.x.toString()+" "+d.y.toString();break;case a.PathEntryType.Bezier:c+="C"+d.cp1x.toString()+" "+d.cp1y.toString()+", "+d.cp2x.toString()+" "+d.cp2y.toString()+", "+d.x.toString()+" "+d.y.toString();
break;case a.PathEntryType.EllipticalArc:c+="A"+d.width.toString()+" "+d.height.toString()+" "+d.rotationAngle.toString()+" "+d.isLargeArcFlag.toString()+" "+d.sweepDirectionFlag.toString()+" "+d.ex.toString()+" "+d.ey.toString();break;case a.PathEntryType.Close:c+="Z"}}return c};return d}();a.RawPath=d})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function c(b,f,c,a,d){this.SelectionAnchor=b;this.SelectionCursor=f;this.Start=a;this.Text=c.substr(a,d)}c.prototype.Undo=function(b){b._Buffer=e.Insert(b._Buffer,this.Start,this.Text)};c.prototype.Redo=function(b){b._Buffer=e.Cut(b._Buffer,this.Start,this.Text.length);return this.Start};return c}();a.TextBoxUndoActionDelete=d;d=function(){function c(b,f,c,a,d){this.SelectionAnchor=b;this.SelectionCursor=f;this.Start=c;this.Text=a;this.IsGrowable=!0!==d}
c.prototype.Undo=function(b){b._Buffer=e.Cut(b._Buffer,this.Start,this.Text.length)};c.prototype.Redo=function(b){b._Buffer=e.Insert(b._Buffer,this.Start,this.Text);return this.Start+this.Text.length};c.prototype.Insert=function(b,f){if(!this.IsGrowable||b!==this.Start+this.Text.length)return!1;this.Text+=f;return!0};return c}();a.TextBoxUndoActionInsert=d;d=function(){function c(b,f,c,a,d,e){this.SelectionAnchor=b;this.SelectionCursor=f;this.Start=a;this.Length=d;this.Deleted=c.substr(a,d);this.Inserted=
e}c.prototype.Undo=function(b){b._Buffer=e.Cut(b._Buffer,this.Start,this.Inserted.length);b._Buffer=a.TextBuffer.Insert(b._Buffer,this.Start,this.Deleted)};c.prototype.Redo=function(b){b._Buffer=e.Cut(b._Buffer,this.Start,this.Length);b._Buffer=e.Insert(b._Buffer,this.Start,this.Inserted);return this.Start+this.Inserted.length};return c}();a.TextBoxUndoActionReplace=d;var e=function(){function c(){}c.Cut=function(b,f,c){return b?b.slice(0,f)+b.slice(f+c):""};c.Insert=function(b,f,c){return b?[b.slice(0,
f),c,b.slice(f)].join(""):c};c.Replace=function(b,f,c,a){return b?[b.slice(0,f),a,b.slice(f+c)].join(""):a};return c}();a.TextBuffer=e})(d.Text||(d.Text={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(b){var f=b.charAt(0);if("\n"===f)return 1;b=b.charAt(1);return"\r"===f&&"\n"===b?2:0}function e(b,f,c){b.Length=0;var a=b.Advance=0,h="";if(-1===f.indexOf(" ",a)){var d=Surface.MeasureWidth(f,b.Font);if(isFinite(c)&&b.LineAdvance+d>c)return!0;b.Advance=d;b.LineAdvance=d;b.Length=f.length;return!1}for(;;){h=f.indexOf(" ",a);if(-1===h)break;h+=1;f=f.slice(a,h);d=Surface.MeasureWidth(f,b.Font);if(isFinite(c)&&b.LineAdvance+d>c)return!0;a=h;h=f;b.Advance+=d;b.LineAdvance+=
d;b.Length+=h.length}return!1}function c(b,f,c){c=Surface.MeasureWidth(f,b.Font);b.Advance=c;b.LineAdvance+=c;b.Length=f.length;return!1}var b=function(){function b(f,c,a){this._Selected=!1;this._Advance=0;this._Text=f;this._Selected=!0==a;this._Advance=Surface.MeasureWidth(f,c)}b.prototype._Render=function(b,f,c,a,h){if(0!=this._Text.length&&0!=this._Advance){var d=c.Font,e=d._Ascender();b.Translate(a,h-e);a=d.GetActualHeight();h=new rect;var n=e=0;f&&(e=f.X,n=f.Y);rect.set(h,e,n,this._Advance,a);
(f=c.GetBackground(this._Selected))&&b.FillRect(f,h);b=b.CanvasContext;if(f=c.GetForeground(this._Selected)){f.SetupBrush(b,h);var g=f.ToHtml5Object();b.fillStyle=g}else b.fillStyle="#000000";b.font=d.ToHtml5Object();b.textAlign="left";b.textBaseline="top";b.fillText(this._Text,0,0);c.IsUnderlined&&(b.beginPath(),b.moveTo(0,a),b.lineTo(this._Advance,a),b.lineWidth=2,b.strokeStyle=g,b.stroke())}};return b}();a.TextLayoutGlyphCluster=b;var f=function(){function f(b,c,a){this._Clusters=[];this._Attrs=
null;this._Start=0;this._Line=null;this._Length=this._Advance=0;this._Attrs=c;this._Start=a;this._Line=b}f.prototype._GenerateCache=function(){var f=this._Line._Layout,c=f.SelectionLength,a=f.SelectionStart,f=f.Text,h=this._Attrs.Font,d,e=this._Start,n;if(0===c||this._Start<a)d=0<c?Math.min(a-this._Start,this._Length):this._Length,n=new b(f.substr(this._Start,d),h),this._Clusters.push(n),e+=d;d=a+c;c=this._Start+this._Length;e<c&&e<d&&(d=Math.min(c-e,d-e),a=new b(f.substr(e,d),h,!0),this._Clusters.push(a),
e+=d);e<c&&(f=new b(f.substr(e,c-e),h),this._Clusters.push(f))};f.prototype._ClearCache=function(){this._Clusters=[]};f.prototype._Render=function(b,f,c,a){0===this._Clusters.length&&this._GenerateCache();for(var h=0;h<this._Clusters.length;h++){var d=this._Clusters[h];b.Save();d._Render(b,f,this._Attrs,c,a);b.Restore();c+=d._Advance}};f.prototype.__Debug=function(b){return b.substr(this._Start,this._Length)};return f}();a.TextLayoutRun=f;var h=function(){function b(f,c,a){this._Runs=[];this._Layout=
null;this._Length=this._Width=this._Height=this._Descend=this._Advance=this._Offset=this._Start=0;this._Layout=f;this._Start=c;this._Offset=a}b.prototype.GetCursorFromX=function(b,f){var c=null,a=this._Layout,h=0;b&&(h=b.X);for(var h=h+a._HorizontalAlignment(this._Advance),d=this._Offset,a=a.Text,e=this._Start,n=0,g=null,n=0;n<this._Runs.length;n++){c=this._Runs[n];if(f<h+c._Advance)break;d+=c._Length;e+=c._Length;h+=c._Advance;c=null}if(null!=c)for(e=c._Start,n=c._Start+c._Length,c=c._Attrs.Font,
g=0;e<n;){d++;g=a.charAt(e);e++;"\t"===g&&(g=" ");g=Surface.MeasureWidth(g,c);if(f<=h+g/2){d--;break}h+=g}else 0<n&&(c=this._Runs[n-1],n=c._Start+c._Length,g=0>n-1?null:a.charAt(n-1),"\n"==g&&(d--,n--,g=0>n-1?null:a.charAt(n-1),"\r"==g&&d--));return d};b.prototype._Render=function(b,f,c,a){for(var h=null,d=0;d<this._Runs.length;d++)h=this._Runs[d],h._Render(b,f,c,a),c+=h._Advance};b.prototype.__Debug=function(b){var f;f=""+("\t\tRuns: "+this._Runs.length.toString()+"\n");for(var c=0;c<this._Runs.length;c++)f+=
"\t\t\tRun "+c.toString()+": ",f+=this._Runs[c].__Debug(b),f+="\n";return f};return b}();a.TextLayoutLine=h;var n=function(){function b(){this._SelectionLength=this._SelectionStart=0;this._Text=null;this.AvailableWidth=Number.POSITIVE_INFINITY;this._Strategy=d.LineStackingStrategy.MaxHeight;this._Alignment=d.TextAlignment.Left;this._Trimming=d.Controls.TextTrimming.None;this._Wrapping=d.Controls.TextWrapping.NoWrap;this._MaxWidth=this._MaxHeight=Number.POSITIVE_INFINITY;this._BaseHeight=this._BaseDescent=
0;this._LineHeight=this._ActualWidth=this._ActualHeight=NaN;this._Lines=[];this._IsWrapped=!0;this._Length=0}Object.defineProperty(b.prototype,"SelectionStart",{get:function(){return this._SelectionStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"SelectionLength",{get:function(){return this._SelectionLength},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"ActualExtents",{get:function(){return size.fromRaw(this._ActualWidth,this._ActualHeight)},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"RenderExtents",{get:function(){this.Layout();return rect.set(new rect,this._HorizontalAlignment(this._ActualWidth),0,this._ActualWidth,this._ActualHeight)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"MaxWidth",{get:function(){return this._MaxWidth},set:function(b){0===b&&(b=Number.POSITIVE_INFINITY);this._MaxWidth!==b&&(this._IsWrapped||isFinite(b)&&!(b>this._ActualWidth)?(this._MaxWidth=b,this.ResetState()):this._MaxWidth=
b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"TextAlignment",{get:function(){return this._Alignment},set:function(b){this._Alignment!==b&&(this._Alignment=b,this.ResetState())},enumerable:!0,configurable:!0});b.prototype.SetTextAlignment=function(b){if(this._Alignment===b)return!1;this._Alignment=b;this.ResetState();return!0};Object.defineProperty(b.prototype,"TextTrimming",{get:function(){return this._Trimming},set:function(b){this.SetTextTrimming(b)},enumerable:!0,configurable:!0});
b.prototype.SetTextTrimming=function(b){if(this._Trimming===b)return!1;this._Trimming=b;this.ResetState();return!0};Object.defineProperty(b.prototype,"TextWrapping",{get:function(){return this._Wrapping},set:function(b){this.SetTextWrapping(b)},enumerable:!0,configurable:!0});b.prototype.SetTextWrapping=function(b){switch(b){case d.Controls.TextWrapping.NoWrap:case d.Controls.TextWrapping.Wrap:break;default:b=d.Controls.TextWrapping.Wrap}if(this._Wrapping===b)return!1;this._Wrapping=b;this.ResetState();
return!0};Object.defineProperty(b.prototype,"LineStackingStrategy",{get:function(){return this._Strategy},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"LineStackingStategy",{set:function(b){this.SetLineStackingStategy(b)},enumerable:!0,configurable:!0});b.prototype.SetLineStackingStategy=function(b){if(this._Strategy===b)return!1;this._Strategy=b;this.ResetState();return!0};Object.defineProperty(b.prototype,"LineHeight",{get:function(){return this._LineHeight},set:function(b){this.SetLineHeight(b)},
enumerable:!0,configurable:!0});b.prototype.SetLineHeight=function(b){if(this._LineHeight===b)return!1;this._LineHeight=b;this.ResetState();return!0};Object.defineProperty(b.prototype,"TextAttributes",{get:function(){return this._Attrs},set:function(b){this._Attrs=b;this.ResetState()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"Text",{get:function(){return this._Text},set:function(b){null!=b?(this._Text=b,this._Length=b.length):(this._Text=null,this._Length=0);this.ResetState()},
enumerable:!0,configurable:!0});b.prototype.GetSelectionCursor=function(b,f){var c=0,a=0;b&&(c=b.X,a=b.Y);for(var h=c,d=0,e=0,n,s=this._Lines,v=0;v<s.length;v++)if(n=s[v],h=c+this._HorizontalAlignment(n._Advance),d=n._Height,f>=e+n._Length){if(v+1===this._Lines.length){g(this._Text.substr(n._Start+n._Length-1,2))?(h=c+this._HorizontalAlignment(0),a+=n._Height):h+=n._Advance;break}e+=n._Length;a+=n._Height}else{n=n._Runs;c=null;for(s=0;s<n.length;s++)if(c=n[s],f>=e+c._Length)e+=c._Length,h+=c._Advance;
else{if(c._Start===f)break;e=c._Attrs.Font;h+=Surface.MeasureWidth(this._Text.slice(c._Start,f),e);break}break}e=new rect;rect.set(e,h,a,1,d);return e};b.prototype.GetBaselineOffset=function(){var b=this._Lines;if(0===b.length)return 0;b=b[0];return b._Height+b._Descend};b.prototype.GetLineFromY=function(b,f){for(var c=null,a=b?b.Y:0,h=this._Lines,d=0;d<h.length;d++)if(c=h[d],a+=c._Height,f<a)return c};b.prototype.GetLineFromIndex=function(b){var f=this._Lines;return b>=f.length||0>b?null:f[b]};b.prototype.GetCursorFromXY=
function(b,f,c){var a=0;b&&(a=b.Y);var h=this._Lines,d;c<a?d=h[0]:(d=this.GetLineFromY(b,c))||(d=h[h.length-1]);return d.GetCursorFromX(b,f)};b.prototype.Select=function(b,f){if(this._Text){var c=0,a=0,c=b,a=f;if(this._SelectionStart!==c||this._SelectionLength!==a)(0<this._SelectionLength||0<a)&&this._ClearCache(),this._SelectionLength=a,this._SelectionStart=c}else this._SelectionStart=this._SelectionLength=0};b.prototype.Layout=function(){if(isNaN(this._ActualWidth)){this._ActualWidth=this._ActualHeight=
0;this._IsWrapped=!1;this._ClearLines();var b;if(!(b=null==this._Text)){a:{b=this._Attrs;var a=b.length,n=b[0];if(n&&0===n.Start){for(var s=0;s<a;s++)if(n=b[s],!n.Font){b=!1;break a}b=!0}else b=!1}b=!b}if(!b){b={Advance:0,LineAdvance:0,Length:0,BreakOps:null,Font:new Font};b.BreakOps=this._Wrapping===d.Controls.TextWrapping.Wrap?[]:null;a=this._Wrapping===d.Controls.TextWrapping.NoWrap?c:e;n=new h(this,0,0);this._OverrideLineHeight()&&(n._Descend=this._GetDescendOverride(),n._Height=this._GetLineHeightOverride());
this._Lines.push(n);var s=0,q,r,t,u=0,x=this._Attrs,v=x[0],A=x[1];do{q=A?A.Start:this._Length;r=new f(n,v,s);n._Runs.push(r);b.Font=t=v.Font;if(0>=q-s){this._OverrideLineHeight()||(n._Descend=Math.min(n._Descend,t._Descender()),n._Height=Math.max(n._Height,t.GetActualHeight()));this._ActualHeight+=n._Height;break}for(;s<q;){for(var y=!1,w=!1;s<q;){var z=g(this._Text.slice(s,q));if(0<z){0!=n._Length||this._OverrideLineHeight()||(n._Descend=t._Descender(),n._Height=t.GetActualHeight());n._Length+=z;
r._Length+=z;s+=z;y=!0;break}b.LineAdvance=n._Advance;a(b,this._Text.slice(s,q),this._MaxWidth)&&(w=this._IsWrapped=!0);0<b.Length&&(this._OverrideLineHeight()||(n._Descend=Math.min(n._Descend,t._Descender()),n._Height=Math.max(n._Height,t.GetActualHeight())),n._Advance+=b.Advance,r._Advance+=b.Advance,n._Width=n._Advance,n._Length+=b.Length,r._Length+=b.Length,s+=b.Length);if(w)break;b.LineAdvance=n._Advance;var z=b,B=this._Text.slice(s,q),D=Surface.MeasureWidth(B,t);z.Advance=D;z.LineAdvance+=D;
z.Length=B.length;0<b.Length&&(this._OverrideLineHeight()||(n._Descend=Math.min(n._Descend,t._Descender()),n._Height=Math.max(n._Height,t.GetActualHeight())),n._Advance+=b.Advance,r._Advance+=b.Advance,n._Width=n._Advance,n._Length+=b.Length,r._Length+=b.Length,s+=b.Length)}z=s>=q;if(y||w||z){this._ActualWidth=Math.max(this._ActualWidth,z?n._Advance:n._Width);this._ActualHeight+=n._Height;if(y||w)n=new h(this,s,s),this._OverrideLineHeight()?(n._Descend=this._GetDescendOverride(),n._Height=this._GetLineHeightOverride()):
1>q-s&&(n._Descend=t._Descender(),n._Height=t.GetActualHeight()),y&&1>q-s&&(this._ActualHeight+=n._Height),this._Lines.push(n);s<q&&(r=new f(n,v,s),n._Runs.push(r))}}u++;v=A;A=x[u+1]}while(0<q-s)}}};b.prototype._HorizontalAlignment=function(b){var f=0,c;switch(this._Alignment){case d.TextAlignment.Center:c=isFinite(this.AvailableWidth)?this.AvailableWidth:isFinite(this._MaxWidth)?Math.min(this._ActualWidth,this._MaxWidth):this._ActualWidth;b<c&&(f=(c-b)/2);break;case d.TextAlignment.Right:c=isFinite(this.AvailableWidth)?
this.AvailableWidth:isFinite(this._MaxWidth)?Math.min(this._ActualWidth,this._MaxWidth):this._ActualWidth,b<c&&(f=c-b)}return f};b.prototype.Render=function(b,f,c){var a=0,h=c?c.X:0,d=c?c.Y:0;this.Layout();for(var e=0;e<this._Lines.length;e++)c=this._Lines[e],a=h+this._HorizontalAlignment(c._Advance),c._Render(b,f,a,d),d+=c._Height};b.prototype.__Debug=function(){var b=this.Text,f;f=""+("Lines: "+this._Lines.length.toString()+"\n");for(var c=0;c<this._Lines.length;c++)f+="\tLine "+c.toString()+":\n",
f+=this._Lines[c].__Debug(b);return f};b.prototype.ResetState=function(){this._ActualWidth=this._ActualHeight=NaN};b.prototype._ClearCache=function(){for(var b=null,f=this._Lines,c=f.length,a=0,h=0;h<c;h++)for(var b=f[h],b=b._Runs,a=b.length,d=0;d<a;d++)b[h]._ClearCache()};b.prototype._ClearLines=function(){this._Lines=[]};b.prototype._OverrideLineHeight=function(){return this._Strategy===d.LineStackingStrategy.BlockLineHeight&&0!==this._LineHeight};b.prototype._GetLineHeightOverride=function(){return isNaN(this._LineHeight)?
this._BaseHeight:this._LineHeight};b.prototype._GetDescendOverride=function(){return isNaN(this._LineHeight)?this._BaseDescent:0==this._BaseHeight?0:this._LineHeight*(this._BaseDescent/this._BaseHeight)};return b}();a.TextLayout=n})(d.Text||(d.Text={}))})(Fayde||(Fayde={}));(function(d){(d.Collections||(d.Collections={})).INotifyCollectionChanged_=Nullstone.RegisterInterface("INotifyCollectionChanged")})(Fayde||(Fayde={}));
(function(d){(function(a){(function(c){c[c.Auto=0]="Auto";c[c.Pixel=1]="Pixel";c[c.Star=2]="Star"})(a.GridUnitType||(a.GridUnitType={}));var g=a.GridUnitType,e=function(){function c(b,f){this.Value=null==b?0:b;this.Type=null==f?g.Auto:f}c.Equals=function(b,f){return 0.001>Math.abs(b.Value-f.Value)&&b.Type==f.Type};c.prototype.Clone=function(){return new d.Controls.GridLength(this.Value,this.Type)};return c}();a.GridLength=e;Nullstone.RegisterType(e,"GridLength")})(d.Controls||(d.Controls={}))})(Fayde||
(Fayde={}));(function(d){d=d.Controls||(d.Controls={});(d.Primitives||(d.Primitives={})).IScrollInfo_=Nullstone.RegisterInterface("IScrollInfo")})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(){function c(b){this._SelectedItems=[];this._SelectedItem=null;this._IsUpdating=!1;this.Mode=a.SelectionMode.Single;this._Owner=b;this._Owner.SelectedItems.CollectionChanged.Subscribe(this._HandleOwnerSelectionChanged,this)}Object.defineProperty(c.prototype,"IsUpdating",{get:function(){return this._IsUpdating},enumerable:!0,configurable:!0});c.prototype._HandleOwnerSelectionChanged=function(b,f){if(!this._IsUpdating){if(this.Mode===a.SelectionMode.Single)throw new InvalidOperationException("SelectedItems cannot be modified directly when in Single select mode");
try{var c=this._SelectedItems;this._IsUpdating=!0;switch(f.Action){case d.Collections.NotifyCollectionChangedAction.Add:0>c.indexOf(f.NewItems[0])&&this.AddToSelected(f.NewItems[0]);break;case d.Collections.NotifyCollectionChangedAction.Remove:-1<c.indexOf(f.OldItems[0])&&this.RemoveFromSelected(f.OldItems[0]);break;case d.Collections.NotifyCollectionChangedAction.Replace:-1<c.indexOf(f.OldItems[0])&&this.RemoveFromSelected(f.OldItems[0]);0>c.indexOf(f.NewItems[0])&&this.AddToSelected(f.NewItems[0]);
break;case d.Collections.NotifyCollectionChangedAction.Reset:for(var e=this._Owner.SelectedItems,g,p=e.GetEnumerator();p.MoveNext();)g=p.Current,e.Contains(g)||-1<c.indexOf(g)&&this.RemoveFromSelected(g);for(p=e.GetEnumerator();p.MoveNext();)g=p.Current,0>c.indexOf(g)&&this.AddToSelected(g)}this._Owner._SelectedItemsIsInvalid=!0}finally{this._IsUpdating=!1}}};c.prototype.RepopulateSelectedItems=function(){if(!this._IsUpdating)try{this._IsUpdating=!0;var b=this._Owner.SelectedItems;b.Clear();b.AddRange(this._SelectedItems)}finally{this._IsUpdating=
!1}};c.prototype.ClearSelection=function(b){void 0===b&&(b=!1);if(0===this._SelectedItems.length)this.UpdateSelectorProperties(null,-1,b?this._Owner.SelectedValue:null);else try{this._IsUpdating=!0;var f=this._SelectedItems.slice(0);this._SelectedItems=[];this._SelectedItem=null;this.UpdateSelectorProperties(null,-1,b?this._Owner.SelectedValue:null);this._Owner._SelectedItemsIsInvalid=!0;this._Owner._RaiseSelectionChanged(f,[])}finally{this._IsUpdating=!1}};c.prototype.Select=function(b,f){void 0===
f&&(f=!1);var c=this._Owner.Items;if(c.Contains(b)){var e=this._Owner.SelectedValue,g=this._SelectedItems,p=-1<g.indexOf(b);try{switch(this._IsUpdating=!0,this.Mode){case a.SelectionMode.Single:p?d.Input.Keyboard.HasControl()?this.ClearSelection(f):this.UpdateSelectorProperties(this._SelectedItem,c.IndexOf(this._SelectedItem),e):this.ReplaceSelection(b);break;case a.SelectionMode.Extended:if(d.Input.Keyboard.HasShift()){var k=c.IndexOf(this._SelectedItem);0===g.length?this.SelectRange(0,c.IndexOf(b)):
this.SelectRange(k,c.IndexOf(b))}else d.Input.Keyboard.HasControl()?p||this.AddToSelected(b):p?this.RemoveFromSelected(b):this.AddToSelected(b);break;case a.SelectionMode.Multiple:-1<g.indexOf(b)?this.UpdateSelectorProperties(this._SelectedItem,c.IndexOf(this._SelectedItem),e):this.AddToSelected(b);break;default:throw new NotSupportedException("SelectionMode "+this.Mode+" is not supported.");}}finally{this._IsUpdating=!1}}};c.prototype.SelectRange=function(b,f){for(var c=this._Owner.Items,a=this._SelectedItems,
e=c.GetRange(b,f),g=[],k=d.ArrayEx.GetEnumerator(a),m;k.MoveNext();){m=k.Current;var l=e.indexOf(m);-1<l?e.splice(l,1):g.push(m)}a=a.filter(function(b){return 0>g.indexOf(b)});a.push(e);0>a.indexOf(this._SelectedItem)&&(this._SelectedItem=a[0],this.UpdateSelectorProperties(this._SelectedItem,null==this._SelectedItem?-1:c.IndexOf(this._SelectedItem),this._Owner._GetValueFromItem(this._SelectedItem)));this._Owner._SelectedItemsIsInvalid=!0;this._Owner._RaiseSelectionChanged(g,e.slice(0))};c.prototype.SelectAll=
function(b){try{this._IsUpdating=!0;if(this.Mode===a.SelectionMode.Single)throw new NotSupportedException("Cannot call SelectAll when in Single select mode");var f=this._SelectedItems,c=d.ArrayEx.Except(b,f);if(0!==c.length){var e=this._Owner;f.push(c);null==this._SelectedItem&&(this._SelectedItem=c[0],this.UpdateSelectorProperties(this._SelectedItem,e.Items.IndexOf(this._SelectedItem),e._GetValueFromItem(this._SelectedItem)));e._SelectedItemsIsInvalid=!0;e._RaiseSelectionChanged([],c)}}finally{this._IsUpdating=
!1}};c.prototype.SelectOnly=function(b){if(this._SelectedItem!==b||1!==this._SelectedItems.length)try{this._IsUpdating=!0,this.ReplaceSelection(b)}finally{this._IsUpdating=!1}};c.prototype.Unselect=function(b){if(!(0>this._SelectedItems.indexOf(b)))try{this._IsUpdating=!0,this.RemoveFromSelected(b)}finally{this._IsUpdating=!1}};c.prototype.AddToSelected=function(b){this._SelectedItems.push(b);var f=this._Owner;1===this._SelectedItems.length&&(this._SelectedItem=b,this.UpdateSelectorProperties(b,f.Items.IndexOf(b),
f._GetValueFromItem(b)));f._SelectedItemsIsInvalid=!0;f._RaiseSelectionChanged([],[b])};c.prototype.RemoveFromSelected=function(b){var f=this._SelectedItems,c=f.indexOf(b);-1<c&&f.splice(c,1);c=this._Owner;this._SelectedItem===b&&(this._SelectedItem=f=f[0],this.UpdateSelectorProperties(f,null==f?-1:c.Items.IndexOf(f),c._GetValueFromItem(b)));c._SelectedItemsIsInvalid=!0;c._RaiseSelectionChanged([b],[])};c.prototype.ReplaceSelection=function(b){var f=this._Owner;if(this.UpdateCollectionView(b)){var c=
this._SelectedItems.slice(0),a=[],d=c.indexOf(b);-1<d?c.splice(d,1):a.push(b);this._SelectedItems=[b];this._SelectedItem=b;this.UpdateSelectorProperties(b,f.Items.IndexOf(b),f._GetValueFromItem(b));if(0!==a.length||0!==c.length)f._SelectedItemsIsInvalid=!0,f._RaiseSelectionChanged(c,a)}else this.UpdateSelectorProperties(this._SelectedItem,f.Items.IndexOf(this._SelectedItem),f._GetValueFromItem(this._SelectedItem))};c.prototype.UpdateSelectorProperties=function(b,f,c){var a=this._Owner;a.SelectedItem!==
b&&(a.SelectedItem=b);a.SelectedIndex!==f&&(a.SelectedIndex=f);a.SelectedValue!==c&&(a.SelectedValue=c);this.UpdateCollectionView(b)};c.prototype.UpdateCollectionView=function(b){var f,c=this._Owner.ItemsSource;Nullstone.ImplementsInterface(c,d.Data.ICollectionView_)&&(f=c);return f?(f.MoveCurrentTo(b),b===f.CurrentItem):!0};return c}();g.SelectorSelection=e;Nullstone.RegisterType(e,"SelectorSelection")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
var DependencyProperty=function(){function d(){this.IsReadOnly=!1;this.IsCustom=!0;this.AlwaysChange=this.IsInheritable=this.IsAttached=!1;this._Validator=this._Coercer=null}d.Register=function(a,g,e,c,b){var f=new d;f.Name=a;f.GetTargetType=g;f.OwnerType=e;f.DefaultValue=c;f.ChangedCallback=b;f.Store=Fayde.Providers.PropertyStore.Instance;f.FinishRegister();return f};d.RegisterReadOnly=function(a,g,e,c,b){var f=new d;f.Name=a;f.GetTargetType=g;f.OwnerType=e;f.DefaultValue=c;f.ChangedCallback=b;f.IsReadOnly=
!0;f.Store=Fayde.Providers.PropertyStore.Instance;f.FinishRegister();return f};d.RegisterAttached=function(a,g,e,c,b){var f=new d;f.Name=a;f.GetTargetType=g;f.OwnerType=e;f.DefaultValue=c;f.ChangedCallback=b;f.IsAttached=!0;f.Store=Fayde.Providers.PropertyStore.Instance;f.FinishRegister();return f};d.RegisterCore=function(a,g,e,c,b){var f=new d;f.Name=a;f.GetTargetType=g;f.OwnerType=e;f.DefaultValue=c;f.ChangedCallback=b;f.IsCustom=!1;f.Store=Fayde.Providers.PropertyStore.Instance;f.FinishRegister();
return f};d.RegisterReadOnlyCore=function(a,g,e,c,b){var f=new d;f.Name=a;f.GetTargetType=g;f.OwnerType=e;f.DefaultValue=c;f.ChangedCallback=b;f.IsCustom=!1;f.IsReadOnly=!0;f.Store=Fayde.Providers.PropertyStore.Instance;f.FinishRegister();return f};d.RegisterAttachedCore=function(a,g,e,c,b){var f=new d;f.Name=a;f.GetTargetType=g;f.OwnerType=e;f.DefaultValue=c;f.ChangedCallback=b;f.IsCustom=!1;f.IsAttached=!0;f.Store=Fayde.Providers.PropertyStore.Instance;f.FinishRegister();return f};d.RegisterInheritable=
function(a,g,e,c,b){var f=new d;f.Name=a;f.GetTargetType=g;f.OwnerType=e;f.DefaultValue=c;f.ChangedCallback=b;f.IsCustom=!0;f.IsInheritable=!0;f.Store=Fayde.Providers.InheritedStore.Instance;f.FinishRegister();return f};d.RegisterFull=function(a,g,e,c,b,f,h,n,s,p,k){var m=new d;m.Name=a;m.GetTargetType=g;m.OwnerType=e;m.DefaultValue=c;m.ChangedCallback=b;m._Coercer=f;m.AlwaysChange=h;m._Validator=n;m.IsCustom=!1!==s;m.IsReadOnly=!0===p;m.IsAttached=!0===k;m.Store=Fayde.Providers.PropertyStore.Instance;
m.FinishRegister();return m};d.prototype.FinishRegister=function(){var a=this.Name,g=this.OwnerType;if(!g||"function"!==typeof g)throw new InvalidOperationException("DependencyProperty does not have a valid OwnerType.");var e=g._RegisteredDPs;e||(e={},Object.defineProperty(g,"_RegisteredDPs",{value:e,enumerable:!1,writable:!1}));if(void 0!==e[a])throw new InvalidOperationException("Dependency Property is already registered. ["+a+"]");e[a]=this;this._ID=d._LastID+=1;d._IDs[this._ID]=this;var c=this;
Object.defineProperty(g.prototype,this.Name,{get:function(){return this.GetValue(c)},set:function(b){this.SetValue(c,b)},configurable:!0})};d.prototype.ExtendTo=function(a){var d=a._RegisteredDPs;d||(d={},Object.defineProperty(a,"_RegisteredDPs",{value:d,enumerable:!1,writable:!1}));d[this.Name]=this;var e=this;Object.defineProperty(a.prototype,this.Name,{get:function(){return this.GetValue(e)},set:function(c){this.SetValue(e,c)},configurable:!0});return this};d.prototype.ValidateSetValue=function(a,
d,e){e.IsValid=!1;if(this._Coercer&&!(d=this._Coercer(a,this,d))||this._Validator&&!this._Validator(a,this,d))return d;e.IsValid=!0;return d};d.GetDependencyProperty=function(a,g,e){if(a){var c=a._RegisteredDPs,b;c&&(b=c[g]);b||(b=d.GetDependencyProperty(a._BaseClass,g,!0));if(!b&&!e)throw new Exception("Cannot locate dependency property ["+a._TypeName+"].["+g+"]");return b}};d._IDs=[];d._LastID=0;return d}();Nullstone.RegisterType(DependencyProperty,"DependencyProperty");
(function(d){var a=function(){function a(){}a.prototype.GetValue=function(a){};a.prototype.OnAttached=function(a){this.IsAttached=!0};a.prototype.OnDetached=function(a){this.IsAttached=!1};return a}();d.Expression=a;Nullstone.RegisterType(a,"Expression")})(Fayde||(Fayde={}));(function(d){var a=function(){return function(){this.ResChain=null}}();d.FrameworkTemplate=a;Nullstone.RegisterType(a,"FrameworkTemplate")})(Fayde||(Fayde={}));
(function(d){var a=function(){function a(){}a.GetLayoutClip=function(a){a=a.XamlNode.LayoutUpdater.LayoutClip;var c=new d.Media.RectangleGeometry;c.Rect=rect.copyTo(a);return c};a.GetLayoutExceptionElement=function(){var a=d.LayoutUpdater.LayoutExceptionUpdater;if(a)return a.Node.XObject};a.GetLayoutSlot=function(a){return a.XamlNode.LayoutUpdater.LayoutSlot};return a}();d.LayoutInformation=a;Nullstone.RegisterType(a,"LayoutInformation")})(Fayde||(Fayde={}));
(function(d){var a=_Dirty,g=_Dirty.LocalTransform,e=_Dirty.LocalProjection,c=_Dirty.Transform,b=_Dirty.RenderVisibility,f=_Dirty.HitTestVisibility,h=_Dirty.LocalClip,n=_Dirty.LayoutClip,s=_Dirty.Clip,p=_Dirty.DownDirtyState,k=_Dirty.UpDirtyState;(function(b){b[b.None=0]="None";b[b.RenderVisible=2]="RenderVisible";b[b.HitTestVisible=4]="HitTestVisible";b[b.TotalRenderVisible=8]="TotalRenderVisible";b[b.TotalHitTestVisible=16]="TotalHitTestVisible";b[b.DirtyArrangeHint=2048]="DirtyArrangeHint";b[b.DirtyMeasureHint=
4096]="DirtyMeasureHint";b[b.DirtySizeHint=8192]="DirtySizeHint"})(d.UIElementFlags||(d.UIElementFlags={}));var m=d.UIElementFlags,l=function(){function l(b){this.Node=b;this.LastRenderSize=this.PreviousConstraint=this.LayoutSlot=this.CompositeLayoutClip=this.LayoutClip=void 0;this.HiddenDesire=size.createNegativeInfinite();this.DesiredSize=new size;this.RenderSize=new size;this.VisualOffset=new Point;this.ActualWidth=this.ActualHeight=NaN;this.AbsoluteXform=mat3.identity();this.LayoutXform=mat3.identity();
this.LocalXform=mat3.identity();this.RenderXform=mat3.identity();this.CarrierXform=null;this.LocalProjection=mat4.identity();this.AbsoluteProjection=mat4.identity();this.RenderProjection=mat4.identity();this.CarrierProjection=null;this.TotalOpacity=1;this.TotalIsHitTestVisible=this.TotalIsRenderVisible=!0;this.TotalRenderProjection=!1;this.Extents=new rect;this.ExtentsWithChildren=new rect;this.Bounds=new rect;this.BoundsWithChildren=new rect;this.GlobalBounds=new rect;this.GlobalBoundsWithChildren=
new rect;this.SurfaceBounds=new rect;this.SurfaceBoundsWithChildren=new rect;this.EffectPadding=new Thickness;this.ClipBounds=new rect;this.IsNeverInsideObject=this.ShouldSkipHitTest=this.CanHitElement=this.BreaksLayoutClipRender=this.IsLayoutContainer=this.IsContainer=!1;this.Flags=d.UIElementFlags.RenderVisible|d.UIElementFlags.HitTestVisible;this.DirtyFlags=0;this.InDownDirty=this.InUpDirty=!1;this.DirtyRegion=new rect;this._ForceInvalidateOfNewBounds=!1}l.prototype.OnIsAttachedChanged=function(b,
f){this.UpdateTotalRenderVisibility();this.UpdateTotalHitTestVisibility();if(!b){this._CacheInvalidateHint();var c=this.Surface;c&&c.OnNodeDetached(this)}};l.prototype.OnAddedToTree=function(){this.UpdateTotalRenderVisibility();this.UpdateTotalHitTestVisibility();this.Invalidate();this.LayoutClip=void 0;size.clear(this.RenderSize);this.UpdateTransform();this.UpdateProjection();this.InvalidateMeasure();this.InvalidateArrange();(this._HasFlag(m.DirtySizeHint)||void 0!==this.LastRenderSize)&&this._PropagateFlagUp(m.DirtySizeHint)};
l.prototype.OnRemovedFromTree=function(){this.LayoutSlot=new rect;this.LayoutClip=void 0};l.prototype.SetContainerMode=function(b,f){null!=b&&(this.IsLayoutContainer=b);this.IsContainer=null!=f?f:b};l.prototype.HasMeasureArrangeHint=function(){return 0<(this.Flags&(m.DirtyMeasureHint|m.DirtyArrangeHint))};l.prototype.ProcessDown=function(){var d=this.Node,k=d.XObject,m=d.VisualParentNode,l;m&&(l=m.LayoutUpdater);this.DirtyFlags&b&&(this.DirtyFlags&=~b,m=this.TotalIsRenderVisible,this.UpdateBounds(),
l&&l.UpdateBounds(),this.UpdateRenderVisibility(l),this.TotalIsRenderVisible||this._CacheInvalidateHint(),m!==this.TotalIsRenderVisible&&this.Surface._AddDirtyElement(this,a.NewBounds),this._PropagateDirtyFlagToChildren(b));this.DirtyFlags&f&&(this.DirtyFlags&=~f,this.UpdateHitTestVisibility(l),this._PropagateDirtyFlagToChildren(f));var m=this.DirtyFlags&g,q=this.DirtyFlags&e,A=m||q||this.DirtyFlags&c;this.DirtyFlags&=~(g|e|c);m&&this.ComputeLocalTransform(k);q&&this.ComputeLocalProjection(k);A&&
(this.ComputeTransform(d,l),l&&l.UpdateBounds(),this._PropagateDirtyFlagToChildren(a.Transform));k=this.DirtyFlags&n;this.DirtyFlags&=~(h|n|s);k&&(this.ComputeLayoutClip(l),this._PropagateDirtyFlagToChildren(a.LayoutClip));this.DirtyFlags&a.ChildrenZIndices&&(this.DirtyFlags&=~a.ChildrenZIndices,d._ResortChildrenByZIndex());return!(this.DirtyFlags&p)};l.prototype.ProcessUp=function(){var b=this.Node,f=b.VisualParentNode,c;f&&(c=f.LayoutUpdater);f=!1;if(this.DirtyFlags&a.Bounds){this.DirtyFlags&=~a.Bounds;
var f=rect.copyTo(this.ExtentsWithChildren),h=rect.copyTo(this.GlobalBoundsWithChildren),d=rect.copyTo(this.SurfaceBoundsWithChildren);b.ComputeBounds?b.ComputeBounds(this.ComputeBounds,this):this.ComputeBounds();!rect.isEqual(h,this.GlobalBoundsWithChildren)&&c&&(c.UpdateBounds(),c.Invalidate(d),c.Invalidate(this.SurfaceBoundsWithChildren));f=!rect.isEqual(f,this.ExtentsWithChildren)||this._ForceInvalidateOfNewBounds;this._ForceInvalidateOfNewBounds=!1}this.DirtyFlags&a.NewBounds&&(c?c.Invalidate(this.SurfaceBoundsWithChildren):
b.IsTopLevel&&(f=!0),this.DirtyFlags&=~a.NewBounds);f&&this.Invalidate(this.SurfaceBoundsWithChildren);this.DirtyFlags&a.Invalidate&&(this.DirtyFlags&=~a.Invalidate,f=this.DirtyRegion,c?c.Invalidate(f):b.IsAttached&&this.Surface._Invalidate(f),rect.clear(f));return!(this.DirtyFlags&k)};l.prototype._PropagateDirtyFlagToChildren=function(b){for(var f=this.Node.GetVisualTreeEnumerator(),c=this.Surface;f.MoveNext();)c._AddDirtyElement(f.Current.LayoutUpdater,b)};l.prototype.FullInvalidate=function(b){this.Invalidate();
b&&(this.UpdateTransform(),this.UpdateProjection());this.UpdateBounds(!0)};l.prototype.Invalidate=function(b){b||(b=this.SurfaceBounds);!this.TotalIsRenderVisible||0.5>255*this.TotalOpacity||!this.Node.IsAttached||(this.Surface._AddDirtyElement(this,_Dirty.Invalidate),this.InvalidateBitmapCache(),rect.union(this.DirtyRegion,b))};l.prototype._CacheInvalidateHint=function(){};l.prototype.ComputeComposite=function(){};l.prototype.InvalidateBitmapCache=function(){};l.prototype.InvalidateMeasure=function(){this.DirtyFlags|=
_Dirty.Measure;this._PropagateFlagUp(m.DirtyMeasureHint)};l.prototype.InvalidateArrange=function(){this.DirtyFlags|=_Dirty.Arrange;this._PropagateFlagUp(m.DirtyArrangeHint)};l.prototype.InvalidateSubtreePaint=function(){this.Invalidate(this.SurfaceBoundsWithChildren)};l.prototype.UpdateClip=function(){this.Node.IsAttached&&this.Surface._AddDirtyElement(this,h)};l.prototype.SetLayoutClip=function(b){var f=this.LayoutClip;this.LayoutClip=b;f!==b&&(f&&b&&rect.isEqual(f,b)||this.Node.IsAttached&&this.Surface._AddDirtyElement(this,
n))};l.prototype.ComputeLayoutClip=function(b){if(this.BreaksLayoutClipRender)this.CompositeLayoutClip=void 0;else{b=b?b.CompositeLayoutClip:void 0;var f=this.LayoutClip;this.CompositeLayoutClip=b&&f?rect.intersection(rect.copyTo(f),b):b?rect.copyTo(b):f?rect.copyTo(f):void 0}};l.prototype.UpdateTransform=function(){this.Node.IsAttached&&this.Surface._AddDirtyElement(this,_Dirty.LocalTransform)};l.prototype.ComputeLocalTransform=function(b){var f=b.RenderTransform;if(f){b=b instanceof d.Controls.TextBlock?
this.GetTextBlockTransformOrigin(b):this.GetTransformOrigin(b);mat3.identity(this.LocalXform);var c=mat3.create();mat3.set(f.Value._Raw,c);mat3.translate(this.LocalXform,b.X,b.Y);mat3.multiply(this.LocalXform,c,this.LocalXform);mat3.translate(this.LocalXform,-b.X,-b.Y)}};l.prototype.ComputeLocalProjection=function(b){var f=b.Projection;if(f){var c=b instanceof d.Shapes.Shape?this._GetShapeBrushSize(b):this._GetBrushSize();f.SetObjectSize(c);f=f.GetDistanceFromXYPlane();d.Controls.Panel.SetZ(b,f)}else d.Controls.Panel.SetZ(b,
NaN)};l.prototype.ComputeTransform=function(b,f){var c=b.XObject.Projection,a=mat4.clone(this.LocalProjection);mat3.clone(this.AbsoluteXform);mat4.identity(this.LocalProjection);f?(mat3.set(f.AbsoluteXform,this.AbsoluteXform),mat4.set(f.AbsoluteProjection,this.AbsoluteProjection),this.TotalRenderProjection=f.TotalRenderProjection):(mat3.identity(this.AbsoluteXform),mat4.identity(this.AbsoluteProjection),this.TotalRenderProjection=!1);var h=this.CarrierProjection,e=this.CarrierXform;h&&mat4.set(h,
this.LocalProjection);h=this.RenderXform;e?mat3.set(e,h):mat3.identity(h);mat3.multiply(h,this.LayoutXform,h);mat3.multiply(h,this.LocalXform,h);e=mat3.toAffineMat4(h);mat4.multiply(this.LocalProjection,e,this.LocalProjection);mat3.multiply(this.AbsoluteXform,this.RenderXform,this.AbsoluteXform);c&&(e=c.GetTransform(),mat4.multiply(e,this.LocalProjection,this.LocalProjection),this.TotalRenderProjection=!0);mat4.multiply(this.LocalProjection,this.AbsoluteProjection,this.AbsoluteProjection);b instanceof
d.Controls.Primitives.PopupNode&&(e=b.SubtreeNode)&&e.LayoutUpdater.UpdateTransform();mat4.equal(a,this.LocalProjection)||(f?f.Invalidate(this.SurfaceBoundsWithChildren):b.IsTopLevel&&this.InvalidateSubtreePaint(),b.IsAttached&&this.Surface._AddDirtyElement(this,_Dirty.NewBounds));mat4.set(this.LocalProjection,this.RenderProjection);this.UpdateBounds();this.ComputeComposite();b.PostCompute&&b.PostCompute(this,null!=c)};l.prototype.UpdateProjection=function(){this.Node.IsAttached&&this.Surface._AddDirtyElement(this,
_Dirty.LocalProjection)};l.prototype.TransformPoint=function(b){var f=mat4.inverse(this.AbsoluteProjection,mat4.create());if(f){var c=vec4.createFrom(b.X,b.Y,0,1);c[2]=-(f[2]*c[0]+f[6]*c[1]+f[14])/f[10];mat4.transformVec4(f,c);b.X=c[0]/c[3];b.Y=c[1]/c[3]}else Warn("Could not get inverse of Absolute Projection for UIElement.")};l.prototype.TransformToVisual=function(b){var f=mat4.create();if(b){var c=mat4.create();mat4.inverse(b.LayoutUpdater.AbsoluteProjection,c);mat4.multiply(this.AbsoluteProjection,
c,f)}else mat4.set(this.AbsoluteProjection,f);return(b=mat4.toAffineMat3(f))?(f=new d.Media.MatrixTransform,f.SetStoreValue(d.Media.MatrixTransform.MatrixProperty,new d.Media.Matrix(b)),f):new d.Media.InternalTransform(f)};l.prototype.GetTransformOrigin=function(b){return(b=b.RenderTransformOrigin)?{X:this.ActualWidth*b.X,Y:this.ActualHeight*b.Y}:{X:0,Y:0}};l.prototype.GetTextBlockTransformOrigin=function(b){b=b.RenderTransformOrigin;if(!b)return{X:0,Y:0};var f=this.CoerceSize(this.RenderSize);return{X:f.Width*
b.X,Y:f.Height*b.Y}};l.prototype.UpdateRenderVisibility=function(b){var f=this.Node.XObject;if(b){var c=b.Node.XObject;this.TotalOpacity=b.TotalOpacity*f.Opacity;this.TotalIsRenderVisible=0===c.Visibility&&0===f.Visibility}else this.TotalOpacity=f.Opacity,this.TotalIsRenderVisible=0===f.Visibility};l.prototype.UpdateTotalRenderVisibility=function(){this.Node.IsAttached&&this.Surface._AddDirtyElement(this,_Dirty.RenderVisibility)};l.prototype.UpdateHitTestVisibility=function(b){var f=this.Node.XObject;
this.TotalIsHitTestVisible=b?b.TotalIsHitTestVisible&&f.IsHitTestVisible:f.IsHitTestVisible};l.prototype.UpdateTotalHitTestVisibility=function(){this.Node.IsAttached&&this.Surface._AddDirtyElement(this,_Dirty.HitTestVisibility)};l.prototype.UpdateBounds=function(b){this.Node.IsAttached&&this.Surface._AddDirtyElement(this,_Dirty.Bounds);this._ForceInvalidateOfNewBounds=this._ForceInvalidateOfNewBounds||b};l.prototype.ComputeBounds=function(){var b=this.CoerceSize(size.fromRaw(this.ActualWidth,this.ActualHeight));
rect.set(this.Extents,0,0,b.Width,b.Height);rect.copyTo(this.Extents,this.ExtentsWithChildren);for(b=this.Node.GetVisualTreeEnumerator();b.MoveNext();){var f=b.Current.LayoutUpdater;f.TotalIsRenderVisible&&rect.union(this.ExtentsWithChildren,f.GlobalBoundsWithChildren)}this.IntersectBoundsWithClipPath(this.Bounds,this.AbsoluteXform);rect.copyGrowTransform(this.BoundsWithChildren,this.ExtentsWithChildren,this.EffectPadding,this.AbsoluteXform);this.ComputeGlobalBounds();this.ComputeSurfaceBounds()};
l.prototype.ComputeGlobalBounds=function(){this.IntersectBoundsWithClipPath(this.GlobalBounds,this.LocalXform);rect.copyGrowTransform4(this.GlobalBoundsWithChildren,this.ExtentsWithChildren,this.EffectPadding,this.LocalProjection)};l.prototype.ComputeSurfaceBounds=function(){this.IntersectBoundsWithClipPath(this.SurfaceBounds,this.AbsoluteXform);rect.copyGrowTransform4(this.SurfaceBoundsWithChildren,this.ExtentsWithChildren,this.EffectPadding,this.AbsoluteProjection)};l.prototype.IntersectBoundsWithClipPath=
function(b,f){var c=rect.isEmpty(this.ClipBounds),a=this.LayoutClip?rect.isEmpty(this.LayoutClip):!0;c&&a||this.TotalIsRenderVisible?(rect.copyGrowTransform(b,this.Extents,this.EffectPadding,f),c||rect.intersection(b,this.ClipBounds),a||rect.intersection(b,this.LayoutClip)):rect.clear(b)};l.prototype._UpdateActualSize=function(){var b=this.LastRenderSize,f=this.Node.XObject,c;c=f.ComputeActualSize?f.ComputeActualSize(this._ComputeActualSize,this):this._ComputeActualSize();this.ActualWidth=c.Width;
this.ActualHeight=c.Height;if(!b||!size.isEqual(b,c)){var a=d.FrameworkElement.ActualWidthProperty;a.Store.SetLocalValue(d.Providers.GetStorage(f,a),c.Width);a=d.FrameworkElement.ActualHeightProperty;a.Store.SetLocalValue(d.Providers.GetStorage(f,a),c.Height);this.LastRenderSize=void 0;f.SizeChanged.Raise(f,new d.SizeChangedEventArgs(b,c))}};l.prototype._ComputeActualSize=function(){var b=this.Node;return b.XObject.Visibility!==d.Visibility.Visible?new size:(b=b.VisualParentNode)&&!(b.XObject instanceof
d.Controls.Canvas)||this.IsLayoutContainer?size.copyTo(this.RenderSize):this.CoerceSize(new size)};l.prototype._GetBrushSize=function(){return{Width:this.ActualWidth,Height:this.ActualHeight}};l.prototype._GetShapeBrushSize=function(b){return size.fromRect(b.XamlNode.GetStretchExtents(b,this))};l.prototype.CoerceSize=function(b){var f=this.Node.XObject,c=f.Width,a=f.Height,h=f.MinWidth,d=f.MinHeight,e,n=d;e=Math.max(h,b.Width);n=Math.max(n,b.Height);isNaN(c)||(e=c);isNaN(a)||(n=a);e=Math.max(Math.min(e,
f.MaxWidth),h);n=Math.max(Math.min(n,f.MaxHeight),d);f.UseLayoutRounding&&(e=Math.round(e),n=Math.round(n));b.Width=e;b.Height=n;return b};l.prototype._HasFlag=function(b){return(this.Flags&b)===b};l.prototype._ClearFlag=function(b){this.Flags&=~b};l.prototype._SetFlag=function(b){this.Flags|=b};l.prototype._PropagateFlagUp=function(b){this.Flags|=b;for(var f=this.Node,c;(f=f.VisualParentNode)&&(c=f.LayoutUpdater)&&!c._HasFlag(b);)c.Flags|=b};l.prototype.UpdateLayer=function(b,f){for(var c=this.Node,
a;a=c.VisualParentNode;)c=a;a=c.XObject;for(var h=c.LayoutUpdater,e;250>b.Count;){for(;e=b.ArrangeList.shift();)e._PropagateFlagUp(m.DirtyArrangeHint);for(;e=b.SizeList.shift();)e._PropagateFlagUp(m.DirtySizeHint);b.Count+=1;var n=m.None;a.Visibility===d.Visibility.Visible&&(h._HasFlag(m.DirtyMeasureHint)?n=m.DirtyMeasureHint:h._HasFlag(m.DirtyArrangeHint)?n=m.DirtyArrangeHint:h._HasFlag(m.DirtySizeHint)&&(n=m.DirtySizeHint));if(n!==m.None)for(var g=d.DeepTreeWalker(c),s;s=g.Step();)if(e=s.LayoutUpdater,
s.XObject.Visibility===d.Visibility.Visible&&e._HasFlag(n))switch(e._ClearFlag(n),n){case m.DirtyMeasureHint:e.DirtyFlags&_Dirty.Measure&&b.MeasureList.push(e);break;case m.DirtyArrangeHint:e.DirtyFlags&_Dirty.Arrange&&b.ArrangeList.push(e);break;case m.DirtySizeHint:void 0!==e.LastRenderSize&&b.SizeList.push(e)}else g.SkipBranch();if(n===m.DirtyMeasureHint)for(;e=b.MeasureList.shift();)e._DoMeasureWithError(f),b.Updated=!0;else if(n===m.DirtyArrangeHint)for(;(e=b.ArrangeList.shift())&&(e._DoArrangeWithError(f),
b.Updated=!0,!h._HasFlag(m.DirtyMeasureHint)););else if(n===m.DirtySizeHint)for(;e=b.SizeList.pop();)b.Updated=!0,e._UpdateActualSize();else break}};l.prototype._DoMeasureWithError=function(b){var f=this.PreviousConstraint,c=this.Node,a=c.VisualParentNode;c.IsAttached||(f||a||!this.IsLayoutContainer)||(f=size.createInfinite());if(f&&(c=size.copyTo(this.DesiredSize),this._Measure(f,b),size.isEqual(c,this.DesiredSize)))return;a&&a.LayoutUpdater.InvalidateMeasure();this.DirtyFlags&=~_Dirty.Measure};
l.prototype._Measure=function(b,f){if(!f.Message){var c=this.Node,a=c.XObject;if(isNaN(b.Width)||isNaN(b.Height))f.Message="Cannot call Measure using a size with NaN values",l.LayoutExceptionUpdater=this;else{var h=this.PreviousConstraint,e=0<(this.DirtyFlags&_Dirty.Measure),e=e||!h||h.Width!==b.Width||h.Height!==b.Height;if(a.Visibility!==d.Visibility.Visible)this.PreviousConstraint=b,size.clear(this.DesiredSize);else if(c.ApplyTemplateWithError(f),e&&(this.PreviousConstraint=b,this.InvalidateArrange(),
this.UpdateBounds(),h=size.copyTo(b),(e=a.Margin)&&size.shrinkByThickness(h,e),this.CoerceSize(h),h=a.MeasureOverride?a.MeasureOverride(h):a._MeasureOverride(h,f),!f.Message)){this.DirtyFlags&=~_Dirty.Measure;this.HiddenDesire=size.copyTo(h);var n=c.VisualParentNode;if(!n||n instanceof d.Controls.CanvasNode)if(c instanceof d.Controls.CanvasNode||!this.IsLayoutContainer){size.clear(this.DesiredSize);return}this.CoerceSize(h);e&&size.growByThickness(h,e);size.min(h,b);a.UseLayoutRounding&&(h.Width=
Math.round(h.Width),h.Height=Math.round(h.Height));size.copyTo(h,this.DesiredSize)}}}};l.prototype._DoArrangeWithError=function(b){var f=this.LayoutSlot;null===f&&(f=void 0);var c=this.Node,a=c.XObject,h=c.VisualParentNode;if(!h){var f=this.Surface,e;this.IsLayoutContainer?(e=size.copyTo(this.DesiredSize),c.IsAttached&&(c.IsTopLevel&&!c.ParentNode)&&((c=this.PreviousConstraint)?size.max(e,c):e=size.copyTo(f.Extents))):(e.Width=a.ActualWidth,e.Height=a.ActualHeight);e=rect.fromSize(e);e.X=d.Controls.Canvas.GetLeft(a);
e.Y=d.Controls.Canvas.GetTop(a);f=e}f?this._Arrange(f,b):h&&h.LayoutUpdater.InvalidateArrange()};l.prototype._Arrange=function(b,f){if(!f.Message){var c=this.Node,a=c.XObject;a.UseLayoutRounding&&rect.round(b);if(0>b.Width||0>b.Height||!isFinite(b.Width)||!isFinite(b.Height)||isNaN(b.Width)||isNaN(b.Height))c=this.DesiredSize,f.Number=BError.Argument,f.Message="Invalid arguments to Arrange. Desired = "+c.toString();else if(a.Visibility!==d.Visibility.Visible)this.LayoutSlot=b;else{var h=this.LayoutSlot;
if(0<(this.DirtyFlags&_Dirty.Arrange)||!h||!rect.isEqual(h,b)){h=this.PreviousConstraint;this.IsContainer&&!h&&this._Measure(size.fromRect(b),f);this.SetLayoutClip(void 0);var h=rect.copyTo(b),e=a.Margin;e&&rect.shrinkByThickness(h,e);this.UpdateTransform();this.UpdateProjection();this.UpdateBounds();var n=size.copyTo(this.HiddenDesire),e=this.CoerceSize(size.fromRect(h)),g=this.CoerceSize(new size),s=a.HorizontalAlignment,p=a.VerticalAlignment;s===d.HorizontalAlignment.Stretch&&(g.Width=Math.max(g.Width,
e.Width));p===d.VerticalAlignment.Stretch&&(g.Height=Math.max(g.Height,e.Height));size.max(n,g);this.LayoutSlot=b;e=a.ArrangeOverride?a.ArrangeOverride(n):a._ArrangeOverride(n,f);s===d.HorizontalAlignment.Stretch&&(e.Width=Math.max(e.Width,g.Width));p===d.VerticalAlignment.Stretch&&(e.Height=Math.max(e.Height,g.Height));var k=!1,l=a.FlowDirection,k=(g=c.VisualParentNode)?g.XObject.FlowDirection!==l:c.ParentNode instanceof d.Controls.Primitives.PopupNode?c.ParentNode.XObject.FlowDirection!==l:l===
d.FlowDirection.RightToLeft,q=mat3.identity(this.LayoutXform);mat3.translate(q,h.X,h.Y);k&&(mat3.translate(q,n.Width,0),mat3.scale(q,-1,1));if(!f.Message){this.DirtyFlags&=~_Dirty.Arrange;l=this.VisualOffset;l.X=h.X;l.Y=h.Y;n=size.copyTo(this.RenderSize);a.UseLayoutRounding&&(e.Width=Math.round(e.Width),e.Height=Math.round(e.Height));size.copyTo(e,this.RenderSize);var F=this.CoerceSize(size.copyTo(e));size.min(F,e);if(g&&!(g instanceof d.Controls.CanvasNode)||this.IsLayoutContainer){var H=c.IsAttached&&
c.IsTopLevel;if(!H){switch(s){case d.HorizontalAlignment.Left:break;case d.HorizontalAlignment.Right:l.X+=h.Width-F.Width;break;case d.HorizontalAlignment.Center:l.X+=0.5*(h.Width-F.Width);break;default:l.X+=Math.max(0.5*(h.Width-F.Width),0)}switch(p){case d.VerticalAlignment.Top:break;case d.VerticalAlignment.Bottom:l.Y+=h.Height-F.Height;break;case d.VerticalAlignment.Center:l.Y+=0.5*(h.Height-F.Height);break;default:l.Y+=Math.max(0.5*(h.Height-F.Height),0)}}a.UseLayoutRounding&&(l.X=Math.round(l.X),
l.Y=Math.round(l.Y));q=mat3.identity(this.LayoutXform);mat3.translate(q,l.X,l.Y);k&&(mat3.translate(q,e.Width,0),mat3.scale(q,-1,1));p=new rect;p.Width=e.Width;p.Height=e.Height;s=rect.copyTo(h);s.X=Math.max(h.X-l.X,0);s.Y=Math.max(h.Y-l.Y,0);a.UseLayoutRounding&&(s.X=Math.round(s.X),s.Y=Math.round(s.Y));(H||rect.isRectContainedIn(p,s))&&size.isEqual(F,e)||(c instanceof d.Controls.CanvasNode||(!g||g instanceof d.Controls.CanvasNode)&&!this.IsContainer)||(c=this.CoerceSize(size.createInfinite()),c=
rect.fromSize(c),rect.intersection(s,c),this.SetLayoutClip(s));size.isEqual(n,e)||this.LastRenderSize||(this.LastRenderSize=n,this._PropagateFlagUp(m.DirtySizeHint))}else size.clear(this.RenderSize)}}}}};l.prototype.DoRender=function(b,f){if(this.TotalIsRenderVisible&&!(0.5>255*this.TotalOpacity)){var c=new rect;rect.copyTo(this.ExtentsWithChildren,c);rect.transform(c,this.RenderXform);rect.transform(c,b.CurrentTransform);rect.roundOut(c);rect.intersection(c,f);if(!rect.isEmpty(c)){b.Save();b.TransformMatrix(this.RenderXform);
b.CanvasContext.globalAlpha=this.TotalOpacity;var a=this.Node.XObject,h=b.CanvasContext,e=a.Clip;e&&(e.Draw(b),h.clip());if(e=a.Effect)h.save(),e.PreRender(b);a.Render&&a.Render(b,this,c);e&&h.restore();for(a=this.Node.GetVisualTreeEnumerator(d.VisualTreeDirection.ZFoward);a.MoveNext();)a.Current.LayoutUpdater.DoRender(b,c);b.Restore()}}};l.prototype.FindElementsInHostCoordinates=function(b){var f=[];this._FindElementsInHostCoordinates(this.Surface.TestRenderContext,b,f,!1);return f};l.prototype._FindElementsInHostCoordinates=
function(b,f,c,a){if(!this.ShouldSkipHitTest&&this.TotalIsRenderVisible&&this.TotalIsHitTestVisible&&!(0>=this.SurfaceBoundsWithChildren.Height)){var h=this.Node;b.Save();a&&b.TransformMatrix(this.RenderXform);if(this._InsideClip(b,f.X,f.Y)){c.unshift(h);for(a=h.GetVisualTreeEnumerator(d.VisualTreeDirection.ZFoward);a.MoveNext();)a.Current.LayoutUpdater._FindElementsInHostCoordinates(b,f,c,!0);h===c[0]&&(this.CanHitElement&&this._InsideObject(b,f.X,f.Y)||c.shift())}b.Restore()}};l.prototype.HitTestPoint=
function(b,f,c){if(!this.ShouldSkipHitTest&&this.TotalIsRenderVisible&&this.TotalIsHitTestVisible){b.Save();b.TransformMatrix(this.RenderXform);if(this._InsideClip(b,f.X,f.Y)){var a=this.Node;c.unshift(a);for(var h=!1,e=a.GetVisualTreeEnumerator(d.VisualTreeDirection.ZReverse);e.MoveNext();)if(e.Current.LayoutUpdater.HitTestPoint(b,f,c),a!==c[0]){h=!0;break}if(!(h||this.CanHitElement&&this._InsideObject(b,f.X,f.Y))&&c.shift()!==a)throw new Exception("Look at my code! -> FENode._HitTestPoint");}b.Restore()}};
l.prototype._InsideObject=function(b,f,c){if(this.IsNeverInsideObject)return!1;var a=new rect,h=this.Node.XObject;rect.set(a,0,0,h.ActualWidth,h.ActualHeight);rect.transform(a,b.CurrentTransform);return rect.containsPointXY(a,f,c)&&this._InsideLayoutClip(b,f,c)?this.Node.PostInsideObject?this.Node.PostInsideObject(b,this,f,c):!0:!1};l.prototype._InsideClip=function(b,f,c){var a=this.Node.XObject.Clip;if(!a)return!0;var h=a.GetBounds();rect.transform(h,b.CurrentTransform);return rect.containsPointXY(h,
f,c)?b.IsPointInClipPath(a,f,c):!1};l.prototype._InsideLayoutClip=function(b,f,c){var a=this.LayoutClip;if(!a)return!0;a=rect.copyTo(a);rect.transform(a,b.CurrentTransform);return rect.containsPointXY(a,f,c)};l.prototype.RenderLayoutClip=function(b){var f=this.CompositeLayoutClip;f&&b.ClipRect(f)};l.LayoutExceptionUpdater=void 0;return l}();d.LayoutUpdater=l;Nullstone.RegisterType(l,"LayoutUpdater")})(Fayde||(Fayde={}));
(function(d){var a=function(){function a(d){this.IsRoot=!1;this.XNodes={};d&&(this.IsRoot=d)}a.prototype.FindName=function(a){return this.XNodes[a]};a.prototype.RegisterName=function(a,c){var b=this.XNodes[a];if(b&&b!==c)throw new InvalidOperationException("Name is already registered.");this.XNodes[a]=c};a.prototype.UnregisterName=function(a){this.XNodes[a]=void 0};a.prototype.Absorb=function(a){a=a.XNodes;for(var c in a)this.RegisterName(c,a[c])};return a}();d.NameScope=a;Nullstone.RegisterType(a,
"NameScope")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(c,b,f,h,d,e){a.call(this);this._Key=c;this._Target=b;this._Property=f;this._PropertyName=h;this._ResChain=e}__extends(e,a);e.prototype.GetValue=function(c){c=this._GetValue(this._ResChain);c instanceof d.ResourceTarget&&(c=c.CreateResource());if(void 0===c)throw new XamlParseException("Could not resolve StaticResource: '"+this._Key.toString()+"'.");return c};e.prototype._GetValue=function(c){for(var b,f=this._Key,a=c.length-1;0<=a;a--)if(b=c[a].Get(f))return b;
c=this._Target;for(var e,a=c?c.XamlNode:null;a;){c=a.XObject;c instanceof d.FrameworkElement?e=c.Resources:c instanceof d.ResourceDictionary&&(e=c);if(e&&(b=e.Get(f)))return b;a=a.ParentNode}return App.Current.Resources.Get(f)};e.prototype.Resolve=function(c){var b=!1,f,a=this._Property;a&&(b=a.IsAttached,f=a.OwnerType);var d=this.GetValue(a);c.TrySetPropertyValue(this._Target,a,d,null,b,f,this._PropertyName)};return e}(d.Expression);d.StaticResourceExpression=a;Nullstone.RegisterType(a,"StaticResourceExpression")})(Fayde||
(Fayde={}));
(function(d){var a=function(a){function e(c,b,f){a.call(this);this._SetsParent=!1;this.SourceProperty=c;this.TargetProperty=b;this.TargetPropertyName=f}__extends(e,a);e.prototype.GetValue=function(c){c=this._Target;var b=c.TemplateOwner,f;b&&(f=b.GetValue(this.SourceProperty));return f=d.TypeConverter.ConvertObject(this.TargetProperty,f,c.constructor,!0)};e.prototype.OnAttached=function(c){a.prototype.OnAttached.call(this,c);this._Target=c;this._DetachListener();var b;this._Target instanceof d.Controls.ContentControl&&
(b=this._Target);b&&this.TargetProperty._ID===d.Controls.ContentControl.ContentProperty._ID&&(this._SetsParent=b._ContentSetsParent,b._ContentSetsParent=!1);this._AttachListener()};e.prototype.OnDetached=function(c){a.prototype.OnDetached.call(this,c);if(this._Listener){var b;this._Target instanceof d.Controls.ContentControl&&(b=this._Target);b&&(b._ContentSetsParent=this._SetsParent);this._DetachListener();this._Target=null}};e.prototype.OnSourcePropertyChanged=function(c,b){if(this.SourceProperty._ID===
b.Property._ID)try{this.IsUpdating=!0;var f=this.TargetProperty;try{this._Target.SetStoreValue(f,this.GetValue(null))}catch(a){this._Target.SetStoreValue(f,f.DefaultValue)}}catch(d){}finally{this.IsUpdating=!1}};e.prototype._AttachListener=function(){var c=this,b=this._Target.TemplateOwner;b&&(this._Listener=this.SourceProperty.Store.ListenToChanged(b,this.SourceProperty,function(b,a){return c.OnSourcePropertyChanged(b,a)},this))};e.prototype._DetachListener=function(){this._Listener&&(this._Listener.Detach(),
this._Listener=null)};return e}(d.Expression);d.TemplateBindingExpression=a;Nullstone.RegisterType(a,"TemplateBindingExpression")})(Fayde||(Fayde={}));
(function(d){(function(a){a[a.Logical=0]="Logical";a[a.LogicalReverse=1]="LogicalReverse";a[a.ZFoward=2]="ZFoward";a[a.ZReverse=3]="ZReverse"})(d.VisualTreeDirection||(d.VisualTreeDirection={}));var a=function(){function a(d){this.ParentNode=null;this.Name="";this.NameScope=null;this.IsShareable=!1;this._OwnerNameScope=null;this._LogicalChildren=[];this._IAMonitors=this._DCMonitors=null;this._DataContext=void 0;this._IsEnabled=!0;this.IsAttached=!1;this.XObject=d}Object.defineProperty(a.prototype,
"DataContext",{get:function(){return this._DataContext},set:function(a){var c=this._DataContext;c!==a&&(this._DataContext=a,this.OnDataContextChanged(c,a))},enumerable:!0,configurable:!0});a.prototype.OnDataContextChanged=function(a,c){for(var b=this._LogicalChildren,f=b.length,h=null,d=0;d<f;d++)h=b[d],h.DataContext=c;if(b=this._DCMonitors)for(f=b.length,d=0;d<f;d++)b[d].Callback(c)};a.prototype.MonitorDataContext=function(a){var c=this._DCMonitors;c||(this._DCMonitors=c=[]);var b={Callback:a,Detach:null,
Detach:function(){var f=c.indexOf(b);-1<f&&c.splice(f,1)}};this._DCMonitors.push(b);return b};Object.defineProperty(a.prototype,"IsEnabled",{get:function(){return this._IsEnabled},set:function(a){a=!1!==a;var c=this._IsEnabled;c!==a&&(this._IsEnabled=a,this.OnIsEnabledChanged(c,a))},enumerable:!0,configurable:!0});a.prototype.OnIsEnabledChanged=function(a,c){for(var b=this._LogicalChildren,f=b.length,h=null,d=0;d<f;d++)h=b[d],h.IsEnabled=c};a.prototype.FindName=function(a){var c=this.FindNameScope();
if(c)return c.FindName(a)};a.prototype.SetName=function(a){this.Name=a;var c=this.FindNameScope();c&&c.RegisterName(a,this)};a.prototype.FindNameScope=function(){if(this._OwnerNameScope)return this._OwnerNameScope;for(var a=this,c;a;){if(c=a.NameScope)return this._OwnerNameScope=c;a=a.ParentNode}};a.prototype.SetIsAttached=function(a){this.IsAttached!==a&&(this.IsAttached=a,this.OnIsAttachedChanged(a))};a.prototype.OnIsAttachedChanged=function(a){for(var c=this._LogicalChildren,b=c.length,f=null,
h=0;h<b;h++)f=c[h],f.SetIsAttached(a);if(c=this._IAMonitors)for(b=c.length,h=0;h<b;h++)c[h].Callback(a)};a.prototype.MonitorIsAttached=function(a){var c=this._IAMonitors;c||(this._IAMonitors=c=[]);var b={Callback:a,Detach:null,Detach:function(){var f=c.indexOf(b);-1<f&&c.splice(f,1)}};this._IAMonitors.push(b);return b};a.prototype.AttachTo=function(a,c){if(this.ParentNode&&this.IsShareable)return!0;for(var b={ParentNode:a,ChildNode:this,Name:""},f=a;f;){if(f===this)return c.Message="Cycle found.",
c.Data=b,c.Number=BError.Attach,!1;f=f.ParentNode}if(this.ParentNode){if(this.ParentNode===a)return!0;c.Message="Element is already a child of another element.";c.Data=b;c.Number=BError.Attach;return!1}var f=a.FindNameScope(),h=this.NameScope;if(h)h.IsRoot||(f.Absorb(h),this.NameScope=null,this._OwnerNameScope=f);else if(f){if(h=this.Name){var d=f.FindName(h);if(d&&d!==this)return c.Message="Name is already registered in parent namescope.",b.Name=h,c.Data=b,c.Number=BError.Attach,!1;f.RegisterName(h,
this)}this._OwnerNameScope=f}b=this.ParentNode;this.ParentNode=a;this.OnParentChanged(b,a);a._LogicalChildren.push(this);this.SetIsAttached(a.IsAttached);return!0};a.prototype.Detach=function(){if(this.Name&&!this.NameScope){var a=this.FindNameScope();a&&a.UnregisterName(this.Name)}this._OwnerNameScope=null;this.SetIsAttached(!1);a=this.ParentNode;this.ParentNode=null;if(a){var c=a._LogicalChildren.indexOf(this);-1<c&&a._LogicalChildren.splice(c,1);this.OnParentChanged(a,null)}};a.prototype.OnParentChanged=
function(a,c){};a.prototype.GetInheritedEnumerator=function(){};a.prototype.GetVisualTreeEnumerator=function(a){};a.SetShareable=function(a){a.IsShareable=!0};return a}();d.XamlNode=a;Nullstone.RegisterType(a,"XamlNode")})(Fayde||(Fayde={}));
(function(d){var a=function(){function a(){this.TemplateOwner=null;this._ID=a._LastID++;this.XamlNode=this.CreateNode()}a.prototype.CreateNode=function(){return new d.XamlNode(this)};Object.defineProperty(a.prototype,"Name",{get:function(){return this.XamlNode.Name},enumerable:!0,configurable:!0});a.prototype.Clone=function(){var a=new this.constructor;a.CloneCore(this);return a};a.prototype.CloneCore=function(a){};a.prototype.IsInheritable=function(a){return!1};a._LastID=0;return a}();d.XamlObject=
a;Nullstone.RegisterType(a,"XamlObject")})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype.GetValue=function(b){return void 0!==b.Local?b.Local:0};c.prototype.GetValuePrecedence=function(b){return a.PropertyPrecedence.LocalValue};c.prototype.SetLocalValue=function(b,f){var c=b.Local;b.Local=f;c!==f&&this.OnPropertyChanged(b,a.PropertyPrecedence.LocalValue,c,f)};c.prototype.SetLocalStyleValue=function(b,f){};c.prototype.SetImplicitStyle=function(b,f){};c.prototype.ClearValue=function(b,
f){};return c}(a.PropertyStore);a.ActualSizeStore=d;d.Instance=new d})(d.Providers||(d.Providers={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype.GetValue=function(b){var f=d.prototype.GetValue.call(this,b);void 0===f&&(f=b.InheritedValue);return f};c.prototype.GetValuePrecedence=function(b){var f=d.prototype.GetValuePrecedence.call(this,b);return f<a.PropertyPrecedence.InheritedDataContext?f:void 0!==b.InheritedValue?a.PropertyPrecedence.InheritedDataContext:a.PropertyPrecedence.DefaultValue};c.prototype.EmitInheritedChanged=function(b,
f){var c=b.InheritedValue;b.InheritedValue=f;b.Precedence>=a.PropertyPrecedence.InheritedDataContext&&c!==f&&this.OnPropertyChanged(b,a.PropertyPrecedence.InheritedDataContext,c,f)};c.prototype.CreateStorage=function(b,f){return{OwnerNode:b.XamlNode,Property:f,Precedence:a.PropertyPrecedence.DefaultValue,Animations:void 0,Local:void 0,LocalStyleValue:void 0,ImplicitStyleValue:void 0,InheritedValue:void 0,PropListeners:void 0}};return c}(a.PropertyStore);a.DataContextStore=d;d.Instance=new d})(d.Providers||
(d.Providers={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.apply(this,arguments)}__extends(c,e);c.prototype.GetValue=function(b){var f;return void 0!==(f=b.Local)||void 0!==(f=b.LocalStyleValue)||void 0!==(f=b.ImplicitStyleValue)||void 0!==(f=b.InheritedValue)?f:b.Property.DefaultValue};c.prototype.GetValuePrecedence=function(b){var f=e.prototype.GetValuePrecedence.call(this,b);return f<a.PropertyPrecedence.Inherited?f:void 0!==b.InheritedValue?a.PropertyPrecedence.Inherited:a.PropertyPrecedence.DefaultValue};
c.prototype.OnPropertyChanged=function(b,f,c,d){e.prototype.OnPropertyChanged.call(this,b,f,c,d);f<=a.PropertyPrecedence.Inherited&&this.Propagate(b.OwnerNode,b.Property,d)};c.prototype.CreateStorage=function(b,f){return{OwnerNode:b.XamlNode,Property:f,Precedence:a.PropertyPrecedence.DefaultValue,Animations:void 0,Local:void 0,LocalStyleValue:void 0,ImplicitStyleValue:void 0,InheritedValue:void 0,PropListeners:void 0}};c.PropagateInheritedOnAdd=function(b,f){for(var a=f.XObject,e=c.Instance,g=a._PropertyStorage,
p,k=d.InheritableOwner.AllInheritedProperties,m=k.length,l,q,r=0;r<m;r++){l=k[r];for(p=b.XamlNode;p&&!p.XObject.IsInheritable(l);)p=p.ParentNode;p&&(q=p.XObject.GetValue(l),q!==l.DefaultValue&&((p=g[l._ID])||(g[l._ID]=e.CreateStorage(a,l)),e.SetInheritedValue(f,l,q)||e.Propagate(f,l,q)))}};c.ClearInheritedOnRemove=function(b,f){for(var a=c.Instance,e=d.InheritableOwner.AllInheritedProperties,g=e.length,p,k=0;k<g;k++)p=e[k],a.SetInheritedValue(f,p,void 0)||a.Propagate(f,p,void 0)};c.prototype.Propagate=
function(b,f,c){b=b.GetInheritedEnumerator();for(var a;b.MoveNext();)a=b.Current,this.SetInheritedValue(a,f,c)||this.Propagate(a,f,c)};c.prototype.SetInheritedValue=function(b,f,c){b=b.XObject;if(!b.IsInheritable(f))return!1;b=a.GetStorage(b,f);if(b.Precedence<a.PropertyPrecedence.Inherited)return b.InheritedValue=c,!0;var d=b.InheritedValue;void 0===d&&(d=f.DefaultValue);b.InheritedValue=c;b.Precedence=a.PropertyPrecedence.Inherited;this.OnPropertyChanged(b,a.PropertyPrecedence.Inherited,d,c);return!0};
return c}(a.PropertyStore);a.InheritedStore=g;g.Instance=new g})(d.Providers||(d.Providers={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.apply(this,arguments)}__extends(c,e);c.prototype.GetValue=function(b){return!1===b.InheritedValue?!1:e.prototype.GetValue.call(this,b)};c.prototype.GetValuePrecedence=function(b){return!1===b.InheritedValue?a.PropertyPrecedence.IsEnabled:e.prototype.GetValuePrecedence.call(this,b)};c.prototype.SetLocalValue=function(b,f){var c=b.Local;b.Local=f;c!==f&&!1!==b.InheritedValue&&this.OnPropertyChanged(b,a.PropertyPrecedence.LocalValue,c,f)};c.prototype.OnPropertyChanged=
function(b,f,c,a){e.prototype.OnPropertyChanged.call(this,b,f,c,a);b.OwnerNode.OnIsEnabledChanged(c,a)};c.prototype.CreateStorage=function(b,f){return{OwnerNode:b.XamlNode,Property:f,Precedence:a.PropertyPrecedence.DefaultValue,InheritedValue:!0,Animations:void 0,Local:void 0,LocalStyleValue:void 0,ImplicitStyleValue:void 0,PropListeners:void 0}};c.prototype.EmitInheritedChanged=function(b,f){var c=b.InheritedValue;!1!==f?(b.Precedence=e.prototype.GetValuePrecedence.call(this,b),b.InheritedValue=
!0):b.InheritedValue=!1;c!==f&&this.OnPropertyChanged(b,a.PropertyPrecedence.IsEnabled,c,f)};c.EmitInheritedChanged=function(b,f){var c=d.Controls.Control.IsEnabledProperty,a=d.Providers.GetStorage(b.XObject,c);c.Store.EmitInheritedChanged(a,f)};return c}(a.PropertyStore);a.IsEnabledStore=g;g.Instance=new g})(d.Providers||(d.Providers={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function a(){this._IsSealed=!1;this._TargetNullValue=this._FallbackValue=this._StringFormat=void 0}Object.defineProperty(a.prototype,"StringFormat",{get:function(){return this._StringFormat},set:function(c){this.CheckSealed();this._StringFormat=c},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"FallbackValue",{get:function(){return this._FallbackValue},set:function(c){this.CheckSealed();this._FallbackValue=c},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"TargetNullValue",{get:function(){return this._TargetNullValue},set:function(c){this.CheckSealed();this._TargetNullValue=c},enumerable:!0,configurable:!0});a.prototype.CheckSealed=function(){if(this._IsSealed)throw new InvalidOperationException("The Binding cannot be changed after it has been used.");};a.prototype.Seal=function(){this._IsSealed=!0};return a}();a.BindingBase=d;Nullstone.RegisterType(d,"BindingBase")})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(b,f,c){e.call(this);this._TwoWayTextBox=null;this._Cached=!1;this._CachedValue=void 0;this._Binding=b;this.Target=f;this.Property=c;this.Target instanceof d.Controls.TextBox&&b.Mode===a.BindingMode.TwoWay&&(this._TwoWayTextBox=this.Target);this._IsBoundToAnyDataContext=!this.Binding.ElementName&&!this.Binding.Source;f=c===d.DependencyObject.DataContextProperty||c.GetTargetType()===d.IEnumerable_||c.GetTargetType()===d.Data.ICollectionView_;f=
this.PropertyPathWalker=new a.PropertyPathWalker(b.Path.ParsePath,b.BindsDirectlyToSource,f,this._IsBoundToAnyDataContext);b.Mode!==a.BindingMode.OneTime&&f.Listen(this)}__extends(c,e);Object.defineProperty(c.prototype,"Binding",{get:function(){return this._Binding},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"DataSource",{get:function(){return this.PropertyPathWalker.Source},enumerable:!0,configurable:!0});c.prototype.IsBrokenChanged=function(){this.Refresh()};c.prototype.ValueChanged=
function(){this.Refresh()};c.prototype.GetValue=function(b){if(this._Cached)return this._CachedValue;this._Cached=!0;this._CachedValue=this.PropertyPathWalker.IsPathBroken?null:this.PropertyPathWalker.ValueInternal;try{this._CachedValue=this._ConvertToType(b,this._CachedValue)}catch(f){this._CachedValue=b.DefaultValue}return this._CachedValue};c.prototype.OnAttached=function(b){this.IsAttached||(e.prototype.OnAttached.call(this,b),this._CalculateDataSource(),this._TwoWayTextBox&&this._TwoWayTextBox.LostFocus.Subscribe(this._TextBoxLostFocus,
this),this.Binding.Mode===a.BindingMode.TwoWay&&this.Property.IsCustom&&(this._PropertyListener=this.Property.Store.ListenToChanged(this.Target,this.Property,this._UpdateSourceCallback,this)))};c.prototype._UpdateSourceCallback=function(b,f){try{this.IsUpdating||this._TryUpdateSourceObject(this.Target.GetValue(this.Property))}catch(c){}};c.prototype.OnDetached=function(b){this.IsAttached&&(e.prototype.OnDetached.call(this,b),this._TwoWayTextBox&&this._TwoWayTextBox.LostFocus.Unsubscribe(this._TextBoxLostFocus,
this),this._IsBoundToAnyDataContext&&((b=this._DataContextPropertyMonitor)&&b.Detach(),this.SetDataContextSource(null)),this._PropertyListener&&(this._PropertyListener.Detach(),this._PropertyListener=null),this.PropertyPathWalker.Update(null))};c.prototype._TextBoxLostFocus=function(){this._UpdateSourceObject()};c.prototype._TryUpdateSourceObject=function(b){this.IsUpdating||this.Binding.UpdateSourceTrigger!==a.UpdateSourceTrigger.Default||this._UpdateSourceObject(b,!1)};c.prototype._UpdateSourceObject=
function(b,f){void 0===b&&(b=this.Target.GetValue(this.Property));var c=this.Binding;if(c.Mode===a.BindingMode.TwoWay){var d,e=this.IsUpdating,g=this.PropertyPathWalker.FinalNode;try{if(!0!==f&&this._TwoWayTextBox&&App.Current.MainSurface.FocusedNode===this.Target.XamlNode||this.PropertyPathWalker.IsPathBroken)return;if(c.TargetNullValue)try{c.TargetNullValue===b&&(b=null)}catch(k){}var m=c.Converter;m&&(b=m.ConvertBack(b,g.ValueType,c.ConverterParameter,c.ConverterCulture));try{b&&(b=this._ConvertFromTargetToSource(b))}catch(l){return}if(!this._CachedValue&&
!b)return;this.IsUpdating=!0;g.SetValue(b);this._CachedValue=b}catch(q){c.ValidatesOnExceptions&&(d=q)}finally{this.IsUpdating=e}this._MaybeEmitError(void 0,d)}};c.prototype._MaybeEmitError=function(b,f){};c.prototype._ConvertFromTargetToSource=function(b){NotImplemented("BindingExpressionBase._ConvertFromTargetToSource");return b};c.prototype._ConvertFromSourceToTarget=function(b){NotImplemented("BindingExpressionBase._ConvertFromSourceToTarget");return b};c.prototype._ConvertToType=function(b,f){try{var c=
this.Binding;!this.PropertyPathWalker.IsPathBroken&&c.Converter&&(f=c.Converter.Convert(f,this.Property.GetTargetType(),c.ConverterParameter,c.ConverterCulture));if(f===d.UnsetValue||this.PropertyPathWalker.IsPathBroken)f=c.FallbackValue,void 0===f&&(f=b.DefaultValue);else if(null==f)f=c.TargetNullValue,null==f&&(this._IsBoundToAnyDataContext&&!c.Path.Path)&&(f=b.DefaultValue);else{var a=c.StringFormat;a&&(0>a.indexOf("{0")&&(a="{0:"+a+"}"),f=StringEx.Format(a,f))}}catch(e){return d.TypeConverter.ConvertObject(b,
c.FallbackValue,this.Target.constructor,!0)}return f};c.prototype._AttachToNotifyError=function(b){NotImplemented("BindingExpressionBase._AttachToNotifyError")};c.prototype._NotifyErrorsChanged=function(b,f){NotImplemented("BindingExpressionBase._NotifyErrorsChanged")};c.prototype._CalculateDataSource=function(){var b=this,f;this.Binding.Source?this.PropertyPathWalker.Update(this.Binding.Source):null!=this.Binding.ElementName?(f=this._FindSourceByElementName(),this._SourceAvailableMonitor=this.Target.XamlNode.MonitorIsAttached(function(f){return b._OnSourceAvailable()}),
this.PropertyPathWalker.Update(f)):this.Binding.RelativeSource&&this.Binding.RelativeSource.Mode===a.RelativeSourceMode.Self?this.PropertyPathWalker.Update(this.Target):this.Binding.RelativeSource&&this.Binding.RelativeSource.Mode===a.RelativeSourceMode.TemplatedParent?this.PropertyPathWalker.Update(this.Target.TemplateOwner):this.SetDataContextSource(this.Target)};c.prototype._OnSourceAvailable=function(){this._SourceAvailableMonitor.Detach();var b=this._FindSourceByElementName();b&&this.PropertyPathWalker.Update(b);
this._Invalidate();this.Target.SetValue(this.Property,this)};c.prototype._FindSourceByElementName=function(){var b=this.Target,f;f=this.Binding.ElementName;for(var b=b?b.XamlNode:null,c;b;){if(f=b.FindName(f))return f.XObject;b.XObject.TemplateOwner||(c=b.ParentNode)&&d.Controls.ItemsControl.GetItemsOwner(c.XObject);break}};c.prototype.SetDataContextSource=function(b){var f=this;this._DataContextPropertyMonitor&&(this._DataContextPropertyMonitor.Detach(),this._DataContextPropertyMonitor=null);var c=
this._DataContextSourceNode=b.XamlNode;c&&(this._DataContextPropertyMonitor=b.XamlNode.MonitorDataContext(function(b){return f._DataContextChanged(b)}),this.PropertyPathWalker.Update(c?c.DataContext:void 0))};c.prototype._DataContextChanged=function(b){try{this.PropertyPathWalker.Update(b),this.Binding.Mode===a.BindingMode.OneTime&&this.Refresh()}catch(f){Warn(f.message)}};c.prototype._Invalidate=function(){this._Cached=!1;this._CachedValue=void 0};c.prototype.Refresh=function(){var b;if(this.IsAttached){var f=
this.IsUpdating;try{this.IsUpdating=!0,this._Invalidate(),this.Target.SetValue(this.Property,this)}catch(c){this.Binding.ValidatesOnExceptions&&(b=c,b instanceof TargetInvocationException&&(b=b.InnerException))}finally{this.IsUpdating=f}this._MaybeEmitError(void 0,b)}};return c}(d.Expression);a.BindingExpressionBase=g;Nullstone.RegisterType(g,"BindingExpressionBase")})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));
(function(d){(d.Data||(d.Data={})).ICollectionView_=Nullstone.RegisterInterface("ICollectionView")})(Fayde||(Fayde={}));(function(d){(function(a){var d=function(){return function(d){this.Mode=a.RelativeSourceMode.TemplatedParent;d&&(this.Mode=d)}}();a.RelativeSource=d;Nullstone.RegisterType(d,"RelativeSource")})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));(function(d){d.Run=function(){};d.Start=function(a,d,e,c){a=App.Current=new a;a.LoadResources(d);a.LoadInitial(c,e)}})(Fayde||(Fayde={}));
var App=function(){function d(){this.Loaded=new MulticastEvent;this.Address=null;this._IsRunning=!1;this._Storyboards=[];this._ClockTimer=new Fayde.ClockTimer;this.MainSurface=new Surface(this);Object.defineProperty(this,"Resources",{value:new Fayde.ResourceDictionary,writable:!1});this.Resources.XamlNode.NameScope=new Fayde.NameScope(!0);this.DebugInterop=new Fayde.DebugInterop(this)}Object.defineProperty(d.prototype,"RootVisual",{get:function(){return this.MainSurface._RootLayer},enumerable:!0,
configurable:!0});d.prototype.LoadResources=function(a){Fayde.JsonParser.ParseResourceDictionary(this.Resources,a)};d.prototype.LoadInitial=function(a,d){this.Address=new Uri(document.URL);this.MainSurface.Register(a);this.NavService=new Fayde.Navigation.NavService(this);var e=new Fayde.NameScope(!0),c=Fayde.JsonParser.Parse(d,void 0,e);c instanceof Fayde.UIElement&&(c.XamlNode.NameScope=e,this.MainSurface.Attach(c));this.StartEngine();this.EmitLoaded()};d.prototype.EmitLoaded=function(){this.Loaded.RaiseAsync(this,
EventArgs.Empty)};d.prototype.StartEngine=function(){this._ClockTimer.RegisterTimer(this)};d.prototype.OnTicked=function(a,d){this.DebugInterop.NumFrames++;this.ProcessStoryboards(a,d);this.Update();this.Render()};d.prototype.StopEngine=function(){this._ClockTimer.UnregisterTimer(this)};d.prototype.ProcessStoryboards=function(a,d){for(var e=this._Storyboards,c=e.length,b=0;b<c;b++)e[b].Update(d)};d.prototype.Update=function(){this._IsRunning||(this._IsRunning=!0,this.MainSurface.ProcessDirtyElements(),
this._IsRunning=!1)};d.prototype.Render=function(){this.MainSurface.Render()};d.prototype.RegisterStoryboard=function(a){var d=this._Storyboards;-1===d.indexOf(a)&&d.push(a)};d.prototype.UnregisterStoryboard=function(a){var d=this._Storyboards;a=d.indexOf(a);-1!==a&&d.splice(a,1)};d.GetGenericResourceDictionary=function(){var a=d._GenericResourceDictionary;a||(d._GenericResourceDictionary=a=d.GetGenericResourceDictionaryImpl());return a};d.GetGenericResourceDictionaryImpl=function(){};d.prototype.__DebugLayers=
function(){return this.MainSurface.__DebugLayers()};d.prototype.__GetById=function(a){return this.MainSurface.__GetById(a)};d.Version="0.9.4.0";d._GenericResourceDictionary=null;return d}();Nullstone.RegisterType(App,"App");
(function(d){var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,5)}}(),g=function(){function d(){this._Listeners=[];this._LastTime=0}d.prototype.RegisterTimer=function(c){var b=this._Listeners;-1<b.indexOf(c)||(b.push(c),1===b.length&&this._RequestAnimationTick())};d.prototype.UnregisterTimer=function(c){var b=this._Listeners;c=b.indexOf(c);
-1<c&&b.splice(c,1)};d.prototype._DoTick=function(){var c=(new Date).getTime(),b=this._LastTime;this._LastTime=c;var f=this._Listeners,a=f.length;if(0!==a){for(var d=0;d<a;d++)f[d].OnTicked(b,c);this._RequestAnimationTick()}};d.prototype._RequestAnimationTick=function(){var c=this;a(function(){return c._DoTick()})};return d}();d.ClockTimer=g;Nullstone.RegisterType(g,"ClockTimer")})(Fayde||(Fayde={}));
(function(d){var a=function(){function a(d){this.NumFrames=0;this.App=d;this.Surface=d.MainSurface;this.RegisterHitTestDebugService()}a.prototype.LayoutUpdated=function(){this._Cache=null};Object.defineProperty(a.prototype,"IsCacheInvalidated",{get:function(){return null==this._Cache},enumerable:!0,configurable:!0});a.prototype.InvalidateCache=function(){this._DPCache=this._Cache=null};a.prototype.GetCache=function(){this._Cache||this.GenerateCache();return JSON.stringify(this._Cache,a._StringifyReplacer)};
a.prototype.GenerateCache=function(){this._Cache={Node:null,Visual:null,Children:[],ID:0,Name:"",TypeName:"Surface"};for(var a=this.Surface._Layers,c=a.length,b=0;b<c;b++){var f=this.CreateDebugInteropCacheItem(a[b]);this._Cache.Children.push(f);this.PopulateCacheChildren(f)}};a.prototype.PopulateCacheChildren=function(a){for(var c=a.Node.GetVisualTreeEnumerator(),b;c.MoveNext();)b=c.Current,b=this.CreateDebugInteropCacheItem(b),a.Children.push(b),this.PopulateCacheChildren(b);return[]};a.prototype.CreateDebugInteropCacheItem=
function(a){var c=a.XObject;return{Node:a,Visual:c,Children:[],ID:c._ID,TypeName:c.constructor._TypeName,Name:c.Name}};a.prototype.GetDPCache=function(){this._DPCache||this.GenerateDPCache();return JSON.stringify(this._DPCache,a._StringifyReplacer)};a.prototype.GenerateDPCache=function(){var a=[],c=DependencyProperty._IDs,b;for(b in c)a.push(c[b]);this._DPCache=a};a.prototype.GetStorages=function(d){d=this.GetById(d).Visual._PropertyStorage;var c,b=[],f;for(f in d)c=d[f],null!=c&&b.push(c);f=b.map(function(b){return{PropertyID:b.Property._ID,
Precedence:b.Precedence,Local:b.Local,LocalStyleValue:b.LocalStyleValue,ImplicitStyleValue:b.ImplicitStyleValue,InheritedValue:b.InheritedValue}});return JSON.stringify(f,a._StringifyReplacer)};a.prototype.GetLayoutMetrics=function(a){a=this.GetById(a).Visual.XamlNode.LayoutUpdater;a={ActualHeight:a.ActualHeight,ActualWidth:a.ActualWidth,LayoutSlot:a.LayoutSlot,VisualOffset:a.VisualOffset,LayoutClip:a.LayoutClip,HiddenDesire:a.HiddenDesire,DesiredSize:a.DesiredSize,RenderSize:a.RenderSize,AbsoluteXform:Array.prototype.slice.call(a.AbsoluteXform),
LayoutXform:Array.prototype.slice.call(a.LayoutXform),LocalXform:Array.prototype.slice.call(a.LocalXform),RenderXform:Array.prototype.slice.call(a.RenderXform),TotalOpacity:a.TotalOpacity,TotalIsRenderVisible:a.TotalIsRenderVisible,TotalIsHitTestVisible:a.TotalIsHitTestVisible,TotalRenderProjection:a.TotalRenderProjection};return JSON.stringify(a)};a.prototype.GetById=function(a,c){for(var b=c?c.Children:this._Cache.Children,f=b.length,h,d=0;d<f;d++)if(h=b[d],h.Visual._ID===a||(h=this.GetById(a,h)))return h};
a.prototype.GetResetPerfInfo=function(){var a=this.NumFrames;this.NumFrames=0;var c=this.LastFrameTime||new Date;this.LastFrameTime=new Date;c=this.LastFrameTime.getTime()-c.getTime();return a.toString()+";"+c.toString()};a.prototype.RegisterHitTestDebugService=function(){var a=this;this.Surface.HitTestCallback=function(c){return a._CachedHitTest=c}};a.prototype.GetVisualIDsInHitTest=function(){if(!this._CachedHitTest)return"[]";var a=this._CachedHitTest.map(function(c){return c.XObject._ID});return JSON.stringify(a)};
a._StringifyReplacer=function(a,c){if(c instanceof d.Media.SolidColorBrush)return{Color:c.Color.toString()};if(!(c instanceof d.XamlNode||c instanceof d.XamlObject)){if(c instanceof DependencyProperty){var b=c.OwnerType,f=c.GetTargetType();return{ID:c._ID,Name:c.Name,OwnerTypeName:b?b._TypeName:null,TargetTypeName:f instanceof Enum?"Enum":f?f._TypeName:null,IsReadOnly:!0===c.IsReadOnly,IsAttached:!0===c.IsAttached}}return c}};return a}();d.DebugInterop=a})(Fayde||(Fayde={}));
var Exception=function(){function d(a){this.Message=a}d.prototype.toString=function(){var a=this.constructor._TypeName;return a?a+": "+this.Message:this.Message};return d}();Nullstone.RegisterType(Exception,"Exception");var ArgumentException=function(d){function a(a){d.call(this,a)}__extends(a,d);return a}(Exception);Nullstone.RegisterType(ArgumentException,"ArgumentException");var InvalidOperationException=function(d){function a(a){d.call(this,a)}__extends(a,d);return a}(Exception);
Nullstone.RegisterType(InvalidOperationException,"InvalidOperationException");var XamlParseException=function(d){function a(a){d.call(this,a)}__extends(a,d);return a}(Exception);Nullstone.RegisterType(XamlParseException,"XamlParseException");var NotSupportedException=function(d){function a(a){d.call(this,a)}__extends(a,d);return a}(Exception);Nullstone.RegisterType(NotSupportedException,"NotSupportedException");
var IndexOutOfRangeException=function(d){function a(a){d.call(this,a.toString())}__extends(a,d);return a}(Exception);Nullstone.RegisterType(IndexOutOfRangeException,"IndexOutOfRangeException");var AttachException=function(d){function a(a,e){d.call(this,a);this.Data=e}__extends(a,d);return a}(Exception);Nullstone.RegisterType(AttachException,"AttachException");var InvalidJsonException=function(d){function a(a,e){d.call(this,"Invalid json.");this.JsonText=a;this.InnerException=e}__extends(a,d);return a}(Exception);
Nullstone.RegisterType(InvalidJsonException,"InvalidJsonException");var TargetInvocationException=function(d){function a(a,e){d.call(this,a);this.InnerException=e}__extends(a,d);return a}(Exception);Nullstone.RegisterType(TargetInvocationException,"TargetInvocationException");var UnknownTypeException=function(d){function a(a){d.call(this,a);this.FullTypeName=a}__extends(a,d);return a}(Exception);Nullstone.RegisterType(UnknownTypeException,"UnknownTypeException");
(function(d){var a=function(){function a(d){var c=this;this.CurrentTransform=null;this._Transforms=[];this.CanvasContext=d;d.hasOwnProperty("currentTransform")||Object.defineProperty(d,"currentTransform",{get:function(){return c.CurrentTransform},set:function(b){d.setTransform(b[0],b[1],b[3],b[4],b[2],b[5]);c.CurrentTransform=b}})}a.prototype.DoRender=function(a,c){this.Clear(c);this.CanvasContext.save();this.ClipRect(c);if(a)for(var b=a.length,f=0;f<b;f++)a[f].LayoutUpdater.DoRender(this,c);this.CanvasContext.restore()};
a.prototype.Save=function(){this.CanvasContext.save();var a=this.CurrentTransform;this._Transforms.push(a);this.CurrentTransform=null==a?mat3.identity():mat3.create(a)};a.prototype.Restore=function(){this.CurrentTransform=this._Transforms.pop();this.CanvasContext.restore()};a.prototype.ClipRect=function(a){var c=this.CanvasContext;c.beginPath();c.rect(a.X,a.Y,a.Width,a.Height);c.clip()};a.prototype.ClipGeometry=function(a){a.Draw(this);this.CanvasContext.clip()};a.prototype.ClipRawPath=function(a){a.Draw(this);
this.CanvasContext.clip()};a.prototype.IsPointInPath=function(a,c){return this.CanvasContext.isPointInPath(a,c)};a.prototype.IsPointInClipPath=function(a,c,b){a.Draw(this);return this.CanvasContext.isPointInPath(c,b)};a.prototype.Rect=function(a){var c=this.CanvasContext;c.beginPath();c.rect(a.X,a.Y,a.Width,a.Height)};a.prototype.Fill=function(a,c){var b=this.CanvasContext;a.SetupBrush(b,c);b.fillStyle=a.ToHtml5Object();b.fill()};a.prototype.FillRect=function(a,c){var b=this.CanvasContext;a.SetupBrush(b,
c);b.beginPath();b.rect(c.X,c.Y,c.Width,c.Height);b.fillStyle=a.ToHtml5Object();b.fill()};a.prototype.StrokeAndFillRect=function(a,c,b,f,h){var d=this.CanvasContext;a.SetupBrush(d,b);f.SetupBrush(d,h);d.beginPath();d.rect(h.X,h.Y,h.Width,h.Height);d.fillStyle=f.ToHtml5Object();d.fill();d.lineWidth=c;d.strokeStyle=a.ToHtml5Object();d.stroke()};a.prototype.Stroke=function(a,c,b){var f=this.CanvasContext;a.SetupBrush(f,b);f.lineWidth=c;f.strokeStyle=a.ToHtml5Object();f.stroke()};a.prototype.Clear=function(a){this.CanvasContext.clearRect(a.X,
a.Y,a.Width,a.Height)};a.prototype.SetLineDash=function(a){var c=this.CanvasContext;c.setLineDash&&c.setLineDash(a)};a.prototype.PreTransformMatrix=function(a){var c=this.CurrentTransform;mat3.multiply(a,c,c);this.CanvasContext.setTransform(c[0],c[1],c[3],c[4],c[2],c[5]);this.CurrentTransform=c};a.prototype.PreTransform=function(a){a=a.Value;var c;a&&(c=a._Raw)&&(a=this.CurrentTransform,mat3.multiply(c,a,a),this.CanvasContext.setTransform(a[0],a[1],a[3],a[4],a[2],a[5]),this.CurrentTransform=a)};a.prototype.TransformMatrix=
function(a){var c=this.CurrentTransform;mat3.multiply(c,a,c);this.CanvasContext.setTransform(c[0],c[1],c[3],c[4],c[2],c[5]);this.CurrentTransform=c};a.prototype.Transform=function(a){a=a.Value;var c;a&&(c=a._Raw)&&(a=this.CurrentTransform,mat3.multiply(a,c,a),this.CanvasContext.setTransform(a[0],a[1],a[3],a[4],a[2],a[5]),this.CurrentTransform=a)};a.prototype.Translate=function(a,c){mat3.translate(this.CurrentTransform,a,c);this.CanvasContext.translate(a,c)};return a}();d.RenderContext=a;Nullstone.RegisterType(a,
"RenderContext")})(Fayde||(Fayde={}));var resizeTimeout,InputType;(function(d){d[d.NoOp=0]="NoOp";d[d.MouseUp=1]="MouseUp";d[d.MouseDown=2]="MouseDown";d[d.MouseLeave=3]="MouseLeave";d[d.MouseEnter=4]="MouseEnter";d[d.MouseMove=5]="MouseMove";d[d.MouseWheel=6]="MouseWheel"})(InputType||(InputType={}));
var Surface=function(){function d(a){this.TestRenderContext=new Fayde.RenderContext(d.TestCanvas.getContext("2d"));this._Layers=[];this._UpDirty=[];this._DownDirty=[];this._Ctx=this._Canvas=null;this._PercentageHeight=this._PercentageWidth=0;this._Extents=this._CanvasOffset=null;this._CapturedInputList=[];this._InputList=[];this._FocusedNode=null;this._FocusChangedEvents=[];this._UserInitiatedEvent=this._FirstUserInitiatedEvent=!1;this._PendingCapture=this._Captured=null;this._PendingReleaseCapture=
!1;this._CurrentPos=null;this._EmittingMouseEvent=!1;this._Cursor=Fayde.CursorType.Default;this._App=a;this._KeyInterop=Fayde.Input.KeyInterop.CreateInterop(this)}Object.defineProperty(d.prototype,"FocusedNode",{get:function(){return this._FocusedNode},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Extents",{get:function(){this._Extents||(this._Extents=size.fromRaw(this._Canvas.offsetWidth,this._Canvas.offsetHeight));return this._Extents},enumerable:!0,configurable:!0});d.prototype.Register=
function(a,d,e,c,b){this._Canvas=a;this._Ctx=this._Canvas.getContext("2d");this._RenderContext=new Fayde.RenderContext(this._Ctx);d?e||(e="Percentage"):(d=100,e="Percentage");c?b||(b="Percentage"):(c=100,b="Percentage");this._InitializeCanvas(a,d,e,c,b);this._CalculateOffset();this._RegisterEvents()};d.prototype._InitializeCanvas=function(a,d,e,c,b){var f=this,h=!1;"Percentage"===e?(h=!0,this._PercentageWidth=d):a.width=d;"Percentage"===b?(h=!0,this._PercentageHeight=c):a.height=c;h&&(this._ResizeCanvas(),
window.onresize=function(b){return f._HandleResize(window.event?window.event:b)})};d.prototype._CalculateOffset=function(){var a=0,d=0,e=this._Canvas;if(e.offsetParent){do a+=e.offsetLeft,d+=e.offsetTop;while(e=e.offsetParent)}this._CanvasOffset={left:a,top:d}};d.prototype._RegisterEvents=function(){var a=this,d=this._Canvas;d.addEventListener("mousedown",function(d){return a._HandleButtonPress(window.event?window.event:d)});d.addEventListener("mouseup",function(d){return a._HandleButtonRelease(window.event?
window.event:d)});d.addEventListener("mouseout",function(d){return a._HandleOut(window.event?window.event:d)});d.addEventListener("mousemove",function(d){return a._HandleMove(window.event?window.event:d)});d.addEventListener("mousewheel",function(d){return a._HandleWheel(window.event?window.event:d)});d.addEventListener("DOMMouseScroll",function(d){return a._HandleWheel(window.event?window.event:d)});this._KeyInterop.RegisterEvents()};d.prototype.Attach=function(a){this._RootLayer&&this.DetachLayer(this._RootLayer);
if(a){if(!(a instanceof Fayde.UIElement))throw new Exception("Unsupported top level element.");this._RootLayer=a;this.AttachLayer(a)}else this._Invalidate()};d.prototype.AttachLayer=function(a){var d=a.XamlNode;this._RootLayer===a?this._Layers.unshift(d):this._Layers.push(d);d.IsTopLevel=!0;d.SetSurface(this);a=d.LayoutUpdater;a.FullInvalidate(!0);a.InvalidateMeasure();d.SetIsAttached(!0);d.SetIsLoaded(!0)};d.prototype.DetachLayer=function(a){var d=a.XamlNode;d.IsTopLevel=!1;var e=this._InputList;
e[e.length-1]===d&&(this._InputList=[]);if(e=this._FocusedNode)for(;e;){if(e===d){this._FocusNode();break}e=e.VisualParentNode}a=this._Layers.indexOf(a.XamlNode);-1<a&&this._Layers.splice(a,1);d.SetIsLoaded(!1);d.SetIsAttached(!1);this._Invalidate(d.LayoutUpdater.SurfaceBoundsWithChildren)};d.prototype.ProcessDirtyElements=function(){var a=new BError,d=this._UpdateLayout(a);a.Message&&a.ThrowException();if(!d)return!1;this._App.DebugInterop&&this._App.DebugInterop.LayoutUpdated();return!0};d.prototype._UpdateLayout=
function(a){var d=this._Layers;if(!d)return!1;for(var e={MeasureList:[],ArrangeList:[],SizeList:[],Count:0,Updated:!0},c=!1,b=!1;250>e.Count&&e.Updated;){e.Updated=!1;for(var f=0;f<d.length;f++){var h=d[f].LayoutUpdater;if(h.HasMeasureArrangeHint()){var n=h.PreviousConstraint,s=size.copyTo(this.Extents);!h.IsContainer||n&&size.isEqual(n,s)||(h.InvalidateMeasure(),h.PreviousConstraint=s);h.UpdateLayer(e,a)}}c=c||0<this._DownDirty.length||0<this._UpDirty.length;this._ProcessDownDirtyElements();this._ProcessUpDirtyElements();
if(e.Updated||c)b=!0}250<=e.Count&&a&&(a.Message="UpdateLayout has entered infinite loop and has been aborted.");return b};d.prototype._ProcessDownDirtyElements=function(){for(var a=this._DownDirty,d;d=a[0];)if(d.InDownDirty){var e=d.Node.VisualParentNode;e&&e.LayoutUpdater.InDownDirty?a.push(a.shift()):d.ProcessDown()&&(d.InDownDirty=!1,a.shift())}else a.shift();0<a.length&&Warn("Finished DownDirty pass, not empty.")};d.prototype._ProcessUpDirtyElements=function(){for(var a=this._UpDirty,d;d=a[0];)if(d.InUpDirty){var e=
this._GetChildNodeInUpListIndex(d);-1<e?a.splice(e+1,0,a.shift()):d.ProcessUp()&&(d.InUpDirty=!1,a.shift())}else a.shift();0<a.length&&Warn("Finished UpDirty pass, not empty.")};d.prototype._GetChildNodeInUpListIndex=function(a){var d=this._UpDirty;a=a.Node;for(var e=d.length-1;0<=e;e--){var c=d[e];if(c.InUpDirty&&c.Node.VisualParentNode===a)return e}return-1};d.prototype._PropagateDirtyFlagToChildren=function(a,d){};d.prototype._AddDirtyElement=function(a,d){if(null!=a.Node.VisualParentNode||a.Node.IsTopLevel)a.DirtyFlags|=
d,d&_Dirty.DownDirtyState&&!a.InDownDirty&&(this._DownDirty.push(a),a.InDownDirty=!0),d&_Dirty.UpDirtyState&&!a.InUpDirty&&(this._UpDirty.push(a),a.InUpDirty=!0)};d.prototype._RemoveDirtyElement=function(a){a.InUpDirty=!1;a.InDownDirty=!1};d.prototype.OnNodeDetached=function(a){this._RemoveDirtyElement(a);this._RemoveFocusFrom(a)};d.prototype._Invalidate=function(a){a||(a=rect.fromSize(this.Extents));this._InvalidatedRect?rect.union(this._InvalidatedRect,a):this._InvalidatedRect=rect.copyTo(a)};d.prototype.Render=
function(){var a=this._InvalidatedRect;a&&(this._InvalidatedRect=null,0<a.Width&&0<a.Height&&this._RenderContext.DoRender(this._Layers,a))};d.prototype._HandleResize=function(a){var d=this;resizeTimeout&&clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){return d._HandleResizeTimeout(a)},20)};d.prototype._HandleResizeTimeout=function(a){this._ResizeCanvas();this._Extents=null;a=this._Layers;for(var d=a.length,e,c=0;c<d;c++)e=a[c],e.LayoutUpdater.InvalidateMeasure();resizeTimeout=null};
d.prototype._ResizeCanvas=function(){var a=this._PercentageWidth,d=this._PercentageHeight;null!=a&&(this._Canvas.width=window.innerWidth*a/100);null!=d&&(this._Canvas.height=window.innerHeight*d/100)};d.prototype._UpdateCursorFromInputList=function(){for(var a=Fayde.CursorType.Default,d=this._Captured?this._CapturedInputList:this._InputList,e=d.length,c=0;c<e&&(a=d[c].XObject.Cursor,a===Fayde.CursorType.Default);c++);this._SetCursor(a)};d.prototype._SetCursor=function(a){this._Cursor=a;this._Canvas.style.cursor=
a};d.prototype._HandleKeyDown=function(a){this._SetUserInitiatedEvent(!0);Fayde.Input.Keyboard.RefreshModifiers(a.Modifiers);if(this._FocusedNode){var g=d._ElementPathToRoot(this._FocusedNode);this._EmitKeyDown(g,a)}a.Handled||a.Key!==Fayde.Input.Key.Tab||(this._FocusedNode?Fayde.TabNavigationWalker.Focus(this._FocusedNode,a.Modifiers.Shift):this._EnsureElementFocused());this._SetUserInitiatedEvent(!1)};d.prototype._EmitKeyDown=function(a,d,e){if(0!==e){e&&-1!==e||(e=a.length);for(var c=0,b=a.shift();b&&
c<e;)b._EmitKeyDown(d),b=a.shift(),c++}};d.prototype._HandleButtonPress=function(a){Fayde.Input.Keyboard.RefreshModifiers(a);var d=a.which?a.which:a.button;a=this._GetMousePosition(a);this._SetUserInitiatedEvent(!0);this._HandleMouseEvent(InputType.MouseDown,d,a);this._UpdateCursorFromInputList();this._SetUserInitiatedEvent(!1)};d.prototype._HandleButtonRelease=function(a){Fayde.Input.Keyboard.RefreshModifiers(a);var d=a.which?a.which:a.button;a=this._GetMousePosition(a);this._SetUserInitiatedEvent(!0);
this._HandleMouseEvent(InputType.MouseUp,d,a);this._UpdateCursorFromInputList();this._SetUserInitiatedEvent(!1);this._Captured&&this._PerformReleaseCapture()};d.prototype._HandleOut=function(a){Fayde.Input.Keyboard.RefreshModifiers(a);a=this._GetMousePosition(a);this._HandleMouseEvent(InputType.MouseLeave,null,a)};d.prototype._HandleMove=function(a){Fayde.Input.Keyboard.RefreshModifiers(a);a=this._GetMousePosition(a);this._HandleMouseEvent(InputType.MouseMove,null,a);this._UpdateCursorFromInputList()};
d.prototype._HandleWheel=function(a){Fayde.Input.Keyboard.RefreshModifiers(a);var d=0;a.wheelDelta?d=a.wheelDelta/120:a.detail&&(d=-a.detail/3);a.preventDefault&&a.preventDefault();a.returnValue=!1;this._HandleMouseEvent(InputType.MouseWheel,null,this._GetMousePosition(a),d);this._UpdateCursorFromInputList()};d.prototype._HandleMouseEvent=function(a,d,e,c,b,f){this._CurrentPos=e;if(this._EmittingMouseEvent||null==this._RootLayer)return!1;for(var h=[],n=this._Layers,s=n.length-1;0<=s&&0===h.length;s--)n[s].LayoutUpdater.HitTestPoint(this._RenderContext,
e,h);this._EmittingMouseEvent=!0;n={Index1:-1,Index2:-1};this._FindFirstCommonElement(this._InputList,h,n);void 0!==b&&!0!==b||this._EmitMouseList(InputType.MouseLeave,d,e,c,this._InputList,n.Index1);void 0!==f&&!0!==f||this._EmitMouseList(InputType.MouseEnter,d,e,c,h,n.Index2);a!==InputType.NoOp&&this._EmitMouseList(a,d,e,c,this._Captured?this._CapturedInputList:h);this._InputList=h;this.HitTestCallback&&this.HitTestCallback(h);this._PendingCapture&&this._PerformCapture(this._PendingCapture);(this._PendingReleaseCapture||
this._Captured&&!this._Captured.CanCaptureMouse())&&this._PerformReleaseCapture();this._EmittingMouseEvent=!1};d.prototype._GetMousePosition=function(a){return new Point(a.clientX+window.pageXOffset+this._CanvasOffset.left,a.clientY+window.pageYOffset+this._CanvasOffset.top)};d.prototype._FindFirstCommonElement=function(a,d,e){var c=a.length-1,b=d.length-1;e.Index1=-1;for(e.Index2=-1;0<=c&&0<=b&&a[c]===d[b];)e.Index1=c--,e.Index2=b--};d.prototype._EmitMouseList=function(a,g,e,c,b,f){var h=!1;if(0===
f)return h;f&&-1!==f||(f=b.length);var n=this._CreateEventArgs(a,e,c),s=b[0];s&&n instanceof Fayde.RoutedEventArgs&&(n.Source=s.XObject);var p=d.IsLeftButton(g);g=d.IsRightButton(g);for(var k=0;k<f;k++)s=b[k],a===InputType.MouseLeave&&(n.Source=s.XObject),s._EmitMouseEvent(a,p,g,n)&&(h=!0),a===InputType.MouseLeave&&(n=this._CreateEventArgs(a,e,c));return h};d.prototype._CreateEventArgs=function(a,d,e){switch(a){case InputType.MouseUp:return new Fayde.Input.MouseButtonEventArgs(d);case InputType.MouseDown:return new Fayde.Input.MouseButtonEventArgs(d);
case InputType.MouseLeave:return new Fayde.Input.MouseEventArgs(d);case InputType.MouseEnter:return new Fayde.Input.MouseEventArgs(d);case InputType.MouseMove:return new Fayde.Input.MouseEventArgs(d);case InputType.MouseWheel:return new Fayde.Input.MouseWheelEventArgs(d,e)}};d.prototype.SetMouseCapture=function(a){if(this._Captured||this._PendingCapture)return a===this._Captured||a===this._PendingCapture;if(!this._EmittingMouseEvent)return!1;this._PendingCapture=a;return!0};d.prototype.ReleaseMouseCapture=
function(a){if(a===this._Captured||a===this._PendingCapture)this._EmittingMouseEvent?this._PendingReleaseCapture=!0:this._PerformReleaseCapture()};d.prototype._PerformCapture=function(a){this._Captured=a;for(var d=[];null!=a;)d.push(a),a=a.VisualParentNode;this._CapturedInputList=d;this._PendingCapture=null};d.prototype._PerformReleaseCapture=function(){var a=this._Captured;this._Captured=null;this._PendingReleaseCapture=!1;a._EmitLostMouseCapture(this._CurrentPos);this._HandleMouseEvent(InputType.NoOp,
null,this._CurrentPos,void 0,!1,!0)};d.prototype._SetUserInitiatedEvent=function(a){this._EmitFocusChangeEvents();this._FirstUserInitiatedEvent=this._FirstUserInitiatedEvent||a;this._UserInitiatedEvent=a};d.prototype.Focus=function(a,d){d=void 0===d||!0===d;if(!a.IsAttached)return!1;for(var e=Fayde.DeepTreeWalker(a),c;c=e.Step();)if(c.XObject.Visibility!==Fayde.Visibility.Visible)e.SkipBranch();else if(c instanceof Fayde.Controls.ControlNode){var b=c.XObject;if(b.IsEnabled){for(var f=a.IsLoaded,h=
a;!f&&(h=h.VisualParentNode);)f=f||h.IsLoaded;if(f&&c.LayoutUpdater.TotalIsRenderVisible&&b.IsTabStop)return this._FocusNode(c);if(!d)break}else{if(!d)break;e.SkipBranch()}}return!1};d.prototype._FocusNode=function(a){if(a===this._FocusedNode)return!0;var g=this._FocusedNode;g&&this._FocusChangedEvents.push({LostFocus:d._ElementPathToRoot(g),GotFocus:null});(this._FocusedNode=a)&&this._FocusChangedEvents.push({LostFocus:null,GotFocus:d._ElementPathToRoot(a)});this._FirstUserInitiatedEvent&&this._EmitFocusChangeEventsAsync();
return!0};d.prototype._EnsureElementFocused=function(){var a=this._Layers;if(!this._FocusedNode){for(var d=a.length-1,e=d;0<=e&&!Fayde.TabNavigationWalker.Focus(a[e]);e--);this._FocusedNode||-1===d||this._FocusNode(a[d])}this._FirstUserInitiatedEvent&&this._EmitFocusChangeEventsAsync()};d.prototype._RemoveFocusFrom=function(a){this._FocusedNode===a.Node&&this._FocusNode(null)};d.prototype._EmitFocusChangeEventsAsync=function(){var a=this;setTimeout(function(){return a._EmitFocusChangeEvents()},1)};
d.prototype._EmitFocusChangeEvents=function(){for(var a=this._FocusChangedEvents,d=a.shift();d;)this._EmitFocusList("lost",d.LostFocus),this._EmitFocusList("got",d.GotFocus),d=a.shift()};d.prototype._EmitFocusList=function(a,d){if(d)for(var e=d.shift();e;)e._EmitFocusChange(a),e=d.shift()};d._ElementPathToRoot=function(a){for(var d=[];a;)d.push(a),a=a.VisualParentNode;return d};d.IsLeftButton=function(a){return 1===a};d.IsRightButton=function(a){return 2===a};d.MeasureWidth=function(a,g){var e=d.TestCanvas.getContext("2d");
e.font=g.ToHtml5Object();return e.measureText(a).width};d.prototype.__DebugLayers=function(){for(var a=Fayde.VisualTreeHelper,d=this._Layers,e=d.length,c="",b=0;b<e;b++)c+=a.__Debug(d[b]);return c};d.prototype.__GetById=function(a){for(var d=this._Layers,e=d.length,c=0;c<e;c++)for(var b=Fayde.DeepTreeWalker(d[c]),f;f=b.Step();)if(f.XObject._ID===a)return f.XObject};d.TestCanvas=document.createElement("canvas");return d}();Nullstone.RegisterType(Surface,"Surface");
(function(d){(d.Input||(d.Input={})).ICommand_=Nullstone.RegisterInterface("ICommand")})(Fayde||(Fayde={}));
(function(d){(function(a){(function(c){c[c.Continue=0]="Continue";c[c.Once=1]="Once";c[c.Cycle=2]="Cycle";c[c.None=3]="None";c[c.Contained=4]="Contained";c[c.Local=5]="Local"})(a.KeyboardNavigationMode||(a.KeyboardNavigationMode={}));(function(c){c[c.None=0]="None";c[c.Alt=1]="Alt";c[c.Control=2]="Control";c[c.Shift=4]="Shift";c[c.Windows=8]="Windows";c[c.Apple=16]="Apple"})(a.ModifierKeys||(a.ModifierKeys={}));var d=a.ModifierKeys,e=function(){function c(){}c.RefreshModifiers=function(b){c.Modifiers=
b.Shift?c.Modifiers|d.Shift:c.Modifiers&~d.Shift;c.Modifiers=b.Ctrl?c.Modifiers|d.Control:c.Modifiers&~d.Control;c.Modifiers=b.Alt?c.Modifiers|d.Alt:c.Modifiers&~d.Alt};c.HasControl=function(){return(c.Modifiers&d.Control)===d.Control};c.HasAlt=function(){return(c.Modifiers&d.Alt)===d.Alt};c.HasShift=function(){return(c.Modifiers&d.Shift)===d.Shift};c.Modifiers=d.None;return c}();a.Keyboard=e;Nullstone.RegisterType(e,"Keyboard")})(d.Input||(d.Input={}))})(Fayde||(Fayde={}));
(function(d){var a=function(){function a(){this._ResChain=[];this._TemplateBindingSource=this._RootXamlObject=null;this._SRExpressions=[]}a.Parse=function(e,c,b,f,h){var n=new a;f&&(n._ResChain=f.slice(0));n._TemplateBindingSource=c;n._RootXamlObject=h;b||(b=new d.NameScope);return n.CreateObject(e,b)};a.ParseUserControl=function(e,c){var b=new a;b._RootXamlObject=e;var f=new d.NameScope(!0),b=b.SetObject(c,e,f);b.XamlNode.NameScope=f;return b};a.ParseResourceDictionary=function(e,c){var b=new a;
b._RootXamlObject=e;b._ResChain.push(e);var f=e.XamlNode.NameScope;f||(f=new d.NameScope);b.SetResourceDictionary(e,c,f);b.ResolveStaticResourceExpressions()};a.ParsePage=function(e){if(e.ParseType){var c=new e.ParseType;if(c&&c instanceof d.Controls.Page){var b=new a,f=c.XamlNode.NameScope=new d.NameScope(!0);b._RootXamlObject=c;b.SetObject(e,c,f);return c}}};a.prototype.CreateObject=function(a,c,b){var f=a.ParseType;if(!f)return a instanceof d.FrameworkTemplate&&(a.ResChain=this._ResChain.slice(0)),
a;if(f===Number||f===String||f===Boolean)return a.Value;f=new f;this._RootXamlObject||(this._RootXamlObject=f);this.SetObject(a,f,c,b);return f};a.prototype.SetObject=function(a,c,b,f){var h;c&&(h=c.XamlNode);if(h){var n=a.Name;n&&(h.Name=n,b.RegisterName(n,h))}c.TemplateOwner=this._TemplateBindingSource;var g;c instanceof d.DependencyObject&&(g=c);var n=a.ParseType,p,k;h=!1;a.Resources&&(h=!0,k=c.Resources,this._ResChain.push(k),this.SetResourceDictionary(k,a.Resources,b));if(a.Props)for(var m in a.Props)if(k=
a.Props[m],void 0!==k){var l=c.constructor;g&&(p=DependencyProperty.GetDependencyProperty(l,m,!0));this.TrySetPropertyValue(c,p,k,b,!1,l,m)}if(g=a.AttachedProps){p=Array.isArray?Array.isArray(g):g&&g.constructor===Array;if(!p)throw new Exception("json.AttachedProps is not an array");for(var q in g)m=g[q],p=DependencyProperty.GetDependencyProperty(m.Owner,m.Prop),k=m.Value,this.TrySetPropertyValue(c,p,k,b,!0,m.Owner,m.Prop)}if(a.Events)for(q in a.Events){p=c[q];if(!(p&&p instanceof MulticastEvent))throw new ArgumentException("Could not locate event '"+
q+"' on object '"+n._TypeName+"'.");g=this._RootXamlObject;m=a.Events[q];k=g[m];if(!k||"function"!==typeof k)throw new ArgumentException("Could not locate event callback '"+m+"' on object '"+g.constructor._TypeName+"'.");p.Subscribe(k,g)}var r;q=this.GetAnnotationMember(n,"ContentProperty");var t,u;q&&(q instanceof DependencyProperty?(t=q,u=t.Name):"string"===typeof q&&(u=q),r=a.Content)&&(r=r instanceof d.Markup?r.Transmute(c,q,"Content",this._TemplateBindingSource,this._ResChain.slice(0)):this.CreateObject(r,
b,!0),this.SetValue(c,t,u,r));a.Children&&this.TrySetCollectionProperty(a.Children,c,t,u,b);f||this.ResolveStaticResourceExpressions();h&&this._ResChain.pop();return r};a.prototype.TrySetPropertyValue=function(a,c,b,f,h,n,g){b instanceof d.Markup&&(b=b.Transmute(a,c,g,this._TemplateBindingSource,this._ResChain.slice(0)));b instanceof d.FrameworkTemplate?(b.ResChain=this._ResChain.slice(0),this.SetValue(a,c,g,b)):b instanceof d.StaticResourceExpression?this.SetValue(a,c,g,b):(b.ParseType&&(b=this.CreateObject(b,
f,!0)),!c&&h?Warn("Could not find attached property: "+n._TypeName+"."+g):this.TrySetCollectionProperty(b,a,c,g,f)||(c?this.SetValue(a,c,g,b):((c=Nullstone.GetPropertyDescriptor(a,g))?c.writable||c.set||Warn("Parser is trying to set a read-only property: "+g):Warn("Parser is setting a property that has not been defined yet: "+g),a[g]=b)))};a.prototype.TrySetCollectionProperty=function(a,c,b,f,h){if(!a||!(Array.isArray&&Array.isArray(a)||a.constructor===Array))return!1;var n;if(b){n=b.GetTargetType();
if(!Nullstone.DoesInheritFrom(n,d.XamlObjectCollection))return!1;n=new n;c.SetValue(b,n)}else"string"===typeof f?n=c[f]:c instanceof d.XamlObjectCollection&&(n=c);if(!(n instanceof d.XamlObjectCollection))return!1;for(c=0;c<a.length;c++)n.Add(this.CreateObject(a[c],h,!0));return!0};a.prototype.SetResourceDictionary=function(a,c,b){var f=c.Props;f&&(a.Source=f.Source);if(c=c.Children)for(var h,n=0;n<c.length;n++)h=c[n],f=h.Key,h=h.Value,h.ParseType===d.Style?(h=this.CreateObject(h,b,!0),f||(f=h.TargetType)):
h=new d.ResourceTarget(h,b,this._TemplateBindingSource,this._ResChain.slice(0)),f&&a.Set(f,h)};a.prototype.ResolveStaticResourceExpressions=function(){var a=this._SRExpressions;if(a&&0!==a.length)for(var c;c=a.shift();)c.Resolve(this)};a.prototype.SetValue=function(a,c,b,f){c?f instanceof d.StaticResourceExpression?(this._SRExpressions.push(f),a.SetValueInternal(c,new d.DeferredValueExpression)):a.SetValueInternal(c,f):b&&(a[b]=f)};a.prototype.GetAnnotationMember=function(a,c){if(a){var b=a.Annotations,
f;return b&&(f=b[c])?f:this.GetAnnotationMember(a._BaseClass,c)}};return a}();d.JsonParser=a;Nullstone.RegisterType(a,"JsonParser")})(Fayde||(Fayde={}));(function(d){var a=function(){function a(){}a.prototype.Transmute=function(a,c,b,f,d){};return a}();d.Markup=a;Nullstone.RegisterType(a,"Markup")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(c){a.call(this);this.Key=c}__extends(e,a);e.prototype.Transmute=function(c,b,f,a,n){return new d.StaticResourceExpression(this.Key,c,b,f,a,n)};return e}(d.Markup);d.StaticResourceMarkup=a;Nullstone.RegisterType(a,"StaticResourceMarkup")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(c){a.call(this);this.Path=c}__extends(e,a);e.prototype.Transmute=function(c,b,f,a,n){c=DependencyProperty.GetDependencyProperty(a.constructor,this.Path);return new d.TemplateBindingExpression(c,b,f)};return e}(d.Markup);d.TemplateBindingMarkup=a;Nullstone.RegisterType(a,"TemplateBindingMarkup")})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function a(c){this._Inverse=null;this._Listeners=[];this._Raw=c}Object.defineProperty(a.prototype,"M11",{get:function(){return this._Raw[0]},set:function(c){this._Raw[0]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M12",{get:function(){return this._Raw[1]},set:function(c){this._Raw[1]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M21",{get:function(){return this._Raw[3]},
set:function(c){this._Raw[3]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M22",{get:function(){return this._Raw[4]},set:function(c){this._Raw[4]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"OffsetX",{get:function(){return this._Raw[2]},set:function(c){this._Raw[2]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"OffsetY",{get:function(){return this._Raw[5]},set:function(c){this._Raw[5]=
c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"Inverse",{get:function(){this.inverse=this._Inverse;if(!this._Inverse&&(this._Inverse=new a,this._Inverse._Raw=mat3.inverse(this._Raw,mat3.identity()),!this._Inverse._Raw)){this._Inverse=void 0;return}return this._Inverse},enumerable:!0,configurable:!0});a.prototype.Listen=function(c){var b=this._Listeners,f={Callback:c,Detach:function(){var c=b.indexOf(f);-1<c&&b.splice(c,1)}};b.push(f);return f};a.prototype._OnChanged=
function(){this._Inverse=null;for(var c=this._Listeners,b=c.length,f=0;f<b;f++)c[f].Callback(this)};a.prototype.toString=function(){return mat3.str(this._Raw)};return a}();a.Matrix=d;Nullstone.RegisterType(d,"Matrix")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function a(){this._Inverse=null;this._Listeners=[]}a.FromRaw=function(c){var b=new a;b._Raw=c;return b};Object.defineProperty(a.prototype,"M11",{get:function(){return this._Raw[0]},set:function(c){this._Raw[0]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M12",{get:function(){return this._Raw[1]},set:function(c){this._Raw[1]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M13",
{get:function(){return this._Raw[2]},set:function(c){this._Raw[2]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M14",{get:function(){return this._Raw[3]},set:function(c){this._Raw[3]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M21",{get:function(){return this._Raw[4]},set:function(c){this._Raw[4]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M22",{get:function(){return this._Raw[5]},
set:function(c){this._Raw[5]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M23",{get:function(){return this._Raw[6]},set:function(c){this._Raw[6]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M24",{get:function(){return this._Raw[7]},set:function(c){this._Raw[7]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M31",{get:function(){return this._Raw[8]},set:function(c){this._Raw[8]=
c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M32",{get:function(){return this._Raw[9]},set:function(c){this._Raw[9]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M33",{get:function(){return this._Raw[10]},set:function(c){this._Raw[10]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"M34",{get:function(){return this._Raw[11]},set:function(c){this._Raw[11]=c;this._OnChanged()},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"OffsetX",{get:function(){return this._Raw[12]},set:function(c){this._Raw[12]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"OffsetY",{get:function(){return this._Raw[13]},set:function(c){this._Raw[13]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"OffsetZ",{get:function(){return this._Raw[14]},set:function(c){this._Raw[14]=c;this._OnChanged()},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"M44",{get:function(){return this._Raw[15]},set:function(c){this._Raw[15]=c;this._OnChanged()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"Inverse",{get:function(){if(!this._Inverse&&(this._Inverse=new a,this._Inverse._Raw=mat4.inverse(this._Raw,mat4.identity()),!this._Inverse._Raw)){this._Inverse=void 0;return}return this._Inverse},enumerable:!0,configurable:!0});a.prototype.Listen=function(c){var b=this._Listeners,f={Callback:c,
Detach:function(){var c=b.indexOf(f);-1<c&&b.splice(c,1)}};b.push(f);return f};a.prototype._OnChanged=function(){this._Inverse=null;for(var c=this._Listeners,b=c.length,f=0;f<b;f++)c[f].Callback(this)};a.prototype.toString=function(){return mat4.str(this._Raw)};return a}();a.Matrix3D=d;Nullstone.RegisterType(d,"Matrix3D")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(){function c(){this._Count=this._Duration=null;this.IsForever=!1}c.FromRepeatDuration=function(b){var f=new c;f._Duration=b;return f};c.FromIterationCount=function(b){var f=new c;f._Count=b;return f};Object.defineProperty(c.prototype,"HasCount",{get:function(){return null!=this._Count},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Count",{get:function(){return this._Count},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"HasDuration",{get:function(){return null!=this._Duration},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Duration",{get:function(){return this._Duration},enumerable:!0,configurable:!0});c.prototype.Clone=function(){var b=new c;b._Duration=this._Duration;b._Count=this._Count;b.IsForever=this.IsForever;return b};c.Forever=function(){var b=new c;b.IsForever=!0;return b}();return c}();a.RepeatBehavior=d;Nullstone.RegisterType(d,"RepeatBehavior")})(a.Animation||(a.Animation={}))})(d.Media||
(d.Media={}))})(Fayde||(Fayde={}));(function(d){(function(a){var d=function(){function a(c,b){this.CanExecuteChanged=new MulticastEvent;this.Execute=c;this.CanExecute=b}a.prototype.Execute=function(c){};a.prototype.CanExecute=function(c){return!0};return a}();a.RelayCommand=d;Nullstone.RegisterType(d,"RelayCommand")})(d.MVVM||(d.MVVM={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function a(c){var b=this;this.LocationChanged=new MulticastEvent;this.App=c;this.Href=window.location.href;if(this.Hash=window.location.hash)this.Hash=this.Hash.substr(1),this.Href=this.Href.substring(0,this.Href.indexOf("#"));window.onhashchange=function(){return b._HandleFragmentChange()}}a.prototype._HandleFragmentChange=function(){this.App.Address=new Uri(document.URL);if(this.Hash=window.location.hash)this.Hash=this.Hash.substr(1);this.LocationChanged.Raise(this,
EventArgs.Empty)};return a}();a.NavService=d;Nullstone.RegisterType(d,"NavService")})(d.Navigation||(d.Navigation={}))})(Fayde||(Fayde={}));var Clip=function(){return function(d){d=rect.roundOut(rect.copyTo(d));this.X=d.X;this.Y=d.Y;this.Width=d.Width;this.Height=d.Height}}();Nullstone.RegisterType(Clip,"Clip");
var Color=function(){function d(){this.B=this.G=this.R=0;this.A=1}d.prototype.Add=function(a){var g=new d;g.R=this.R+a.R;g.G=this.G+a.G;g.B=this.B+a.B;g.A=this.A+a.A;return g};d.prototype.Subtract=function(a){var g=new d;g.R=this.R-a.R;g.G=this.G-a.G;g.B=this.B-a.B;g.A=this.A-a.A;return g};d.prototype.Multiply=function(a){var g=new d;g.R=this.R*a;g.G=this.G*a;g.B=this.B*a;g.A=this.A*a;return g};d.prototype.Equals=function(a){return this.R===a.R&&this.G===a.G&&this.B===a.B&&this.A===a.A};d.prototype.toString=
function(){return"rgba("+this.R.toString()+","+this.G.toString()+","+this.B.toString()+","+this.A.toString()+")"};d.prototype.ToHexStringNoAlpha=function(){return"#"+this.R.toString(16)+this.G.toString(16)+this.B.toString(16)};d.prototype.Clone=function(){return d.FromRgba(this.R,this.G,this.B,this.A)};d.LERP=function(a,g,e){var c=new d;c.R=a.R+(g.R-a.R)*e;c.G=a.G+(g.G-a.G)*e;c.B=a.B+(g.B-a.B)*e;c.A=a.A+(g.A-a.A)*e;return c};d.FromRgba=function(a,g,e,c){var b=new d;b.R=a;b.G=g;b.B=e;b.A=c;return b};
d.FromHex=function(a){var g,e=new d;null!=(g=d.__AlphaRegex.exec(a))?(e.A=parseInt(g[1],16)/255,e.R=parseInt(g[2],16),e.G=parseInt(g[3],16),e.B=parseInt(g[4],16)):null!=(g=d.__NoAlphaRegex.exec(a))&&(e.A=1,e.R=parseInt(g[1],16),e.G=parseInt(g[2],16),e.B=parseInt(g[3],16));return e};d.__NoAlphaRegex=/#([0-9a-fA-F][0-9a-fA-F]){1}([0-9a-fA-F][0-9a-fA-F]){1}([0-9a-fA-F][0-9a-fA-F]){1}/;d.__AlphaRegex=/#([0-9a-fA-F][0-9a-fA-F]){1}([0-9a-fA-F][0-9a-fA-F]){1}([0-9a-fA-F][0-9a-fA-F]){1}([0-9a-fA-F][0-9a-fA-F]){1}/;
d.KnownColors={AliceBlue:d.FromHex("#FFF0F8FF"),AntiqueWhite:d.FromHex("#FFFAEBD7"),Aqua:d.FromHex("#FF00FFFF"),Aquamarine:d.FromHex("#FF7FFFD4"),Azure:d.FromHex("#FFF0FFFF"),Beige:d.FromHex("#FFF5F5DC"),Bisque:d.FromHex("#FFFFE4C4"),Black:d.FromHex("#FF000000"),BlanchedAlmond:d.FromHex("#FFFFEBCD"),Blue:d.FromHex("#FF0000FF"),BlueViolet:d.FromHex("#FF8A2BE2"),Brown:d.FromHex("#FFA52A2A"),BurlyWood:d.FromHex("#FFDEB887"),CadetBlue:d.FromHex("#FF5F9EA0"),Chartreuse:d.FromHex("#FF7FFF00"),Chocolate:d.FromHex("#FFD2691E"),
Coral:d.FromHex("#FFFF7F50"),CornflowerBlue:d.FromHex("#FF6495ED"),Cornsilk:d.FromHex("#FFFFF8DC"),Crimson:d.FromHex("#FFDC143C"),Cyan:d.FromHex("#FF00FFFF"),DarkBlue:d.FromHex("#FF00008B"),DarkCyan:d.FromHex("#FF008B8B"),DarkGoldenrod:d.FromHex("#FFB8860B"),DarkGray:d.FromHex("#FFA9A9A9"),DarkGreen:d.FromHex("#FF006400"),DarkKhaki:d.FromHex("#FFBDB76B"),DarkMagenta:d.FromHex("#FF8B008B"),DarkOliveGreen:d.FromHex("#FF556B2F"),DarkOrange:d.FromHex("#FFFF8C00"),DarkOrchid:d.FromHex("#FF9932CC"),DarkRed:d.FromHex("#FF8B0000"),
DarkSalmon:d.FromHex("#FFE9967A"),DarkSeaGreen:d.FromHex("#FF8FBC8F"),DarkSlateBlue:d.FromHex("#FF483D8B"),DarkSlateGray:d.FromHex("#FF2F4F4F"),DarkTurquoise:d.FromHex("#FF00CED1"),DarkViolet:d.FromHex("#FF9400D3"),DeepPink:d.FromHex("#FFFF1493"),DeepSkyBlue:d.FromHex("#FF00BFFF"),DimGray:d.FromHex("#FF696969"),DodgerBlue:d.FromHex("#FF1E90FF"),Firebrick:d.FromHex("#FFB22222"),FloralWhite:d.FromHex("#FFFFFAF0"),ForestGreen:d.FromHex("#FF228B22"),Fuchsia:d.FromHex("#FFFF00FF"),Gainsboro:d.FromHex("#FFDCDCDC"),
GhostWhite:d.FromHex("#FFF8F8FF"),Gold:d.FromHex("#FFFFD700"),Goldenrod:d.FromHex("#FFDAA520"),Gray:d.FromHex("#FF808080"),Green:d.FromHex("#FF008000"),GreenYellow:d.FromHex("#FFADFF2F"),Honeydew:d.FromHex("#FFF0FFF0"),HotPink:d.FromHex("#FFFF69B4"),IndianRed:d.FromHex("#FFCD5C5C"),Indigo:d.FromHex("#FF4B0082"),Ivory:d.FromHex("#FFFFFFF0"),Khaki:d.FromHex("#FFF0E68C"),Lavender:d.FromHex("#FFE6E6FA"),LavenderBlush:d.FromHex("#FFFFF0F5"),LawnGreen:d.FromHex("#FF7CFC00"),LemonChiffon:d.FromHex("#FFFFFACD"),
LightBlue:d.FromHex("#FFADD8E6"),LightCoral:d.FromHex("#FFF08080"),LightCyan:d.FromHex("#FFE0FFFF"),LightGoldenrodYellow:d.FromHex("#FFFAFAD2"),LightGray:d.FromHex("#FFD3D3D3"),LightGreen:d.FromHex("#FF90EE90"),LightPink:d.FromHex("#FFFFB6C1"),LightSalmon:d.FromHex("#FFFFA07A"),LightSeaGreen:d.FromHex("#FF20B2AA"),LightSkyBlue:d.FromHex("#FF87CEFA"),LightSlateGray:d.FromHex("#FF778899"),LightSteelBlue:d.FromHex("#FFB0C4DE"),LightYellow:d.FromHex("#FFFFFFE0"),Lime:d.FromHex("#FF00FF00"),LimeGreen:d.FromHex("#FF32CD32"),
Linen:d.FromHex("#FFFAF0E6"),Magenta:d.FromHex("#FFFF00FF"),Maroon:d.FromHex("#FF800000"),MediumAquamarine:d.FromHex("#FF66CDAA"),MediumBlue:d.FromHex("#FF0000CD"),MediumOrchid:d.FromHex("#FFBA55D3"),MediumPurple:d.FromHex("#FF9370DB"),MediumSeaGreen:d.FromHex("#FF3CB371"),MediumSlateBlue:d.FromHex("#FF7B68EE"),MediumSpringGreen:d.FromHex("#FF00FA9A"),MediumTurquoise:d.FromHex("#FF48D1CC"),MediumVioletRed:d.FromHex("#FFC71585"),MidnightBlue:d.FromHex("#FF191970"),MintCream:d.FromHex("#FFF5FFFA"),
MistyRose:d.FromHex("#FFFFE4E1"),Moccasin:d.FromHex("#FFFFE4B5"),NavajoWhite:d.FromHex("#FFFFDEAD"),Navy:d.FromHex("#FF000080"),OldLace:d.FromHex("#FFFDF5E6"),Olive:d.FromHex("#FF808000"),OliveDrab:d.FromHex("#FF6B8E23"),Orange:d.FromHex("#FFFFA500"),OrangeRed:d.FromHex("#FFFF4500"),Orchid:d.FromHex("#FFDA70D6"),PaleGoldenrod:d.FromHex("#FFEEE8AA"),PaleGreen:d.FromHex("#FF98FB98"),PaleTurquoise:d.FromHex("#FFAFEEEE"),PaleVioletRed:d.FromHex("#FFDB7093"),PapayaWhip:d.FromHex("#FFFFEFD5"),PeachPuff:d.FromHex("#FFFFDAB9"),
Peru:d.FromHex("#FFCD853F"),Pink:d.FromHex("#FFFFC0CB"),Plum:d.FromHex("#FFDDA0DD"),PowderBlue:d.FromHex("#FFB0E0E6"),Purple:d.FromHex("#FF800080"),Red:d.FromHex("#FFFF0000"),RosyBrown:d.FromHex("#FFBC8F8F"),RoyalBlue:d.FromHex("#FF4169E1"),SaddleBrown:d.FromHex("#FF8B4513"),Salmon:d.FromHex("#FFFA8072"),SandyBrown:d.FromHex("#FFF4A460"),SeaGreen:d.FromHex("#FF2E8B57"),SeaShell:d.FromHex("#FFFFF5EE"),Sienna:d.FromHex("#FFA0522D"),Silver:d.FromHex("#FFC0C0C0"),SkyBlue:d.FromHex("#FF87CEEB"),SlateBlue:d.FromHex("#FF6A5ACD"),
SlateGray:d.FromHex("#FF708090"),Snow:d.FromHex("#FFFFFAFA"),SpringGreen:d.FromHex("#FF00FF7F"),SteelBlue:d.FromHex("#FF4682B4"),Tan:d.FromHex("#FFD2B48C"),Teal:d.FromHex("#FF008080"),Thistle:d.FromHex("#FFD8BFD8"),Tomato:d.FromHex("#FFFF6347"),Transparent:d.FromHex("#00FFFFFF"),Turquoise:d.FromHex("#FF40E0D0"),Violet:d.FromHex("#FFEE82EE"),Wheat:d.FromHex("#FFF5DEB3"),White:d.FromHex("#FFFFFFFF"),WhiteSmoke:d.FromHex("#FFF5F5F5"),Yellow:d.FromHex("#FFFFFF00"),YellowGreen:d.FromHex("#FF9ACD32")};
return d}();Nullstone.RegisterType(Color,"Color");
var CornerRadius=function(){function d(a,d,e,c){this.TopLeft=null==a?0:a;this.TopRight=null==d?0:d;this.BottomRight=null==e?0:e;this.BottomLeft=null==c?0:c}d.prototype.IsZero=function(){return 0===this.TopLeft&&0===this.TopRight&&0===this.BottomRight&&0===this.BottomLeft};d.prototype.Equals=function(a){return this.TopLeft===a.TopLeft&&this.TopRight===a.TopRight&&this.BottomRight===a.BottomRight&&this.BottomLeft===a.BottomLeft};d.prototype.toString=function(){return"("+this.TopLeft+", "+this.TopRight+
", "+this.BottomRight+", "+this.BottomLeft+")"};d.prototype.Clone=function(){return new d(this.TopLeft,this.TopRight,this.BottomRight,this.BottomLeft)};return d}();Nullstone.RegisterType(CornerRadius,"CornerRadius");var DurationType;(function(d){d[d.Automatic=0]="Automatic";d[d.Forever=1]="Forever";d[d.TimeSpan=2]="TimeSpan"})(DurationType||(DurationType={}));
var Duration=function(){function d(a){this._Type=DurationType.TimeSpan;this._TimeSpan=a}d.prototype.Clone=function(){var a=new d;a._Type=this._Type;a._TimeSpan=this._TimeSpan;return a};Object.defineProperty(d.prototype,"Type",{get:function(){return this._Type},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"TimeSpan",{get:function(){if(this._Type===DurationType.TimeSpan)return this._TimeSpan;throw new InvalidOperationException("Duration does not have a TimeSpan.");},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"HasTimeSpan",{get:function(){return this._Type===DurationType.TimeSpan},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"IsForever",{get:function(){return this._Type===DurationType.Forever},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"IsAutomatic",{get:function(){return this._Type===DurationType.Automatic},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"IsZero",{get:function(){return this._Type===
DurationType.TimeSpan&&0===this._TimeSpan.Ticks},enumerable:!0,configurable:!0});d.Automatic=function(){var a=new d;a._Type=DurationType.Automatic;return a}();d.Forever=function(){var a=new d;a._Type=DurationType.Forever;return a}();return d}();Nullstone.RegisterType(Duration,"Duration");
var FontStyle={Normal:"normal",Italic:"italic",Oblique:"oblique"},FontStretch={UltraCondensed:"ultra-condensed",ExtraCondensed:"extra-condensed",Condensed:"condensed",SemiCondensed:"semi-condensed",Normal:"normal",SemiExpanded:"semi-expanded",Expanded:"expanded",ExtraExpanded:"extra-expanded",UltraExpanded:"ultra-expanded"},FontWeight={Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Black:900,ExtraBlack:950},Font=function(){function d(){this._Family=d.DEFAULT_FAMILY;
this._Stretch=d.DEFAULT_STRETCH;this._Style=d.DEFAULT_STYLE;this._Weight=d.DEFAULT_WEIGHT;this._Size=d.DEFAULT_SIZE}Object.defineProperty(d.prototype,"Family",{get:function(){return this._Family},set:function(a){this._Family!=a&&(this._Family=a,this._PurgeCache())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Stretch",{get:function(){return this._Stretch},set:function(a){this._Stretch!=a&&(this._Stretch=a,this._PurgeCache())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"Style",{get:function(){return this._Style},set:function(a){this._Style!=a&&(this._Style=a,this._PurgeCache())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Weight",{get:function(){return this._Weight},set:function(a){this._Weight!=a&&(this._Weight=a,this._PurgeCache())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Size",{get:function(){return this._Size},set:function(a){this._Size!=a&&(this._Size=a,this._PurgeCache())},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"IsChanged",{get:function(){return null==this._CachedTranslation},enumerable:!0,configurable:!0});d.prototype.GetActualHeight=function(){return d._MeasureHeight(this)};d.prototype._Descender=function(){return 0};d.prototype._Ascender=function(){return 0};d.prototype._PurgeCache=function(){this._CachedTranslation=this._CachedHeight=void 0};d.prototype.ToHtml5Object=function(){this._CachedTranslation||(this._CachedTranslation=this._BuildTranslation());return this._CachedTranslation};d.prototype._BuildTranslation=
function(){var a;a=""+(this.Style.toString()+" ");a=a+"normal "+(this.Weight.toString()+" ");a+=this.Size+"px ";return a+=this.Family.toString()};d._MeasureHeight=function(a){if(a._CachedHeight)return a._CachedHeight;var d=document.getElementsByTagName("body")[0],e=document.createElement("div"),c=document.createTextNode("M");e.appendChild(c);e.setAttribute("style","font: "+a.ToHtml5Object()+";");d.appendChild(e);c=e.offsetHeight;d.removeChild(e);return a._CachedHeight=c};d.DEFAULT_FAMILY="Segoe UI, Lucida Sans Unicode, Verdana";
d.DEFAULT_STRETCH=FontStretch.Normal;d.DEFAULT_STYLE=FontStyle.Normal;d.DEFAULT_WEIGHT=FontWeight.Normal;d.DEFAULT_SIZE=14;return d}();Nullstone.RegisterType(Font,"Font");var FontFamily=function(){function d(a){this.FamilyNames=a}d.prototype.toString=function(){return this.FamilyNames};d.prototype.Clone=function(){return new d(this.FamilyNames)};return d}();Nullstone.RegisterType(FontFamily,"FontFamily");
var KeyTime=function(){function d(){this._IsUniform=this._IsPaced=!1;this._TimeSpan=null;this._Percent=0;this.IsValid=!0}d.CreateUniform=function(){var a=new d;a._IsUniform=!0;return a};d.CreateTimeSpan=function(a){var g=new d;g._TimeSpan=a;return g};d.prototype.Clone=function(){var a=new d;a._TimeSpan=this._TimeSpan;a._IsPaced=this._IsPaced;a._IsUniform=this._IsUniform;a._Percent=this._Percent;return a};Object.defineProperty(d.prototype,"IsPaced",{get:function(){return this._IsPaced},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"IsUniform",{get:function(){return this._IsUniform},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"HasTimeSpan",{get:function(){return null!=this._TimeSpan},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"TimeSpan",{get:function(){return this._TimeSpan},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"HasPercent",{get:function(){return null!=this._Percent},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"Percent",{get:function(){return this._Percent},enumerable:!0,configurable:!0});return d}();Nullstone.RegisterType(KeyTime,"KeyTime");
var Point=function(){function d(a,d){this.X=null==a?0:a;this.Y=null==d?0:d}d.prototype.toString=function(){return"X="+this.X.toString()+";Y="+this.Y.toString()};d.prototype.Equals=function(a){return this.X===a.X&&this.Y===a.Y};d.prototype.Clone=function(){return new d(this.X,this.Y)};d.Equals=function(a,d){return null==a?null==d:null==d?!1:a.X===d.X&&a.Y===d.Y};d.LERP=function(a,g,e){return new d(a.X+(g.X-a.X)*e,a.Y+(g.Y-a.Y)*e)};return d}();Nullstone.RegisterType(Point,"Point");
var RectOverlap={Out:0,In:1,Part:2},rect=function(){function d(){this.Height=this.Width=this.Y=this.X=0}d.prototype.toString=function(){return"{"+this.X+","+this.Y+","+this.Width+","+this.Height+"}"};d.prototype.Clone=function(){var a=new d;a.X=this.X;a.Y=this.Y;a.Width=this.Width;a.Height=this.Height;return a};d.getRight=function(a){return a.X+a.Width};d.getBottom=function(a){return a.Y+a.Height};d.fromSize=function(a){var g=new d;g.Width=a.Width;g.Height=a.Height;return g};d.clear=function(a){a.X=
0;a.Y=0;a.Width=0;a.Height=0};d.set=function(a,g,e,c,b){a||(a=new d);a.X=g;a.Y=e;a.Width=c;a.Height=b;return a};d.isEmpty=function(a){return 0>=a.Width||0>=a.Height};d.isEmptyLogical=function(a){return 0>=a.Width&&0>=a.Height};d.copyTo=function(a,g){g||(g=new d);g.X=a.X;g.Y=a.Y;g.Width=a.Width;g.Height=a.Height;return g};d.isEqual=function(a,d){return a.X===d.X&&a.Y===d.Y&&a.Width===d.Width&&a.Height===d.Height};d.intersection=function(a,d){var e=Math.max(a.X,d.X),c=Math.max(a.Y,d.Y);a.Width=Math.max(0,
Math.min(a.X+a.Width,d.X+d.Width)-e);a.Height=Math.max(0,Math.min(a.Y+a.Height,d.Y+d.Height)-c);a.X=e;a.Y=c;return a};d.union=function(a,g){if(!d.isEmpty(g))if(d.isEmpty(a))d.copyTo(g,a);else{var e=Math.min(a.X,g.X),c=Math.min(a.Y,g.Y);a.Width=Math.max(a.X+a.Width,g.X+g.Width)-e;a.Height=Math.max(a.Y+a.Height,g.Y+g.Height)-c;a.X=e;a.Y=c;return a}};d.unionLogical=function(a,g){if(!d.isEmptyLogical(g))if(d.isEmptyLogical(a))d.copyTo(g,a);else{var e=Math.min(a.X,g.X),c=Math.min(a.Y,g.Y);a.Width=Math.max(a.X+
a.Width,g.X+g.Width)-e;a.Height=Math.max(a.Y+a.Height,g.Y+g.Height)-c;a.X=e;a.Y=c;return a}};d.growBy=function(a,d,e,c,b){a.X-=d;a.Y-=e;a.Width+=d+c;a.Height+=e+b;0>a.Width&&(a.Width=0);0>a.Height&&(a.Height=0)};d.growByThickness=function(a,d){a.X-=d.Left;a.Y-=d.Top;a.Width+=d.Left+d.Right;a.Height+=d.Top+d.Bottom;0>a.Width&&(a.Width=0);0>a.Height&&(a.Height=0)};d.shrinkBy=function(a,d,e,c,b){a.X+=d;a.Y+=e;a.Width-=d+c;a.Height-=e+b;0>a.Width&&(a.Width=0);0>a.Height&&(a.Height=0)};d.shrinkByThickness=
function(a,d){a.X+=d.Left;a.Y+=d.Top;a.Width-=d.Left+d.Right;a.Height-=d.Top+d.Bottom;0>a.Width&&(a.Width=0);0>a.Height&&(a.Height=0)};d.extendTo=function(a,d,e){var c=a.X,b=a.Y,f=a.Width,h=a.Height;if(d<c||d>c+f)f=Math.max(Math.abs(d-c),Math.abs(d-c-f));if(e<b||e>b+h)h=Math.max(Math.abs(e-b),Math.abs(e-b-h));a.X=Math.min(c,d);a.Y=Math.min(b,e);a.Width=f;a.Height=h};d.transform=function(a,d){if(!d)return a;var e=a.X,c=a.Y,b=a.Width,f=a.Height,h=vec2.createFrom(e,c),n=vec2.createFrom(e+b,c),b=vec2.createFrom(e+
b,c+f),s=vec2.createFrom(e,c+f);mat3.transformVec2(d,h);mat3.transformVec2(d,n);mat3.transformVec2(d,b);mat3.transformVec2(d,s);e=Math.min(h[0],n[0],b[0],s[0]);c=Math.min(h[1],n[1],b[1],s[1]);f=Math.max(h[0],n[0],b[0],s[0]);h=Math.max(h[1],n[1],b[1],s[1]);a.X=e;a.Y=c;a.Width=f-e;a.Height=h-c;return a};d.clipmask=function(a){var d=0;0>-a[0]+a[3]&&(d|=1);0>a[0]+a[3]&&(d|=2);0>-a[1]+a[3]&&(d|=4);0>a[1]+a[3]&&(d|=8);0>a[2]+a[3]&&(d|=16);0>-a[2]+a[3]&&(d|=32);return d};d.transform4=function(a,g){if(!g)return a;
var e=a.X,c=a.Y,b=a.Width,f=a.Height,h=vec4.createFrom(e,c,0,1),n=vec4.createFrom(e+b,c,0,1),b=vec4.createFrom(e+b,c+f,0,1),e=vec4.createFrom(e,c+f,0,1);mat4.transformVec4(g,h);mat4.transformVec4(g,n);mat4.transformVec4(g,b);mat4.transformVec4(g,e);c=1/65536;h[0]*=c;h[1]*=c;n[0]*=c;n[1]*=c;b[0]*=c;b[1]*=c;e[0]*=c;e[1]*=c;var c=d.clipmask(h),f=d.clipmask(n),s=d.clipmask(b),p=d.clipmask(e);0!==(c|f|s|p)?0===(c&f&s&p)&&d.clear(a):(c=1/h[3],f=1/n[3],s=1/b[3],p=1/e[3],h[0]*=65536*c,h[1]*=65536*c,n[0]*=
65536*f,n[1]*=65536*f,b[0]*=65536*s,b[1]*=65536*s,e[0]*=65536*p,e[1]*=65536*p,a.X=h[0],a.Y=h[1],a.Width=0,a.Height=0,d.extendTo(a,n[0],n[1]),d.extendTo(a,b[0],b[1]),d.extendTo(a,e[0],e[1]));return a};d.round=function(a){a.X=Math.round(a.X);a.Y=Math.round(a.Y);a.Width=Math.round(a.Width);a.Height=Math.round(a.Height);return a};d.roundOut=function(a){var d=Math.floor(a.X),e=Math.floor(a.Y);a.Width=Math.ceil(a.X+a.Width)-Math.floor(a.X);a.Height=Math.ceil(a.Y+a.Height)-Math.floor(a.Y);a.X=d;a.Y=e;return a};
d.roundIn=function(a){var d=Math.ceil(a.X),e=Math.ceil(a.Y);a.Width=Math.floor(a.X+a.Width)-Math.ceil(a.X);a.Height=Math.floor(a.Y+a.Height)-Math.ceil(a.Y);a.X=d;a.Y=e;return a};d.copyGrowTransform=function(a,g,e,c){d.copyTo(g,a);d.growByThickness(a,e);d.transform(a,c)};d.copyGrowTransform4=function(a,g,e,c){d.copyTo(g,a);d.growByThickness(a,e);d.transform4(a,c)};d.containsPoint=function(a,d){return a.X<=d.X&&a.Y<=d.Y&&a.X+a.Width>=d.X&&a.Y+a.Height>=d.Y};d.containsPointXY=function(a,d,e){return a.X<=
d&&a.Y<=e&&a.X+a.Width>=d&&a.Y+a.Height>=e};d.rectIn=function(a,g){var e=d.copyTo(a);d.intersection(e,g);return d.isEmpty(e)?RectOverlap.Out:d.isEqual(e,g)?RectOverlap.In:RectOverlap.Part};d.isRectContainedIn=function(a,g){var e=d.copyTo(a);d.intersection(e,g);return d.isEqual(a,e)};return d}();Nullstone.RegisterType(rect,"rect");
var size=function(){function d(){this.Height=this.Width=0}d.prototype.toString=function(){return"{"+this.Width+","+this.Height+"}"};d.prototype.Clone=function(){var a=new d;a.Width=this.Width;a.Height=this.Height;return a};d.fromRaw=function(a,g){var e=new d;e.Width=a;e.Height=g;return e};d.fromRect=function(a){var g=new d;g.Width=a.Width;g.Height=a.Height;return g};d.createInfinite=function(){var a=new d;a.Width=Number.POSITIVE_INFINITY;a.Height=Number.POSITIVE_INFINITY;return a};d.createNegativeInfinite=
function(){var a=new d;a.Width=Number.NEGATIVE_INFINITY;a.Height=Number.NEGATIVE_INFINITY;return a};d.copyTo=function(a,g){g||(g=new d);g.Width=a.Width;g.Height=a.Height;return g};d.clear=function(a){a.Width=0;a.Height=0};d.isEqual=function(a,d){return a.Width===d.Width&&a.Height===d.Height};d.growBy=function(a,d,e){var c=a.Height,b=a.Width;c!=Number.POSITIVE_INFINITY&&(c+=e);b!=Number.POSITIVE_INFINITY&&(b+=d);a.Width=0<b?b:0;a.Height=0<c?c:0;return a};d.growByThickness=function(a,d){var e=a.Width,
c=a.Height;e!=Number.POSITIVE_INFINITY&&(e+=d.Left+d.Right);c!=Number.POSITIVE_INFINITY&&(c+=d.Top+d.Bottom);a.Width=0<e?e:0;a.Height=0<c?c:0;return a};d.shrinkBy=function(a,d,e){var c=a.Height,b=a.Width;c!=Number.POSITIVE_INFINITY&&(c-=e);b!=Number.POSITIVE_INFINITY&&(b-=d);a.Width=0<b?b:0;a.Height=0<c?c:0;return a};d.shrinkByThickness=function(a,d){var e=a.Width,c=a.Height;e!=Number.POSITIVE_INFINITY&&(e-=d.Left+d.Right);c!=Number.POSITIVE_INFINITY&&(c-=d.Top+d.Bottom);a.Width=0<e?e:0;a.Height=
0<c?c:0;return a};d.min=function(a,d){a.Width=Math.min(a.Width,d.Width);a.Height=Math.min(a.Height,d.Height);return a};d.max=function(a,d){a.Width=Math.max(a.Width,d.Width);a.Height=Math.max(a.Height,d.Height);return a};return d}();Nullstone.RegisterType(size,"size");
var Thickness=function(){function d(a,d,e,c){this.Left=null==a?0:a;this.Top=null==d?0:d;this.Right=null==e?0:e;this.Bottom=null==c?0:c}d.prototype.Plus=function(a){var g=new d;g.Left=this.Left+a.Left;g.Right=this.Right+a.Right;g.Top=this.Top+a.Top;g.Bottom=this.Bottom+a.Bottom;return g};d.prototype.IsEmpty=function(){return 0==this.Left&&0==this.Top&&0==this.Right&&0==this.Bottom};d.prototype.IsBalanced=function(){return this.Left===this.Top&&this.Left===this.Right&&this.Left===this.Bottom};d.prototype.toString=
function(){return"("+this.Left+", "+this.Top+", "+this.Right+", "+this.Bottom+")"};d.prototype.Clone=function(){return new d(this.Left,this.Top,this.Right,this.Bottom)};d.Equals=function(a,d){return null==a&&null==d?!0:null==a||null==d?!1:a.Left===d.Left&&a.Top===d.Top&&a.Right===d.Right&&a.Bottom===d.Bottom};return d}();Nullstone.RegisterType(Thickness,"Thickness");
var TimeSpan=function(){function d(){this._Ticks=0}d.FromTicks=function(a){var g=new d;g._Ticks=a;return g};d.FromArgs=function(a,g,e,c,b){var f=new d;f._Ticks=a*d._TicksPerDay+g*d._TicksPerHour+e*d._TicksPerMinute+c*d._TicksPerSecond+b*d._TicksPerMillisecond;return f};Object.defineProperty(d.prototype,"Days",{get:function(){return Math.floor(this._Ticks/d._TicksPerDay)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Hours",{get:function(){return Math.floor(this._Ticks%d._TicksPerDay/
d._TicksPerHour)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Minutes",{get:function(){var a=this._Ticks%d._TicksPerDay,a=a%d._TicksPerHour;return Math.floor(a/d._TicksPerMinute)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Seconds",{get:function(){var a=this._Ticks%d._TicksPerDay,a=a%d._TicksPerHour,a=a%d._TicksPerMinute;return Math.floor(a/d._TicksPerSecond)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Milliseconds",{get:function(){var a=
this._Ticks%d._TicksPerDay,a=a%d._TicksPerHour,a=a%d._TicksPerMinute,a=a%d._TicksPerSecond;return Math.floor(a/d._TicksPerMillisecond)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"Ticks",{get:function(){return this._Ticks},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"TotalDays",{get:function(){return this._Ticks/d._TicksPerDay},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"TotalHours",{get:function(){return this._Ticks/d._TicksPerHour},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"TotalMinutes",{get:function(){return this._Ticks/d._TicksPerMinute},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"TotalSeconds",{get:function(){return this._Ticks/d._TicksPerSecond},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"TotalMilliseconds",{get:function(){return this._Ticks/d._TicksPerMillisecond},enumerable:!0,configurable:!0});d.prototype.AddTicks=function(a){null==a||isNaN(a)||(this._Ticks+=
a)};d.prototype.AddMilliseconds=function(a){this.AddTicks(a*d._TicksPerMillisecond)};d.prototype.Add=function(a){var g=new d;g._Ticks=this._Ticks+a._Ticks;return g};d.prototype.Subtract=function(a){var g=new d;g._Ticks=this._Ticks-a._Ticks;return g};d.prototype.Multiply=function(a){var g=new d;g._Ticks=Math.round(this._Ticks*a);return g};d.prototype.Divide=function(a){var g=new d;g._Ticks=this._Ticks/a._Ticks;return g};d.prototype.CompareTo=function(a){return this._Ticks===a._Ticks?0:this._Ticks>
a._Ticks?1:-1};d.prototype.IsZero=function(){return 0===this._Ticks};d.prototype.GetJsDelay=function(){return this._Ticks*d._TicksPerMillisecond};d._TicksPerMillisecond=1;d._TicksPerSecond=1E3;d._TicksPerMinute=60*d._TicksPerSecond;d._TicksPerHour=60*d._TicksPerMinute;d._TicksPerDay=24*d._TicksPerHour;return d}();Nullstone.RegisterType(TimeSpan,"TimeSpan");
var Uri=function(){function d(a){this._OriginalString=a}d.prototype.GetFragment=function(){return""};d.prototype.toString=function(){return this._OriginalString};d.prototype.Clone=function(){return new d(this._OriginalString)};d.IsNullOrEmpty=function(a){return null==a?!0:a._OriginalString?!1:!0};return d}();Nullstone.RegisterType(Uri,"Uri");
var BError=function(){function d(){}d.prototype.ThrowException=function(){var a;switch(this.Number){case d.Attach:a=new AttachException(this.Message,this.Data);break;case d.Argument:a=new ArgumentException(this.Message);break;case d.InvalidOperation:a=new InvalidOperationException(this.Message);break;case d.XamlParse:a=new XamlParseException(this.Message);break;default:a=new Exception(this.Message)}throw a;};d.Argument=2;d.InvalidOperation=3;d.XamlParse=5;d.Attach=6;return d}();
Nullstone.RegisterType(BError,"BError");var Enum=function(){return function(d){this.Object=d}}();Nullstone.RegisterType(Enum,"Enum");
(function(d){d.IEnumerable_=Nullstone.RegisterInterface("IEnumerable");d.IEnumerator_=Nullstone.RegisterInterface("IEnumerator");var a=function(){function a(){}a.AsEnumerable=function(a){return a};a.GetEnumerator=function(a,c){var b=a.length,f={MoveNext:void 0,Current:void 0},d;c?(d=b,f.MoveNext=function(){d--;if(0>d)return f.Current=void 0,!1;f.Current=a[d];return!0}):(d=-1,f.MoveNext=function(){d++;if(d>=b)return f.Current=void 0,!1;f.Current=a[d];return!0});return f};a.GetNodeEnumerator=function(a,
c){var b=a.length,f={MoveNext:void 0,Current:void 0},d;c?(d=b,f.MoveNext=function(){d--;if(0>d)return f.Current=void 0,!1;f.Current=a[d].XamlNode;return!0}):(d=-1,f.MoveNext=function(){d++;if(d>=b)return f.Current=void 0,!1;f.Current=a[d].XamlNode;return!0});return f};a.RemoveIfContains=function(a,c){var b=a.indexOf(c);if(0>b)return!1;a.splice(b,1);return!0};a.Except=function(a,c){for(var b,f=[],d=0;d<a.length;d++)b=a[d],0>c.indexOf(b)&&f.push(b);return f};a.Fill=function(a,c,b,f){for(var d=c;d<c+
b;d++)a.splice(d,0,f)};a.EmptyEnumerator={MoveNext:function(){return!1},Current:void 0};return a}();d.ArrayEx=a})(Fayde||(Fayde={}));Object.defineProperty(Array.prototype,"GetEnumerator",{value:function(d){return Fayde.ArrayEx.GetEnumerator(this,d)},enumerable:!1});var EventArgs=function(){function d(){}d.Empty=new d;return d}();Nullstone.RegisterType(EventArgs,"EventArgs");
var MulticastEvent=function(){function d(){this._Listeners=[]}d.prototype.Subscribe=function(a,d){this._Listeners.push({Closure:d,Callback:a})};d.prototype.Unsubscribe=function(a,d){for(var e=this._Listeners,c=e.length,b=null,f=0;f<c;)b=e[f],b.Closure===d&&b.Callback===a?(e.splice(f,1),c--):f++};d.prototype.Raise=function(a,d){for(var e=this._Listeners,c=e.length,b=null,f=0;f<c;f++)b=e[f],b.Callback.call(b.Closure,a,d)};d.prototype.RaiseAsync=function(a,d){var e=this;window.setTimeout(function(){return e.Raise(a,
d)},1)};return d}();Nullstone.RegisterType(MulticastEvent,"MulticastEvent");
(function(d){(function(a){(function(c){c[c.Add=1]="Add";c[c.Remove=2]="Remove";c[c.Replace=3]="Replace";c[c.Reset=4]="Reset"})(a.NotifyCollectionChangedAction||(a.NotifyCollectionChangedAction={}));var d=a.NotifyCollectionChangedAction,e=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.Reset=function(){var f=new b;Object.defineProperty(f,"Action",{value:d.Reset,writable:!1});Object.defineProperty(f,"OldStartingIndex",{value:-1,writable:!1});Object.defineProperty(f,"NewStartingIndex",
{value:-1,writable:!1});Object.defineProperty(f,"OldItems",{value:null,writable:!1});Object.defineProperty(f,"NewItems",{value:null,writable:!1});return f};b.Replace=function(f,c,a){var e=new b;Object.defineProperty(e,"Action",{value:d.Replace,writable:!1});Object.defineProperty(e,"OldStartingIndex",{value:-1,writable:!1});Object.defineProperty(e,"NewStartingIndex",{value:a,writable:!1});Object.defineProperty(e,"OldItems",{value:[c],writable:!1});Object.defineProperty(e,"NewItems",{value:[f],writable:!1});
return e};b.Add=function(f,c){var a=new b;Object.defineProperty(a,"Action",{value:d.Add,writable:!1});Object.defineProperty(a,"OldStartingIndex",{value:-1,writable:!1});Object.defineProperty(a,"NewStartingIndex",{value:c,writable:!1});Object.defineProperty(a,"OldItems",{value:null,writable:!1});Object.defineProperty(a,"NewItems",{value:[f],writable:!1});return a};b.AddRange=function(f,c){var a=new b;Object.defineProperty(a,"Action",{value:d.Add,writable:!1});Object.defineProperty(a,"OldStartingIndex",
{value:-1,writable:!1});Object.defineProperty(a,"NewStartingIndex",{value:c,writable:!1});Object.defineProperty(a,"OldItems",{value:null,writable:!1});Object.defineProperty(a,"NewItems",{value:f,writable:!1});return a};b.Remove=function(f,c){var a=new b;Object.defineProperty(a,"Action",{value:d.Remove,writable:!1});Object.defineProperty(a,"OldStartingIndex",{value:c,writable:!1});Object.defineProperty(a,"NewStartingIndex",{value:-1,writable:!1});Object.defineProperty(a,"OldItems",{value:[f],writable:!1});
Object.defineProperty(a,"NewItems",{value:null,writable:!1});return a};return b}(EventArgs);a.NotifyCollectionChangedEventArgs=e})(d.Collections||(d.Collections={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(){function e(){this._ht=[];this.CollectionChanged=new MulticastEvent;this.PropertyChanged=new MulticastEvent}e.prototype.GetEnumerator=function(){return d.ArrayEx.GetEnumerator(this._ht)};Object.defineProperty(e.prototype,"Count",{get:function(){return this._ht.length},enumerable:!0,configurable:!0});e.prototype.GetValueAt=function(c){var b=this._ht;if(0>c||c>=b.length)throw new IndexOutOfRangeException(c);return b[c]};e.prototype.SetValueAt=function(c,b){var f=
this._ht;if(0>c||c>=f.length)throw new IndexOutOfRangeException(c);var d=f[c];f[c]=b;this.CollectionChanged.Raise(this,a.NotifyCollectionChangedEventArgs.Replace(b,d,c))};e.prototype.Add=function(c){var b=this._ht.push(c)-1;this.CollectionChanged.Raise(this,a.NotifyCollectionChangedEventArgs.Add(c,b));this._RaisePropertyChanged("Count")};e.prototype.AddRange=function(c){for(var b=this._ht.length,f=c.length,d=0;d<f;d++)this._ht.push(c[d]);this.CollectionChanged.Raise(this,a.NotifyCollectionChangedEventArgs.AddRange(c,
b));this._RaisePropertyChanged("Count")};e.prototype.Insert=function(c,b){var f=this._ht;if(0>b||b>f.length)throw new IndexOutOfRangeException(b);b>=f.length?f.push(c):f.splice(b,0,c);this.CollectionChanged.Raise(this,a.NotifyCollectionChangedEventArgs.Add(c,b));this._RaisePropertyChanged("Count")};e.prototype.IndexOf=function(c){return this._ht.indexOf(c)};e.prototype.Contains=function(c){return 0<this._ht.indexOf(c)};e.prototype.Remove=function(c){var b=this._ht.indexOf(c);0>b||(this._ht.splice(b,
1),this.CollectionChanged.Raise(this,a.NotifyCollectionChangedEventArgs.Remove(c,b)),this._RaisePropertyChanged("Count"))};e.prototype.RemoveAt=function(c){if(0>c||c>=this._ht.length)throw new IndexOutOfRangeException(c);var b=this._ht.splice(c,1)[0];this.CollectionChanged.Raise(this,a.NotifyCollectionChangedEventArgs.Remove(b,c));this._RaisePropertyChanged("Count")};e.prototype.Clear=function(){this._ht=[];this.CollectionChanged.Raise(this,a.NotifyCollectionChangedEventArgs.Reset());this._RaisePropertyChanged("Count")};
e.prototype._RaisePropertyChanged=function(c){this.PropertyChanged.Raise(this,new d.PropertyChangedEventArgs(c))};return e}();a.ObservableCollection=g;Nullstone.RegisterType(g,"ObservableCollection",[d.IEnumerable_,a.INotifyCollectionChanged_,d.INotifyPropertyChanged_])})(d.Collections||(d.Collections={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(b,f){a.call(this);if(!b)throw new XamlParseException("ControlTemplate must have a TargetType.");Object.defineProperty(this,"TargetType",{value:b,writable:!1});this._TempJson=f}__extends(c,a);c.prototype.GetVisualTree=function(b){var f=this._TempJson;if(!f)throw new XamlParseException("ControlTemplate has no definition.");var c=new d.NameScope(!0);b=d.JsonParser.Parse(f,b,c,this.ResChain);if(!(b instanceof d.UIElement))throw new XamlParseException("ControlTemplate root visual is not a UIElement.");
b.XamlNode.NameScope=c;return b};return c}(d.FrameworkTemplate);a.ControlTemplate=g;Nullstone.RegisterType(g,"ControlTemplate")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(b){e.call(this);this._TempJson=b}__extends(c,e);c.prototype.GetVisualTree=function(b){var f=this._TempJson;if(!f)throw new XamlParseException("ItemsPanelTemplate has no definition.");var c=new d.NameScope(!0);b=d.JsonParser.Parse(f,b,new d.NameScope(!0),this.ResChain);if(!(b instanceof a.Panel))throw new XamlParseException("The root element of an ItemsPanelTemplate must be a Panel subclass.");b.XamlNode.NameScope=c;return b};return c}(d.FrameworkTemplate);
a.ItemsPanelTemplate=g;Nullstone.RegisterType(g,"ItemsPanelTemplate")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(c){function b(b,a,d,e,g){c.call(this);Object.defineProperty(this,"Action",{value:b,writable:!1});Object.defineProperty(this,"ItemCount",{value:a,writable:!1});Object.defineProperty(this,"ItemUICount",{value:d,writable:!1});Object.defineProperty(this,"OldPosition",{value:e,writable:!1});Object.defineProperty(this,"Position",{value:g,writable:!1})}__extends(b,c);return b}(EventArgs);a.ItemsChangedEventArgs=d;Nullstone.RegisterType(d,"ItemsChangedEventArgs")})(a.Primitives||
(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(c){a.call(this);this._TempJson=c}__extends(e,a);e.prototype.GetVisualTree=function(a){var b=this._TempJson;if(!b)throw new XamlParseException("DataTemplate has no definition.");var f=new d.NameScope(!0);a=d.JsonParser.Parse(b,a,f,this.ResChain);if(!(a instanceof d.UIElement))throw new XamlParseException("DataTemplate root visual is not a UIElement.");a.XamlNode.NameScope=f;return a};return e}(d.FrameworkTemplate);d.DataTemplate=a;Nullstone.RegisterType(a,
"DataTemplate")})(Fayde||(Fayde={}));(function(d){var a=function(a){function d(){a.apply(this,arguments)}__extends(d,a);d.prototype.GetValue=function(a){};d.prototype.toString=function(){return"DeferredValueExpression"};return d}(d.Expression);d.DeferredValueExpression=a;Nullstone.RegisterType(a,"DeferredValueExpression")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function c(b){a.call(this,b)}__extends(c,a);c.prototype.OnParentChanged=function(b,f){var a=g.DataContextProperty,c=d.Providers.GetStorage(this.XObject,a);a.Store.EmitInheritedChanged(c,f?f.DataContext:void 0)};Object.defineProperty(c.prototype,"DataContext",{get:function(){return this.XObject.DataContext},set:function(b){var f=g.DataContextProperty,a=d.Providers.GetStorage(this.XObject,f);f.Store.EmitInheritedChanged(a,b);this.OnDataContextChanged(void 0,b)},enumerable:!0,
configurable:!0});c.prototype._DataContextPropertyChanged=function(b){this.OnDataContextChanged(b.OldValue,b.NewValue)};return c}(d.XamlNode);d.DONode=a;Nullstone.RegisterType(a,"DONode");var g=function(e){function c(){e.call(this);this._Expressions=[];this._PropertyStorage=[]}__extends(c,e);c.prototype.CreateNode=function(){return new a(this)};c.prototype.GetValue=function(b){if(!b)throw new ArgumentException("No property specified.");var f=d.Providers.GetStorage(this,b);return b.Store.GetValue(f)};
c.prototype.SetValue=function(b,f){if(!b)throw new ArgumentException("No property specified.");if(b.IsReadOnly)throw new InvalidOperationException("DependencyProperty '"+b.OwnerType._TypeName+"."+b.Name+"' is read only.");this.SetValueInternal(b,f)};c.prototype.SetValueInternal=function(b,f){var a;f instanceof d.Expression&&(a=f);if(a instanceof d.Data.BindingExpressionBase){var c=a.Binding,e=c.Path.Path;if((!e||"."===e)&&c.Mode===d.Data.BindingMode.TwoWay)throw new ArgumentException("TwoWay bindings require a non-empty Path.");
c.Seal()}var e=this._Expressions[b._ID],g=!1,k=!1;if(a){if(a!==e){if(a.IsAttached)throw new ArgumentException("Cannot attach the same Expression to multiple FrameworkElements");e&&this._RemoveExpression(b);this._AddExpression(b,a)}k=!0;f=a.GetValue(b)}else e&&(e instanceof d.Data.BindingExpressionBase?(c=e.Binding,c.Mode===d.Data.BindingMode.TwoWay?g=!e.IsUpdating&&!b.IsCustom:e.IsUpdating&&c.Mode!==d.Data.BindingMode.OneTime||this._RemoveExpression(b)):e.IsUpdating||this._RemoveExpression(b));a=
d.Providers.GetStorage(this,b);try{b.Store.SetLocalValue(a,f),g&&e._TryUpdateSourceObject(f)}catch(m){if(!k)throw m;b.Store.SetLocalValue(a,b.DefaultValue);g&&e._TryUpdateSourceObject(f)}};c.prototype.SetStoreValue=function(b,f){var a=d.Providers.GetStorage(this,b);b.Store.SetLocalValue(a,f)};c.prototype.ClearValue=function(b){if(!b)throw new ArgumentException("No dependency property.");if(b.IsReadOnly&&!b.IsCustom)throw new ArgumentException("This property is readonly.");this._RemoveExpression(b);
var f=d.Providers.GetStorage(this,b),a=f.Animations;a&&0<a.length||b.Store.ClearValue(f)};c.prototype.ReadLocalValue=function(b){if(!b)throw new ArgumentException("No property specified.");var f=this._Expressions[b._ID];if(f)return f.GetValue(b);b=this.ReadLocalValueInternal(b);return void 0===b?d.UnsetValue:b};c.prototype.ReadLocalValueInternal=function(b){return d.Providers.GetStorage(this,b).Local};c.prototype._AddExpression=function(b,f){this._Expressions[b._ID]=f;f.OnAttached(this)};c.prototype._RemoveExpression=
function(b){var f=this._Expressions[b._ID];f&&(this._Expressions[b._ID]=void 0,f.OnDetached(this))};c.prototype._HasDeferredValueExpression=function(b){return this._Expressions[b._ID]instanceof d.DeferredValueExpression};c.prototype.GetBindingExpression=function(b){b=this._Expressions[b._ID];if(b instanceof d.Data.BindingExpressionBase)return b};c.prototype.SetBinding=function(b,f){if(!b)throw new ArgumentException("propd");if(!f)throw new ArgumentException("binding");var a=new d.Data.BindingExpression(f,
this,b);this.SetValueInternal(b,a);return a};c.prototype.CloneCore=function(b){b=b._PropertyStorage;var f=this._PropertyStorage=[],a;for(a in b){var c=b[a];f[a]=c.Property.Store.Clone(this,c)}};c.DataContextProperty=DependencyProperty.Register("DataContext",function(){return Object},c,void 0,function(b,f){return b.XamlNode._DataContextPropertyChanged(f)});return c}(d.XamlObject);d.DependencyObject=g;Nullstone.RegisterType(g,"DependencyObject");g.DataContextProperty.Store=d.Providers.DataContextStore.Instance})(Fayde||
(Fayde={}));var DependencyPropertyChangedEventArgs=function(d){function a(){d.apply(this,arguments)}__extends(a,d);return a}(EventArgs);
(function(d){var a=function(){function a(){}a._UseLayoutRoundingPropertyChanged=function(a,c){var b=a.XamlNode.LayoutUpdater;b.InvalidateMeasure();b.InvalidateArrange()};a._FlowDirectionPropertyChanged=function(a,c){var b=a.XamlNode;b._FlowDirectionChanged&&b._FlowDirectionChanged(c)};a._FontFamilyPropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};a._FontSizePropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};a._FontStretchPropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};
a._FontStylePropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};a._FontWeightPropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};a._ForegroundPropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};a._TextDecorationsPropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};a._LanguagePropertyChanged=function(a,c){a.FontChanged&&a.FontChanged(c)};a.UseLayoutRoundingProperty=DependencyProperty.RegisterInheritable("UseLayoutRounding",function(){return Boolean},a,!0,
a._UseLayoutRoundingPropertyChanged);a.FlowDirectionProperty=DependencyProperty.RegisterInheritable("FlowDirection",function(){return new Enum(d.FlowDirection)},a,d.FlowDirection.LeftToRight,a._FlowDirectionPropertyChanged);a.FontFamilyProperty=DependencyProperty.RegisterInheritable("FontFamily",function(){return String},a,Font.DEFAULT_FAMILY,a._FontFamilyPropertyChanged);a.FontSizeProperty=DependencyProperty.RegisterInheritable("FontSize",function(){return Number},a,Font.DEFAULT_SIZE,a._FontSizePropertyChanged);
a.FontStretchProperty=DependencyProperty.RegisterInheritable("FontStretch",function(){return String},a,Font.DEFAULT_STRETCH,a._FontStretchPropertyChanged);a.FontStyleProperty=DependencyProperty.RegisterInheritable("FontStyle",function(){return String},a,Font.DEFAULT_STYLE,a._FontStylePropertyChanged);a.FontWeightProperty=DependencyProperty.RegisterInheritable("FontWeight",function(){return new Enum(d.FontWeight)},a,Font.DEFAULT_WEIGHT,a._FontWeightPropertyChanged);a.ForegroundProperty=DependencyProperty.RegisterInheritable("Foreground",
function(){return d.Media.Brush},a,void 0,a._ForegroundPropertyChanged);a.TextDecorationsProperty=DependencyProperty.RegisterInheritable("TextDecorations",function(){return new Enum(d.TextDecorations)},a,d.TextDecorations.None,a._TextDecorationsPropertyChanged);a.LanguageProperty=DependencyProperty.RegisterInheritable("Language",function(){return String},a,void 0,a._LanguagePropertyChanged);return a}();d.InheritableOwner=a;a.AllInheritedProperties=[a.ForegroundProperty,a.FontFamilyProperty,a.FontStretchProperty,
a.FontStyleProperty,a.FontWeightProperty,a.FontSizeProperty,a.LanguageProperty,a.FlowDirectionProperty,a.UseLayoutRoundingProperty,a.TextDecorationsProperty];Nullstone.RegisterType(a,"InheritableOwner")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function d(c){a.call(this);Object.defineProperty(this,"PropertyName",{value:c,writable:!1})}__extends(d,a);return d}(EventArgs);d.PropertyChangedEventArgs=a;Nullstone.RegisterType(a,"PropertyChangedEventArgs");d.INotifyPropertyChanged_=Nullstone.RegisterInterface("INotifyPropertyChanged")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(c,b,f,d){a.call(this);this._Json=c;this._Namescope=b;this._TemplateBindingSource=f;this._ResChain=d}__extends(e,a);e.prototype.CreateResource=function(){return d.JsonParser.Parse(this._Json,this._TemplateBindingSource,this._Namescope,this._ResChain)};return e}(d.XamlObject);d.ResourceTarget=a;Nullstone.RegisterType(a,"ResourceTarget")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function d(){a.apply(this,arguments)}__extends(d,a);return d}(MulticastEvent);d.RoutedEvent=a;Nullstone.RegisterType(a,"RoutedEvent")})(Fayde||(Fayde={}));(function(d){var a=function(a){function d(){a.apply(this,arguments);this.Handled=!1;this.OriginalSource=this.Source=null}__extends(d,a);return d}(EventArgs);d.RoutedEventArgs=a;Nullstone.RegisterType(a,"RoutedEventArgs")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function d(){a.apply(this,arguments)}__extends(d,a);return d}(d.RoutedEvent);d.RoutedPropertyChangedEvent=a;Nullstone.RegisterType(a,"RoutedPropertyChangedEvent");a=function(a){function d(c,b){a.call(this);Object.defineProperty(this,"OldValue",{value:c,writable:!1});Object.defineProperty(this,"NewValue",{value:b,writable:!1})}__extends(d,a);return d}(d.RoutedEventArgs);d.RoutedPropertyChangedEventArgs=a;Nullstone.RegisterType(a,"RoutedPropertyChangedEventArgs")})(Fayde||
(Fayde={}));(function(d){var a=function(a){function d(c,b){a.call(this);Object.defineProperty(this,"PreviousSize",{value:size.copyTo(c),writable:!1});Object.defineProperty(this,"NewSize",{value:size.copyTo(b),writable:!1})}__extends(d,a);return d}(d.RoutedEventArgs);d.SizeChangedEventArgs=a;Nullstone.RegisterType(a,"SizeChangedEventArgs")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(){a.call(this);this._IsSealed=!1;var c=new d.SetterCollection;c.AttachTo(this);Object.defineProperty(this,"Setters",{value:c,writable:!1})}__extends(e,a);e.prototype.Seal=function(){if(!this._IsSealed){this.Setters._Seal(this.TargetType);this._IsSealed=!0;var a=this.BasedOn;a&&a.Seal()}};e.prototype.Validate=function(a,b){var f=a.constructor;if(this._IsSealed)return a instanceof this.TargetType?!0:(b.Number=BError.XamlParse,b.Message="Style.TargetType ("+
this.TargetType._TypeName+") is not a subclass of ("+f._TypeName+")",!1);for(var d=[],n=this;n;){if(-1<d.indexOf(n))return b.Number=BError.InvalidOperation,b.Message="Circular reference in Style.BasedOn",!1;d.push(n);n=n.BasedOn}for(n=this;n;){d=n.TargetType;if(n===this){if(!d)return b.Number=BError.InvalidOperation,b.Message="TargetType cannot be null",!1;if(!Nullstone.DoesInheritFrom(f,d))return b.Number=BError.XamlParse,b.Message="Style.TargetType ("+d._TypeName+") is not a subclass of ("+f._TypeName+
")",!1}else if(!d||!Nullstone.DoesInheritFrom(f,d))return b.Number=BError.InvalidOperation,b.Message="Style.TargetType ("+(d?d._TypeName:"<Not Specified>")+") is not a subclass of ("+f._TypeName+")",!1;f=d;n=n.BasedOn}this.Seal();return!0};e.BasedOnProperty=DependencyProperty.Register("BasedOn",function(){return e},e);e.TargetTypeProperty=DependencyProperty.Register("TargetType",function(){return Function},e);e.Annotations={ContentProperty:"Setters"};return e}(d.DependencyObject);d.Style=a;Nullstone.RegisterType(a,
"Style")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(){a.apply(this,arguments);this._ht=[]}__extends(e,a);e.prototype.AttachTo=function(a){var b=new BError;this.XamlNode.AttachTo(a.XamlNode,b)||b.ThrowException()};Object.defineProperty(e.prototype,"Count",{get:function(){return this._ht.length},enumerable:!0,configurable:!0});e.prototype.GetRange=function(a,b){return this._ht.slice(a,b)};e.prototype.GetValueAt=function(a){return this._ht[a]};e.prototype.SetValueAt=function(a,b){if(!this.CanAdd(b)||0>a||a>=this._ht.length)return!1;
var f=this._ht[a],d=new BError;return this.AddingToCollection(b,d)?(this._ht[a]=b,this.RemovedFromCollection(f,!0),this._RaiseItemReplaced(f,b,a),!0):!1};e.prototype.Add=function(a){return this.Insert(this._ht.length,a)?this._ht.length-1:-1};e.prototype.Insert=function(a,b){if(!this.CanAdd(b)||0>a)return!1;var f=this._ht.length;a>f&&(a=f);f=new BError;if(this.AddingToCollection(b,f))return this._ht.splice(a,0,b),this._RaiseItemAdded(b,a),!0;if(f.Message)throw new Exception(f.Message);return!1};e.prototype.Remove=
function(a){a=this.IndexOf(a);return-1===a?!1:this.RemoveAt(a)};e.prototype.RemoveAt=function(a){if(0>a||a>=this._ht.length)return!1;var b=this._ht[a];this._ht.splice(a,1);this.RemovedFromCollection(b,!0);this._RaiseItemRemoved(b,a);return!0};e.prototype.Clear=function(){var a=this._ht;this._ht=[];for(var b=a.length,f=0;f<b;f++)this.RemovedFromCollection(a[f],!0);this._RaiseCleared();return!0};e.prototype.IndexOf=function(a){return this._ht.indexOf(a)};e.prototype.Contains=function(a){return-1<this.IndexOf(a)};
e.prototype.CanAdd=function(a){return!0};e.prototype.AddingToCollection=function(a,b){if(a instanceof d.XamlObject)return a.XamlNode.AttachTo(this.XamlNode,b)};e.prototype.RemovedFromCollection=function(a,b){a instanceof d.XamlObject&&a.XamlNode.Detach()};e.prototype.GetEnumerator=function(a){return d.ArrayEx.GetEnumerator(this._ht,a)};e.prototype.GetNodeEnumerator=function(a){return d.ArrayEx.GetNodeEnumerator(this._ht,a)};e.prototype._RaiseItemAdded=function(a,b){};e.prototype._RaiseItemRemoved=
function(a,b){};e.prototype._RaiseItemReplaced=function(a,b,f){};e.prototype._RaiseCleared=function(){};e.prototype.CloneCore=function(a){for(a=d.ArrayEx.GetEnumerator(a._ht);a.MoveNext();)this.Add(d.Clone(a.Current))};return e}(d.XamlObject);d.XamlObjectCollection=a;Nullstone.RegisterType(a,"XamlObjectCollection",[d.IEnumerable_])})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(b){d.call(this);this._BindsDirectlyToSource=!1;this._Mode=a.BindingMode.OneWay;this._NotifyOnValidationError=!1;this._UpdateSourceTrigger=a.UpdateSourceTrigger.Default;this._ValidatesOnDataErrors=this._ValidatesOnExceptions=!1;this._ValidatesOnNotifyDataErrors=!0;b||(b="");this._Path=new a.PropertyPath(b)}__extends(c,d);Object.defineProperty(c.prototype,"BindsDirectlyToSource",{get:function(){return this._BindsDirectlyToSource},set:function(b){this.CheckSealed();
this._BindsDirectlyToSource=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Converter",{get:function(){return this._Converter},set:function(b){this.CheckSealed();this._Converter=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ConverterParameter",{get:function(){return this._ConverterParameter},set:function(b){this.CheckSealed();this._ConverterParameter=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ConverterCulture",{get:function(){return this._ConverterCulture},
set:function(b){this.CheckSealed();this._ConverterCulture=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ElementName",{get:function(){return this._ElementName},set:function(b){this.CheckSealed();this._ElementName=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Mode",{get:function(){return this._Mode},set:function(b){this.CheckSealed();this._Mode=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"NotifyOnValidationError",{get:function(){return this._NotifyOnValidationError},
set:function(b){this.CheckSealed();this._NotifyOnValidationError=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"RelativeSource",{get:function(){return this._RelativeSource},set:function(b){this.CheckSealed();this._RelativeSource=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Path",{get:function(){return this._Path},set:function(b){this.CheckSealed();this._Path=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Source",{get:function(){return this._Source},
set:function(b){this.CheckSealed();this._Source=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"UpdateSourceTrigger",{get:function(){return this._UpdateSourceTrigger},set:function(b){this.CheckSealed();this._UpdateSourceTrigger=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ValidatesOnExceptions",{get:function(){return this._ValidatesOnExceptions},set:function(b){this.CheckSealed();this._ValidatesOnExceptions=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"ValidatesOnDataErrors",{get:function(){return this._ValidatesOnDataErrors},set:function(b){this.CheckSealed();this._ValidatesOnDataErrors=b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ValidatesOnNotifyDataErrors",{get:function(){return this._ValidatesOnNotifyDataErrors},set:function(b){this.CheckSealed();this._ValidatesOnNotifyDataErrors=b},enumerable:!0,configurable:!0});return c}(a.BindingBase);a.Binding=d;Nullstone.RegisterType(d,"Binding")})(d.Data||(d.Data={}))})(Fayde||
(Fayde={}));
(function(d){(function(a){var d=function(a){function c(b,f,c){a.call(this,b,f,c)}__extends(c,a);Object.defineProperty(c.prototype,"ParentBinding",{get:function(){return this.Binding},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"DataItem",{get:function(){return this.DataSource},enumerable:!0,configurable:!0});c.prototype.UpdateSource=function(){return this._UpdateSourceObject(void 0,!0)};return c}(a.BindingExpressionBase);a.BindingExpression=d;Nullstone.RegisterType(d,"BindingExpression")})(d.Data||
(d.Data={}))})(Fayde||(Fayde={}));(function(d){(function(a){var g=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.SourceProperty=DependencyProperty.Register("Source",function(){return Object},c);c.ViewProperty=DependencyProperty.Register("View",function(){return a.ICollectionView_},c);return c}(d.DependencyObject);a.CollectionViewSource=g})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(b){function a(f,c){b.call(this,f);this.InheritedWalkProperty=c}__extends(a,b);a.prototype.GetInheritedEnumerator=function(){if(!this.InheritedWalkProperty)return d.ArrayEx.EmptyEnumerator;var b=this.XObject[this.InheritedWalkProperty];if(b)return b.GetNodeEnumerator()};return a}(d.DONode);a.TextElementNode=g;Nullstone.RegisterType(g,"TextElementNode");var e=function(b){function a(){b.call(this);this._Font=new Font;this._UpdateFont(!0)}__extends(a,b);a.prototype.CreateNode=
function(){return new g(this,null)};a.prototype.IsInheritable=function(b){return-1<c.indexOf(b)};a.prototype._SerializeText=function(){};a.prototype._UpdateFont=function(b){var a=this._Font;a.Family=this.FontFamily;a.Stretch=this.FontStretch;a.Style=this.FontStyle;a.Weight=this.FontWeight;a.Size=this.FontSize;return a.IsChanged||b};Object.defineProperty(a.prototype,"Background",{get:function(){return null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"SelectionBackground",{get:function(){return null},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"SelectionForeground",{get:function(){return this.Foreground},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"Font",{get:function(){return this._Font},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"Direction",{get:function(){return d.FlowDirection.LeftToRight},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"IsUnderlined",{get:function(){return 0<(this.TextDecorations&d.TextDecorations.Underline)},
enumerable:!0,configurable:!0});a.prototype.Equals=function(b){return this.FontFamily===b.FontFamily&&this.FontSize===b.FontSize&&this.FontStyle===b.FontStyle&&this.FontWeight===b.FontWeight&&this.FontStretch===b.FontStretch&&this.TextDecorations===b.TextDecorations&&Nullstone.Equals(this.Foreground,b.Foreground)?!0:!1};a.prototype.FontChanged=function(b){this._UpdateFont(!1)};a.FontFamilyProperty=d.InheritableOwner.FontFamilyProperty.ExtendTo(a);a.FontSizeProperty=d.InheritableOwner.FontSizeProperty.ExtendTo(a);
a.FontStretchProperty=d.InheritableOwner.FontStretchProperty.ExtendTo(a);a.FontStyleProperty=d.InheritableOwner.FontStyleProperty.ExtendTo(a);a.FontWeightProperty=d.InheritableOwner.FontWeightProperty.ExtendTo(a);a.ForegroundProperty=d.InheritableOwner.ForegroundProperty.ExtendTo(a);a.TextDecorationsProperty=d.InheritableOwner.TextDecorationsProperty.ExtendTo(a);a.LanguageProperty=d.InheritableOwner.LanguageProperty.ExtendTo(a);return a}(d.DependencyObject);a.TextElement=e;Nullstone.RegisterType(e,
"TextElement");var c=[e.FontFamilyProperty,e.FontSizeProperty,e.FontStretchProperty,e.FontStyleProperty,e.FontWeightProperty,e.ForegroundProperty,e.TextDecorationsProperty,e.LanguageProperty]})(d.Documents||(d.Documents={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function d(){}d.GetAcceptsReturn=function(a){return a.GetValue(d.AcceptsReturnProperty)};d.SetAcceptsReturn=function(a,b){a.SetValue(d.AcceptsReturnProperty,b)};d.GetControlTabNavigation=function(a){return a.GetValue(d.ControlTabNavigationProperty)};d.SetControlTabNavigation=function(a,b){a.SetValue(d.ControlTabNavigationProperty,b)};d.GetDirectionalNavigation=function(a){return a.GetValue(d.DirectionalNavigationProperty)};d.SetDirectionalNavigation=function(a,
b){a.SetValue(d.DirectionalNavigationProperty,b)};d.GetIsTabStop=function(a){return a.GetValue(d.IsTabStopProperty)};d.SetIsTabStop=function(a,b){a.SetValue(d.IsTabStopProperty,b)};d.GetTabIndex=function(a){return a.GetValue(d.TabIndexProperty)};d.SetTabIndex=function(a,b){a.SetValue(d.TabIndexProperty,b)};d.GetTabNavigation=function(a){return a.GetValue(d.TabNavigationProperty)};d.SetTabNavigation=function(a,b){a.SetValue(d.TabNavigationProperty,b)};d.AcceptsReturnProperty=DependencyProperty.RegisterAttached("AcceptsReturn",
function(){return Boolean},d);d.ControlTabNavigationProperty=DependencyProperty.RegisterAttached("ControlTabNavigation",function(){return new Enum(a.KeyboardNavigationMode)},d);d.DirectionalNavigationProperty=DependencyProperty.RegisterAttached("DirectionalNavigation",function(){return new Enum(a.KeyboardNavigationMode)},d);d.IsTabStopProperty=DependencyProperty.RegisterAttached("IsTabStop",function(){return Boolean},d);d.TabIndexProperty=DependencyProperty.RegisterAttached("TabIndex",function(){return Number},
d);d.TabNavigationProperty=DependencyProperty.RegisterAttached("TabNavigation",function(){return new Enum(a.KeyboardNavigationMode)},d);return d}();a.KeyboardNavigation=d;Nullstone.RegisterType(d,"KeyboardNavigation")})(d.Input||(d.Input={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){a[a.None=0]="None";a[a.Back=1]="Back";a[a.Tab=2]="Tab";a[a.Enter=3]="Enter";a[a.Shift=4]="Shift";a[a.Ctrl=5]="Ctrl";a[a.Alt=6]="Alt";a[a.CapsLock=7]="CapsLock";a[a.Escape=8]="Escape";a[a.Space=9]="Space";a[a.PageUp=10]="PageUp";a[a.PageDown=11]="PageDown";a[a.End=12]="End";a[a.Home=13]="Home";a[a.Left=14]="Left";a[a.Up=15]="Up";a[a.Right=16]="Right";a[a.Down=17]="Down";a[a.Insert=18]="Insert";a[a.Delete=19]="Delete";a[a.D0=20]="D0";a[a.D1=21]="D1";a[a.D2=22]=
"D2";a[a.D3=23]="D3";a[a.D4=24]="D4";a[a.D5=25]="D5";a[a.D6=26]="D6";a[a.D7=27]="D7";a[a.D8=28]="D8";a[a.D9=29]="D9";a[a.A=30]="A";a[a.B=31]="B";a[a.C=32]="C";a[a.D=33]="D";a[a.E=34]="E";a[a.F=35]="F";a[a.G=36]="G";a[a.H=37]="H";a[a.I=38]="I";a[a.J=39]="J";a[a.K=40]="K";a[a.L=41]="L";a[a.M=42]="M";a[a.N=43]="N";a[a.O=44]="O";a[a.P=45]="P";a[a.Q=46]="Q";a[a.R=47]="R";a[a.S=48]="S";a[a.T=49]="T";a[a.U=50]="U";a[a.V=51]="V";a[a.W=52]="W";a[a.X=53]="X";a[a.Y=54]="Y";a[a.Z=55]="Z";a[a.F1=56]="F1";a[a.F2=
57]="F2";a[a.F3=58]="F3";a[a.F4=59]="F4";a[a.F5=60]="F5";a[a.F6=61]="F6";a[a.F7=62]="F7";a[a.F8=63]="F8";a[a.F9=64]="F9";a[a.F10=65]="F10";a[a.F11=66]="F11";a[a.F12=67]="F12";a[a.NumPad0=68]="NumPad0";a[a.NumPad1=69]="NumPad1";a[a.NumPad2=70]="NumPad2";a[a.NumPad3=71]="NumPad3";a[a.NumPad4=72]="NumPad4";a[a.NumPad5=73]="NumPad5";a[a.NumPad6=74]="NumPad6";a[a.NumPad7=75]="NumPad7";a[a.NumPad8=76]="NumPad8";a[a.NumPad9=77]="NumPad9";a[a.Multiply=78]="Multiply";a[a.Add=79]="Add";a[a.Subtract=80]="Subtract";
a[a.Decimal=81]="Decimal";a[a.Divide=82]="Divide";a[a.Unknown=255]="Unknown"})(a.Key||(a.Key={}));var g=a.Key,e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);return b}(d.RoutedEventArgs);a.KeyboardEventArgs=e;Nullstone.RegisterType(e,"KeyboardEventArgs");e=function(a){function b(b,d,n,e){a.call(this);this.Modifiers=b;this.PlatformKeyCode=d;this.Key=n;null==this.Key&&(this.Key=g.Unknown);this.Char=e}__extends(b,a);return b}(e);a.KeyEventArgs=e;Nullstone.RegisterType(e,"KeyEventArgs")})(d.Input||
(d.Input={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=[];g[8]=a.Key.Back;g[9]=a.Key.Tab;g[13]=a.Key.Enter;g[16]=a.Key.Shift;g[17]=a.Key.Ctrl;g[18]=a.Key.Alt;g[20]=a.Key.CapsLock;g[27]=a.Key.Escape;g[32]=a.Key.Space;g[33]=a.Key.PageUp;g[34]=a.Key.PageDown;g[35]=a.Key.End;g[36]=a.Key.Home;g[37]=a.Key.Left;g[38]=a.Key.Up;g[39]=a.Key.Right;g[40]=a.Key.Down;g[45]=a.Key.Insert;g[46]=a.Key.Delete;g[48]=a.Key.D0;g[49]=a.Key.D1;g[50]=a.Key.D2;g[51]=a.Key.D3;g[52]=a.Key.D4;g[53]=a.Key.D5;g[54]=a.Key.D6;g[55]=a.Key.D7;g[56]=a.Key.D8;
g[57]=a.Key.D9;g[65]=a.Key.A;g[66]=a.Key.B;g[67]=a.Key.C;g[68]=a.Key.D;g[69]=a.Key.E;g[70]=a.Key.F;g[71]=a.Key.G;g[72]=a.Key.H;g[73]=a.Key.I;g[74]=a.Key.J;g[75]=a.Key.K;g[76]=a.Key.L;g[77]=a.Key.M;g[78]=a.Key.N;g[79]=a.Key.O;g[80]=a.Key.P;g[81]=a.Key.Q;g[82]=a.Key.R;g[83]=a.Key.S;g[84]=a.Key.T;g[85]=a.Key.U;g[86]=a.Key.V;g[87]=a.Key.W;g[88]=a.Key.X;g[89]=a.Key.Y;g[90]=a.Key.Z;g[96]=a.Key.NumPad0;g[97]=a.Key.NumPad1;g[98]=a.Key.NumPad2;g[99]=a.Key.NumPad3;g[100]=a.Key.NumPad4;g[101]=a.Key.NumPad5;
g[102]=a.Key.NumPad6;g[103]=a.Key.NumPad7;g[104]=a.Key.NumPad8;g[105]=a.Key.NumPad9;g[106]=a.Key.Multiply;g[107]=a.Key.Add;g[109]=a.Key.Subtract;g[110]=a.Key.Decimal;g[111]=a.Key.Divide;g[112]=a.Key.F1;g[113]=a.Key.F2;g[114]=a.Key.F3;g[115]=a.Key.F4;g[116]=a.Key.F5;g[117]=a.Key.F6;g[118]=a.Key.F7;g[119]=a.Key.F8;g[120]=a.Key.F9;g[121]=a.Key.F10;g[122]=a.Key.F11;g[123]=a.Key.F12;var e=function(){function a(b){this.Surface=b}a.prototype.RegisterEvents=function(){var b=this;document.onkeypress=function(a){var f=
b.CreateArgsPress(a);if(f&&(b.Surface._HandleKeyDown(f),f.Handled))return a.preventDefault(),!1};document.onkeydown=function(a){var f=b.CreateArgsDown(a);if(f&&(b.Surface._HandleKeyDown(f),f.Handled))return a.preventDefault(),!1}};a.prototype.CreateArgsPress=function(b){};a.prototype.CreateArgsDown=function(b){};a.CreateInterop=function(f){return"Microsoft Internet Explorer"===navigator.appName?new b(f):"Netscape"===navigator.appName?new n(f):new a(f)};return a}();a.KeyInterop=e;Nullstone.RegisterType(e,
"KeyInterop");var c=[];c[41]=48;c[33]=49;c[64]=50;c[35]=51;c[36]=52;c[37]=53;c[94]=54;c[38]=55;c[42]=56;c[34]=a.Key.Unknown;var b=function(b){function f(a){b.call(this,a)}__extends(f,b);f.prototype.CreateArgsPress=function(b){if(b["char"]){var f={Shift:b.shiftKey,Ctrl:b.ctrlKey,Alt:b.altKey},h=b.keyCode,n=c[h];n&&(h=n);f=new d.Input.KeyEventArgs(f,h,g[h],b["char"]);f.Key===a.Key.Unknown&&b.key&&(f.Char=b.key,b=f.Char.toUpperCase().charCodeAt(0),f.Key=g[b],null==f.Key&&(f.Key=a.Key.Unknown));return f}};
f.prototype.CreateArgsDown=function(b){if(!b["char"]||8===b.keyCode)return new d.Input.KeyEventArgs({Shift:b.shiftKey,Ctrl:b.ctrlKey,Alt:b.altKey},b.keyCode,g[b.keyCode])};return f}(e);a.IEKeyInterop=b;Nullstone.RegisterType(b,"IEKeyInterop");var f=[];f[8]=a.Key.Back;f[9]=a.Key.Tab;f[20]=a.Key.CapsLock;f[27]=a.Key.Escape;f[33]=a.Key.PageUp;f[34]=a.Key.PageDown;f[35]=a.Key.End;f[36]=a.Key.Home;f[37]=a.Key.Left;f[38]=a.Key.Up;f[39]=a.Key.Right;f[40]=a.Key.Down;f[45]=a.Key.Insert;f[46]=a.Key.Delete;
var h=[];h[41]=48;h[33]=49;h[64]=50;h[35]=51;h[36]=52;h[37]=53;h[94]=54;h[38]=55;h[42]=56;h[34]=a.Key.Unknown;var n=function(b){function a(f){b.call(this,f)}__extends(a,b);a.prototype.CreateArgsPress=function(b){var a={Shift:b.shiftKey,Ctrl:b.ctrlKey,Alt:b.altKey},f=b.keyCode,c=h[f];c&&(f=c);return new d.Input.KeyEventArgs(a,f,g[f],String.fromCharCode(b.which||b.keyCode))};a.prototype.CreateArgsDown=function(b){return void 0===f[b.keyCode]?null:new d.Input.KeyEventArgs({Shift:b.shiftKey,Ctrl:b.ctrlKey,
Alt:b.altKey},b.keyCode,g[b.keyCode])};return a}(e);a.NetscapeKeyInterop=n;Nullstone.RegisterType(n,"NetscapeKeyInterop")})(d.Input||(d.Input={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function b(b){a.call(this);Object.defineProperty(this,"AbsolutePos",{value:b,writable:!1})}__extends(b,a);b.prototype.GetPosition=function(b){var a=this.AbsolutePos.Clone();if(!b)return a;if(!(b instanceof d.UIElement))throw new ArgumentException("Specified relative object must be a UIElement.");b.XamlNode.LayoutUpdater.TransformPoint(a);return a};return b}(d.RoutedEventArgs);a.MouseEventArgs=g;Nullstone.RegisterType(g,"MouseEventArgs");var e=function(a){function b(b){a.call(this,
b)}__extends(b,a);return b}(g);a.MouseButtonEventArgs=e;Nullstone.RegisterType(e,"MouseButtonEventArgs");g=function(a){function b(b,d){a.call(this,b);Object.defineProperty(this,"Delta",{value:d,writable:!1})}__extends(b,a);return b}(g);a.MouseWheelEventArgs=g;Nullstone.RegisterType(g,"MouseWheelEventArgs")})(d.Input||(d.Input={}))})(Fayde||(Fayde={}));
(function(d){var a=function(a){function e(c){a.call(this);c||(c={});this._Data=c}__extends(e,a);e.prototype.Transmute=function(a,b,f,h,n){return new d.Data.BindingExpression(this._BuildBinding(),a,b)};e.prototype._BuildBinding=function(){var a=new d.Data.Binding(this._Data.Path);void 0!==this._Data.FallbackValue&&(a.FallbackValue=this._Data.FallbackValue);void 0!==this._Data.Mode&&(a.Mode=this._Data.Mode);void 0!==this._Data.StringFormat&&(a.StringFormat=this._Data.StringFormat);void 0!==this._Data.ElementName&&
(a.ElementName=this._Data.ElementName);return a};return e}(d.Markup);d.BindingMarkup=a;Nullstone.RegisterType(a,"BindingMarkup")})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Transform=function(b){return b};c.prototype.TransformBounds=function(b){return b};c.prototype.TryTransform=function(b,a){return!1};return c}(d.DependencyObject);a.GeneralTransform=g;Nullstone.RegisterType(g,"GeneralTransform");g=function(d){function c(b){d.call(this);this._Raw=b}__extends(c,d);Object.defineProperty(c.prototype,"Inverse",{get:function(){return new c(mat4.inverse(this._Raw,mat4.create()))},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"Value",{get:function(){return a.Matrix3D.FromRaw(this._Raw)},enumerable:!0,configurable:!0});c.prototype.Transform=function(b){var a=vec4.createFrom(b.X,b.Y,0,1),c=vec4.create();mat4.transformVec4(this._Raw,a,c);return 0!==c[3]?(a=1/c[3],new Point(c[0]*a,b[1]*a)):new Point(NaN,NaN)};c.prototype.TransformBounds=function(b){if(b)return rect.transform4(rect.copyTo(b),this._Raw)};c.prototype.CreateMatrix3DProjection=function(){var b=new a.Matrix3DProjection;
b.ProjectionMatrix=this.Inverse.Value;return b};return c}(g);a.InternalTransform=g;Nullstone.RegisterType(g,"InternalTransform")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(d){function c(){d.call(this);this._Path=null;this._LocalBounds=new rect;this._Listener=null;this._LocalBounds.Width=Number.NEGATIVE_INFINITY;this._LocalBounds.Height=Number.NEGATIVE_INFINITY}__extends(c,d);c.prototype.GetBounds=function(b){var a=rect.isEmpty(this._LocalBounds);this._Path||(this._Path=this._Build(),a=!0);a&&rect.copyTo(this.ComputePathBounds(b),this._LocalBounds);b=rect.copyTo(this._LocalBounds);a=this.Transform;null!=a&&(b=a.TransformBounds(b));
return b};c.prototype.Draw=function(b){if(this._Path){var a=this.Transform;null!=a&&(b.Save(),b.Transform(a));this._Path.DrawRenderCtx(b);null!=a&&b.Restore()}};c.prototype.ComputePathBounds=function(b){this._Path||(this._Path=this._Build());return this._Path?this._Path.CalculateBounds(b):new rect};c.prototype._InvalidateGeometry=function(){this._Path=null;rect.set(this._LocalBounds,0,0,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);var b=this._Listener;b&&b.GeometryChanged(this)};c.prototype._Build=
function(){};c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype._TransformChanged=function(b){var a=this;this._TransformListener&&(this._TransformListener.Detach(),this._TransformListener=null);if(b=b.NewValue)this._TransformListener=b.Listen(function(b){return a._InvalidateGeometry()});this._InvalidateGeometry()};c.prototype.Serialize=function(){var b=this._Path;if(b)return b.Serialize()};c.TransformProperty=DependencyProperty.Register("Transform",
function(){return a.Transform},c,void 0,function(b,a){return b._TransformChanged(a)});return c}(d.DependencyObject);a.Geometry=g;Nullstone.RegisterType(g,"Geometry");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype.AddingToCollection=function(b,f){if(!a.prototype.AddingToCollection.call(this,b,f))return!1;b.Listen(this);var c=this._Listener;c&&c.GeometryChanged(b);
return!0};c.prototype.RemovedFromCollection=function(b,f){a.prototype.RemovedFromCollection.call(this,b,f);b.Unlisten(this);var c=this._Listener;c&&c.GeometryChanged(b)};c.prototype.GeometryChanged=function(b){var a=this._Listener;a&&a.GeometryChanged(b)};return c}(d.XamlObjectCollection);a.GeometryCollection=g;Nullstone.RegisterType(g,"GeometryCollection")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);var b=new a.GeometryCollection;b.AttachTo(this);b.Listen(this);Object.defineProperty(this,"Children",{value:b,writable:!1})}__extends(c,e);c.prototype.ComputePathBounds=function(b){for(var a=new rect,c=this.Children.GetEnumerator();c.MoveNext();)rect.unionLogical(a,c.Current.GetBounds(b));return a};c.prototype.Draw=function(b){var a=this.Transform;null!=a&&(b.Save(),b.Transform(a));for(var c=this.Children.GetEnumerator();c.MoveNext();)c.Current.Draw(b);
null!=a&&b.Restore()};c.prototype.GeometryChanged=function(b){this._InvalidateGeometry()};c.FillRulleProperty=DependencyProperty.Register("FillRule",function(){return new Enum(d.Shapes.FillRule)},c,d.Shapes.FillRule.EvenOdd);return c}(a.Geometry);a.GeometryGroup=g;Nullstone.RegisterType(g,"GeometryGroup")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype._GradientStopChanged=function(){var b=this._Listener;b&&b.GradientStopChanged(this)};c.prototype.toString=function(){return this.Color.toString()+" @ "+this.Offset.toString()};c.ColorProperty=DependencyProperty.Register("Color",function(){return Color},c,void 0,function(b,
a){return b._GradientStopChanged()});c.OffsetProperty=DependencyProperty.Register("Offset",function(){return Number},c,0,function(b,a){return b._GradientStopChanged()});return c}(d.DependencyObject);a.GradientStop=g;Nullstone.RegisterType(g,"GradientStop");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype.AddingToCollection=function(b,f){if(!a.prototype.AddingToCollection.call(this,
b,f))return!1;b.Listen(this);var c=this._Listener;c&&c.GradientStopsChanged(this);return!0};c.prototype.RemovedFromCollection=function(b,f){if(!a.prototype.RemovedFromCollection.call(this,b,f))return!1;b.Unlisten(this);var c=this._Listener;c&&c.GradientStopsChanged(this)};c.prototype.GradientStopChanged=function(b){(b=this._Listener)&&b.GradientStopsChanged(this)};return c}(d.XamlObjectCollection);a.GradientStopCollection=g;Nullstone.RegisterType(g,"GradientStopCollection")})(d.Media||(d.Media={}))})(Fayde||
(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Build=function(){var b=this.StartPoint,a=this.EndPoint,c=new d.Shapes.RawPath;c.Move(b.X,b.Y);c.Line(a.X,a.Y);return c};c.StartPointProperty=DependencyProperty.Register("StartPoint",function(){return Point},c,void 0,function(b,a){return b._InvalidateGeometry()});c.EndPointProperty=DependencyProperty.Register("EndPoint",function(){return Point},c,void 0,function(b,a){return b._InvalidateGeometry()});return c}(a.Geometry);
a.LineGeometry=g;Nullstone.RegisterType(g,"LineGeometry")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);this._Path=null;var b=new a.PathSegmentCollection;b.AttachTo(this);b.Listen(this);Object.defineProperty(this,"Segments",{value:b,writable:!1})}__extends(c,e);c.prototype._Build=function(){var b=new d.Shapes.RawPath,a=this.StartPoint;b.Move(a.X,a.Y);for(a=this.Segments.GetEnumerator();a.MoveNext();)a.Current._Append(b);this.IsClosed&&b.Close();return b};c.prototype.PathSegmentChanged=function(b){this._Path=null;(b=this._Listener)&&
b.PathFigureChanged(this)};c.prototype.InvalidatePathFigure=function(){this._Path=null;var b=this._Listener;b&&b.PathFigureChanged(this)};c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype.MergeInto=function(b){this._Path||(this._Path=this._Build());d.Shapes.RawPath.Merge(b,this._Path)};c.Annotations={ContentProperty:"Segments"};c.IsClosedProperty=DependencyProperty.RegisterCore("IsClosed",function(){return Boolean},
c,!1,function(b,a){return b.InvalidatePathFigure()});c.StartPointProperty=DependencyProperty.RegisterCore("StartPoint",function(){return Point},c,void 0,function(b,a){return b.InvalidatePathFigure()});c.IsFilledProperty=DependencyProperty.RegisterCore("IsFilled",function(){return Boolean},c,!0,function(b,a){return b.InvalidatePathFigure()});return c}(d.DependencyObject);a.PathFigure=g;Nullstone.RegisterType(g,"PathFigure");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.AddingToCollection=
function(b,f){if(!a.prototype.AddingToCollection.call(this,b,f))return!1;b.Listen(this);var c=this._Listener;c&&c.PathFigureChanged(b);return!0};c.prototype.RemovedFromCollection=function(b,f){a.prototype.RemovedFromCollection.call(this,b,f);b.Unlisten(this);var c=this._Listener;c&&c.PathFigureChanged(b)};c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype.PathFigureChanged=function(b){var a=this._Listener;a&&a.PathFigureChanged(b)};
return c}(d.XamlObjectCollection);a.PathFigureCollection=g;Nullstone.RegisterType(g,"PathFigureCollection")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);this._OverridePath=null;var b=new a.PathFigureCollection;b.AttachTo(this);b.Listen(this);Object.defineProperty(this,"Figures",{value:b,writable:!1})}__extends(c,e);c.prototype.OverridePath=function(b){this._OverridePath=b};c.prototype._Build=function(){if(this._OverridePath)return this._OverridePath;var b=new d.Shapes.RawPath,a=this.Figures;if(a){for(a=a.GetEnumerator();a.MoveNext();)a.Current.MergeInto(b);return b}};c.prototype.PathFigureChanged=
function(b){this._OverridePath=null;this._InvalidateGeometry()};c.Annotations={ContentProperty:"Figures"};c.FillRuleProperty=DependencyProperty.Register("FillRule",function(){return new Enum(d.Shapes.FillRule)},c,d.Shapes.FillRule.EvenOdd,function(b,a){return b._InvalidateGeometry()});return c}(a.Geometry);a.PathGeometry=g;Nullstone.RegisterType(g,"PathGeometry")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=function(b){};c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};return c}(d.DependencyObject);a.PathSegment=g;Nullstone.RegisterType(g,"PathSegment");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.AddingToCollection=function(b,f){if(!a.prototype.AddingToCollection.call(this,b,f))return!1;
b.Listen(this);var c=this._Listener;c&&c.PathSegmentChanged(b);return!0};c.prototype.RemovedFromCollection=function(b,f){a.prototype.RemovedFromCollection.call(this,b,f);b.Unlisten(this);var c=this._Listener;c&&c.PathSegmentChanged(b)};c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype.PathSegmentChanged=function(b){var a=this._Listener;a&&a.PathSegmentChanged(b)};return c}(d.XamlObjectCollection);a.PathSegmentCollection=
g;Nullstone.RegisterType(g,"PathSegmentCollection")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=function(b){var a=this.Size,c=this.Point;b.EllipticalArc(a?a.Width:0,a?a.Height:0,this.RotationAngle,this.IsLargeArc,this.SweepDirection,c?c.X:0,c?c.Y:0)};c.IsLargeArcProperty=DependencyProperty.RegisterCore("IsLargeArc",function(){return Boolean},c,!1);c.PointProperty=DependencyProperty.Register("Point",function(){return Point},c);c.RotationAngleProperty=DependencyProperty.Register("RotationAngle",
function(){return Number},c,0);c.SizeProperty=DependencyProperty.Register("Size",function(){return size},c);c.SweepDirectionProperty=DependencyProperty.Register("SweepDirection",function(){return new Enum(d.Shapes.SweepDirection)},c,d.Shapes.SweepDirection.Counterclockwise);return c}(a.PathSegment);a.ArcSegment=g;Nullstone.RegisterType(g,"ArcSegment");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=function(b){var a=this.Point1,c=this.Point2,d=this.Point3;b.Bezier(a?
a.X:0,a?a.Y:0,c?c.X:0,c?c.Y:0,d?d.X:0,d?d.Y:0)};c.Point1Property=DependencyProperty.Register("Point1",function(){return Point},c);c.Point2Property=DependencyProperty.Register("Point2",function(){return Point},c);c.Point3Property=DependencyProperty.Register("Point3",function(){return Point},c);return c}(a.PathSegment);a.BezierSegment=g;Nullstone.RegisterType(g,"BezierSegment");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=function(b){var a=this.Point;b.Line(a?
a.X:0,a?a.Y:0)};c.PointProperty=DependencyProperty.Register("Point",function(){return Point},c);return c}(a.PathSegment);a.LineSegment=g;Nullstone.RegisterType(g,"LineSegment");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=function(b){var a=this.Points;if(a&&0===a.Count%3)for(var c,d,e=a.GetEnumerator();e.MoveNext();)a=e.Current,e.MoveNext(),c=e.Current,e.MoveNext(),d=e.Current,b.Bezier(a.X,a.Y,c.X,c.Y,d.X,d.Y)};c.Annotations={ContentProperty:"Points"};return c}(a.PathSegment);
a.PolyBezierSegment=g;Nullstone.RegisterType(g,"PolyBezierSegment");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=function(b){for(var a,c=this.Points.GetEnumerator();c.MoveNext();)a=c.Current,b.Line(a.X,a.Y);NotImplemented("PolyLineSegment._Append")};c.Annotations={ContentProperty:"Points"};return c}(a.PathSegment);a.PolyLineSegment=g;Nullstone.RegisterType(g,"PolyLineSegment");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=
function(b){var a=this.Points;if(a&&0===a.Count%2)for(var c=b.EndX,d=b.EndY,e,g,k,m,l,q=a.GetEnumerator();q.MoveNext();)a=q.Current.X,e=q.Current.Y,q.MoveNext(),g=q.Current.X,k=q.Current.Y,m=g,l=k,g=a+(g-a)/3,k=e+(k-e)/3,a=c+2*(a-c)/3,e=d+2*(e-d)/3,b.Bezier(a,e,g,k,m,l),c=m,d=l};c.Annotations={ContentProperty:"Points"};return c}(a.PathSegment);a.PolyQuadraticBezierSegment=g;Nullstone.RegisterType(g,"PolyQuadraticBezierSegment");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Append=
function(b){var a=this.Point1,c=this.Point2;b.Quadratic(a?a.X:0,a?a.Y:0,c?c.X:0,c?c.Y:0)};c.Point1Property=DependencyProperty.Register("Point1",function(){return Point},c);c.Point2Property=DependencyProperty.Register("Point2",function(){return Point},c);return c}(a.PathSegment);a.QuadraticBezierSegment=g;Nullstone.RegisterType(g,"QuadraticBezierSegment")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments);this._ProjectionMatrix=null;this._ObjectHeight=this._ObjectWidth=1;this._Listeners=[]}__extends(c,a);c.prototype.SetObjectSize=function(b){var a=Math.max(b.Width,1);b=Math.max(b.Height,1);a!==this._ObjectWidth&&b!==this._ObjectHeight&&(this._ObjectWidth=a,this._ObjectHeight=b,this._ProjectionMatrix=null)};c.prototype.GetDistanceFromXYPlane=function(){return NaN};c.prototype.GetTransform=function(){var b=this._ProjectionMatrix;
b||(b=this._ProjectionMatrix=this.CreateProjectionMatrix());return b?mat4.clone(b._Raw):mat4.identity()};c.prototype.CreateProjectionMatrix=function(){return null};c.prototype.Listen=function(b){var a=this._Listeners,c={Callback:b,Detach:function(){var b=a.indexOf(c);-1<b&&a.splice(b,1)}};a.push(c);return c};c.prototype._InvalidateProjection=function(){this._ProjectionMatrix=null;for(var b=this._Listeners,a=b.length,c=0;c<a;c++)b[c].Callback(this)};return c}(d.DependencyObject);a.Projection=g;Nullstone.RegisterType(g,
"Projection")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Build=function(){var b=this.Rect;if(b){var a=this.RadiusX,c=this.RadiusY,n=new d.Shapes.RawPath;n.RoundedRect(b.X,b.Y,b.Width,b.Height,a,c);return n}};c.RectProperty=DependencyProperty.RegisterCore("Rect",function(){return rect},c,void 0,function(b,a){return b._InvalidateGeometry()});c.RadiusXProperty=DependencyProperty.RegisterCore("RadiusX",function(){return Number},c,0,function(b,a){return b._InvalidateGeometry()});
c.RadiusYProperty=DependencyProperty.RegisterCore("RadiusY",function(){return Number},c,0,function(b,a){return b._InvalidateGeometry()});return c}(a.Geometry);a.RectangleGeometry=g;Nullstone.RegisterType(g,"RectangleGeometry")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(){function d(){}d.GetTextHintingMode=function(a){return a.GetValue(d.TextHintingModeProperty)};d.SetTextHintingMode=function(a,b){a.SetValue(d.TextHintingModeProperty,b)};d.TextHintingModeProperty=DependencyProperty.RegisterAttached("TextHintingMode",function(){return new Enum(a.TextHintingMode)},d);return d}();a.TextOptions=d;Nullstone.RegisterType(d,"TextOptions")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(c){function b(){c.call(this);this._Listeners=[];d.XamlNode.SetShareable(this.XamlNode)}__extends(b,c);Object.defineProperty(b.prototype,"Value",{get:function(){this._Value||(this._Value=new a.Matrix,this._Value._Raw=this._BuildValue());return this._Value},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"Inverse",{get:function(){if(null!=this.Value.Inverse)return this.mt=new e,mt.Matrix=this.Value.Inverse,mt},enumerable:!0,configurable:!0});
b.prototype.Transform=function(b){var a=this.Value,c;if(!a||!(c=a._Raw))return new Point(b.X,b.Y);c=mat3.transformVec2(c,vec2.createFrom(b.X,b.Y));return new Point(c[0],c[1])};b.prototype.TransformBounds=function(b){if(b){var a=this.Value;return a&&a._Raw?rect.transform(rect.copyTo(b),a._Raw):rect.copyTo(b)}};b.prototype.TryTransform=function(b,a){return!1};b.prototype.Listen=function(b){var a=this._Listeners,c={Callback:b,Detach:function(){var b=a.indexOf(c);-1<b&&a.splice(b,1)}};a.push(c);return c};
b.prototype._InvalidateValue=function(){void 0!==this._Value&&(this._Value=void 0);for(var b=this._Listeners,a=b.length,c=0;c<a;c++)b[c].Callback(this)};b.prototype._BuildValue=function(){};return b}(a.GeneralTransform);a.Transform=g;Nullstone.RegisterType(g,"Transform");var e=function(c){function b(){c.apply(this,arguments);this._MatrixListener=null}__extends(b,c);b.prototype._BuildValue=function(){var b=this.Matrix;return b?b._Raw:mat3.identity()};b.prototype._MatrixChanged=function(b){var a=this;
this._MatrixListener&&(this._MatrixListener.Detach(),this._MatrixListener=null);if(b=b.NewValue)this._MatrixListener=b.Listen(function(b){return a._InvalidateValue()});this._InvalidateValue()};b.MatrixProperty=DependencyProperty.RegisterFull("Matrix",function(){return a.Matrix},b,void 0,function(b,a){return b._MatrixChanged(a)});return b}(g);a.MatrixTransform=e;Nullstone.RegisterType(e,"MatrixTransform")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype._BuildValue=function(){var b=this.CenterX,a=this.CenterY,c=mat3.createRotate(Math.PI/180*this.Angle);if(0===b&&0===a)return c;mat3.multiply(mat3.createTranslate(-b,-a),c,c);mat3.translate(c,b,a);return c};b.AngleProperty=DependencyProperty.Register("Angle",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});b.CenterXProperty=DependencyProperty.Register("CenterX",function(){return Number},
b,0,function(b,a){return b._InvalidateValue()});b.CenterYProperty=DependencyProperty.Register("CenterY",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});return b}(a.Transform);a.RotateTransform=g;Nullstone.RegisterType(g,"RotateTransform");g=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype._BuildValue=function(){var b=this.CenterX,a=this.CenterY,c=mat3.createScale(this.ScaleX,this.ScaleY);if(0===b&&0===a)return c;mat3.multiply(mat3.createTranslate(-b,
-a),c,c);mat3.translate(c,b,a);return c};b.CenterXProperty=DependencyProperty.Register("CenterX",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});b.CenterYProperty=DependencyProperty.Register("CenterY",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});b.ScaleXProperty=DependencyProperty.Register("ScaleX",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});b.ScaleYProperty=DependencyProperty.Register("ScaleY",function(){return Number},
b,0,function(b,a){return b._InvalidateValue()});return b}(a.Transform);a.ScaleTransform=g;Nullstone.RegisterType(g,"ScaleTransform");g=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype._BuildValue=function(){var b=this.CenterX,a=this.CenterY,c=mat3.createSkew(Math.PI/180*this.AngleX,Math.PI/180*this.AngleY);if(0===b&&0===a)return c;mat3.multiply(mat3.createTranslate(-b,-a),c,c);mat3.translate(c,b,a);return c};b.AngleXProperty=DependencyProperty.Register("AngleX",function(){return Number},
b,0,function(b,a){return b._InvalidateValue()});b.AngleYProperty=DependencyProperty.Register("AngleY",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});b.CenterXProperty=DependencyProperty.Register("CenterX",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});b.CenterYProperty=DependencyProperty.Register("CenterY",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});return b}(a.Transform);a.SkewTransform=g;Nullstone.RegisterType(g,
"SkewTransform");g=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype._BuildValue=function(){return mat3.createTranslate(this.X,this.Y)};b.XProperty=DependencyProperty.Register("X",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});b.YProperty=DependencyProperty.Register("Y",function(){return Number},b,0,function(b,a){return b._InvalidateValue()});return b}(a.Transform);a.TranslateTransform=g;Nullstone.RegisterType(g,"TranslateTransform");var e=function(a){function b(){a.apply(this,
arguments);this._Relayer=function(){};this._ChildTransformListeners=[]}__extends(b,a);b.prototype.AddingToCollection=function(b,d){var n=this;if(!a.prototype.AddingToCollection.call(this,b,d))return!1;var e=b.Listen(function(){return n._Relayer()});e.Child=b;this._ChildTransformListeners.push(e);this._Relayer()};b.prototype.RemovedFromCollection=function(b,d){if(!a.prototype.RemovedFromCollection.call(this,b,d))return!1;for(var n=this._ChildTransformListeners,e=n.length,g=0;g<e;g++)if(n[g].Child===
b){n.splice(g,1)[0].Detach();break}this._Relayer()};b.prototype.RelayChanges=function(b){this._Relayer=b};return b}(d.XamlObjectCollection);a.TransformCollection=e;Nullstone.RegisterType(e,"TransformCollection");g=function(a){function b(){var b=this;a.call(this);var d=new e;d.AttachTo(this);d.RelayChanges(function(){return b._InvalidateValue()});Object.defineProperty(this,"Children",{value:d,writable:!1})}__extends(b,a);b.prototype._BuildValue=function(){for(var b=this.Children.GetEnumerator(!0),
a=mat3.identity();b.MoveNext();)mat3.multiply(b.Current.Value._Raw,a,a);return a};return b}(a.Transform);a.TransformGroup=g;Nullstone.RegisterType(g,"TransformGroup")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.Ease=function(b){switch(this.EasingMode){case a.EasingMode.EaseIn:return this.EaseInCore(b);case a.EasingMode.EaseOut:return this.EaseInCore(1-b);case a.EasingMode.EaseInOut:return 0.5>=b?0.5*this.EaseInCore(2*b):1-this.EaseInCore(1*(1-b));default:return 0}};b.prototype.EaseInCore=function(b){return b};b.EasingModeProperty=DependencyProperty.Register("EasingMode",function(){return new Enum(a.EasingMode)},
b);return b}(d.DependencyObject);a.EasingFunctionBase=e})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){return b*b*b-b*this.Amplitude*Math.sin(b*Math.PI)};b.AmplitudeProperty=DependencyProperty.Register("Amplitude",function(){return Number},b);return b}(a.EasingFunctionBase);a.BackEase=d;Nullstone.RegisterType(d,"BackEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){b=1-b;for(var a=this.Bounces,c=this.Bounciness,
d=-1,e=0;e<=a;e++)d+=2*Math.pow(1+c/2,-e);for(var a=-1,e=0,g=d*d,m=100,l=0;0<m;)e=a+2*Math.pow(1+c/2,-l++),m=g*(b-a/d)*(b-e/d),a=e;return-m};b.BouncesProperty=DependencyProperty.Register("Bounces",function(){return Number},b,3);b.BouncinessProperty=DependencyProperty.Register("Bounciness",function(){return Number},b,2);return b}(a.EasingFunctionBase);a.BounceEase=d;Nullstone.RegisterType(d,"BounceEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){return 1-
Math.sqrt(1-b*b)};return b}(a.EasingFunctionBase);a.CircleEase=d;Nullstone.RegisterType(d,"CircleEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){return b*b*b};return b}(a.EasingFunctionBase);a.CubicEase=d;Nullstone.RegisterType(d,"CubicEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){var a=1/(this.Oscillations+0.25),c=a/4;b-=1;return b*-Math.pow(2,this.Springiness*b)*Math.sin(2*(b-
c)*Math.PI/a)};b.OscillationsProperty=DependencyProperty.Register("Oscillations",function(){return Number},b);b.SpringinessProperty=DependencyProperty.Register("Springiness",function(){return Number},b);return b}(a.EasingFunctionBase);a.ElasticEase=d;Nullstone.RegisterType(d,"ElasticEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){var a=this.Exponent;return(Math.exp(a*b)-1)/(Math.exp(a)-1)};b.ExponentProperty=DependencyProperty.Register("Exponent",
function(){return Number},b);return b}(a.EasingFunctionBase);a.ExponentialEase=d;Nullstone.RegisterType(d,"ExponentialEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){return Math.pow(b,this.Power)};b.PowerProperty=DependencyProperty.Register("Power",function(){return Number},b);return b}(a.EasingFunctionBase);a.PowerEase=d;Nullstone.RegisterType(d,"PowerEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=
function(b){return b*b};return b}(a.EasingFunctionBase);a.QuadraticEase=d;Nullstone.RegisterType(d,"QuadraticEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){return b*b*b*b};return b}(a.EasingFunctionBase);a.QuarticEase=d;Nullstone.RegisterType(d,"QuarticEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){return b*b*b*b*b};return b}(a.EasingFunctionBase);a.QuinticEase=d;Nullstone.RegisterType(d,
"QuinticEase");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.EaseInCore=function(b){return 1-Math.sin(1-b)*(Math.PI/2)};return b}(a.EasingFunctionBase);a.SineEase=d;Nullstone.RegisterType(d,"SineEase")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(b){function a(){b.apply(this,arguments);this._ResolvedKeyTime=null;this._Resolved=!1}__extends(a,b);a.prototype.CoerceKeyTime=function(b,a,f,c,d){c.Value=f?f:this.KeyTime;return!0};a.prototype.InterpolateValue=function(b,a){};a.prototype.CompareToTimeSpan=function(b){return this._ResolvedKeyTime.CompareTo(b)};a.prototype.Listen=function(b){this._Listener=b};a.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};a.prototype.InvalidateKeyFrame=
function(){var b=this._Listener;b&&b.KeyFrameChanged(this)};a.Comparer=function(b,a){return b._ResolvedKeyTime.CompareTo(a._ResolvedKeyTime)};a.ResolveKeyFrames=function(b,a){var f;f=!1;var c=new TimeSpan,d,e=a.length,g;for(g=0;g<e;g++)d=a[g],d._ResolvedKeyTime=new TimeSpan,d._Resolved=!1;var q;for(g=0;g<e;g++)d=a[g],q=d.KeyTime,q.HasTimeSpan&&(f=!0,q=q.TimeSpan,0<q.CompareTo(c)&&(c=q),d._ResolvedKeyTime=q,d._Resolved=!0);f=(d=b.Duration)&&d.HasTimeSpan?d.TimeSpan:f?c:TimeSpan.FromTicks(TimeSpan._TicksPerSecond);
for(g=0;g<e;g++)d=a[g],q=d.KeyTime,q.HasPercent&&(d._ResolvedKeyTime=f.Multiply(q.Percent),d._Resolved=!0);0<e&&(d=a[e-1],q=d.KeyTime,q.IsPaced||q.IsUniform)&&(d._ResolvedKeyTime=f,d._Resolved=!0);0<e&&(d=a[e-1],q=d.KeyTime,!d._Resolved&&q.IsPaced&&(d._ResolvedKeyTime=new TimeSpan,d._Resolved=!0));return a};a.KeyTimeProperty=DependencyProperty.Register("KeyTime",function(){return KeyTime},a,void 0,function(b,a){return b.InvalidateKeyFrame()});return a}(d.DependencyObject);a.KeyFrame=e;Nullstone.RegisterType(e,
"KeyFrame");var c=function(b){function a(){b.apply(this,arguments);this._Resolved=!1;this._SortedList=[]}__extends(a,b);a.prototype.GetKeyFrameForTime=function(b,a){var f=null,c=null,d,e=this._SortedList;if(0==e.length)return a.Value=null;var g,q;for(d=0;d<e.length&&!(g=e[d],0<=g.CompareToTimeSpan(b)||d+1>=e.length);d++);for(;0<=d;d--)if(g=e[d],q=DependencyProperty.GetDependencyProperty(g.constructor,"Value"),void 0!==g.GetValue(q)){f=g;break}for(d--;0<=d;d--)if(g=e[d],q=DependencyProperty.GetDependencyProperty(g.constructor,
"Value"),void 0!==g.GetValue(q)){c=g;break}a.Value=c;return f};a.prototype.Clear=function(){this._Resolved=!1;this._SortedList=[];return b.prototype.Clear.call(this)};a.prototype.AddingToCollection=function(a,f){if(!b.prototype.AddingToCollection.call(this,a,f))return!1;this._Resolved=!1;a.Listen(this);return!0};a.prototype.RemovedFromCollection=function(a,f){b.prototype.RemovedFromCollection.call(this,a,f);this._Resolved=!1;a.Unlisten(this)};a.prototype.KeyFrameChanged=function(b){this._Resolved=
!1};a.ResolveKeyFrames=function(b,a){if(a._Resolved)return a._SortedList;a._SortedList=e.ResolveKeyFrames(b,a._ht).slice(0);a._SortedList.sort(e.Comparer);a._Resolved=!0;return a._SortedList};return a}(d.XamlObjectCollection);a.KeyFrameCollection=c;Nullstone.RegisterType(c,"KeyFrameCollection")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(c){function b(){c.apply(this,arguments);this._QuadraticsArray=null}__extends(b,c);b.prototype.GetSplineProgress=function(f){if(1<=f)return 1;if(0>=f)return 0;this._QuadraticsArray||this._RegenerateQuadratics();return a.Curves.QuadraticArrayYForX(this._QuadraticsArray,f,b.TOTAL_COUNT)};b.prototype.InvalidateControlPoints=function(){this._QuadraticsArray=null};b.prototype._RegenerateQuadratics=function(){var f=this.ControlPoint1,c=this.ControlPoint2,
d=[];a.Curves.SubdivideCubicAtLevel(d,b.PRECISION_LEVEL,{c0:{x:0,y:0},c1:{x:f.X,y:f.Y},c2:{x:c.X,y:c.Y},c3:{x:1,y:1}});this._QuadraticsArray=a.Curves.ConvertCubicsToQuadratics(d,b.TOTAL_COUNT)};b.PRECISION_LEVEL=4;b.TOTAL_COUNT=Math.pow(2,b.PRECISION_LEVEL);b.ControlPoint1Property=DependencyProperty.RegisterCore("ControlPoint1",function(){return Point},b,new Point(0,0),function(b,a){return b.InvalidateControlPoints()});b.ControlPoint2Property=DependencyProperty.RegisterCore("ControlPoint2",function(){return Point},
b,new Point(1,1),function(b,a){return b.InvalidateControlPoints()});return b}(d.DependencyObject);a.KeySpline=e;Nullstone.RegisterType(e,"KeySpline")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments);this.ConvertedValue=void 0}__extends(b,a);b.ValueProperty=DependencyProperty.Register("Value",function(){return Object},b);return b}(a.KeyFrame);a.ObjectKeyFrame=d;Nullstone.RegisterType(d,"ObjectKeyFrame");d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.InterpolateValue=function(b,a){return 1<=a?this.ConvertedValue:b};return b}(d);a.DiscreteObjectKeyFrame=d;Nullstone.RegisterType(d,
"DiscreteObjectKeyFrame")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.ValueProperty=DependencyProperty.Register("Value",function(){return Point},a);return a}(a.KeyFrame);a.PointKeyFrame=d;Nullstone.RegisterType(d,"PointKeyFrame");var c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.InterpolateValue=function(b,a){return 1<=a?this.Value:b};return a}(d);a.DiscretePointKeyFrame=c;Nullstone.RegisterType(c,"DiscretePointKeyFrame");c=
function(b){function f(){b.apply(this,arguments)}__extends(f,b);f.prototype.InterpolateValue=function(b,a){if(1<=a)return this.Value;var f=this.Value,c=this.EasingFunction;c&&(a=c.Ease(a));return Point.LERP(b,f,a)};f.EasingFunctionProperty=DependencyProperty.Register("EasingFunction",function(){return a.EasingFunctionBase},f);return f}(d);a.EasingPointKeyFrame=c;Nullstone.RegisterType(c,"EasingPointKeyFrame");c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype.InterpolateValue=
function(b,a){return Point.LERP(b,this.Value,a)};return a}(d);a.LinearPointKeyFrame=c;Nullstone.RegisterType(c,"LinearPointKeyFrame");d=function(b){function f(){b.apply(this,arguments)}__extends(f,b);f.prototype.InterpolateValue=function(b,a){if(1<=a)return this.Value;var f=this.Value,c=a,d=this.KeySpline;d&&(c=d.GetSplineProgress(a));isNaN(b.X)&&(b.X=0);isNaN(b.Y)&&(b.Y=0);isNaN(f.X)&&(f.X=0);isNaN(f.Y)&&(f.Y=0);return Point.LERP(b,f,c)};f.KeySplineProperty=DependencyProperty.Register("KeySpline",
function(){return a.KeySpline},f);return f}(d);a.SplinePointKeyFrame=d;Nullstone.RegisterType(d,"SplinePointKeyFrame")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(c){function b(){c.apply(this,arguments);this.Completed=new MulticastEvent;this._IsPaused=!1;this._TicksPaused=this._BeginPauseTime=0;this._IsFirstUpdate=!0;this._HasBegun=!1;this._InitialStep=this._BeginTicks=void 0;this._HasCompleted=!1;this.ManualTarget=void 0}__extends(b,c);Object.defineProperty(b.prototype,"HasManualTarget",{get:function(){return void 0!==this.ManualTarget},enumerable:!0,configurable:!0});b.prototype.Reset=function(){this._TicksPaused=
0;this._IsFirstUpdate=!0;this._BeginTicks=void 0;this._HasCompleted=this._HasBegun=!1};b.prototype.Pause=function(){this._IsPaused||(this._BeginPauseTime=(new Date).getTime(),this._IsPaused=!0)};b.prototype.Resume=function(){this._IsPaused&&(this._IsPaused=!1,this._TicksPaused=(new Date).getTime()-this._BeginPauseTime)};b.prototype.Stop=function(){this.Reset()};b.prototype.OnCompleted=function(){this._HasCompleted=!0;switch(this.FillBehavior){case a.FillBehavior.HoldEnd:this.HoldEnd();break;case a.FillBehavior.Stop:this.Stop()}this.Completed.Raise(this,
EventArgs.Empty)};b.prototype.Update=function(b){!(b=this.CreateClockData(b))||(this._IsPaused||this._HasCompleted)||(this.UpdateInternal(b),b.Completed&&this.OnCompleted())};b.prototype.UpdateInternal=function(b){};b.prototype.HoldEnd=function(){};b.prototype.CreateClockData=function(a){this._IsFirstUpdate&&(this._InitialStep=a,this._IsFirstUpdate=this._HasBegun=!1);if(!this._HasBegun){if(!this.IsAfterBeginTime(a))return;this._BeginTicks=a;this._HasBegun=!0}var c=a=a-this._BeginTicks-this._TicksPaused,
d=0,e=!1,g=this.GetNaturalDuration();if(g.IsAutomatic)d=1,e=!0;else if(g.HasTimeSpan){g=g.TimeSpan.Ticks;0===g?d=1:!0===this.AutoReverse?(g/=2,d=1-Math.abs(a%(g+g)-g)/g):d=a/g-Math.floor(a/g);var k=this.RepeatBehavior||b.DEFAULT_REPEAT_BEHAVIOR;if(!k.IsForever)if(k.HasCount){if(0===g||Math.floor(a/g)>=k.Count)d=1,e=!0}else k.HasDuration&&a>=k.Duration.TimeSpan.Ticks&&(d=1,e=!0);0!==g&&(c=d*g)}return{CurrentTime:TimeSpan.FromTicks(c),Progress:d,Completed:e}};b.prototype.IsAfterBeginTime=function(b){var a=
this.BeginTime;if(null==a)return!0;a=a.Ticks;return 0>=a?!0:b-this._InitialStep<a?!1:!0};b.prototype.GetNaturalDuration=function(){var b=this.Duration;return!b||b.IsAutomatic?this.GetNaturalDurationCore():b};b.prototype.GetNaturalDurationCore=function(){return Duration.Automatic};b.DEFAULT_REPEAT_BEHAVIOR=a.RepeatBehavior.FromIterationCount(1);b.AutoReverseProperty=DependencyProperty.Register("AutoReverse",function(){return Boolean},b,!1);b.BeginTimeProperty=DependencyProperty.Register("BeginTime",
function(){return TimeSpan},b);b.DurationProperty=DependencyProperty.Register("Duration",function(){return Duration},b);b.RepeatBehaviorProperty=DependencyProperty.Register("RepeatBehavior",function(){return a.RepeatBehavior},b);b.SpeedRatioProperty=DependencyProperty.Register("SpeedRatio",function(){return Number},b,1);b.FillBehaviorProperty=DependencyProperty.Register("FillBehavior",function(){return new Enum(a.FillBehavior)},b,a.FillBehavior.HoldEnd);return b}(d.DependencyObject);a.Timeline=e;
Nullstone.RegisterType(e,"Timeline");e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);return b}(d.XamlObjectCollection);a.TimelineCollection=e;Nullstone.RegisterType(e,"TimelineCollection")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.Padding=function(){return new Thickness};b.prototype.GetPadding=function(b){return!1};b.prototype.PreRender=function(b){};b.prototype.Listen=function(b){this._Listener=b};b.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};b.prototype._EffectChanged=function(b){(b=this._Listener)&&b.EffectChanged(this)};b.EffectMappingProperty=DependencyProperty.Register("EffectMapping",
function(){return a.GeneralTransform},b,void 0,function(b,a){return b._EffectChanged(a)});return b}(d.DependencyObject);g.Effect=e;Nullstone.RegisterType(e,"Effect")})(a.Effects||(a.Effects={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(a){function b(){a.apply(this,arguments);this.PixelHeight=this.PixelWidth=0}__extends(b,a);b.prototype.Lock=function(){};b.prototype.Unlock=function(){};Object.defineProperty(b.prototype,"Image",{get:function(){},enumerable:!0,configurable:!0});return b}(d.DependencyObject);a.ImageSource=e;Nullstone.RegisterType(e,"ImageSource")})(a.Imaging||(a.Imaging={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.StoryboardProperty=DependencyProperty.Register("Storyboard",function(){return a.Animation.Storyboard},b);b.Annotations={ContentProperty:b.StoryboardProperty};return b}(d.DependencyObject);g.VisualState=e;Nullstone.RegisterType(e,"VisualState");e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);return b}(d.XamlObjectCollection);g.VisualStateCollection=e;Nullstone.RegisterType(e,
"VisualStateCollection")})(a.VSM||(a.VSM={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(b){function a(f,c,d){b.call(this);Object.defineProperty(this,"OldState",{value:f,writable:!1});Object.defineProperty(this,"NewState",{value:c,writable:!1});Object.defineProperty(this,"Control",{value:d,writable:!1})}__extends(a,b);return a}(EventArgs);a.VisualStateChangedEventArgs=e;var c=function(b){function f(){b.call(this);this._CurrentStoryboards=[];this._Transitions=null;this.CurrentStateChanging=new MulticastEvent;this.CurrentStateChanged=
new MulticastEvent;this.CurrentState=null;Object.defineProperty(this,"States",{value:new a.VisualStateCollection,writable:!1});Object.defineProperty(this,"Transitions",{get:function(){this._Transitions||(this._Transitions=[]);return this._Transitions}})}__extends(f,b);f.prototype.GetState=function(b){for(var a=this.States.GetEnumerator(),f;a.MoveNext();)if(f=a.Current,f.Name===b)return f;return null};f.prototype.StartNewThenStopOld=function(b,a){var f,c,d=b.Resources;for(f=0;f<a.length;f++)if(c=a[f],
null!=c){d.Set(c._ID,c);try{c.Begin()}catch(e){for(c=0;c<=f;c++)null!=a[c]&&d.Set(a[c]._ID,void 0);throw e;}}this.StopCurrentStoryboards(b);d=this._CurrentStoryboards;for(f=0;f<a.length;f++)null!=a[f]&&d.push(a[f])};f.prototype.StopCurrentStoryboards=function(b){for(var a=d.ArrayEx.GetEnumerator(this._CurrentStoryboards),f;a.MoveNext();)if(f=a.Current)b.Resources.Set(f._ID,void 0),f.Stop();this._CurrentStoryboards=[]};f.prototype.RaiseCurrentStateChanging=function(b,a,f,c){this.CurrentStateChanging.Raise(this,
new e(a,f,c))};f.prototype.RaiseCurrentStateChanged=function(b,a,f,c){this.CurrentStateChanged.Raise(this,new e(a,f,c))};f.Annotations={ContentProperty:"States"};return f}(d.DependencyObject);a.VisualStateGroup=c;Nullstone.RegisterType(c,"VisualStateGroup");c=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(d.XamlObjectCollection);a.VisualStateGroupCollection=c;Nullstone.RegisterType(c,"VisualStateGroupCollection")})(a.VSM||(a.VSM={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde=
{}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.GetVisualStateGroups=function(a){return a.GetValue(b.VisualStateGroupsProperty)};b.SetVisualStateGroups=function(a,c){a.SetValue(b.VisualStateGroupsProperty,c)};b.GetCustomVisualStateManager=function(a){return a.GetValue(b.CustomVisualStateManagerProperty)};b.SetCustomVisualStateManager=function(a,c){a.SetValue(b.CustomVisualStateManagerProperty,c)};b.GoToState=function(a,c,d){if(!a)throw new ArgumentException("control");if(!c)throw new ArgumentException("stateName");
var e=b._GetTemplateRoot(a);if(!e)return!1;var g=b.GetVisualStateGroups(e);if(!g)return!1;var k={group:null,state:null};return b._TryGetState(g,c,k)?(g=b.GetCustomVisualStateManager(e))?g.GoToStateCore(a,e,c,k.group,k.state,d):null!=k.state?b.GoToStateInternal(a,e,k.group,k.state,d):!1:!1};b.prototype.GoToStateCore=function(a,c,d,e,g,k){return b.GoToStateInternal(a,c,e,g,k)};b.GoToStateInternal=function(f,c,d,e,g){var k=d.CurrentState;if(k===e)return!0;a.VSM.Debug&&window.console&&console.log("VSM:GoToState:["+
f._ID+"]"+(k?k.Name:"()")+"--\x3e"+e.Name);var m=g?b._GetTransition(c,d,k,e):null,l;if(null==m||m.GeneratedDuration.IsZero&&(null==(l=m.Storyboard)||l.Duration.IsZero))null!=m&&null!=l?d.StartNewThenStopOld(c,[l,e.Storyboard]):d.StartNewThenStopOld(c,[e.Storyboard]),d.RaiseCurrentStateChanging(c,k,e,f),d.RaiseCurrentStateChanged(c,k,e,f);else{g=b._GenerateDynamicTransitionAnimations(c,d,e,m);m.DynamicStoryboardCompleted=!1;var q={};g.Completed.Subscribe(function(b,a){if(null==m.Storyboard||!0===m.ExplicitStoryboardCompleted)d.StartNewThenStopOld(c,
[e.Storyboard]),d.RaiseCurrentStateChanged(c,k,e,f);m.DynamicStoryboardCompleted=!0},q);if(null!=m.Storyboard&&!0===m.ExplicitStoryboardCompleted){var r=function(b,a){!0===m.DynamicStoryboardCompleted&&(d.StartNewThenStopOld(c,[e.Storyboard]),d.RaiseCurrentStateChanged(c,k,e,f));m.Storyboard.Completed.Unsubscribe(r,q);m.ExplicitStoryboardCompleted=!0};m.ExplicitStoryboardCompleted=!1;m.Storyboard.Completed.Subscribe(r,q)}d.StartNewThenStopOld(c,[m.Storyboard,g]);d.RaiseCurrentStateChanging(c,k,e,
f)}d.CurrentState=e;return!0};b.DestroyStoryboards=function(a,c){if(!c)return!1;var d=b.GetVisualStateGroups(c);if(!d)return!1;for(d=d.GetEnumerator();d.MoveNext();)d.Current.StopCurrentStoryboards(c)};b._GetTemplateRoot=function(b){if(b instanceof d.Controls.UserControl)return b.XamlNode.TemplateRoot;b=b.XamlNode.GetVisualTreeEnumerator();var a=null;b.MoveNext()&&(a=b.Current,a instanceof d.FENode||(a=null));return a?a.XObject:null};b._TryGetState=function(b,a,c){for(b=b.GetEnumerator();b.MoveNext();)if(c.group=
b.Current,c.state=c.group.GetState(a),c.state)return!0;c.group=null;c.state=null;return!1};b._GetTransition=function(b,a,c,e){if(!b)throw new ArgumentException("element");if(!a)throw new ArgumentException("group");if(!e)throw new ArgumentException("to");var g=b=null,k=-1,m=a.Transitions;if(m)for(var m=d.ArrayEx.GetEnumerator(m),l;m.MoveNext();)if(l=m.Current,!g&&l.IsDefault)g=l;else{var q=-1,r=a.GetState(l.From),t=a.GetState(l.To);if(c===r)q+=1;else if(null!=r)continue;if(e===t)q+=2;else if(null!=
t)continue;q>k&&(k=q,b=l)}return null!=b?b:g};b._GenerateDynamicTransitionAnimations=function(b,c,d,e){b=new a.Animation.Storyboard;b.Duration=null!=e?e.GeneratedDuration:new Duration(new TimeSpan);NotImplemented("VisualStateManager._GenerateDynamicTransitionAnimations");return b};b.VisualStateGroupsProperty=DependencyProperty.RegisterAttachedCore("VisualStateGroups",function(){return g.VisualStateGroupCollection},b);b.CustomVisualStateManagerProperty=DependencyProperty.RegisterAttachedCore("CustomVisualStateManager",
function(){return b},b);return b}(d.DependencyObject);g.VisualStateManager=e})(a.VSM||(a.VSM={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(a){function b(){a.apply(this,arguments);this.To=this.From=null;this.ExplicitStoryboardCompleted=this.DynamicStoryboardCompleted=!0}__extends(b,a);Object.defineProperty(b.prototype,"IsDefault",{get:function(){return null==this.From&&null==this.To},enumerable:!0,configurable:!0});return b}(d.DependencyObject);a.VisualTransition=e;Nullstone.RegisterType(e,"VisualTransition")})(a.VSM||(a.VSM={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){a.NotifyProperties=function(a,c){for(var b=c.length,f=0;f<b;f++)(function(){var b=c[f],d="$"+b+"$";Object.defineProperty(a.prototype,b,{get:function(){return this[d]},set:function(a){this[d]=a;this.OnPropertyChanged(b)}})})()};var g=function(){function a(){this.PropertyChanged=new MulticastEvent}a.prototype.OnPropertyChanged=function(a){this.PropertyChanged.Raise(this,new d.PropertyChangedEventArgs(a))};return a}();a.ObservableObject=g;Nullstone.RegisterType(g,"ObservableObject")})(d.MVVM||
(d.MVVM={}))})(Fayde||(Fayde={}));(function(d){(function(a){var d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.ObservableObject);a.ViewModelBase=d;Nullstone.RegisterType(d,"ViewModelBase")})(d.MVVM||(d.MVVM={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(d.XamlObjectCollection);a.DoubleCollection=g;Nullstone.RegisterType(g,"DoubleCollection")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(){function a(){this._ht=[]}Object.defineProperty(a.prototype,"Count",{get:function(){return this._ht.length},enumerable:!0,configurable:!0});a.FromData=function(c){var b=new a;b._ht=b._ht.concat(d.Media.ParseShapePoints(c));return b};a.FromArray=function(c){var b=new a;b._ht=b._ht.concat(c);return b};a.prototype.GetValueAt=function(a){return this._ht[a]};a.prototype.SetValueAt=function(a,b){if(0>a||a>=this._ht.length)return!1;this._ht[a]=b;var f=this.Owner;
f&&f._InvalidateNaturalBounds()};a.prototype.Add=function(a){this._ht.push(a);(a=this.Owner)&&a._InvalidateNaturalBounds()};a.prototype.AddRange=function(a){this._ht.concat(a);(a=this.Owner)&&a._InvalidateNaturalBounds()};a.prototype.Insert=function(a,b){if(!(0>a)){var f=this._ht.length;a>f&&(a=f);this._ht.splice(a,0,b);(f=this.Owner)&&f._InvalidateNaturalBounds()}};a.prototype.Remove=function(a){a=this.IndexOf(a);-1!==a&&(this.RemoveAt(a),(a=this.Owner)&&a._InvalidateNaturalBounds())};a.prototype.RemoveAt=
function(a){0>a||a>=this._ht.length||(this._ht.splice(a,1),(a=this.Owner)&&a._InvalidateNaturalBounds())};a.prototype.Clear=function(){this._ht=[];var a=this.Owner;a&&a._InvalidateNaturalBounds()};a.prototype.IndexOf=function(a){for(var b=this._ht.length,f=0;f<b;f++)if(Nullstone.Equals(a,this._ht[f]))return f;return-1};a.prototype.Contains=function(a){return-1<this.IndexOf(a)};a.prototype.GetEnumerator=function(a){return d.ArrayEx.GetEnumerator(this._ht,a)};return a}();a.PointCollection=g;Nullstone.RegisterType(g,
"PointCollection")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype._WidthsChanged=function(b){(b=this._Listener)&&b.ColumnDefinitionChanged(this)};c.WidthProperty=DependencyProperty.RegisterCore("Width",function(){return a.GridLength},c,void 0,function(b,a){return b._WidthsChanged(a)});c.MaxWidthProperty=DependencyProperty.RegisterCore("MaxWidth",
function(){return Number},c,Number.POSITIVE_INFINITY,function(b,a){return b._WidthsChanged(a)});c.MinWidthProperty=DependencyProperty.RegisterCore("MinWidth",function(){return Number},c,0,function(b,a){return b._WidthsChanged(a)});c.ActualWidthProperty=DependencyProperty.RegisterReadOnlyCore("ActualWidth",function(){return Number},c,0);return c}(d.DependencyObject);a.ColumnDefinition=g;Nullstone.RegisterType(g,"ColumnDefinition");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Listen=
function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype.ColumnDefinitionChanged=function(b){(b=this._Listener)&&b.ColumnDefinitionsChanged(this)};c.prototype.AddingToCollection=function(b,f){if(!a.prototype.AddingToCollection.call(this,b,f))return!1;b.Listen(this);var c=this._Listener;c&&c.ColumnDefinitionsChanged(this);return!0};c.prototype.RemovedFromCollection=function(b,f){a.prototype.RemovedFromCollection.call(this,b,f);b.Unlisten(this);
var c=this._Listener;c&&c.ColumnDefinitionsChanged(this)};return c}(d.XamlObjectCollection);a.ColumnDefinitionCollection=g;Nullstone.RegisterType(g,"ColumnDefinitionCollection")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments);this.ItemsChanged=new MulticastEvent;this.IsReadOnly=!1}__extends(c,a);c.prototype.ToArray=function(){return this._ht.slice(0)};Object.defineProperty(c.prototype,"Count",{get:function(){return this._ht.length},enumerable:!0,configurable:!0});c.prototype.GetValueAt=function(b){var a=this._ht;if(0>b||b>=a.length)throw new IndexOutOfRangeException(b);return a[b]};c.prototype.GetRange=function(b,a){return this._ht.slice(b,
a)};c.prototype.SetValueAt=function(b,a){this._ValidateReadOnly();this.SetValueAtImpl(b,a);return!0};c.prototype.SetValueAtImpl=function(b,a){var c=this._ht;if(0>b||b>=c.length)throw new IndexOutOfRangeException(b);var n=c[b];c[b]=a;this.ItemsChanged.Raise(this,d.Collections.NotifyCollectionChangedEventArgs.Replace(a,n,b))};c.prototype.Add=function(b){this._ValidateReadOnly();if(null==b)throw new ArgumentException("value");return this.AddImpl(b)};c.prototype.AddImpl=function(b){var a=this._ht.push(b)-
1;this.ItemsChanged.Raise(this,d.Collections.NotifyCollectionChangedEventArgs.Add(b,a));return a};c.prototype.AddRange=function(b){this._ValidateReadOnly();if(b){for(var a=0;a<b.length;a++)if(null==b[a])throw new ArgumentException("value");this.AddRangeImpl(b)}};c.prototype.AddRangeImpl=function(b){var a=this._ht.length;this._ht=this._ht.concat(b);this.ItemsChanged.Raise(this,d.Collections.NotifyCollectionChangedEventArgs.AddRange(b,a))};c.prototype.Insert=function(b,a){this._ValidateReadOnly();if(null==
a)throw new ArgumentException("value");this.InsertImpl(b,a);return!0};c.prototype.InsertImpl=function(b,a){var c=this._ht;if(0>b||b>c.length)throw new IndexOutOfRangeException(b);b>=c.length?c.push(a):c.splice(b,0,a);this.ItemsChanged.Raise(this,d.Collections.NotifyCollectionChangedEventArgs.Add(a,b))};c.prototype.IndexOf=function(b){return this._ht.indexOf(b)};c.prototype.Contains=function(b){return-1<this._ht.indexOf(b)};c.prototype.Remove=function(b){this._ValidateReadOnly();this.RemoveImpl(b);
return!0};c.prototype.RemoveImpl=function(b){var a=this._ht.indexOf(b);0>a||(this._ht.splice(a,1),this.ItemsChanged.Raise(this,d.Collections.NotifyCollectionChangedEventArgs.Remove(b,a)))};c.prototype.RemoveAt=function(b){this._ValidateReadOnly();if(0>b||b>=this._ht.length)throw new IndexOutOfRangeException(b);this.RemoveAtImpl(b);return!0};c.prototype.RemoveAtImpl=function(b){var a=this._ht.splice(b,1)[0];this.ItemsChanged.Raise(this,d.Collections.NotifyCollectionChangedEventArgs.Remove(a,b))};c.prototype.Clear=
function(){this._ValidateReadOnly();this.ClearImpl();return!0};c.prototype.ClearImpl=function(){this._ht=[];this.ItemsChanged.Raise(this,d.Collections.NotifyCollectionChangedEventArgs.Reset())};c.prototype._ValidateReadOnly=function(){if(this.IsReadOnly)throw new InvalidOperationException("The collection is readonly.");};return c}(d.XamlObjectCollection);a.ItemCollection=g;Nullstone.RegisterType(g,"ItemCollection")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype.Listen=function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype._HeightsChanged=function(b){(b=this._Listener)&&b.RowDefinitionChanged(this)};c.HeightProperty=DependencyProperty.RegisterCore("Height",function(){return a.GridLength},c,void 0,function(b,a){return b._HeightsChanged(a)});c.MaxHeightProperty=DependencyProperty.RegisterCore("MaxHeight",
function(){return Number},c,Number.POSITIVE_INFINITY,function(b,a){return b._HeightsChanged(a)});c.MinHeightProperty=DependencyProperty.RegisterCore("MinHeight",function(){return Number},c,0,function(b,a){return b._HeightsChanged(a)});c.ActualHeightProperty=DependencyProperty.RegisterReadOnlyCore("ActualHeight",function(){return Number},c,0);return c}(d.DependencyObject);a.RowDefinition=g;Nullstone.RegisterType(g,"RowDefinition");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Listen=
function(b){this._Listener=b};c.prototype.Unlisten=function(b){this._Listener===b&&(this._Listener=null)};c.prototype.RowDefinitionChanged=function(b){(b=this._Listener)&&b.RowDefinitionsChanged(this)};c.prototype.AddingToCollection=function(b,c){if(!a.prototype.AddingToCollection.call(this,b,c))return!1;b.Listen(this);var d=this._Listener;d&&d.RowDefinitionsChanged(this);return!0};c.prototype.RemovedFromCollection=function(b,c){a.prototype.RemovedFromCollection.call(this,b,c);b.Unlisten(this);var d=
this._Listener;d&&d.RowDefinitionsChanged(this)};return c}(d.XamlObjectCollection);a.RowDefinitionCollection=g;Nullstone.RegisterType(g,"RowDefinitionCollection")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(){function a(){}a.ToolTipProperty=DependencyProperty.RegisterAttached("ToolTip",function(){return d.DependencyObject},a);a.PlacementTargetProperty=DependencyProperty.RegisterAttached("PlacementTarget",function(){return d.UIElement},a);return a}();a.ToolTipService=g;Nullstone.RegisterType(g,"ToolTipService")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(a){function b(b,d,n){a.call(this);Object.defineProperty(this,"HorizontalChange",{value:b,writable:!1});Object.defineProperty(this,"VerticalChange",{value:d,writable:!1});Object.defineProperty(this,"Canceled",{value:n,writable:!1})}__extends(b,a);return b}(d.RoutedEventArgs);a.DragCompletedEventArgs=e;Nullstone.RegisterType(e,"DragCompletedEventArgs");e=function(a){function b(b,d){a.call(this);Object.defineProperty(this,"HorizontalChange",{value:b,
writable:!1});Object.defineProperty(this,"VerticalChange",{value:d,writable:!1})}__extends(b,a);return b}(d.RoutedEventArgs);a.DragDeltaEventArgs=e;Nullstone.RegisterType(e,"DragDeltaEventArgs");e=function(a){function b(b,d){a.call(this);Object.defineProperty(this,"HorizontalOffset",{value:b,writable:!1});Object.defineProperty(this,"VerticalOffset",{value:d,writable:!1})}__extends(b,a);return b}(d.RoutedEventArgs);a.DragStartedEventArgs=e;Nullstone.RegisterType(e,"DragStartedEventArgs")})(a.Primitives||
(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){(function(a){a[a.SmallDecrement=0]="SmallDecrement";a[a.SmallIncrement=1]="SmallIncrement";a[a.LargeDecrement=2]="LargeDecrement";a[a.LargeIncrement=3]="LargeIncrement";a[a.ThumbPosition=4]="ThumbPosition";a[a.ThumbTrack=5]="ThumbTrack";a[a.First=6]="First";a[a.Last=7]="Last";a[a.EndScroll=8]="EndScroll"})(a.ScrollEventType||(a.ScrollEventType={}));var e=function(a){function b(b,d){a.call(this);Object.defineProperty(this,"ScrollEventType",{value:b,writable:!1});
Object.defineProperty(this,"Value",{value:d,writable:!1})}__extends(b,a);return b}(d.RoutedEventArgs);a.ScrollEventArgs=e;Nullstone.RegisterType(e,"ScrollEventArgs")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(a){function b(b,d){a.call(this);Object.defineProperty(this,"OldValues",{value:b.slice(0),writable:!1});Object.defineProperty(this,"NewValues",{value:d.slice(0),writable:!1})}__extends(b,a);return b}(d.RoutedEventArgs);a.SelectionChangedEventArgs=e;Nullstone.RegisterType(e,"SelectionChangedEventArgs")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){var a=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.AddingToCollection=function(b,c){return a.prototype.AddingToCollection.call(this,b,c)?this._AssertNoCycles(b,b.XamlNode.ParentNode,c):!1};c.prototype._AssertNoCycles=function(a,c,d){for(var n=c;n;){var e=n.XObject;if(e instanceof g){var p=!1;e===a?p=!0:e.Source===a.Source&&(p=!0);if(p)return d.Message="Cycle found in resource dictionaries.",d.Number=BError.InvalidOperation,!1}n=n.ParentNode}for(a=a.MergedDictionaries.GetEnumerator();a.MoveNext();)if(!this._AssertNoCycles(a.Current,
c,d))return!1;return!0};return c}(d.XamlObjectCollection);d.ResourceDictionaryCollection=a;Nullstone.RegisterType(a,"ResourceDictionaryCollection");var g=function(d){function c(){d.call(this);this._KeyIndex=[];this.Source="";var b=new a;b.AttachTo(this);Object.defineProperty(this,"MergedDictionaries",{value:b,writable:!1})}__extends(c,d);c.prototype.ContainsKey=function(a){return void 0!==this._KeyIndex[a]};c.prototype.Get=function(a){var c=this._KeyIndex[a];return-1<c?this._ht[c]:this._GetFromMerged(a)};
c.prototype.Set=function(a,c){var d=this._KeyIndex[a];if(void 0===d&&void 0===c)return!1;if(void 0===c)return this._KeyIndex[a]=void 0,this.RemoveAt(d);if(void 0===d)return d=this._ht.length,this._KeyIndex[a]=d,this.Insert(d,c);var n=this.GetValueAt[d];this._ht[d]=c;this._RaiseItemReplaced(n,c,d);return!0};c.prototype.Add=function(a){throw new InvalidOperationException("Cannot add to ResourceDictionary. Use Set instead.");};c.prototype.Remove=function(a){throw new InvalidOperationException("Cannot remove from ResourceDictionary. Use Set instead.");
};c.prototype._GetFromMerged=function(a){var c=this.MergedDictionaries;if(c)for(var c=c.GetEnumerator(),d;c.MoveNext();)if(d=c.Current.Get(a),void 0!==d)return d};return c}(d.XamlObjectCollection);d.ResourceDictionary=g;Nullstone.RegisterType(g,"ResourceDictionary")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function c(){a.apply(this,arguments);this._IsSealed=!1}__extends(c,a);c.prototype._Seal=function(a){if(!this._IsSealed){for(var c=this.GetEnumerator();c.MoveNext();)c.Current._Seal(a);this._IsSealed=!0}};c.prototype.AddingToCollection=function(b,c){return b&&this._ValidateSetter(b,c)?a.prototype.AddingToCollection.call(this,b,c):!1};c.prototype._ValidateSetter=function(a,c){return void 0===a.Property?(c.Message="Cannot have a null PropertyProperty value",!1):void 0!==
a.Value||a._HasDeferredValueExpression(g.ValueProperty)?this._IsSealed?(c.Message="Cannot add a setter to a sealed style",!1):!0:(c.Message="Cannot have a null ValueProperty value",!1)};return c}(d.XamlObjectCollection);d.SetterCollection=a;Nullstone.RegisterType(a,"SetterCollection");var g=function(a){function c(){a.apply(this,arguments);this._IsSealed=!1}__extends(c,a);c.prototype._Seal=function(a){var c=this.Property,h=this.Value;if("string"===typeof c.GetTargetType()&&"string"!==typeof h)throw new XamlParseException("Setter value does not match property type.");
try{this.ConvertedValue=d.TypeConverter.ConvertObject(c,h,a,!0)}catch(n){throw new XamlParseException(n.message);}this._IsSealed=!0};c.PropertyProperty=DependencyProperty.Register("Property",function(){return DependencyProperty},c);c.ValueProperty=DependencyProperty.Register("Value",function(){return Object},c);return c}(d.DependencyObject);d.Setter=g;Nullstone.RegisterType(g,"Setter")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Fire=function(){};return c}(d.DependencyObject);d.TriggerAction=a;Nullstone.RegisterType(a,"TriggerAction");var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(d.XamlObjectCollection);d.TriggerActionCollection=g;Nullstone.RegisterType(g,"TriggerActionCollection");a=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Attach=function(a){};c.prototype.Detach=
function(a){};return c}(d.DependencyObject);d.TriggerBase=a;Nullstone.RegisterType(a,"TriggerBase");a=function(a){function c(){a.apply(this,arguments);this._IsAttached=!1}__extends(c,a);c.prototype.Attach=function(a){this._IsAttached||((a=this._ParseEventName(a))?(this._IsAttached=!0,a.Subscribe(this._FireActions,this)):Warn("Could not attach to RoutedEvent: "+this.RoutedEvent))};c.prototype.Detach=function(a){(a=this._ParseEventName(a))&&a.Unsubscribe(this._FireActions,this);this._IsAttached=!1};
c.prototype._FireActions=function(a,c){var d=this.Actions;if(d)for(d=d.GetEnumerator();d.MoveNext();)d.Current};c.prototype._ParseEventName=function(a){var c=this.RoutedEvent,c=c.split(".");if(1===c.length)c=c[0];else if(2===c.length)c=c[1];else return;a=a[c];if(a instanceof d.RoutedEvent)return a};c.ActionsProperty=DependencyProperty.Register("Actions",function(){return g},c);c.RoutedEventProperty=DependencyProperty.Register("RoutedEvent",function(){return String},c);c.Annotations={ContentProperty:c.ActionsProperty};
return c}(a);d.EventTrigger=a;Nullstone.RegisterType(a,"EventTrigger");a=function(a){function c(){a.apply(this,arguments)}__extends(c,a);Object.defineProperty(c.prototype,"ParentXamlObject",{get:function(){return this.XamlNode.ParentNode?this.XamlNode.ParentNode.XObject:void 0},enumerable:!0,configurable:!0});c.prototype.AddingToCollection=function(b,c){if(!a.prototype.AddingToCollection.call(this,b,c))return!1;var d=this.ParentXamlObject;d&&b.Attach(d);return!0};c.prototype.RemovedFromCollection=
function(b,c){a.prototype.RemovedFromCollection.call(this,b,c);var d=this.ParentXamlObject;d&&b.Detach(d)};c.prototype.AttachTarget=function(a){for(var c=this.GetEnumerator();c.MoveNext();)c.Current.Attach(a)};c.prototype.DetachTarget=function(a){for(var c=this.GetEnumerator();c.MoveNext();)c.Current.Detach(a)};return c}(d.XamlObjectCollection);d.TriggerCollection=a;Nullstone.RegisterType(a,"TriggerCollection")})(Fayde||(Fayde={}));
(function(d){var a=function(a){function c(b){a.call(this,b);this.IsLoaded=this.IsMouseOver=this.IsTopLevel=!1;this.LayoutUpdater=new d.LayoutUpdater(this);this.LayoutUpdater.SetContainerMode(!1)}__extends(c,a);c.prototype.SetSurfaceFromVisualParent=function(){if(this._Surface)return this.VisualParentNode;var a=this.VisualParentNode;a&&this.SetSurface(a._Surface);return a};c.prototype.SetSurface=function(a){this._Surface=a;this.LayoutUpdater.Surface=a};c.prototype.GetVisualRoot=function(){for(var a=
this,c;c=a.VisualParentNode;)a=c;return a};c.prototype.GetInheritedEnumerator=function(){return this.GetVisualTreeEnumerator(d.VisualTreeDirection.Logical)};c.prototype.OnIsAttachedChanged=function(b){var c=null;b&&(c=this.SetSurfaceFromVisualParent());this.LayoutUpdater.OnIsAttachedChanged(b,c);a.prototype.OnIsAttachedChanged.call(this,b)};c.prototype.SetIsLoaded=function(a){};c.prototype.OnVisualChildAttached=function(a){var c=this.LayoutUpdater;c.UpdateBounds(!0);c.InvalidateMeasure();c.PreviousConstraint=
void 0;a=a.XamlNode;a.SetVisualParentNode(this);d.Providers.InheritedStore.PropagateInheritedOnAdd(this.XObject,a);a.LayoutUpdater.OnAddedToTree()};c.prototype.OnVisualChildDetached=function(a){var c=this.LayoutUpdater;a=a.XamlNode;c.Invalidate(a.LayoutUpdater.SurfaceBoundsWithChildren);c.InvalidateMeasure();a.SetVisualParentNode(null);a.LayoutUpdater.OnRemovedFromTree();d.Providers.InheritedStore.ClearInheritedOnRemove(this.XObject,a)};c.prototype.SetVisualParentNode=function(a){this.VisualParentNode!==
a&&((this.VisualParentNode=a)?this.SetSurface(a._Surface):this.SetSurface(null))};c.prototype.Focus=function(a){return!1};c.prototype._EmitFocusChange=function(a){"got"===a?this._EmitGotFocus():"lost"===a&&this._EmitLostFocus()};c.prototype._EmitLostFocus=function(){var a=new d.RoutedEventArgs,c=this.XObject;c.OnLostFocus(a);c.LostFocus.Raise(c,a)};c.prototype._EmitGotFocus=function(){var a=new d.RoutedEventArgs,c=this.XObject;c.OnGotFocus(a);c.GotFocus.Raise(c,a)};c.prototype._EmitKeyDown=function(a){var c=
this.XObject;c.OnKeyDown(a);c.KeyDown.Raise(c,a)};c.prototype._EmitKeyUp=function(a){var c=this.XObject;c.OnKeyUp(a);c.KeyUp.Raise(c,a)};c.prototype._EmitLostMouseCapture=function(a){var c=this.XObject;a=new d.Input.MouseEventArgs(a);c.OnLostMouseCapture(a);c.LostMouseCapture.Raise(c,a)};c.prototype._EmitMouseEvent=function(a,c,d,n){var e=this.XObject;switch(a){case InputType.MouseUp:c?(e.OnMouseLeftButtonUp(n),e.MouseLeftButtonUp.Raise(e,n)):d&&(e.OnMouseRightButtonUp(n),e.MouseRightButtonUp.Raise(e,
n));break;case InputType.MouseDown:c?(e.OnMouseLeftButtonDown(n),e.MouseLeftButtonDown.Raise(e,n)):d&&(e.OnMouseRightButtonDown(n),e.MouseRightButtonDown.Raise(e,n));break;case InputType.MouseLeave:this.IsMouseOver=!1;e.OnMouseLeave(n);e.MouseLeave.Raise(e,n);break;case InputType.MouseEnter:this.IsMouseOver=!0;e.OnMouseEnter(n);e.MouseEnter.Raise(e,n);break;case InputType.MouseMove:e.OnMouseMove(n);e.MouseMove.Raise(e,n);break;case InputType.MouseWheel:e.OnMouseWheel(n);e.MouseWheel.Raise(e,n);break;
default:return!1}return n.Handled};c.prototype.CanCaptureMouse=function(){return!0};c.prototype.CaptureMouse=function(){if(!this.IsAttached)return!1;this._Surface.SetMouseCapture(this);return!0};c.prototype.ReleaseMouseCapture=function(){this.IsAttached&&this._Surface.ReleaseMouseCapture(this)};c.prototype._ResortChildrenByZIndex=function(){Warn("_Dirty.ChildrenZIndices only applies to Panel subclasses")};c.prototype.InvalidateParent=function(a){var c=this.VisualParentNode;c?c.LayoutUpdater.Invalidate(a):
this.IsAttached&&this._Surface._Invalidate(a)};c.prototype.InvalidateClip=function(a,c){var d=this.LayoutUpdater;c?rect.copyTo(c.GetBounds(),d.ClipBounds):rect.clear(d.ClipBounds);this.InvalidateParent(d.SurfaceBoundsWithChildren);d.UpdateBounds(!0);d.UpdateClip()};c.prototype.InvalidateEffect=function(a,c){var d=this.LayoutUpdater,n=c?c.GetPadding(d.EffectPadding):!1;this.InvalidateParent(d.SurfaceBoundsWithChildren);n&&d.UpdateBounds();d.ComputeComposite();a!==c&&this.IsAttached&&this._Surface._AddDirtyElement(this.LayoutUpdater,
_Dirty.Transform)};c.prototype.InvalidateOpacity=function(){var a=this.LayoutUpdater;a.UpdateTotalRenderVisibility();this.InvalidateParent(a.SurfaceBoundsWithChildren)};c.prototype.InvalidateVisibility=function(a){var c=this.LayoutUpdater;c.Flags=a===d.Visibility.Visible?c.Flags|d.UIElementFlags.RenderVisible:c.Flags&~d.UIElementFlags.RenderVisible;c.UpdateTotalRenderVisibility();this.InvalidateParent(c.SurfaceBoundsWithChildren);c.InvalidateMeasure();(a=this.VisualParentNode)&&a.LayoutUpdater.InvalidateMeasure();
(a=this._Surface)&&a._RemoveFocusFrom(c)};c.prototype.IsAncestorOf=function(a){for(;a&&a!==this;)a=a.VisualParentNode;return a===this};c.prototype.TransformToVisual=function(a){if(a&&!a.IsAttached)throw new ArgumentException("UIElement not attached.");var c=this,d=!1;if(this.IsAttached)for(;c;)c.IsTopLevel&&(d=!0),c=c.VisualParentNode;if(!d)throw new ArgumentException("UIElement not attached.");if(a&&!a.IsTopLevel){d=!1;if((c=a.VisualParentNode)&&a.IsAttached)for(;c;)c.IsTopLevel&&(d=!0),c.VisualParentNode;
if(!d)throw new ArgumentException("UIElement not attached.");}return this.LayoutUpdater.TransformToVisual(a)};return c}(d.DONode);d.UINode=a;Nullstone.RegisterType(a,"UINode");var g=function(e){function c(){e.apply(this,arguments);this._EffectListener=this._ClipListener=null;this.LostFocus=new d.RoutedEvent;this.GotFocus=new d.RoutedEvent;this.LostMouseCapture=new d.RoutedEvent;this.KeyDown=new d.RoutedEvent;this.KeyUp=new d.RoutedEvent;this.MouseLeftButtonUp=new d.RoutedEvent;this.MouseRightButtonUp=
new d.RoutedEvent;this.MouseLeftButtonDown=new d.RoutedEvent;this.MouseRightButtonDown=new d.RoutedEvent;this.MouseLeave=new d.RoutedEvent;this.MouseEnter=new d.RoutedEvent;this.MouseMove=new d.RoutedEvent;this.MouseWheel=new d.RoutedEvent}__extends(c,e);c.prototype.CreateNode=function(){return new a(this)};c.prototype.IsInheritable=function(a){return a===c.UseLayoutRoundingProperty};Object.defineProperty(c.prototype,"IsMouseOver",{get:function(){return this.XamlNode.IsMouseOver},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"DesiredSize",{get:function(){return this.XamlNode.LayoutUpdater.DesiredSize},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"RenderSize",{get:function(){return this.XamlNode.LayoutUpdater.RenderSize},enumerable:!0,configurable:!0});c.prototype.Focus=function(){return this.XamlNode.Focus()};c.prototype.CaptureMouse=function(){return this.XamlNode.CaptureMouse()};c.prototype.ReleaseMouseCapture=function(){this.XamlNode.ReleaseMouseCapture()};c.prototype.IsAncestorOf=
function(a){return a?this.XamlNode.IsAncestorOf(a.XamlNode):!1};c.prototype.TransformToVisual=function(a){return this.XamlNode.TransformToVisual(a?a.XamlNode:null)};c.prototype.InvalidateMeasure=function(){this.XamlNode.LayoutUpdater.InvalidateMeasure()};c.prototype.Measure=function(a){var c=new BError;this.XamlNode.LayoutUpdater._Measure(a,c);c.Message&&c.ThrowException()};c.prototype.InvalidateArrange=function(){this.XamlNode.LayoutUpdater.InvalidateArrange()};c.prototype.Arrange=function(a){var c=
new BError;this.XamlNode.LayoutUpdater._Arrange(a,c);c.Message&&c.ThrowException()};c.prototype.OnGotFocus=function(a){};c.prototype.OnLostFocus=function(a){};c.prototype.OnLostMouseCapture=function(a){};c.prototype.OnKeyDown=function(a){};c.prototype.OnKeyUp=function(a){};c.prototype.OnMouseEnter=function(a){};c.prototype.OnMouseLeave=function(a){};c.prototype.OnMouseLeftButtonDown=function(a){};c.prototype.OnMouseLeftButtonUp=function(a){};c.prototype.OnMouseMove=function(a){};c.prototype.OnMouseRightButtonDown=
function(a){};c.prototype.OnMouseRightButtonUp=function(a){};c.prototype.OnMouseWheel=function(a){};c.prototype._ClipChanged=function(a){var c=this,d=a.OldValue;a=a.NewValue;this.XamlNode.InvalidateClip(d,a);d!=a&&(d&&d.Unlisten(this._ClipListener),a&&(this._ClipListener||(this._ClipListener={GeometryChanged:function(a){return c.XamlNode.InvalidateClip(a,a)}}),a.Listen(this._ClipListener)))};c.prototype._EffectChanged=function(a){var c=this,d=a.OldValue;a=a.NewValue;this.XamlNode.InvalidateEffect(d,
a);d!==a&&(d&&d.Unlisten(this._EffectListener),a&&(this._EffectListener||(this._EffectListener={EffectChanged:function(a){return c.XamlNode.InvalidateEffect(a,a)}}),a.Listen(this._EffectListener)))};c.prototype._UseLayoutRoundingChanged=function(a){a=this.XamlNode.LayoutUpdater;a.InvalidateMeasure();a.InvalidateArrange()};c.prototype._IsHitTestVisibleChanged=function(a){var c=this.XamlNode.LayoutUpdater;c.Flags=!0===a.NewValue?c.Flags|d.UIElementFlags.HitTestVisible:c.Flags&~d.UIElementFlags.HitTestVisible;
c.UpdateTotalHitTestVisibility()};c.prototype._TriggersChanged=function(a){var c=a.OldValue;a=a.NewValue;c instanceof d.TriggerCollection&&c.DetachTarget(this);a instanceof d.TriggerCollection&&a.AttachTarget(this)};c.ClipProperty=DependencyProperty.RegisterCore("Clip",function(){return d.Media.Geometry},c,void 0,function(a,c){return a._ClipChanged(c)});c.EffectProperty=DependencyProperty.Register("Effect",function(){return d.Media.Effects.Effect},c,void 0,function(a,c){return a._EffectChanged(c)});
c.IsHitTestVisibleProperty=DependencyProperty.RegisterCore("IsHitTestVisible",function(){return Boolean},c,!0,function(a,c){return a._IsHitTestVisibleChanged(c)});c.OpacityMaskProperty=DependencyProperty.RegisterCore("OpacityMask",function(){return d.Media.Brush},c);c.OpacityProperty=DependencyProperty.RegisterCore("Opacity",function(){return Number},c,1,function(a,c){return a.XamlNode.InvalidateOpacity()});c.ProjectionProperty=DependencyProperty.Register("Projection",function(){return d.Media.Projection},
c,void 0,function(a,c){return a.XamlNode.LayoutUpdater.UpdateProjection()});c.RenderTransformProperty=DependencyProperty.Register("RenderTransform",function(){return d.Media.Transform},c,void 0,function(a,c){return a.XamlNode.LayoutUpdater.UpdateTransform()});c.RenderTransformOriginProperty=DependencyProperty.Register("RenderTransformOrigin",function(){return Point},c,void 0,function(a,c){return a.XamlNode.LayoutUpdater.UpdateTransform()});c.TagProperty=DependencyProperty.Register("Tag",function(){return Object},
c);c.TriggersProperty=DependencyProperty.RegisterCore("Triggers",function(){return d.TriggerCollection},c,void 0,function(a,c){return a._TriggersChanged(c)});c.UseLayoutRoundingProperty=d.InheritableOwner.UseLayoutRoundingProperty.ExtendTo(c);c.VisibilityProperty=DependencyProperty.RegisterCore("Visibility",function(){return new Enum(d.Visibility)},c,d.Visibility.Visible,function(a,c){return a.XamlNode.InvalidateVisibility(c.NewValue)});return c}(d.DependencyObject);d.UIElement=g;Nullstone.RegisterType(g,
"UIElement")})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.TextElement);a.Block=g;Nullstone.RegisterType(g,"Block");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Listen=function(a){this._Listener=a};c.prototype.Unlisten=function(a){this._Listener===a&&(this._Listener=null)};c.prototype.AddingToCollection=function(b,c){if(!a.prototype.AddingToCollection.call(this,b,c))return!1;var d=this._Listener;d&&d.BlocksChanged(b,
!0);return!0};c.prototype.RemovedFromCollection=function(b,c){a.prototype.RemovedFromCollection.call(this,b,c);var d=this._Listener;d&&d.BlocksChanged(b,!1)};return c}(d.XamlObjectCollection);a.BlockCollection=g;Nullstone.RegisterType(g,"BlockCollection")})(d.Documents||(d.Documents={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments);this.Autogen=!1}__extends(c,a);return c}(a.TextElement);a.Inline=g;Nullstone.RegisterType(g,"Inline");g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.Listen=function(a){this._Listener=a};c.prototype.Unlisten=function(a){this._Listener===a&&(this._Listener=null)};c.prototype.AddingToCollection=function(b,c){if(!a.prototype.AddingToCollection.call(this,b,c))return!1;var d=this._Listener;d&&
d.InlinesChanged(b,!0);return!0};c.prototype.RemovedFromCollection=function(b,c){a.prototype.RemovedFromCollection.call(this,b,c);var d=this._Listener;d&&d.InlinesChanged(b,!1)};return c}(d.XamlObjectCollection);a.InlineCollection=g;Nullstone.RegisterType(g,"InlineCollection")})(d.Documents||(d.Documents={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.Inline);a.LineBreak=d;Nullstone.RegisterType(d,"LineBreak")})(d.Documents||(d.Documents={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);var b=new a.InlineCollection;b.AttachTo(this);b.Listen(this);Object.defineProperty(this,"Inlines",{value:b,writable:!1})}__extends(c,e);c.prototype.CreateNode=function(){return new a.TextElementNode(this,"Inlines")};c.prototype.InlinesChanged=function(a,c){c&&d.Providers.InheritedStore.PropagateInheritedOnAdd(this,a.XamlNode)};c.Annotations={ContentProperty:"Inlines"};return c}(a.Block);a.Paragraph=g;Nullstone.RegisterType(g,"Paragraph")})(d.Documents||
(d.Documents={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._SerializeText=function(){return this.Text};c.prototype.IsInheritable=function(b){return b===c.FlowDirectionProperty?!0:a.prototype.IsInheritable.call(this,b)};c.FlowDirectionProperty=d.InheritableOwner.FlowDirectionProperty.ExtendTo(c);c.TextProperty=DependencyProperty.Register("Text",function(){return String},c);return c}(a.Inline);a.Run=g;Nullstone.RegisterType(g,"Run")})(d.Documents||(d.Documents=
{}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);var b=new a.BlockCollection;b.AttachTo(this);b.Listen(this);Object.defineProperty(this,"Blocks",{value:b,writable:!1})}__extends(c,e);c.prototype.CreateNode=function(){return new a.TextElementNode(this,"Blocks")};c.prototype.BlocksChanged=function(a,c){c&&d.Providers.InheritedStore.PropagateInheritedOnAdd(this,a.XamlNode)};c.Annotations={ContentProperty:"Blocks"};return c}(a.TextElement);a.Section=g;Nullstone.RegisterType(g,"Section")})(d.Documents||
(d.Documents={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);var b=new a.InlineCollection;b.AttachTo(this);b.Listen(this);Object.defineProperty(this,"Inlines",{value:b,writable:!1})}__extends(c,e);c.prototype.CreateNode=function(){return new a.TextElementNode(this,"Inlines")};c.prototype.InlinesChanged=function(a,c){c&&d.Providers.InheritedStore.PropagateInheritedOnAdd(this,a.XamlNode)};c.prototype._SerializeText=function(){for(var a="",c=this.Inlines.GetEnumerator();c.MoveNext();)a+=c.Current._SerializeText();
return a};c.Annotations={ContentProperty:"Inlines"};return c}(a.Inline);a.Span=g;Nullstone.RegisterType(g,"Span")})(d.Documents||(d.Documents={}))})(Fayde||(Fayde={}));(function(d){(function(a){var d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.Span);a.Underline=d;Nullstone.RegisterType(d,"Underline")})(d.Documents||(d.Documents={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.call(this);this._CachedBrush=this._CachedBounds=null;this._Listeners=[];d.XamlNode.SetShareable(this.XamlNode)}__extends(c,a);c.prototype.SetupBrush=function(a,c){if(!(this._CachedBrush&&this._CachedBounds&&rect.isEqual(this._CachedBounds,c))){this._CachedBounds=c;var d=this.Transform;if(d){var n=d.TransformBounds(c),d=d.Value._Raw,e=this.CreateBrush(a,c),g=rect.copyTo(c);rect.growBy(g,d[2],d[5],0,0);var k=document.createElement("canvas");
k.width=Math.max(n.Width,c.Width);k.height=Math.max(n.Height,c.Height);n=k.getContext("2d");n.setTransform(d[0],d[1],d[3],d[4],d[2],d[5]);n.fillStyle=e;n.fillRect(g.X,g.Y,g.Width,g.Height);this._CachedBrush=a.createPattern(k,"no-repeat")}else this._CachedBrush=this.CreateBrush(a,c)}};c.prototype.CreateBrush=function(a,c){};c.prototype.ToHtml5Object=function(){return this._CachedBrush};c.prototype.Listen=function(a){var c=this._Listeners,d={Callback:a,Detach:function(){var a=c.indexOf(d);-1<a&&c.splice(a,
1)}};c.push(d);return d};c.prototype.InvalidateBrush=function(){this._CachedBounds=this._CachedBrush=null;for(var a=this._Listeners,c=a.length,d=0;d<c;d++)a[d].Callback(this)};c.prototype._TransformChanged=function(a){var c=this;this._TransformListener&&(this._TransformListener.Detach(),this._TransformListener=null);if(a=a.NewValue)this._TransformListener=a.Listen(function(a){return c.InvalidateBrush()});this.InvalidateBrush()};c.TransformProperty=DependencyProperty.RegisterCore("Transform",function(){return d.Media.Transform},
c,void 0,function(a,c){return a._TransformChanged(c)});return c}(d.DependencyObject);a.Brush=g;Nullstone.RegisterType(g,"Brush")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._Build=function(){var a=this.RadiusX,c=this.RadiusY,h=this.Center,n=h?h.X:0,h=h?h.Y:0,e=new d.Shapes.RawPath;e.Ellipse(n-a,h-c,2*a,2*c);return e};c.CenterProperty=DependencyProperty.Register("Center",function(){return Point},c,void 0,function(a,c){return a._InvalidateGeometry()});c.RadiusXProperty=DependencyProperty.Register("RadiusX",function(){return Number},c,0,function(a,c){return a._InvalidateGeometry()});
c.RadiusYProperty=DependencyProperty.Register("RadiusY",function(){return Number},c,0,function(a,c){return a._InvalidateGeometry()});return c}(a.Geometry);a.EllipseGeometry=g;Nullstone.RegisterType(g,"EllipseGeometry")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.call(this);var b=new a.GradientStopCollection;b.AttachTo(this);b.Listen(this);Object.defineProperty(this,"GradientStops",{value:b,writable:!1})}__extends(c,d);c.prototype.CreateBrush=function(b,c){switch(this.SpreadMethod){default:return this._CreatePad(b,c);case a.GradientSpreadMethod.Repeat:return this._CreateRepeat(b,c);case a.GradientSpreadMethod.Reflect:return this._CreateReflect(b,c)}};c.prototype._CreatePad=function(a,c){};c.prototype._CreateRepeat=
function(a,c){};c.prototype._CreateReflect=function(a,c){};c.prototype._GetMappingModeTransform=function(b){return b&&this.MappingMode!==a.BrushMappingMode.Absolute?mat3.createScale(b.Width,b.Height):mat3.identity()};c.prototype.GradientStopsChanged=function(a){this.InvalidateBrush()};c.MappingModeProperty=DependencyProperty.Register("MappingMode",function(){return new Enum(a.BrushMappingMode)},c,a.BrushMappingMode.RelativeToBoundingBox,function(a,c){return a.InvalidateBrush()});c.SpreadMethodProperty=
DependencyProperty.Register("SpreadMethod",function(){return new Enum(a.GradientSpreadMethod)},c,a.GradientSpreadMethod.Pad,function(a,c){return a.InvalidateBrush()});c.Annotations={ContentProperty:"GradientStops"};return c}(a.Brush);a.GradientBrush=d;Nullstone.RegisterType(d,"GradientBrush")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype._CreatePad=function(a,c){for(var d=this._GetPointData(c),n=d.start,d=d.end,n=a.createLinearGradient(n.X,n.Y,d.X,d.Y),d=this.GradientStops.GetEnumerator();d.MoveNext();){var e=d.Current;n.addColorStop(e.Offset,e.Color.toString())}return n};c.prototype._CreateRepeat=function(b,c){var d=this._GetPointData(c),n=d.start,e=d.end,d={x:e.X-n.X,y:e.Y-n.Y},g={x:n.X,y:n.Y},e={x:e.X,y:e.Y};a.GradientMetrics.Calculate(d,
g,e,c);n=b.createLinearGradient(g.x,g.y,e.x,e.y);d=(e.x-g.x)/d.x;for(e=g=0;e<d;e++){for(var k=this.GradientStops.GetEnumerator();k.MoveNext();){var m=k.Current;n.addColorStop(g+m.Offset/d,m.Color.toString())}g+=1/d}return n};c.prototype._CreateReflect=function(a,c){this._GetPointData(c)};c.prototype._GetPointData=function(a){a=this._GetMappingModeTransform(a);var c=this.StartPoint,d=this.EndPoint,c=mat3.transformVec2(a,vec2.createFrom(c.X,c.Y));a=mat3.transformVec2(a,vec2.createFrom(d.X,d.Y));return{start:new Point(c[0],
c[1]),end:new Point(a[0],a[1])}};c.prototype.toString=function(){for(var a=this.GradientStops.GetEnumerator(),c=[];a.MoveNext();)c.push(a.Current.toString());return"LinearGradientBrush("+this.StartPoint.toString()+" --\x3e "+this.EndPoint.toString()+" ["+c.toString()+"])"};c.StartPointProperty=DependencyProperty.RegisterCore("StartPoint",function(){return Point},c,void 0,function(a,c){return a.InvalidateBrush()});c.EndPointProperty=DependencyProperty.RegisterCore("EndPoint",function(){return Point},
c,void 0,function(a,c){return a.InvalidateBrush()});return c}(a.GradientBrush);a.LinearGradientBrush=d;Nullstone.RegisterType(d,"LinearGradientBrush")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype.CreateProjectionMatrix=function(){return this.ProjectionMatrix};c.ProjectionMatrixProperty=DependencyProperty.Register("ProjectionMatrix",function(){return a.Matrix3D},c,void 0,function(a,c){return a._InvalidateProjection()});return c}(a.Projection);a.Matrix3DProjection=d;Nullstone.RegisterType(d,"Matrix3DProjection")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=57/180*Math.PI,e=-998*(65536/-65535)/999,c=Math.PI/180,b=function(b){function h(){b.apply(this,arguments)}__extends(h,b);h.prototype.GetDistanceFromXYPlane=function(){var a=Math.max(this._ObjectWidth,1),b=Math.max(this._ObjectHeight,1),a=[a/2,b/2,0,1],b=this.GetTransform();mat4.transformVec4(b,a,a);return 0===a[3]?NaN:e-a[2]/a[3]};h.prototype.CreateProjectionMatrix3D=function(){var b=(this.RotationX||0)*c,f=(this.RotationY||0)*c,h=(this.RotationZ||0)*c,e=this.GlobalOffsetX||
0,m=this.GlobalOffsetY||0,l=this.GlobalOffsetZ||0,q=this.LocalOffsetX||0,r=this.LocalOffsetY||0,t=this.LocalOffsetZ||0,u=this._ObjectWidth,x=this._ObjectHeight,v=mat4.identity();mat4.translate(mat4.identity(),u*-this.CenterOfRotationX,x*-this.CenterOfRotationY,-this.CenterOfRotationZ);mat4.scale(v,1,-1,1);mat4.translate(v,q,-r,t);0!==b&&(b=mat4.createRotateX(b),mat4.multiply(v,b,v));0!==f&&(f=mat4.createRotateY(-f),mat4.multiply(v,f,v));0!==h&&(h=mat4.createRotateZ(h),mat4.multiply(v,h,v));mat4.translate(v,
u*(this.CenterOfRotationX-0.5)+e,-x*(this.CenterOfRotationY-0.5)-m,this.CenterOfRotationZ-999+l);e=mat4.createPerspective(d,u/x,1,65536);mat4.multiply(v,e,v);e=1998*Math.tan(d/2)/x;mat4.scale(v,e,e,1);u=mat4.createViewport(u,x);mat4.multiply(v,u,v);u=new a.Matrix3D;u._Raw=v;return u};h.CenterOfRotationXProperty=DependencyProperty.Register("CenterOfRotationX",function(){return Number},h,0.5,function(a,b){return a._InvalidateProjection()});h.CenterOfRotationYProperty=DependencyProperty.Register("CenterOfRotationY",
function(){return Number},h,0.5,function(a,b){return a._InvalidateProjection()});h.CenterOfRotationZProperty=DependencyProperty.Register("CenterOfRotationZ",function(){return Number},h,0.5,function(a,b){return a._InvalidateProjection()});h.GlobalOffsetXProperty=DependencyProperty.Register("GlobalOffsetX",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});h.GlobalOffsetYProperty=DependencyProperty.Register("GlobalOffsetY",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});
h.GlobalOffsetZProperty=DependencyProperty.Register("GlobalOffsetZ",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});h.LocalOffsetXProperty=DependencyProperty.Register("LocalOffsetX",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});h.LocalOffsetYProperty=DependencyProperty.Register("LocalOffsetY",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});h.LocalOffsetZProperty=DependencyProperty.Register("LocalOffsetZ",
function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});h.RotationXProperty=DependencyProperty.Register("RotationX",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});h.RotationYProperty=DependencyProperty.Register("RotationY",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});h.RotationZProperty=DependencyProperty.Register("RotationZ",function(){return Number},h,0,function(a,b){return a._InvalidateProjection()});return h}(a.Projection);
a.PlaneProjection=b;Nullstone.RegisterType(b,"PlaneProjection")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.CreateBrush=function(a,c){};c.CenterProperty=DependencyProperty.RegisterCore("Center",function(){return Point},c,new Point(0.5,0.5),function(a,c){return a.InvalidateBrush()});c.GradientOriginProperty=DependencyProperty.RegisterCore("GradientOrigin",function(){return Point},c,new Point(0.5,0.5),function(a,c){return a.InvalidateBrush()});c.RadiusXProperty=DependencyProperty.RegisterCore("RadiusX",
function(){return Number},c,0.5,function(a,c){return a.InvalidateBrush()});c.RadiusYProperty=DependencyProperty.RegisterCore("RadiusY",function(){return Number},c,0.5,function(a,c){return a.InvalidateBrush()});return c}(a.GradientBrush);a.RadialGradientBrush=d;Nullstone.RegisterType(d,"RadialGradientBrush")})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(a){function c(){a.call(this);1===arguments.length&&arguments[0]instanceof Color&&(this.Color=arguments[0])}__extends(c,a);c.FromColor=function(a){var d=new c;d.Color=a;return d};c.prototype.CreateBrush=function(a,c){var d=this.Color;return d?d.toString():"#000000"};c.ColorProperty=DependencyProperty.Register("Color",function(){return Color},c,void 0,function(a,c){return a.InvalidateBrush()});return c}(a.Brush);a.SolidColorBrush=d;Nullstone.RegisterType(d,"SolidColorBrush")})(d.Media||
(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype.CreateBrush=function(b,c){var d=this.GetTileExtents(),n=document.createElement("canvas");n.width=c.Width;n.height=c.Height;var e=n.getContext("2d"),g;g=c.Width;var k=c.Height,m=d.Width,l=d.Height,q=this.Stretch,r=this.AlignmentX,t=this.AlignmentY,u=g/m,x=k/l;0===g&&(u=1);0===k&&(x=1);if(q===a.Stretch.Fill)g=mat3.createScale(u,x);else{var v=1,A=d=0;switch(q){case a.Stretch.Uniform:v=u<x?u:x;
break;case a.Stretch.UniformToFill:v=u<x?x:u}switch(r){case a.AlignmentX.Left:d=0;break;case a.AlignmentX.Center:d=(g-v*m)/2;break;default:d=g-v*m}switch(t){case a.AlignmentY.Top:A=0;break;case a.AlignmentY.Center:A=(k-v*l)/2;break;default:A=k-v*l}g=mat3.createScale(v,v);mat3.translate(g,d,A)}e.setTransform(g[0],g[1],g[3],g[4],g[2],g[5]);this.DrawTile(e,c);return b.createPattern(n,"no-repeat")};c.prototype.GetTileExtents=function(){};c.prototype.DrawTile=function(a,c){};c.AlignmentXProperty=DependencyProperty.RegisterCore("AlignmentX",
function(){return new Enum(a.AlignmentX)},c,a.AlignmentX.Center,function(a,c){return a.InvalidateBrush()});c.AlignmentYProperty=DependencyProperty.RegisterCore("AlignmentY",function(){return new Enum(a.AlignmentY)},c,a.AlignmentY.Center,function(a,c){return a.InvalidateBrush()});c.StretchProperty=DependencyProperty.RegisterCore("Stretch",function(){return new Enum(a.Stretch)},c,a.Stretch.Fill,function(a,c){return a.InvalidateBrush()});return c}(a.Brush);a.TileBrush=d;Nullstone.RegisterType(d,"TileBrush")})(d.Media||
(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(c){function b(){c.apply(this,arguments);this._IsHolding=!1}__extends(b,c);b.prototype.Resolve=function(a,b){return!0};b.prototype.HoldEnd=function(){this._IsHolding=!0};b.prototype.Stop=function(){var b=this._AnimStorage;b&&(a.AnimationStore.Detach(b)||b.IsDisabled||a.AnimationStore.ApplyStop(b))};b.prototype.UpdateInternal=function(b){if(!this._IsHolding){var c=this._AnimStorage;if(c&&!c.IsDisabled){var d=c.CurrentValue;c.CurrentValue=this.GetCurrentValue(c.BaseValue,
void 0!==c.StopValue?c.StopValue:c.BaseValue,b);d!==c.CurrentValue&&void 0!==c.CurrentValue&&a.AnimationStore.ApplyCurrent(c)}}};b.prototype.GetNaturalDurationCore=function(){return new Duration(TimeSpan.FromArgs(0,0,0,1))};b.prototype.GetCurrentValue=function(a,b,c){};b.prototype._Hookup=function(b,c){this._IsHolding=!1;this.Reset();var d=null;if(this.HasManualTarget)d=this.ManualTarget;else{var e=a.Storyboard.GetTargetName(this);e&&(d=this.XamlNode.FindName(e).XObject)}var e=a.Storyboard.GetTargetProperty(this),
d={Value:d},p=e.TryResolveDependencyProperty(d,b),d=d.Value;if(!p)return c.Number=BError.XamlParse,c.Message="Could not resolve property for storyboard. ["+e.Path.toString()+"]",!1;if(!this.Resolve(d,p))return c.Number=BError.InvalidOperation,c.Message="Storyboard value could not be converted to the correct type",!1;this._AnimStorage=a.AnimationStore.Create(d,p);this._AnimStorage.Animation=this;a.AnimationStore.Attach(this._AnimStorage);return!0};return b}(a.Timeline);a.AnimationBase=d;Nullstone.RegisterType(d,
"AnimationBase")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(c){function b(){c.call(this);var b=new a.KeyFrameCollection;b.AttachTo(this);Object.defineProperty(this,"KeyFrames",{value:b,writable:!1})}__extends(b,c);b.prototype.Resolve=function(b,c){for(var d=a.KeyFrameCollection.ResolveKeyFrames(this,this.KeyFrames),e=d.length,p=0;p<e;p++)if(!d[p].KeyTime.IsValid)return!1;return!0};b.prototype.GetCurrentValue=function(b,c,d){var e={Value:null};c=this.KeyFrames.GetKeyFrameForTime(d.CurrentTime,e);var p=e.Value;
if(!c)return null;e=c._ResolvedKeyTime;p?(b=p instanceof a.ObjectKeyFrame?p.ConvertedValue:p.Value,p=p._ResolvedKeyTime):p=new TimeSpan;0<=d.CurrentTime.CompareTo(e)?d=1:(e=e.Ticks-p.Ticks,d=0>=e?1:(d.CurrentTime.Ticks-p.Ticks)/e);return c.InterpolateValue(b,d)};b.prototype.GetNaturalDurationCore=function(){var b=a.KeyFrameCollection.ResolveKeyFrames(this,this.KeyFrames),c=b.length,b=0<c?b[c-1]._ResolvedKeyTime:new TimeSpan;return new Duration(b)};b.prototype.AddKeyFrame=function(a){this.KeyFrames.Add(a)};
b.prototype.RemoveKeyFrame=function(a){this.KeyFrames.Remove(a)};return b}(a.AnimationBase);a.AnimationUsingKeyFrames=d;Nullstone.RegisterType(d,"AnimationUsingKeyFrames")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.apply(this,arguments)}__extends(b,c);b.prototype.Fire=function(){var a=this.Storyboard;a&&a.Begin()};b.StoryboardProperty=DependencyProperty.Register("Storyboard",function(){return a.Animation.Storyboard},b);b.Annotations={ContentProperty:b.StoryboardProperty};return b}(d.TriggerAction);g.BeginStoryboard=e;Nullstone.RegisterType(e,"BeginStoryboard")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(c){function b(){c.apply(this,arguments);this._ByCached=this._ToCached=this._FromCached=null;this._EasingCached=void 0}__extends(b,c);b.prototype.GetCurrentValue=function(a,b,c){var d=new Color;this._FromCached?d=this._FromCached:a instanceof Color&&(d=a);a=d;this._ToCached?a=this._ToCached:this._ByCached?a=d.Add(this._ByCached):b instanceof Color&&(a=b);if(b=this._EasingCached)c.Progress=b.Ease(c.Progress);return Color.LERP(d,a,c.Progress)};b.prototype._FromChanged=
function(a){this._FromCached=a.NewValue};b.prototype._ToChanged=function(a){this._ToCached=a.NewValue};b.prototype._ByChanged=function(a){this._ByCached=a.NewValue};b.prototype._EasingChanged=function(a){this._EasingCached=a.NewValue};b.ByProperty=DependencyProperty.Register("By",function(){return Color},b,null,function(a,b){return a._ByChanged(b)});b.EasingFunctionProperty=DependencyProperty.Register("EasingFunction",function(){return a.EasingFunctionBase},b,void 0,function(a,b){return a._EasingChanged(b)});
b.FromProperty=DependencyProperty.Register("From",function(){return Color},b,null,function(a,b){return a._FromChanged(b)});b.ToProperty=DependencyProperty.Register("To",function(){return Color},b,null,function(a,b){return a._ToChanged(b)});return b}(a.AnimationBase);a.ColorAnimation=d;Nullstone.RegisterType(d,"ColorAnimation")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.Annotations={ContentProperty:"KeyFrames"};return b}(a.AnimationUsingKeyFrames);a.ColorAnimationUsingKeyFrames=d;Nullstone.RegisterType(d,"ColorAnimationUsingKeyFrames")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.ValueProperty=DependencyProperty.Register("Value",function(){return Color},c);return c}(a.KeyFrame);a.ColorKeyFrame=d;Nullstone.RegisterType(d,"ColorKeyFrame");var c=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.InterpolateValue=function(a,b){return 1<=b?this.Value:a};return c}(d);a.DiscreteColorKeyFrame=c;Nullstone.RegisterType(c,"DiscreteColorKeyFrame");c=
function(b){function c(){b.apply(this,arguments)}__extends(c,b);c.prototype.InterpolateValue=function(a,b){if(1<=b)return this.Value;var c=this.Value,d=this.EasingFunction;d&&(b=d.Ease(b));return Color.LERP(a,c,b)};c.EasingFunctionProperty=DependencyProperty.Register("EasingFunction",function(){return a.EasingFunctionBase},c);return c}(d);a.EasingColorKeyFrame=c;Nullstone.RegisterType(c,"EasingColorKeyFrame");c=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.InterpolateValue=
function(a,b){return Color.LERP(a,this.Value,b)};return c}(d);a.LinearColorKeyFrame=c;Nullstone.RegisterType(c,"LinearColorKeyFrame");d=function(b){function c(){b.apply(this,arguments)}__extends(c,b);c.prototype.InterpolateValue=function(a,b){if(1<=b)return this.Value;var c=this.Value,d=b,f=this.KeySpline;f&&(d=f.GetSplineProgress(b));return Color.LERP(a,c,d)};c.KeySplineProperty=DependencyProperty.Register("KeySpline",function(){return a.KeySpline},c);return c}(d);a.SplineColorKeyFrame=d;Nullstone.RegisterType(d,
"SplineColorKeyFrame")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(c){function b(){c.apply(this,arguments);this._ByCached=this._ToCached=this._FromCached=null;this._EasingCached=void 0}__extends(b,c);b.prototype.GetCurrentValue=function(a,b,c){var d=0;null!=this._FromCached?d=this._FromCached:null!=a&&"number"===typeof a&&(d=a);a=d;null!=this._ToCached?a=this._ToCached:null!=this._ByCached?a=d+this._ByCached:null!=b&&"number"===typeof b&&(a=b);b=this._EasingCached;null!=b&&(c.Progress=b.Ease(c.Progress));return d+
(a-d)*c.Progress};b.prototype._FromChanged=function(a){this._FromCached=a.NewValue};b.prototype._ToChanged=function(a){this._ToCached=a.NewValue};b.prototype._ByChanged=function(a){this._ByCached=a.NewValue};b.prototype._EasingChanged=function(a){this._EasingCached=a.NewValue};b.ByProperty=DependencyProperty.Register("By",function(){return Number},b,null,function(a,b){return a._ByChanged(b)});b.EasingFunctionProperty=DependencyProperty.Register("EasingFunction",function(){return a.EasingFunctionBase},
b,void 0,function(a,b){return a._EasingChanged(b)});b.FromProperty=DependencyProperty.Register("From",function(){return Number},b,null,function(a,b){return a._FromChanged(b)});b.ToProperty=DependencyProperty.Register("To",function(){return Number},b,null,function(a,b){return a._ToChanged(b)});return b}(a.AnimationBase);a.DoubleAnimation=d;Nullstone.RegisterType(d,"DoubleAnimation")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.Annotations={ContentProperty:"KeyFrames"};return b}(a.AnimationUsingKeyFrames);a.DoubleAnimationUsingKeyFrames=d;Nullstone.RegisterType(d,"DoubleAnimationUsingKeyFrames")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.ValueProperty=DependencyProperty.Register("Value",function(){return Number},c);return c}(a.KeyFrame);a.DoubleKeyFrame=d;Nullstone.RegisterType(d,"DoubleKeyFrame");var c=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.InterpolateValue=function(a,b){return 1<=b?this.Value:a};return c}(d);a.DiscreteDoubleKeyFrame=c;Nullstone.RegisterType(c,"DiscreteDoubleKeyFrame");
c=function(b){function c(){b.apply(this,arguments)}__extends(c,b);c.prototype.InterpolateValue=function(a,b){if(1<=b)return this.Value;var c=a,d=this.Value,f=this.EasingFunction;f&&(b=f.Ease(b));isNaN(c)&&(c=0);isNaN(d)&&(d=0);return c+(d-c)*b};c.EasingFunctionProperty=DependencyProperty.Register("EasingFunction",function(){return a.EasingFunctionBase},c);return c}(d);a.EasingDoubleKeyFrame=c;Nullstone.RegisterType(c,"EasingDoubleKeyFrame");c=function(a){function c(){a.apply(this,arguments)}__extends(c,
a);c.prototype.InterpolateValue=function(a,b){var c=a,d=this.Value;isNaN(c)&&(c=0);isNaN(d)&&(d=0);return c+(d-c)*b};return c}(d);a.LinearDoubleKeyFrame=c;Nullstone.RegisterType(c,"LinearDoubleKeyFrame");d=function(b){function c(){b.apply(this,arguments)}__extends(c,b);c.prototype.InterpolateValue=function(a,b){if(1<=b)return this.Value;var c=a,d=this.Value,f=b,e=this.KeySpline;e&&(f=e.GetSplineProgress(b));isNaN(c)&&(c=0);isNaN(d)&&(d=0);return c+(d-c)*f};c.KeySplineProperty=DependencyProperty.Register("KeySpline",
function(){return a.KeySpline},c);return c}(d);a.SplineDoubleKeyFrame=d;Nullstone.RegisterType(d,"SplineDoubleKeyFrame")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.Resolve=function(b,d){for(var n=this.KeyFrames.GetEnumerator();n.MoveNext();){var e=n.Current,g=e.Value;e.ConvertedValue=null==g?void 0:g}return a.prototype.Resolve.call(this,b,d)};b.Annotations={ContentProperty:"KeyFrames"};return b}(a.AnimationUsingKeyFrames);a.ObjectAnimationUsingKeyFrames=d;Nullstone.RegisterType(d,"ObjectAnimationUsingKeyFrames")})(a.Animation||(a.Animation=
{}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(c){function b(){c.apply(this,arguments);this._ByCached=this._ToCached=this._FromCached=null;this._EasingCached=void 0}__extends(b,c);b.prototype.GetCurrentValue=function(a,b,c){var d=new Point;null!=this._FromCached?d=this._FromCached:a instanceof Point&&(d=a);a=d;null!=this._ToCached?a=this._ToCached:null!=this._ByCached?a=new Point(d.X+this._ByCached.X,d.Y+this._ByCached.Y):b instanceof Point&&(a=b);b=this._EasingCached;null!=b&&(c.Progress=
b.Ease(c.Progress));return Point.LERP(d,a,c.Progress)};b.prototype._FromChanged=function(a){this._FromCached=a.NewValue};b.prototype._ToChanged=function(a){this._ToCached=a.NewValue};b.prototype._ByChanged=function(a){this._ByCached=a.NewValue};b.prototype._EasingChanged=function(a){this._EasingCached=a.NewValue};b.ByProperty=DependencyProperty.Register("By",function(){return Point},b,null,function(a,b){return a._ByChanged(b)});b.EasingFunctionProperty=DependencyProperty.Register("EasingFunction",
function(){return a.EasingFunctionBase},b,void 0,function(a,b){return a._EasingChanged(b)});b.FromProperty=DependencyProperty.Register("From",function(){return Point},b,null,function(a,b){return a._FromChanged(b)});b.ToProperty=DependencyProperty.Register("To",function(){return Point},b,null,function(a,b){return a._ToChanged(b)});return b}(a.AnimationBase);a.PointAnimation=d;Nullstone.RegisterType(d,"PointAnimation")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.Annotations={ContentProperty:"KeyFrames"};return b}(a.AnimationUsingKeyFrames);a.PointAnimationUsingKeyFrames=d;Nullstone.RegisterType(d,"PointAnimationUsingKeyFrames")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.call(this);var a=new g.TimelineCollection;a.AttachTo(this);Object.defineProperty(this,"Children",{value:a,writable:!1})}__extends(b,c);b.GetTargetName=function(a){return a.GetValue(b.TargetNameProperty)};b.SetTargetName=function(a,c){return a.SetValue(b.TargetNameProperty,c)};b.GetTargetProperty=function(a){return a.GetValue(b.TargetPropertyProperty)};b.SetTargetProperty=function(a,c){return a.SetValue(b.TargetPropertyProperty,
c)};b.SetTarget=function(a,b){a.ManualTarget=b};b.prototype.Begin=function(){a.Animation.Debug&&window.console&&console.log("ANIMATION:Begin:"+this.__DebugString());this.Reset();for(var b=new BError,c=[],d=this.Children.GetEnumerator();d.MoveNext();)d.Current._Hookup(c,b)||b.ThrowException();App.Current.RegisterStoryboard(this)};b.prototype.Pause=function(){c.prototype.Pause.call(this);for(var a=this.Children.GetEnumerator();a.MoveNext();)a.Current.Pause()};b.prototype.Resume=function(){c.prototype.Resume.call(this);
for(var a=this.Children.GetEnumerator();a.MoveNext();)a.Current.Resume()};b.prototype.Stop=function(){a.Animation.Debug&&window.console&&console.log("ANIMATION:Stop:"+this.__DebugString());c.prototype.Stop.call(this);App.Current.UnregisterStoryboard(this);for(var b=this.Children.GetEnumerator();b.MoveNext();)b.Current.Stop()};b.prototype.UpdateInternal=function(a){for(var b=this.Children.GetEnumerator();b.MoveNext();)b.Current.Update(a.CurrentTime.Ticks)};b.prototype.GetNaturalDurationCore=function(){for(var a=
0,b=this.Children.GetEnumerator();b.MoveNext();){var c=b.Current,d=c.GetNaturalDuration();if(!d.IsAutomatic){if(d.IsForever)return Duration.Forever;var d=d.TimeSpan.Ticks,e=c.RepeatBehavior||g.Timeline.DEFAULT_REPEAT_BEHAVIOR;if(e.IsForever)return Duration.Forever;e.HasCount&&(d*=e.Count);c.AutoReverse&&(d*=2);e.HasDuration&&(d=e.Duration.TimeSpan.Ticks);0!==d&&(d/=c.SpeedRatio);(c=c.BeginTime)&&(d+=c.Ticks);if(0===a||a<=d)a=d}}return a?new Duration(TimeSpan.FromTicks(a)):Duration.Automatic};b.prototype.__DebugString=
function(){for(var a=[],c="",d=this.Children.GetEnumerator(),e;d.MoveNext();)e=d.Current,c="",c+="(",c+=e.constructor._TypeName,c+=":",c+=b.GetTargetName(e),c+=":",e=b.GetTargetProperty(e),c+=e?e.Path:"",c+=")",a.push(c);return"["+a.join(",")+"]"};b.TargetNameProperty=DependencyProperty.RegisterAttached("TargetName",function(){return String},b);b.TargetPropertyProperty=DependencyProperty.RegisterAttached("TargetProperty",function(){return d.Data.PropertyPath},b);b.Annotations={ContentProperty:"Children"};
return b}(g.Timeline);g.Storyboard=e;Nullstone.RegisterType(e,"Storyboard")})(a.Animation||(a.Animation={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.RadiusProperty=DependencyProperty.Register("Radius",function(){return Number},b,void 0,function(a,b){return a._EffectChanged(b)});return b}(a.Effect);a.BlurEffect=d;Nullstone.RegisterType(d,"BlurEffect")})(a.Effects||(a.Effects={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.Padding=function(){var a=Math.min(this.BlurRadius,b.MAX_BLUR_RADIUS),c=Math.min(Math.max(0,this.ShadowDepth),b.MAX_SHADOW_DEPTH),d=this.Direction*Math.PI/180,a=Math.ceil(a),e=Math.cos(d)*c,g=Math.sin(d)*c,c=-e+a,d=g+a,e=e+a,a=-g+a;return new Thickness(1>c?1:Math.ceil(c),1>d?1:Math.ceil(d),1>e?1:Math.ceil(e),1>a?1:Math.ceil(a))};b.prototype.GetPadding=function(a){var c=Math.min(this.BlurRadius,
b.MAX_BLUR_RADIUS),d=Math.min(Math.max(0,this.ShadowDepth),b.MAX_SHADOW_DEPTH),e=this.Direction*Math.PI/180,c=Math.ceil(c),g=Math.cos(e)*d,k=Math.sin(e)*d,e=-g+c,d=k+c,g=g+c,k=-k+c,c=1>e?1:Math.ceil(e),d=1>d?1:Math.ceil(d),g=1>g?1:Math.ceil(g),e=1>k?1:Math.ceil(k),k=!1;a.Left!==c&&(a.Left=c,k=!0);a.Top!==d&&(a.Top=d,k=!0);a.Right!==g&&(a.Right=g,k=!0);a.Bottom!==e&&(a.Bottom=e,k=!0);return k};b.prototype.PreRender=function(a){var c=this.Color,d=c.A*this.Opacity,e=Math.min(this.BlurRadius,b.MAX_BLUR_RADIUS),
g=Math.min(Math.max(0,this.ShadowDepth),b.MAX_SHADOW_DEPTH),k=this.Direction*Math.PI/180,m=Math.cos(k)*g,g=Math.sin(k)*g;a=a.CanvasContext;a.shadowColor="rgba("+c.R+","+c.G+","+c.B+","+d+")";a.shadowBlur=e;a.shadowOffsetX=m;a.shadowOffsetY=g};b.MAX_BLUR_RADIUS=20;b.MAX_SHADOW_DEPTH=300;b.BlurRadiusProperty=DependencyProperty.Register("BlurRadius",function(){return Number},b,5,function(a,b){return a._EffectChanged(b)});b.ColorProperty=DependencyProperty.Register("Color",function(){return Color},b,
Color.KnownColors.Black,function(a,b){return a._EffectChanged(b)});b.DirectionProperty=DependencyProperty.Register("Direction",function(){return Number},b,315,function(a,b){return a._EffectChanged(b)});b.OpacityProperty=DependencyProperty.Register("Opacity",function(){return Number},b,1,function(a,b){return a._EffectChanged(b)});b.ShadowDepthProperty=DependencyProperty.Register("ShadowDepth",function(){return Number},b,5,function(a,b){return a._EffectChanged(b)});return b}(a.Effect);a.DropShadowEffect=
d;Nullstone.RegisterType(d,"DropShadowEffect")})(a.Effects||(a.Effects={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){function d(a,c,h){return"number"!==typeof h?!1:0<h}var c=function(a){function c(){a.apply(this,arguments);this._Listener=null}__extends(c,a);Object.defineProperty(c.prototype,"Image",{get:function(){return this._Image},enumerable:!0,configurable:!0});c.prototype.ResetImage=function(){var a=this;this._Image=new Image;this._Image.onerror=function(b){return a._OnErrored(b)};this._Image.onload=function(b){return a._OnLoad(b)};this.PixelHeight=this.PixelWidth=0;var b=
this._Listener;b&&b.ImageChanged(this)};c.prototype.UriSourceChanged=function(a,b){this._Image||this.ResetImage();this._Image.src=b.toString();var c=this._Listener;c&&c.ImageChanged(this)};c.prototype.Listen=function(a){this._Listener=a};c.prototype.Unlisten=function(a){this._Listener===a&&(this._Listener=null)};c.prototype._OnErrored=function(a){Info("Failed to load: "+this._Image.src.toString());var b=this._Listener;b&&b.OnImageErrored(this,a)};c.prototype._OnLoad=function(a){this.PixelWidth=this._Image.naturalWidth;
this.PixelHeight=this._Image.naturalHeight;var b=this._Listener;b&&(b.OnImageLoaded(this,a),b.ImageChanged(this))};c.PixelWidthProperty=DependencyProperty.RegisterFull("PixelWidth",function(){return Number},c,0,void 0,void 0,void 0,d);c.PixelHeightProperty=DependencyProperty.RegisterFull("PixelHeight",function(){return Number},c,0,void 0,void 0,void 0,d);return c}(a.ImageSource);a.BitmapSource=c;Nullstone.RegisterType(c,"BitmapSource")})(a.Imaging||(a.Imaging={}))})(d.Media||(d.Media={}))})(Fayde||
(Fayde={}));
(function(d){(function(a){(function(g){var e=function(a){function b(){a.apply(this,arguments);this.ImageFailed=new MulticastEvent;this.ImageOpened=new MulticastEvent}__extends(b,a);b._SourceCoercer=function(a,b,c){return"string"===typeof c?new d.Media.Imaging.BitmapImage(new Uri(c)):c instanceof Uri?new d.Media.Imaging.BitmapImage(c):c};b.prototype.SetupBrush=function(b,d){var e=this.ImageSource;e&&e.Image&&a.prototype.SetupBrush.call(this,b,d)};b.prototype.GetTileExtents=function(){var a=this.ImageSource,
b=new rect;b.Width=a.PixelWidth;b.Height=a.PixelHeight;return b};b.prototype.DrawTile=function(a,b){var c=this.ImageSource;a.rect(0,0,b.Width,b.Height);a.fillStyle=a.createPattern(c.Image,"no-repeat");a.fill()};b.prototype._ImageSourceChanged=function(a){var b;(b=a.OldValue)&&b instanceof g.BitmapSource&&b.Unlisten(this);var c;(c=a.NewValue)&&c instanceof g.BitmapSource&&c.Listen(this);this.InvalidateBrush()};b.prototype.OnImageErrored=function(a,b){this.ImageFailed.Raise(this,EventArgs.Empty)};b.prototype.OnImageLoaded=
function(a,b){this.ImageOpened.Raise(this,EventArgs.Empty)};b.prototype.ImageChanged=function(a){};b.ImageSourceProperty=DependencyProperty.RegisterFull("ImageSource",function(){return g.ImageSource},b,void 0,function(a,b){return a._ImageSourceChanged(b)},b._SourceCoercer);return b}(a.TileBrush);g.ImageBrush=e;Nullstone.RegisterType(e,"ImageBrush")})(a.Imaging||(a.Imaging={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(){function a(c,b){this._Source=c;this.Start=null==b?0:b}a.prototype.GetBackground=function(c){if(c)return this._Source.SelectionBackground||a.DEFAULT_SELECTION_BACKGROUND};a.prototype.GetForeground=function(c){return c?this._Source.SelectionForeground||a.DEFAULT_SELECTION_FOREGROUND:this._Source.Foreground};Object.defineProperty(a.prototype,"Font",{get:function(){return this._Source.Font},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"Direction",
{get:function(){return this._Source.Direction},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"IsUnderlined",{get:function(){return(this._Source.TextDecorations&d.TextDecorations.Underline)===d.TextDecorations.Underline},enumerable:!0,configurable:!0});a.DEFAULT_SELECTION_BACKGROUND=d.Media.SolidColorBrush.FromColor(Color.FromRgba(68,68,68,1));a.DEFAULT_SELECTION_FOREGROUND=d.Media.SolidColorBrush.FromColor(Color.FromRgba(255,255,255,1));return a}();a.TextLayoutAttributes=g})(d.Text||
(d.Text={}))})(Fayde||(Fayde={}));
(function(d){var a=function(a){function c(b){a.call(this,b)}__extends(c,a);c.prototype.SetSubtreeNode=function(a,c){this.SubtreeNode&&(this.SubtreeNode.Detach(),this.SubtreeNode=null);if(a&&!a.AttachTo(this,c))return!1;this.SubtreeNode=a;return!0};c.prototype.SetIsLoaded=function(a){this.IsLoaded!==a&&(this.IsLoaded=a,this.OnIsLoadedChanged(a))};c.prototype.OnIsLoadedChanged=function(a){var c=this.XObject;a?d.Providers.ImplicitStyleBroker.Set(c,d.Providers.StyleMask.All):(d.Providers.ImplicitStyleBroker.Clear(c,
d.Providers.StyleMask.VisualTree),c.Unloaded.Raise(c,new d.RoutedEventArgs));for(var h=this.GetVisualTreeEnumerator();h.MoveNext();)h.Current.SetIsLoaded(a);a&&(c.Loaded.Raise(c,new d.RoutedEventArgs),this.InvokeLoaded())};c.prototype.InvokeLoaded=function(){};c.prototype.AttachVisualChild=function(a,c){this.OnVisualChildAttached(a);if(!this.SetSubtreeNode(a.XamlNode,c))return!1;a.XamlNode.SetIsLoaded(this.IsLoaded);return!0};c.prototype.DetachVisualChild=function(a,c){if(!this.SetSubtreeNode(null,
c))return!1;this.OnVisualChildDetached(a);a.XamlNode.SetIsLoaded(!1)};c.prototype.ApplyTemplateWithError=function(a){if(this.SubtreeNode)return!1;(a=this.DoApplyTemplateWithError(a))&&this.XObject.OnApplyTemplate();return a};c.prototype.DoApplyTemplateWithError=function(a){return!1};c.prototype.FinishApplyTemplateWithError=function(a,c){if(!a||c.Message)return!1;this.AttachVisualChild(a,c);return null==c.Message};c.prototype._HasFocus=function(){for(var a=this._Surface.FocusedNode;a;){if(a===this)return!0;
a=a.VisualParentNode}return!1};c.prototype.GetFocusedElement=function(){var a=this._Surface.FocusedNode;if(a)return a.XObject};c.prototype.UpdateLayout=function(){var a=this.LayoutUpdater,c=new BError;if(this.IsAttached)this._Surface._UpdateLayout(c);else{var d={MeasureList:[],ArrangeList:[],SizeList:[],Count:0,Updated:!0};a.UpdateLayer(d,c);d.Updated&&this.XObject.LayoutUpdated.Raise(this,EventArgs.Empty)}c.Message&&c.ThrowException()};c.prototype.GetVisualTreeEnumerator=function(a){return this.SubtreeNode?
d.ArrayEx.GetEnumerator([this.SubtreeNode]):d.ArrayEx.EmptyEnumerator};c.prototype._SizeChanged=function(a){a=this.LayoutUpdater;a.FullInvalidate(!1);var c=this.VisualParentNode;c&&c.LayoutUpdater.InvalidateMeasure();a.InvalidateMeasure();a.InvalidateArrange();a.UpdateBounds()};c.prototype._FlowDirectionChanged=function(a){this._SizeChanged(a)};return c}(d.UINode);d.FENode=a;Nullstone.RegisterType(a,"FENode");var g=function(e){function c(){e.call(this);this.SizeChanged=new d.RoutedEvent;this.Loaded=
new d.RoutedEvent;this.Unloaded=new d.RoutedEvent;this.LayoutUpdated=new MulticastEvent;var a=new d.ResourceDictionary;a.AttachTo(this);Object.defineProperty(this,"Resources",{value:a,writable:!1})}__extends(c,e);c.prototype.CreateNode=function(){return new a(this)};c.prototype.IsInheritable=function(a){return a===c.FlowDirectionProperty||a===c.LanguageProperty?!0:e.prototype.IsInheritable.call(this,a)};c.prototype.OnApplyTemplate=function(){};c.prototype.FindName=function(a){if(a=this.XamlNode.FindName(a))return a.XObject};
c.prototype.UpdateLayout=function(){this.XamlNode.UpdateLayout()};c.prototype._MeasureOverride=function(a,c){var d=new size;a=size.copyTo(a);size.max(a,d);for(var e=this.XamlNode.GetVisualTreeEnumerator();e.MoveNext();)d=e.Current.LayoutUpdater,d._Measure(a,c),d=size.copyTo(d.DesiredSize);size.min(d,a);return d};c.prototype._ArrangeOverride=function(a,c){for(var d=size.copyTo(a),e=this.XamlNode.GetVisualTreeEnumerator();e.MoveNext();){var g=e.Current,p=rect.fromSize(a);g.LayoutUpdater._Arrange(p,
c);size.max(d,a)}return d};c.prototype._StyleChanged=function(a){d.Providers.LocalStyleBroker.Set(this,a.NewValue)};c.prototype._AlignmentChanged=function(a){a=this.XamlNode.LayoutUpdater;a.InvalidateArrange();a.FullInvalidate(!0)};c.prototype._WidthChanged=function(a){this.XamlNode._SizeChanged(a)};c.prototype._HeightChanged=function(a){this.XamlNode._SizeChanged(a)};c.ActualHeightProperty=DependencyProperty.RegisterReadOnly("ActualHeight",function(){return Number},c);c.ActualWidthProperty=DependencyProperty.RegisterReadOnly("ActualWidth",
function(){return Number},c);c.CursorProperty=DependencyProperty.RegisterFull("Cursor",function(){return new Enum(d.CursorType)},c,d.CursorType.Default);c.FlowDirectionProperty=d.InheritableOwner.FlowDirectionProperty.ExtendTo(c);c.HeightProperty=DependencyProperty.Register("Height",function(){return Number},c,NaN,function(a,c){return a._HeightChanged(c)});c.HorizontalAlignmentProperty=DependencyProperty.Register("HorizontalAlignment",function(){return new Enum(d.HorizontalAlignment)},c,d.HorizontalAlignment.Stretch,
function(a,c){return a._AlignmentChanged(c)});c.LanguageProperty=d.InheritableOwner.LanguageProperty.ExtendTo(c);c.MarginProperty=DependencyProperty.RegisterCore("Margin",function(){return Thickness},c,void 0,function(a,c){return a.XamlNode._SizeChanged(c)});c.MaxHeightProperty=DependencyProperty.Register("MaxHeight",function(){return Number},c,Number.POSITIVE_INFINITY,function(a,c){return a.XamlNode._SizeChanged(c)});c.MaxWidthProperty=DependencyProperty.Register("MaxWidth",function(){return Number},
c,Number.POSITIVE_INFINITY,function(a,c){return a.XamlNode._SizeChanged(c)});c.MinHeightProperty=DependencyProperty.Register("MinHeight",function(){return Number},c,0,function(a,c){return a.XamlNode._SizeChanged(c)});c.MinWidthProperty=DependencyProperty.Register("MinWidth",function(){return Number},c,0,function(a,c){return a.XamlNode._SizeChanged(c)});c.StyleProperty=DependencyProperty.Register("Style",function(){return d.Style},c,void 0,function(a,c){return a._StyleChanged(c)});c.VerticalAlignmentProperty=
DependencyProperty.Register("VerticalAlignment",function(){return new Enum(d.VerticalAlignment)},c,d.VerticalAlignment.Stretch,function(a,c){return a._AlignmentChanged(c)});c.WidthProperty=DependencyProperty.Register("Width",function(){return Number},c,NaN,function(a,c){return a._WidthChanged(c)});return c}(d.UIElement);d.FrameworkElement=g;Nullstone.RegisterType(g,"FrameworkElement");g.ActualWidthProperty.Store=d.Providers.ActualSizeStore.Instance;g.ActualHeightProperty.Store=d.Providers.ActualSizeStore.Instance})(Fayde||
(Fayde={}));
(function(d){var a=function(){function a(){}a.ThicknessConverter=function(a){if(!a)return new Thickness;var b=a.split(","),d,h;if(1===b.length)a=d=h=b=parseFloat(b[0]);else if(2===b.length)a=h=parseFloat(b[0]),d=b=parseFloat(b[1]);else if(4===b.length)a=parseFloat(b[0]),d=parseFloat(b[1]),h=parseFloat(b[2]),b=parseFloat(b[3]);else throw new XamlParseException("Cannot parse Thickness value '"+a+"'");return new Thickness(a,d,h,b)};a.CornerRadiusConverter=function(a){if(!a)return new CornerRadius;var b=
a.split(","),d,h;if(1===b.length)a=d=b=h=parseFloat(b[0]);else if(4===b.length)a=parseFloat(b[0]),d=parseFloat(b[1]),h=parseFloat(b[2]),b=parseFloat(b[3]);else throw new XamlParseException("Cannot parse CornerRadius value '"+a+"'");return new CornerRadius(a,d,b,h)};a.BrushConverter=function(c){var b=new d.Media.SolidColorBrush;b.Color=a.ColorConverter(c);return b};a.ColorConverter=function(a){if(!a)return new Color;if("#"!==a.substr(0,1)){var b=Color.KnownColors[a];if(!b)throw new NotSupportedException("Unknown Color: "+
a);return b}return Color.FromHex(a)};a.GeometryConverter=function(a){return d.Media.ParseGeometry(a)};return a}(),g=function(){function a(){}a.Register=function(c,b){a._Converters[c]=b};a.ConvertObject=function(c,b,d,h){if(null==b)return b;c=c.GetTargetType();if("string"===typeof c||c===String)return h?b.toString():"";if("number"===typeof c||c===Number)return"number"===typeof b?b:b?b instanceof Thickness?b.Left:parseFloat(b.toString()):0;if("function"===typeof c){if(b instanceof c)return b;if(d=a._Converters[c])return d(b)}else if(c instanceof
Enum&&"string"===typeof b)return h=c.Object[b],void 0!==h?h:b;return"string"===typeof c||c===String?h?b.toString():"":b};a._Converters=[];return a}();d.TypeConverter=g;g.Register(Thickness,a.ThicknessConverter);g.Register(CornerRadius,a.CornerRadiusConverter);g.Register(d.Media.Brush,a.BrushConverter);g.Register(Color,a.ColorConverter);g.Register(d.Media.Geometry,a.GeometryConverter)})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var d=function(a){function b(b){a.call(this);this.ImageFailed=new MulticastEvent;this.ImageOpened=new MulticastEvent;b&&(this.UriSource=b)}__extends(b,a);b.prototype._UriSourceChanged=function(a){var b=a.NewValue;Uri.IsNullOrEmpty(b)?this.ResetImage():this.UriSourceChanged(a.OldValue,b)};b.prototype._OnErrored=function(b){a.prototype._OnErrored.call(this,b);this.ImageFailed.Raise(this,EventArgs.Empty)};b.prototype._OnLoad=function(b){a.prototype._OnLoad.call(this,
b);this.ImageOpened.Raise(this,EventArgs.Empty)};b.UriSourceProperty=DependencyProperty.RegisterFull("UriSource",function(){return Uri},b,void 0,function(a,b){return a._UriSourceChanged(b)},void 0,!0);return b}(a.BitmapSource);a.BitmapImage=d;Nullstone.RegisterType(d,"BitmapImage")})(a.Imaging||(a.Imaging={}))})(d.Media||(d.Media={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function b(b){a.call(this,b)}__extends(b,a);b.prototype.PostInsideObject=function(a,b,c,d){var e=this.XObject,g=rect.copyTo(this.GetStretchExtents(e,b));rect.transform(g,a.CurrentTransform);return rect.containsPointXY(g,c,d)?e._InsideShape(a,b,c,d):!1};b.prototype.ComputeBounds=function(a,b){this.IntersectBaseBoundsWithClipPath(b,b.Bounds,this.GetStretchExtents(this.XObject,b),b.AbsoluteXform);rect.copyTo(b.Bounds,b.BoundsWithChildren);b.ComputeGlobalBounds();
b.ComputeSurfaceBounds()};b.prototype.IntersectBaseBoundsWithClipPath=function(a,b,c,d){var e=rect.isEmpty(a.ClipBounds),g=a.LayoutClip?rect.isEmpty(a.LayoutClip):!0;e&&g||a.TotalIsRenderVisible?(rect.copyGrowTransform(b,c,a.EffectPadding,d),e||rect.intersection(b,a.ClipBounds),g||rect.intersection(b,a.LayoutClip)):rect.clear(b)};b.prototype.UpdateStretch=function(){var a=this.LayoutUpdater;rect.clear(a.Extents);rect.clear(a.ExtentsWithChildren)};b.prototype.GetStretchExtents=function(a,b){rect.isEmpty(b.Extents)&&
(rect.copyTo(a._ComputeStretchBounds(),b.Extents),rect.copyTo(b.Extents,b.ExtentsWithChildren));return b.Extents};return b}(d.FENode);a.ShapeNode=g;var e=function(c){function b(){c.apply(this,arguments);this._ShapeFlags=a.ShapeFlags.None;this._StretchXform=mat3.identity();this._NaturalBounds=new rect;this._Stroke=this._Fill=this._Path=null}__extends(b,c);b.prototype.CreateNode=function(){return new g(this)};b.prototype._InsideShape=function(b,c,d,e){if(this._ShapeFlags&a.ShapeFlags.Empty)return!1;
c=!1;b.Save();b.PreTransformMatrix(this._StretchXform);null!=this._Fill&&(this._DrawPath(b),b.IsPointInPath(d,e)&&(c=!0));c||null==this._Stroke||window.console&&console.warn&&console.warn("Shape._InsideShape-Stroke");b.Restore();return c};b.prototype._MeasureOverride=function(b,c){var e=this._GetNaturalBounds();if(!e)return new size;var g=0,p=0,k;k=this instanceof a.Rectangle||this instanceof a.Ellipse?new size:size.copyTo(b);var m=this.Stretch;if(m===d.Media.Stretch.None)return size.fromRaw(e.X+
e.Width,e.Y+e.Height);isFinite(b.Width)||(k.Width=e.Width);isFinite(b.Height)||(k.Height=e.Height);0<e.Width&&(g=k.Width/e.Width);0<e.Height&&(p=k.Height/e.Height);isFinite(b.Width)||(g=p);isFinite(b.Height)||(p=g);switch(m){case d.Media.Stretch.Uniform:g=p=Math.min(g,p);break;case d.Media.Stretch.UniformToFill:g=p=Math.max(g,p);break;case d.Media.Stretch.Fill:isFinite(b.Width)||(g=1),isFinite(b.Height)||(p=1)}k.Width=e.Width*g;k.Height=e.Height*p;return k};b.prototype._ArrangeOverride=function(a,
b){var c=1,e=1,g=this._GetNaturalBounds();if(!g)return new size;this._InvalidateStretch();var k,m=this.Stretch;k=m===d.Media.Stretch.None?size.fromRaw(Math.max(a.Width,g.X+g.Width),Math.max(a.Height,g.Y+g.Height)):size.copyTo(a);0===g.Width&&(g.Width=k.Width);0===g.Height&&(g.Height=k.Height);g.Width!==k.Width&&(c=k.Width/g.Width);g.Height!==k.Height&&(e=k.Height/g.Height);switch(m){case d.Media.Stretch.Uniform:c=e=Math.min(c,e);break;case d.Media.Stretch.UniformToFill:c=e=Math.max(c,e)}k.Width=g.Width*
c;k.Height=g.Height*e;return k};b.prototype.Render=function(b,c,d){this._ShapeFlags&a.ShapeFlags.Empty||(c=this.XamlNode.GetStretchExtents(this,c),b.Save(),b.PreTransformMatrix(this._StretchXform),this._DrawPath(b),null!=this._Fill&&b.Fill(this._Fill,c),null!=this._Stroke&&b.Stroke(this._Stroke,this.StrokeThickness,c),b.Restore())};b.prototype._GetFillRule=function(){return a.FillRule.NonZero};b.prototype._BuildPath=function(){};b.prototype._DrawPath=function(a){this._Path=this._Path||this._BuildPath();
this._Path.DrawRenderCtx(a)};b.prototype.ComputeActualSize=function(a,b){var c=a.call(b),e=this.XamlNode;b=e.LayoutUpdater;var g=this._GetNaturalBounds(),k=1,m=1,l=e.VisualParentNode;if(!(null==l||l instanceof d.Controls.CanvasNode||void 0===b.PreviousConstraint&&void 0===b.LayoutSlot)||!e.IsAttached||0>=g.Width&&0>=g.Height)return c;e=this.Stretch;if(e===d.Media.Stretch.None&&0<g.Width&&0<g.Height)return size.fromRect(g);isFinite(c.Width)||(c.Width=g.Width);isFinite(c.Height)||(c.Height=g.Height);
0<g.Width&&(k=c.Width/g.Width);0<g.Height&&(m=c.Height/g.Height);switch(e){case d.Media.Stretch.Uniform:k=m=Math.min(k,m);break;case d.Media.Stretch.UniformToFill:k=m=Math.max(k,m)}c.Width=Math.min(c.Width,g.Width*k);c.Height=Math.min(c.Height,g.Height*m);return c};b.prototype._ComputeStretchBounds=function(){var b=this._GetNaturalBounds();if(!b||0>=b.Width||0>=b.Height)return this._ShapeFlags=a.ShapeFlags.Empty,new rect;var c=size.fromRaw(this.Width,this.Height),e=isNaN(c.Width),g=size.fromRaw(this.ActualWidth,
this.ActualHeight);if(0>=c.Width||0>=c.Height)return this._ShapeFlags=a.ShapeFlags.Empty,new rect;var p=this.XamlNode,k=p.LayoutUpdater;p.VisualParentNode instanceof d.Controls.CanvasNode?(g.Width=0===g.Width?b.Width:g.Width,g.Height=0===g.Height?b.Height:g.Height,isNaN(c.Width)||(g.Width=c.Width),isNaN(c.Height)||(g.Height=c.Height)):k.PreviousConstraint||(g.Width=0===g.Width?b.Width:g.Width,g.Height=0===g.Height?b.Height:g.Height);var m=this.Stretch;if(m===d.Media.Stretch.None)return rect.transform(b,
this._StretchXform),b;if(0===g.Width||0===g.Height)return this._ShapeFlags=a.ShapeFlags.Empty,new rect;var c=this._ComputeShapeBoundsImpl(!0,null),p=0!==c.Width,k=0!==c.Height,l=b.Width-c.Width,q=b.Height-c.Height,r=p?(g.Width-l)/c.Width:1,t=k?(g.Height-q)/c.Height:1,u=!1;switch(m){case d.Media.Stretch.Fill:u=!0;break;case d.Media.Stretch.Uniform:r=t=r<t?r:t;u=!0;break;case d.Media.Stretch.UniformToFill:r=t=r>t?r:t}if(p&&1.9E-5>Math.abs(b.Width)&&1<Math.abs(r-1)*b.Width-b.Width||k&&1.9E-5>Math.abs(b.Height)&&
1<Math.abs(t-1)*b.Height-b.Height){var x=mat3.createScale(p?r:1,k?t:1),x=this._ComputeShapeBoundsImpl(!1,x);if(x.Width!==b.Width&&x.Height!==b.Height)switch(r*=p?(g.Width-x.Width+c.Width*r)/(c.Width*r):1,t*=k?(g.Height-x.Height+c.Height*t)/(c.Height*t):1,m){case d.Media.Stretch.Uniform:r=t=r<t?r:t;break;case d.Media.Stretch.UniformToFill:r=t=r>t?r:t}}var m=!e||p?b.X:0,x=!e||k?b.Y:0,v=this._StretchXform;this instanceof a.Line&&e||mat3.translate(v,-m,-x);mat3.translate(v,p?0.5*-b.Width:0,k?0.5*-b.Height:
0);mat3.scale(v,p?r:1,k?t:1);u?mat3.translate(v,p?0.5*g.Width:0,k?0.5*g.Height:0):mat3.translate(v,p?0.5*(c.Width*r+l):0,k?0.5*(c.Height*t+q):0);this._StretchXform=v;rect.transform(b,this._StretchXform);return b};b.prototype._GetNaturalBounds=function(){rect.isEmpty(this._NaturalBounds)&&(this._NaturalBounds=this._ComputeShapeBoundsImpl(!1));return this._NaturalBounds};b.prototype._ComputeShapeBounds=function(a){return this._ComputeShapeBoundsImpl(a,null)};b.prototype._ComputeShapeBoundsImpl=function(b,
c){var d=b||!this._Stroke?0:this.StrokeThickness;this._Path=this._Path||this._BuildPath();if(!this._Path||this._ShapeFlags&a.ShapeFlags.Empty)return new rect;if(b)return this._Path.CalculateBounds(0);if(0<d)return this._Path.CalculateBounds(d);NotImplemented("Shape._ComputeShapeBoundsImpl");return new rect};b.prototype._InvalidateStretch=function(){this.XamlNode.UpdateStretch();this._StretchXform=mat3.identity();this._InvalidatePathCache()};b.prototype._InvalidatePathCache=function(a){this._Path=
null;a||this.XamlNode.LayoutUpdater.UpdateBounds(!0)};b.prototype._InvalidateNaturalBounds=function(){rect.clear(this._NaturalBounds);this._InvalidateStretch();this.XamlNode.LayoutUpdater.Invalidate()};b.prototype._FillChanged=function(a){var b=this.XamlNode.LayoutUpdater;a=a.NewValue;this._FillListener&&this._FillListener.Detach();this._FillListener=null;a&&(this._FillListener=a.Listen(function(a){return b.Invalidate()}));(this._Fill||a)&&this._InvalidateNaturalBounds();this._Fill=a;b.CanHitElement=
null!=this._Stroke||null!=this._Fill};b.prototype._StrokeChanged=function(a){var b=this.XamlNode.LayoutUpdater;a=a.NewValue;this._StrokeListener&&this._StrokeListener.Detach();this._StrokeListener=null;a&&(this._StrokeListener=a.Listen(function(a){return b.Invalidate()}));(this._Stroke||a)&&this._InvalidateNaturalBounds();this._Stroke=a;b.CanHitElement=null!=this._Stroke||null!=this._Fill};b.prototype._StretchChanged=function(a){this.XamlNode.LayoutUpdater.InvalidateMeasure();this._InvalidateStretch()};
b.prototype._WidthChanged=function(a){c.prototype._WidthChanged.call(this,a);this._InvalidateStretch()};b.prototype._HeightChanged=function(a){c.prototype._HeightChanged.call(this,a);this._InvalidateStretch()};b.FillProperty=DependencyProperty.Register("Fill",function(){return d.Media.Brush},b,void 0,function(a,b){return a._FillChanged(b)});b.StretchProperty=DependencyProperty.Register("Stretch",function(){return new Enum(d.Media.Stretch)},b,d.Media.Stretch.None,function(a,b){return a._StretchChanged(b)});
b.StrokeProperty=DependencyProperty.Register("Stroke",function(){return d.Media.Brush},b,void 0,function(a,b){return a._StrokeChanged(b)});b.StrokeThicknessProperty=DependencyProperty.Register("StrokeThickness",function(){return Number},b,1,function(a,b){return a._InvalidateNaturalBounds()});b.StrokeDashArrayProperty=DependencyProperty.Register("StrokeDashArray",function(){return a.DoubleCollection},b,void 0,function(a,b){return a._InvalidateNaturalBounds()});b.StrokeDashCapProperty=DependencyProperty.Register("StrokeDashCap",
function(){return new Enum(a.PenLineCap)},b,a.PenLineCap.Flat,function(a,b){return a._InvalidateNaturalBounds()});b.StrokeDashOffsetProperty=DependencyProperty.Register("StrokeDashOffset",function(){return Number},b,0,function(a,b){return a._InvalidateNaturalBounds()});b.StrokeEndLineCapProperty=DependencyProperty.Register("StrokeEndLineCap",function(){return new Enum(a.PenLineCap)},b,a.PenLineCap.Flat,function(a,b){return a._InvalidateNaturalBounds()});b.StrokeLineJoinProperty=DependencyProperty.Register("StrokeLineJoin",
function(){return new Enum(a.PenLineJoin)},b,a.PenLineJoin.Miter,function(a,b){return a._InvalidateNaturalBounds()});b.StrokeMiterLimitProperty=DependencyProperty.Register("StrokeMiterLimit",function(){return Number},b,10,function(a,b){return a._InvalidateNaturalBounds()});b.StrokeStartLineCapProperty=DependencyProperty.Register("StrokeStartLineCap",function(){return new Enum(a.PenLineCap)},b,a.PenLineCap.Flat,function(a,b){return a._InvalidateNaturalBounds()});return b}(d.FrameworkElement);a.Shape=
e;Nullstone.RegisterType(e,"Shape")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function b(b){a.call(this,b);this.LayoutUpdater.SetContainerMode(!0)}__extends(b,a);return b}(d.FENode);a.BorderNode=g;Nullstone.RegisterType(g,"BorderNode");var e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.CreateNode=function(){return new g(this)};b.prototype._MeasureOverride=function(a,b){var c=this.Padding,d=this.BorderThickness,e=null;c&&d?e=c.Plus(d):c?e=c.Clone():d&&(e=d.Clone());c=new size;e&&(a=size.shrinkByThickness(size.copyTo(a),
e));if(d=this.Child)c=d.XamlNode.LayoutUpdater,c._Measure(a,b),c=size.copyTo(c.DesiredSize);e&&size.growByThickness(c,e);size.min(c,a);return c};b.prototype._ArrangeOverride=function(a,b){var c=this.Child;if(c){var d=this.Padding,e=this.BorderThickness,g=null;d&&e?g=d.Plus(e):d?g=d:e&&(g=e);d=rect.fromSize(a);g&&rect.shrinkByThickness(d,g);c.XamlNode.LayoutUpdater._Arrange(d,b)}return a};b.prototype._ChildChanged=function(a){var b=a.OldValue;a=a.NewValue;var c=this.XamlNode,e=new BError;b instanceof
d.UIElement&&c.DetachVisualChild(b,e);a instanceof d.UIElement&&c.AttachVisualChild(a,e);e.Message&&e.ThrowException();b=c.LayoutUpdater;b.UpdateBounds();b.InvalidateMeasure()};b.prototype._BackgroundChanged=function(a){var b=this.XamlNode.LayoutUpdater;a=a.NewValue;this._BackgroundListener&&this._BackgroundListener.Detach();this._BackgroundListener=null;a&&(this._BackgroundListener=a.Listen(function(a){return b.Invalidate()}));b.CanHitElement=null!=a||null!=this.BorderBrush;b.Invalidate()};b.prototype._BorderBrushChanged=
function(a){var b=this.XamlNode.LayoutUpdater;a=a.NewValue;this._BorderBrushListener&&this._BorderBrushListener.Detach();this._BorderBrushListener=null;a&&(this._BorderBrushListener=a.Listen(function(a){return b.Invalidate()}));b.CanHitElement=null!=a||null!=this.Background;b.Invalidate()};b.prototype._BorderThicknessChanged=function(a){this.XamlNode.LayoutUpdater.InvalidateMeasure()};b.prototype._PaddingChanged=function(a){this.XamlNode.LayoutUpdater.InvalidateMeasure()};b.prototype.Render=function(a,
b,c){c=this.BorderBrush;var d=b.Extents,e=this.Background;if((e||c)&&!rect.isEmpty(d)){var g=this.BorderThickness,m=!c||!g||g.IsEmpty();if(!m||e)a.Save(),b.RenderLayoutClip(a),m?this._RenderFillOnly(a,d,e,g,this.CornerRadius):g&&g.IsBalanced()?this._RenderBalanced(a,d,e,c,g,this.CornerRadius):this._RenderUnbalanced(a,d,e,c,g,this.CornerRadius),a.Restore()}};b.prototype._RenderFillOnly=function(a,b,c,e,g){b=rect.copyTo(b);e&&rect.shrinkByThickness(b,e);!g||g.IsZero()?a.FillRect(c,b):(e=new d.Shapes.RawPath,
e.RoundedRectFull(b.X,b.Y,b.Width,b.Height,g.TopLeft,g.TopRight,g.BottomRight,g.BottomLeft),e.DrawRenderCtx(a),a.Fill(c,b))};b.prototype._RenderBalanced=function(a,b,c,e,g,k){var m=g.Left,l=0.5*m,q=rect.copyTo(b);rect.shrinkBy(q,l,l,l,l);l=rect.copyTo(b);rect.shrinkBy(l,m,m,m,m);!k||k.IsZero()?c?a.StrokeAndFillRect(e,g.Left,q,c,l):(a.Rect(l),a.Stroke(e,g.Left,b)):(m=new d.Shapes.RawPath,m.RoundedRectFull(q.X,q.Y,q.Width,q.Height,k.TopLeft,k.TopRight,k.BottomRight,k.BottomLeft),m.DrawRenderCtx(a),
c&&a.Fill(c,l),a.Stroke(e,g.Left,b))};b.prototype._RenderUnbalanced=function(a,b,c,e,g,k){var m=k&&!k.IsZero(),l=rect.copyTo(b);g&&rect.shrinkByThickness(l,g);g=new d.Shapes.RawPath;var q=new d.Shapes.RawPath;m?(q.RoundedRectFull(0,0,b.Width,b.Height,k.TopLeft,k.TopRight,k.BottomRight,k.BottomLeft),g.RoundedRectFull(l.X-b.X,l.Y-b.Y,l.Width,l.Height,k.TopLeft,k.TopRight,k.BottomRight,k.BottomLeft)):(q.Rect(0,0,b.Width,b.Height),g.Rect(l.X-b.X,l.Y-b.Y,l.Width,l.Height));k=document.createElement("canvas");
k.width=b.Width;k.height=b.Height;m=k.getContext("2d");q.DrawCanvasCtx(m);e.SetupBrush(m,b);m.fillStyle=e.ToHtml5Object();m.fill();m.globalCompositeOperation="xor";g.DrawCanvasCtx(m);m.fill();a.CanvasContext.drawImage(k,b.X,b.Y);g.DrawRenderCtx(a);c&&a.Fill(c,l)};b.BackgroundProperty=DependencyProperty.RegisterCore("Background",function(){return d.Media.Brush},b,void 0,function(a,b){return a._BackgroundChanged(b)});b.BorderBrushProperty=DependencyProperty.RegisterCore("BorderBrush",function(){return d.Media.Brush},
b,void 0,function(a,b){return a._BorderBrushChanged(b)});b.BorderThicknessProperty=DependencyProperty.RegisterFull("BorderThickness",function(){return Thickness},b,void 0,function(a,b){return a._BorderThicknessChanged(b)});b.ChildProperty=DependencyProperty.Register("Child",function(){return d.UIElement},b,void 0,function(a,b){return a._ChildChanged(b)});b.CornerRadiusProperty=DependencyProperty.RegisterFull("CornerRadius",function(){return CornerRadius},b);b.PaddingProperty=DependencyProperty.RegisterFull("Padding",
function(){return Thickness},b,void 0,function(a,b){return a._PaddingChanged(b)});b.Annotations={ContentProperty:b.ChildProperty};return b}(d.FrameworkElement);a.Border=e;Nullstone.RegisterType(e,"Border")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(c){function b(a){c.call(this,a)}__extends(b,c);Object.defineProperty(b.prototype,"ContentRoot",{get:function(){return this._ContentRoot},enumerable:!0,configurable:!0});b.prototype.DoApplyTemplateWithError=function(b){if(this._ContentRoot)return!1;var c=this.XObject;c.TemplateOwner instanceof a.ContentControl&&(c.ReadLocalValue(e.ContentProperty)===d.UnsetValue&&c.SetValue(e.ContentProperty,new d.TemplateBindingExpression(a.ContentControl.ContentProperty,e.ContentProperty,
"Content")),c.ReadLocalValue(e.ContentTemplateProperty)===d.UnsetValue&&c.SetValue(e.ContentTemplateProperty,new d.TemplateBindingExpression(a.ContentControl.ContentTemplateProperty,e.ContentTemplateProperty,"ContentTemplate")));var n=c.Content;return n?(this._ContentRoot=n instanceof d.UIElement?n:(c.ContentTemplate||this.FallbackTemplate).GetVisualTree(c))?this.AttachVisualChild(this._ContentRoot,b):!1:!1};b.prototype.ClearRoot=function(){this._ContentRoot&&this.DetachVisualChild(this._ContentRoot,
null);this._ContentRoot=null};Object.defineProperty(b.prototype,"FallbackTemplate",{get:function(){return new d.DataTemplate({ParseType:a.Grid,Children:[{ParseType:a.TextBlock,Props:{Text:new d.BindingMarkup({})}}]})},enumerable:!0,configurable:!0});b.prototype._ContentChanged=function(a){var b=a.NewValue,c;b instanceof d.UIElement&&(c=b);(c||a.OldValue instanceof d.UIElement)&&this.ClearRoot();this.XObject.DataContext=b&&!c?b:void 0;this.LayoutUpdater.InvalidateMeasure()};b.prototype._ContentTemplateChanged=
function(){this.ClearRoot();this.LayoutUpdater.InvalidateMeasure()};return b}(d.FENode);a.ContentPresenterNode=g;Nullstone.RegisterType(g,"ContentPresenterNode");var e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.CreateNode=function(){return new g(this)};b.ContentProperty=DependencyProperty.Register("Content",function(){return Object},b,void 0,function(a,b){return a.XamlNode._ContentChanged(b)});b.ContentTemplateProperty=DependencyProperty.Register("ContentTemplate",
function(){return d.DataTemplate},b,void 0,function(a,b){return a.XamlNode._ContentTemplateChanged()});b.Annotations={ContentProperty:b.ContentProperty};return b}(d.FrameworkElement);a.ContentPresenter=e;Nullstone.RegisterType(e,"ContentPresenter")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(d){a.call(this,d);this.IsFocused=!1;this.LayoutUpdater.SetContainerMode(!0);this.LayoutUpdater.IsNeverInsideObject=!0}__extends(c,a);c.prototype.TabTo=function(){var a=this.XObject;return a.IsEnabled&&a.IsTabStop&&this.Focus()};c.prototype.DoApplyTemplateWithError=function(a){var b=this.XObject,c=b.Template,d;c&&(d=c.GetVisualTree(b));if(!d&&!(d=this.GetDefaultVisualTree()))return!1;this.TemplateRoot&&this.TemplateRoot!==d&&this.DetachVisualChild(this.TemplateRoot,
a);(this.TemplateRoot=d)&&this.AttachVisualChild(this.TemplateRoot,a);return a.Message?!1:!0};c.prototype.GetDefaultVisualTree=function(){};c.prototype.OnIsAttachedChanged=function(c){a.prototype.OnIsAttachedChanged.call(this,c);c||d.Media.VSM.VisualStateManager.DestroyStoryboards(this.XObject,this.TemplateRoot)};c.prototype.OnParentChanged=function(c,d){a.prototype.OnParentChanged.call(this,c,d);this.IsEnabled=d?d.IsEnabled:!0};Object.defineProperty(c.prototype,"IsEnabled",{get:function(){return this.XObject.IsEnabled},
set:function(a){d.Providers.IsEnabledStore.EmitInheritedChanged(this,a);this.OnIsEnabledChanged(void 0,a)},enumerable:!0,configurable:!0});c.prototype.OnIsEnabledChanged=function(c,f){if(!f){this.IsMouseOver=!1;var e=this._Surface;e&&(e._RemoveFocusFrom(this.LayoutUpdater),d.TabNavigationWalker.Focus(this,!0));this.ReleaseMouseCapture()}a.prototype.OnIsEnabledChanged.call(this,c,f)};c.prototype.Focus=function(a){return this._Surface.Focus(this,a)};c.prototype.CanCaptureMouse=function(){return this.XObject.IsEnabled};
return c}(d.FENode);a.ControlNode=g;Nullstone.RegisterType(g,"ControlNode");var e=function(b){function f(){b.apply(this,arguments);this._IsMouseOver=!1;this.IsEnabledChanged=new MulticastEvent}__extends(f,b);f.prototype.CreateNode=function(){return new g(this)};f.prototype.IsInheritable=function(a){return-1<c.indexOf(a)?!0:b.prototype.IsInheritable.call(this,a)};Object.defineProperty(f.prototype,"IsFocused",{get:function(){return this.XamlNode.IsFocused},enumerable:!0,configurable:!0});f.prototype.GetTemplateChild=
function(a){var b=this.XamlNode.TemplateRoot;if(b&&(a=b.XamlNode.FindName(a)))return a.XObject};f.prototype.ApplyTemplate=function(){var a=new BError,b=this.XamlNode.ApplyTemplateWithError(a);a.Message&&a.ThrowException();return b};f.prototype.GetDefaultStyle=function(){};f.prototype._IsEnabledChanged=function(a){var b=this.XamlNode.LayoutUpdater;b.ShouldSkipHitTest=!1===a.NewValue;b.CanHitElement=!1!==a.NewValue;this.OnIsEnabledChanged(a);!0!==a.NewValue&&(this.XamlNode.IsMouseOver=!1);this.UpdateVisualState();
this.IsEnabledChanged.RaiseAsync(this,a)};f.prototype.OnIsEnabledChanged=function(a){};f.prototype.OnGotFocus=function(a){this.XamlNode.IsFocused=!0};f.prototype.OnLostFocus=function(a){this.XamlNode.IsFocused=!1};f.prototype.OnLostMouseCapture=function(a){};f.prototype.OnKeyDown=function(a){};f.prototype.OnKeyUp=function(a){};f.prototype.OnMouseEnter=function(a){};f.prototype.OnMouseLeave=function(a){};f.prototype.OnMouseLeftButtonDown=function(a){};f.prototype.OnMouseLeftButtonUp=function(a){};
f.prototype.OnMouseMove=function(a){};f.prototype.OnMouseRightButtonDown=function(a){};f.prototype.OnMouseRightButtonUp=function(a){};f.prototype.OnMouseWheel=function(a){};f.prototype.UpdateVisualState=function(a){a=!1!==a;for(var b=this.GetVisualStateNamesToActivate(),c=0;c<b.length;c++)d.Media.VSM.VisualStateManager.GoToState(this,b[c],a)};f.prototype.GetVisualStateNamesToActivate=function(){var a=this.GetVisualStateFocus(),b=this.GetVisualStateCommon();return[a,b]};f.prototype.GetVisualStateCommon=
function(){return this.IsEnabled?this.IsMouseOver?"MouseOver":"Normal":"Disabled"};f.prototype.GetVisualStateFocus=function(){return this.IsFocused&&this.IsEnabled?"Focused":"Unfocused"};f.prototype._TemplateChanged=function(a){a=this.XamlNode;var b=a.SubtreeNode;if(b){var c=new BError;a.DetachVisualChild(b.XObject,c)||c.ThrowException()}a.LayoutUpdater.InvalidateMeasure()};f.prototype._PaddingChanged=function(a){this.XamlNode.LayoutUpdater.InvalidateMeasure()};f.prototype._BorderThicknessChanged=
function(a){this.XamlNode.LayoutUpdater.InvalidateMeasure()};f.prototype._ContentAlignmentChanged=function(a){this.XamlNode.LayoutUpdater.InvalidateArrange()};f.BackgroundProperty=DependencyProperty.RegisterCore("Background",function(){return d.Media.Brush},f);f.BorderBrushProperty=DependencyProperty.RegisterCore("BorderBrush",function(){return d.Media.Brush},f);f.BorderThicknessProperty=DependencyProperty.RegisterCore("BorderThickness",function(){return Thickness},f,void 0,function(a,b){return a._BorderThicknessChanged(b)});
f.FontFamilyProperty=d.InheritableOwner.FontFamilyProperty.ExtendTo(f);f.FontSizeProperty=d.InheritableOwner.FontSizeProperty.ExtendTo(f);f.FontStretchProperty=d.InheritableOwner.FontStretchProperty.ExtendTo(f);f.FontStyleProperty=d.InheritableOwner.FontStyleProperty.ExtendTo(f);f.FontWeightProperty=d.InheritableOwner.FontWeightProperty.ExtendTo(f);f.ForegroundProperty=d.InheritableOwner.ForegroundProperty.ExtendTo(f);f.HorizontalContentAlignmentProperty=DependencyProperty.Register("HorizontalContentAlignment",
function(){return new Enum(d.HorizontalAlignment)},f,d.HorizontalAlignment.Center,function(a,b){return a._ContentAlignmentChanged(b)});f.IsEnabledProperty=DependencyProperty.Register("IsEnabled",function(){return Boolean},f,!0,function(a,b){return a._IsEnabledChanged(b)});f.IsTabStopProperty=DependencyProperty.Register("IsTabStop",function(){return Boolean},f,!0);f.PaddingProperty=DependencyProperty.RegisterCore("Padding",function(){return Thickness},f,void 0,function(a,b){return a._BorderThicknessChanged(b)});
f.TabIndexProperty=DependencyProperty.Register("TabIndex",function(){return Number},f);f.TabNavigationProperty=DependencyProperty.Register("TabNavigation",function(){return new Enum(d.Input.KeyboardNavigationMode)},f,d.Input.KeyboardNavigationMode.Local);f.TemplateProperty=DependencyProperty.RegisterCore("Template",function(){return a.ControlTemplate},f,void 0,function(a,b){return a._TemplateChanged(b)});f.VerticalContentAlignmentProperty=DependencyProperty.Register("VerticalContentAlignment",function(){return new Enum(d.VerticalAlignment)},
f,d.VerticalAlignment.Center,function(a,b){return a._ContentAlignmentChanged(b)});f.DefaultStyleKeyProperty=DependencyProperty.Register("DefaultStyleKey",function(){return Function},f);return f}(d.FrameworkElement);a.Control=e;Nullstone.RegisterType(e,"Control");e.IsEnabledProperty.Store=d.Providers.IsEnabledStore.Instance;var c=[e.FontFamilyProperty,e.FontSizeProperty,e.FontStretchProperty,e.FontStyleProperty,e.FontWeightProperty,e.ForegroundProperty]})(d.Controls||(d.Controls={}))})(Fayde||(Fayde=
{}));
(function(d){(function(a){function g(a,c,h){var e=a.Stretch,g=size.fromRaw(a.ActualWidth,a.ActualHeight),p=h.CoerceSize(size.copyTo(g));h=!size.isEqual(g,h.RenderSize);var k=c.PixelWidth,m=c.PixelHeight;if(0===k||0===m)return null;e!==d.Media.Stretch.UniformToFill&&size.min(g,p);var l=rect.fromSize(g);c=new rect;c.Width=k;c.Height=m;e===d.Media.Stretch.None&&rect.union(l,c);var q=l.Width,r=l.Height,t=c.Width,u=c.Height,x=d.Media.AlignmentX.Center,v=d.Media.AlignmentY.Center,A=q/t,y=r/u;0===q&&(A=
1);0===r&&(y=1);if(e===d.Media.Stretch.Fill)k=mat3.createScale(A,y);else{var w=1,m=k=0;switch(e){case d.Media.Stretch.Uniform:w=A<y?A:y;break;case d.Media.Stretch.UniformToFill:w=A<y?y:A}switch(x){case d.Media.AlignmentX.Left:k=0;break;case d.Media.AlignmentX.Center:k=(q-w*t)/2;break;default:k=q-w*t}switch(v){case d.Media.AlignmentY.Top:m=0;break;case d.Media.AlignmentY.Center:m=(r-w*u)/2;break;default:m=r-w*u}q=mat3.createScale(w,w);mat3.translate(q,k,m);k=q}h&&(a._MeasureOverride(g,null),rect.set(l,
0.5*(p.Width-g.Width),0.5*(p.Height-g.Height),g.Width,g.Height));a=RectOverlap.In;if(e===d.Media.Stretch.UniformToFill||h)e=rect.copyTo(l),rect.roundOut(e),a=rect.copyTo(c),rect.transform(a,k),rect.roundIn(a),a=rect.rectIn(e,a);return{Matrix:k,Overlap:a}}var e=function(a){function c(d){a.call(this,d);this.LayoutUpdater.CanHitElement=!0}__extends(c,a);c.prototype.PostInsideObject=function(a,b,c,f){var e=this.XObject;a=e.Source;if(!a)return!1;var m=e.Stretch;if(m===d.Media.Stretch.Fill||m===d.Media.Stretch.UniformToFill)return!0;
m=g(e,a,b);if(!m)return null;e=new rect;e.Width=a.PixelWidth;e.Height=a.PixelHeight;rect.transform(e,m.Matrix);c=new Point(c,f);b.TransformPoint(c);return rect.containsPoint(e,c)};return c}(d.FENode);a.ImageNode=e;Nullstone.RegisterType(e,"ImageNode");var c=function(b){function c(){b.apply(this,arguments);this.ImageOpened=new MulticastEvent;this.ImageFailed=new MulticastEvent}__extends(c,b);c.prototype.CreateNode=function(){return new e(this)};c._SourceCoercer=function(a,b,c){return"string"===typeof c?
new d.Media.Imaging.BitmapImage(new Uri(c)):c instanceof Uri?new d.Media.Imaging.BitmapImage(c):c};c.prototype._MeasureOverride=function(a,b){var c=size.copyTo(a),f=new rect,e=this.Source,g=0,l=0;e&&(f.Width=e.PixelWidth,f.Height=e.PixelHeight);isFinite(c.Width)||(c.Width=f.Width);isFinite(c.Height)||(c.Height=f.Height);0<f.Width&&(g=c.Width/f.Width);0<f.Height&&(l=c.Height/f.Height);isFinite(a.Width)||(g=l);isFinite(a.Height)||(l=g);switch(this.Stretch){case d.Media.Stretch.Uniform:g=l=Math.min(g,
l);break;case d.Media.Stretch.UniformToFill:g=l=Math.max(g,l);break;case d.Media.Stretch.Fill:isFinite(a.Width)||(g=l);isFinite(a.Height)||(l=g);break;case d.Media.Stretch.None:g=l=1}c.Width=f.Width*g;c.Height=f.Height*l;return c};c.prototype._ArrangeOverride=function(a,b){var c=size.copyTo(a),f=new rect,e=this.Source,g=1,l=1;e&&(f.Width=e.PixelWidth,f.Height=e.PixelHeight);0===f.Width&&(f.Width=c.Width);0===f.Height&&(f.Height=c.Height);f.Width!==c.Width&&(g=c.Width/f.Width);f.Height!==c.Height&&
(l=c.Height/f.Height);switch(this.Stretch){case d.Media.Stretch.Uniform:g=l=Math.min(g,l);break;case d.Media.Stretch.UniformToFill:g=l=Math.max(g,l);break;case d.Media.Stretch.None:g=l=1}c.Width=f.Width*g;c.Height=f.Height*l;return c};c.prototype.Render=function(a,b,c){if(c=this.Source){c.Lock();var d=g(this,c,b);d&&(a.Save(),(b.CompositeLayoutClip||d.Overlap!==RectOverlap.In)&&b.RenderLayoutClip(a),a.PreTransformMatrix(d.Matrix),a.CanvasContext.drawImage(c.Image,0,0),a.Restore());c.Unlock()}};c.prototype.ComputeActualSize=
function(b,c){var d=b.call(c);if(parent&&!(parent instanceof a.Canvas)&&void 0!==c.LayoutSlot)return d;this.Source&&(d=c.CoerceSize(size.createInfinite()),d=this._MeasureOverride(d,null),c.CoerceSize(d));return d};c.prototype._SourceChanged=function(a){var b=this.XamlNode.LayoutUpdater,c=a.OldValue;a=a.NewValue;c instanceof d.Media.Imaging.BitmapSource&&c.Unlisten(this);a instanceof d.Media.Imaging.BitmapSource?a.Listen(this):(b.UpdateBounds(),b.Invalidate());b.InvalidateMeasure()};c.prototype.OnImageErrored=
function(a,b){this.ImageFailed.Raise(this,EventArgs.Empty)};c.prototype.OnImageLoaded=function(a,b){this.ImageOpened.Raise(this,EventArgs.Empty)};c.prototype.ImageChanged=function(a){a=this.XamlNode.LayoutUpdater;a.InvalidateMeasure();a.Invalidate()};c.SourceProperty=DependencyProperty.RegisterFull("Source",function(){return d.Media.Imaging.ImageSource},c,void 0,function(a,b){return a._SourceChanged(b)},c._SourceCoercer);c.StretchProperty=DependencyProperty.RegisterCore("Stretch",function(){return new Enum(d.Media.Stretch)},
c,d.Media.Stretch.Uniform);return c}(d.FrameworkElement);a.Image=c;Nullstone.RegisterType(c,"Image")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(c){function b(a){c.call(this,a)}__extends(b,c);b.prototype.GetDefaultVisualTree=function(){var b=this._Presenter;b||(this._Presenter=b=new a.ItemsPresenter,b.TemplateOwner=this.XObject);return b};Object.defineProperty(b.prototype,"ItemsPresenter",{get:function(){return this._Presenter},enumerable:!0,configurable:!0});b.prototype._SetItemsPresenter=function(a){this._Presenter&&this._Presenter.XamlNode.ElementRoot.Children.Clear();this._Presenter=a;a=this.XObject;
a.AddItemsToPresenter(b._DefaultPosition,a.Items.Count)};b._DefaultPosition={Index:-1,Offset:1};return b}(a.ControlNode);a.ItemsControlNode=g;Nullstone.RegisterType(g,"ItemsControlNode");var e=function(c){function b(){c.call(this);this._ItemsIsDataBound=!1;this._DisplayMemberTemplate=this._Items=null;this.DefaultStyleKey=this.constructor;var b=new a.ItemContainerGenerator(this);b.ItemsChanged.Subscribe(this.OnItemContainerGeneratorChanged,this);Object.defineProperty(this,"ItemContainerGenerator",
{value:b,writable:!1})}__extends(b,c);b.prototype.CreateNode=function(){return new g(this)};Object.defineProperty(b.prototype,"Items",{get:function(){this._Items||(this._Items=new a.ItemCollection,this._ItemsIsDataBound=!0,this._Items.ItemsChanged.Subscribe(this.InvokeItemsChanged,this));return this._Items},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"$Items",{get:function(){return this.Items},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"ItemsSource",{get:function(){return this.GetValue(b.ItemsSourceProperty)},
set:function(a){if(!this._ItemsIsDataBound&&0<this.Items.Count)throw new InvalidOperationException("Items collection must be empty before using ItemsSource");this.SetValue(b.ItemsSourceProperty,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"$DisplayMemberTemplate",{get:function(){this._DisplayMemberTemplate||(this._DisplayMemberTemplate=new d.DataTemplate({ParseType:a.Grid,Children:[{ParseType:a.TextBlock,Props:{Text:new d.BindingMarkup({Path:this.DisplayMemberPath})}}]}));
return this._DisplayMemberTemplate},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"Panel",{get:function(){return this.XamlNode.ItemsPresenter?this.XamlNode.ItemsPresenter.ElementRoot:void 0},enumerable:!0,configurable:!0});b.GetItemsOwner=function(c){if(!(c instanceof a.Panel&&c.IsItemsHost))return null;c=c.TemplateOwner;if(!(c instanceof a.ItemsPresenter))return null;c=c.TemplateOwner;return c instanceof b?c:null};b.ItemsControlFromItemContainer=function(a){if(!(a instanceof d.FrameworkElement))return null;
var c=a.XamlNode.ParentNode,c=c?c.XObject:null,e;c instanceof b&&(e=c);return null==e?b.GetItemsOwner(c):e.IsItemItsOwnContainer(a)?e:null};b.prototype.OnItemsSourceChanged=function(a){!a.OldValue&&Nullstone.ImplementsInterface(a.OldValue,d.Collections.INotifyCollectionChanged_)&&a.OldValue.CollectionChanged.Unsubscribe(this._CollectionChanged,this);if(null!=a.NewValue){a=a.NewValue;Nullstone.ImplementsInterface(a,d.Collections.INotifyCollectionChanged_)&&a.CollectionChanged.Subscribe(this._CollectionChanged,
this);this._ItemsIsDataBound=this.$Items.IsReadOnly=!0;this.$Items.ClearImpl();var b;a instanceof Array?b=d.ArrayEx.GetEnumerator(a):a instanceof d.XamlObjectCollection&&(b=a.GetEnumerator());if(b)for(a=this.$Items;b.MoveNext();)a.AddImpl(b.Current);this.OnItemsChanged(d.Collections.NotifyCollectionChangedEventArgs.Reset())}else this._ItemsIsDataBound=!1,this.$Items.IsReadOnly=!1,this.$Items.ClearImpl();this.XamlNode.LayoutUpdater.InvalidateMeasure()};b.prototype._CollectionChanged=function(a,b){var c;
switch(b.Action){case d.Collections.NotifyCollectionChangedAction.Add:var e=d.ArrayEx.GetEnumerator(b.NewItems);for(c=b.NewStartingIndex;e.MoveNext();)this.$Items.InsertImpl(c,e.Current),c++;break;case d.Collections.NotifyCollectionChangedAction.Remove:for(e=d.ArrayEx.GetEnumerator(b.OldItems);e.MoveNext();)this.$Items.RemoveAtImpl(b.OldStartingIndex);break;case d.Collections.NotifyCollectionChangedAction.Replace:e=d.ArrayEx.GetEnumerator(b.NewItems);for(c=b.NewStartingIndex;e.MoveNext();)this.$Items.SetValueAtImpl(c,
e.Current),c++;break;case d.Collections.NotifyCollectionChangedAction.Reset:for(this.$Items.ClearImpl(),e=this.ItemsSource.GetEnumerator();e.MoveNext();)this.$Items.AddImpl(e.Current)}this.OnItemsChanged(b)};b.prototype.OnDisplayMemberPathChanged=function(a){a=this.ItemContainerGenerator;for(var b=0,c=this.Items.GetEnumerator();c.MoveNext();)this.UpdateContentTemplateOnContainer(a.ContainerFromIndex(b),c.Current),b++};b.prototype.PrepareContainerForItem=function(a,b){if(null!=this.DisplayMemberPath&&
null!=this.ItemTemplate)throw new InvalidOperationException("Cannot set 'DisplayMemberPath' and 'ItemTemplate' simultaenously");this.UpdateContentTemplateOnContainer(a,b)};b.prototype.ClearContainerForItem=function(a,b){};b.prototype.GetContainerForItem=function(){return new a.ContentPresenter};b.prototype.IsItemItsOwnContainer=function(a){return a instanceof d.FrameworkElement};b.prototype.OnItemsChanged=function(a){};b.prototype.InvokeItemsChanged=function(a,b){this.ItemContainerGenerator.OnOwnerItemsItemsChanged(b);
this._ItemsIsDataBound||this.OnItemsChanged(b)};b.prototype.OnItemContainerGeneratorChanged=function(b,c){var e=this.Panel;if(e&&!(e instanceof a.VirtualizingPanel))switch(c.Action){case d.Collections.NotifyCollectionChangedAction.Reset:e=e.Children.Count;0<e&&this.RemoveItemsFromPresenter({Index:0,Offset:0},e);break;case d.Collections.NotifyCollectionChangedAction.Add:this.AddItemsToPresenter(c.Position,c.ItemCount);break;case d.Collections.NotifyCollectionChangedAction.Remove:this.RemoveItemsFromPresenter(c.Position,
c.ItemCount);break;case d.Collections.NotifyCollectionChangedAction.Replace:this.RemoveItemsFromPresenter(c.Position,c.ItemCount),this.AddItemsToPresenter(c.Position,c.ItemCount)}};b.prototype.OnItemTemplateChanged=function(a){a=this.Items.GetEnumerator();for(var b=0,c=this.ItemContainerGenerator;a.MoveNext();)this.UpdateContentTemplateOnContainer(c.ContainerFromIndex(b),a.Current),b++};b.prototype.AddItemsToPresenter=function(b,c){var e=this.Panel;if(e&&!(e instanceof a.VirtualizingPanel)){var g=
this.ItemContainerGenerator,p=g.IndexFromGeneratorPosition(b),k=this.Items,e=e.Children,m=g.StartAt(b,!0,!0);try{for(var l=0;l<c;l++){var q=k.GetValueAt(p+l),r=g.GenerateNext({Value:null});r instanceof a.ContentControl&&(r._ContentSetsParent=!1);r instanceof d.FrameworkElement&&!(q instanceof d.FrameworkElement)&&(r.DataContext=q);e.Insert(p+l,r);g.PrepareItemContainer(r)}}finally{m.Dispose()}}};b.prototype.RemoveItemsFromPresenter=function(b,c){var d=this.Panel;if(d&&!(d instanceof a.VirtualizingPanel))for(;0<
c;)d.Children.RemoveAt(b.Index),c--};b.prototype.UpdateContentTemplateOnContainer=function(b,c){if(b!==c){var e;b instanceof a.ContentPresenter&&(e=b);var g;b instanceof a.ContentControl&&(g=b);var p;c instanceof d.UIElement||(p=this.ItemTemplate||this.$DisplayMemberTemplate);null!=e?(e.ContentTemplate=p,e.Content=c):null!=g&&(g.ContentTemplate=p,g.Content=c)}};b.DisplayMemberPathProperty=DependencyProperty.Register("DisplayMemberPath",function(){return String},b,null,function(a,b){return a.OnDisplayMemberPathChanged(b)});
b.ItemsPanelProperty=DependencyProperty.RegisterCore("ItemsPanel",function(){return a.ItemsPanelTemplate},b);b.ItemsSourceProperty=DependencyProperty.Register("ItemsSource",function(){return d.IEnumerable_},b,null,function(a,b){return a.OnItemsSourceChanged(b)});b.ItemTemplateProperty=DependencyProperty.RegisterCore("ItemTemplate",function(){return d.DataTemplate},b,void 0,function(a,b){return a.OnItemTemplateChanged(b)});b.Annotations={ContentProperty:"Items"};return b}(a.Control);a.ItemsControl=
e;Nullstone.RegisterType(e,"ItemsControl")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(c){function b(a){c.call(this,a)}__extends(b,c);Object.defineProperty(b.prototype,"ElementRoot",{get:function(){return this._ElementRoot},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"StackPanelFallbackTemplate",{get:function(){this._SPFT||(this._SPFT=new a.ItemsPanelTemplate({ParseType:a.StackPanel}));return this._SPFT},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"VirtualizingStackPanelFallbackTemplate",{get:function(){this._VSPFT||
(this._VSPFT=new a.ItemsPanelTemplate({ParseType:a.VirtualizingStackPanel}));return this._VSPFT},enumerable:!0,configurable:!0});b.prototype.DoApplyTemplateWithError=function(b){if(this._ElementRoot)return!1;var c=this.XObject,d=c.TemplateOwner;if(!(d instanceof a.ItemsControl))return!1;d.ItemsPanel&&(this._ElementRoot=d.ItemsPanel.GetVisualTree(c));this._ElementRoot||(this._ElementRoot=(d instanceof a.ListBox?this.VirtualizingStackPanelFallbackTemplate:this.StackPanelFallbackTemplate).GetVisualTree(c));
this._ElementRoot.IsItemsHost=!0;if(!this.FinishApplyTemplateWithError(this._ElementRoot,b))return!1;d.XamlNode._SetItemsPresenter(c);return!0};return b}(d.FENode);a.ItemsPresenterNode=g;Nullstone.RegisterType(g,"ItemsPresenterNode");var e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.CreateNode=function(){return new g(this)};Object.defineProperty(b.prototype,"ElementRoot",{get:function(){return this.XamlNode.ElementRoot},enumerable:!0,configurable:!0});return b}(d.FrameworkElement);
a.ItemsPresenter=e;Nullstone.RegisterType(e,"ItemsPresenter")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function b(b){a.call(this,b)}__extends(b,a);b.prototype.PostInsideObject=function(a,b,c,d){return!1};return b}(d.FENode);a.MENode=g;Nullstone.RegisterType(g,"MENode");var e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.CreateNode=function(){return new g(this)};b.prototype._MeasureOverride=function(a,b){return a};b.prototype._ArrangeOverride=function(a,b){return a};return b}(d.FrameworkElement);a.MediaElement=e;Nullstone.RegisterType(e,
"MediaElement")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(a,b){var c=d.Controls.Panel.GetZIndex(a.XObject),f=d.Controls.Panel.GetZIndex(b.XObject);return c===f?(c=d.Controls.Panel.GetZ(a.XObject),f=d.Controls.Panel.GetZ(b.XObject),isNaN(c)||isNaN(f)?0:c>f?1:c<f?-1:0):c-f}function e(a,b){var c=a.XamlNode;c instanceof d.UINode&&c.LayoutUpdater.Invalidate();c.IsAttached&&c.ParentNode._InvalidateChildrenZIndices()}var c=function(a){function b(){a.apply(this,arguments);this._Nodes=[];this._ZSorted=[]}__extends(b,a);b.prototype.AddNode=
function(a){this._Nodes.push(a)};b.prototype.RemoveNode=function(a){var b=this._Nodes;a=b.indexOf(a);-1<a&&b.splice(a,1)};b.prototype.ResortByZIndex=function(){var a=this._Nodes.slice(0);this._ZSorted=a;1<a.length&&a.sort(g)};b.prototype.GetVisualTreeEnumerator=function(a){switch(a){default:case d.VisualTreeDirection.Logical:return d.ArrayEx.GetEnumerator(this._Nodes);case d.VisualTreeDirection.LogicalReverse:return d.ArrayEx.GetEnumerator(this._Nodes,!0);case d.VisualTreeDirection.ZFoward:return this._ZSorted.length!==
this._Nodes.length&&this.ResortByZIndex(),d.ArrayEx.GetEnumerator(this._ZSorted);case d.VisualTreeDirection.ZReverse:return this._ZSorted.length!==this._Nodes.length&&this.ResortByZIndex(),d.ArrayEx.GetEnumerator(this._ZSorted,!0)}};return b}(d.XamlNode);Nullstone.RegisterType(c,"PanelChildrenNode");var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.CreateNode=function(){return new c(this)};b.prototype.AddingToCollection=function(b,c){var d=this.XamlNode;if(!d.ParentNode.AttachVisualChild(b,
c))return!1;d.AddNode(b.XamlNode);return a.prototype.AddingToCollection.call(this,b,c)};b.prototype.RemovedFromCollection=function(b,c){var d=this.XamlNode;d.ParentNode.DetachVisualChild(b,null);d.RemoveNode(b.XamlNode);a.prototype.RemovedFromCollection.call(this,b,c)};return b}(d.XamlObjectCollection);Nullstone.RegisterType(b,"PanelChildrenCollection");var f=function(a){function c(d){a.call(this,d);this.LayoutUpdater.SetContainerMode(!0,!0);var f=new b;Object.defineProperty(d,"Children",{value:f,
writable:!1});d=new BError;this.SetSubtreeNode(f.XamlNode,d)}__extends(c,a);c.prototype.AttachVisualChild=function(a,b){this.OnVisualChildAttached(a);a.XamlNode.SetIsLoaded(this.IsLoaded);this._InvalidateChildrenZIndices();return!0};c.prototype.DetachVisualChild=function(a,b){this.OnVisualChildDetached(a);a.XamlNode.SetIsLoaded(!1);this._InvalidateChildrenZIndices();return!0};c.prototype._InvalidateChildrenZIndices=function(){};c.prototype._ResortChildrenByZIndex=function(){this.XObject.Children.XamlNode.ResortByZIndex()};
c.prototype.OnIsAttachedChanged=function(b){this.SetSurfaceFromVisualParent();this.LayoutUpdater.OnIsAttachedChanged(b,this.VisualParentNode);a.prototype.OnIsAttachedChanged.call(this,b)};c.prototype.PostInsideObject=function(a,b,c,d){return null!=this.XObject.Background};c.prototype.ComputeBounds=function(a,b){rect.clear(b.Extents);rect.clear(b.ExtentsWithChildren);for(var c=this.GetVisualTreeEnumerator(d.VisualTreeDirection.Logical);c.MoveNext();){var f=c.Current.LayoutUpdater;f.TotalIsRenderVisible&&
rect.union(b.ExtentsWithChildren,f.GlobalBoundsWithChildren)}this.XObject.Background&&(rect.set(b.Extents,0,0,b.ActualWidth,b.ActualHeight),rect.union(b.ExtentsWithChildren,b.Extents));rect.copyGrowTransform(b.Bounds,b.Extents,b.EffectPadding,b.AbsoluteXform);rect.copyGrowTransform(b.BoundsWithChildren,b.ExtentsWithChildren,b.EffectPadding,b.AbsoluteXform);b.ComputeGlobalBounds();b.ComputeSurfaceBounds()};c.prototype.GetVisualTreeEnumerator=function(a){return this.XObject.Children.XamlNode.GetVisualTreeEnumerator(a)};
return c}(d.FENode);a.PanelNode=f;Nullstone.RegisterType(f,"PanelNode");var h=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.CreateNode=function(){return new f(this)};b.GetZIndex=function(a){return a.GetValue(b.ZIndexProperty)};b.SetZIndex=function(a,c){a.SetValue(b.ZIndexProperty,c)};b.GetZ=function(a){return a.GetValue(b.ZProperty)};b.SetZ=function(a,c){a.SetValue(b.ZProperty,c)};b.prototype._BackgroundChanged=function(a){var b=this.XamlNode.LayoutUpdater;a=a.NewValue;
this._BackgroundListener&&this._BackgroundListener.Detach();this._BackgroundListener=null;a&&(this._BackgroundListener=a.Listen(function(a){return b.Invalidate()}));b.CanHitElement=null!=a;b.UpdateBounds();b.Invalidate()};b.prototype._MeasureOverride=function(a,b){return new size};b.prototype.Render=function(a,b,c){if(c=this.Background){var d=b.CoerceSize(size.fromRaw(this.ActualWidth,this.ActualHeight));0>=d.Width||0>=d.Height||(d=rect.fromSize(d),a.Save(),b.RenderLayoutClip(a),a.FillRect(c,d),a.Restore())}};
b.ZIndexProperty=DependencyProperty.RegisterAttached("ZIndex",function(){return Number},b,0,e);b.ZProperty=DependencyProperty.RegisterAttached("Z",function(){return Number},b,NaN);b.BackgroundProperty=DependencyProperty.Register("Background",function(){return d.Media.Brush},b,void 0,function(a,b){return a._BackgroundChanged(b)});b.IsItemsHostProperty=DependencyProperty.Register("IsItemHost",function(){return Boolean},b,!1);b.Annotations={ContentProperty:"Children"};return b}(d.FrameworkElement);a.Panel=
h;Nullstone.RegisterType(h,"Panel")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));(function(d){(function(a){var d=function(){return function(){}}();a._RichTextBoxView=d;Nullstone.RegisterType(d,"_RichTextBoxView");d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.Control);a.RichTextBox=d;Nullstone.RegisterType(d,"RichTextBox")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(a){if(!isNaN(a))return Math.max(0,a);throw new ArgumentException("Offset is not a number.");}function e(a,c){if(a===c)return!0;var d=1.11022302462516E-16*(Math.abs(a)+Math.abs(c)+10),e=a-c;return-d<e&&d>e}var c=function(b){function c(){b.apply(this,arguments);this._ScrollData=new a.Primitives.ScrollData;this._IsClipPropertySet=!1;this._ClippingRectangle=null}__extends(c,b);Object.defineProperty(c.prototype,"ScrollOwner",{get:function(){return this._ScrollData.ScrollOwner},
set:function(a){this._ScrollData.ScrollOwner=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"CanHorizontallyScroll",{get:function(){return this._ScrollData.CanHorizontallyScroll},set:function(a){var b=this._ScrollData;b.CanHorizontallyScroll!==a&&(b.CanHorizontallyScroll=a,this.XamlNode.LayoutUpdater.InvalidateMeasure())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"CanVerticallyScroll",{get:function(){return this._ScrollData.CanVerticallyScroll},set:function(a){var b=
this._ScrollData;b.CanVerticallyScroll!==a&&(b.CanVerticallyScroll=a,this.XamlNode.LayoutUpdater.InvalidateMeasure())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ExtentWidth",{get:function(){return this._ScrollData.ExtentWidth},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ExtentHeight",{get:function(){return this._ScrollData.ExtentHeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ViewportWidth",{get:function(){return this._ScrollData.ViewportWidth},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ViewportHeight",{get:function(){return this._ScrollData.ViewportHeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"HorizontalOffset",{get:function(){return this._ScrollData.OffsetX},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"VerticalOffset",{get:function(){return this._ScrollData.OffsetY},enumerable:!0,configurable:!0});c.prototype.LineUp=function(){this.SetVerticalOffset(this._ScrollData.OffsetY-
16)};c.prototype.LineDown=function(){this.SetVerticalOffset(this._ScrollData.OffsetY+16)};c.prototype.LineLeft=function(){this.SetHorizontalOffset(this._ScrollData.OffsetX-16)};c.prototype.LineRight=function(){this.SetHorizontalOffset(this._ScrollData.OffsetX+16)};c.prototype.MouseWheelUp=function(){this.SetVerticalOffset(this._ScrollData.OffsetY-48)};c.prototype.MouseWheelDown=function(){this.SetVerticalOffset(this._ScrollData.OffsetY+48)};c.prototype.MouseWheelLeft=function(){this.SetHorizontalOffset(this._ScrollData.OffsetX-
48)};c.prototype.MouseWheelRight=function(){this.SetHorizontalOffset(this._ScrollData.OffsetX+48)};c.prototype.PageUp=function(){this.SetVerticalOffset(this._ScrollData.OffsetY-this._ScrollData.ViewportHeight)};c.prototype.PageDown=function(){this.SetVerticalOffset(this._ScrollData.OffsetY+this._ScrollData.ViewportHeight)};c.prototype.PageLeft=function(){this.SetHorizontalOffset(this._ScrollData.OffsetX-this._ScrollData.ViewportWidth)};c.prototype.PageRight=function(){this.SetHorizontalOffset(this._ScrollData.OffsetX+
this._ScrollData.ViewportWidth)};c.prototype.MakeVisible=function(a,b){if(rect.isEmpty(b)||!a||a===this||!this.XamlNode.IsAncestorOf(a.XamlNode))return new rect;var c=a.TransformToVisual(this).Transform(new Point(b.X,b.Y));b=rect.copyTo(b);b.X=c.X;b.Y=c.Y;return b};c.prototype.SetHorizontalOffset=function(a){this.CanHorizontallyScroll&&(a=g(a),e(this._ScrollData.OffsetX,a)||(this._ScrollData.CachedOffsetX=a,this.XamlNode.LayoutUpdater.InvalidateArrange()))};c.prototype.SetVerticalOffset=function(a){this.CanVerticallyScroll&&
(a=g(a),e(this._ScrollData.OffsetY,a)||(this._ScrollData.CachedOffsetY=a,this.XamlNode.LayoutUpdater.InvalidateArrange()))};c.prototype.OnApplyTemplate=function(){b.prototype.OnApplyTemplate.call(this);var c;if(this.TemplateOwner instanceof a.ScrollViewer){c=this.TemplateOwner;var d=this.Content,f;Nullstone.ImplementsInterface(d,a.Primitives.IScrollInfo_)&&(f=d);!f&&d instanceof a.ItemsPresenter&&(d=d.ElementRoot,Nullstone.ImplementsInterface(d,a.Primitives.IScrollInfo_)&&(f=d));f||(f=this);f.CanHorizontallyScroll=
c.HorizontalScrollBarVisibility!==a.ScrollBarVisibility.Disabled;f.CanVerticallyScroll=c.VerticalScrollBarVisibility!==a.ScrollBarVisibility.Disabled;f.ScrollOwner=c;c.ScrollInfo=f;c.InvalidateScrollInfo()}};c.prototype._MeasureOverride=function(a,c){var d=this.XamlNode.ContentRoot;if(!this.ScrollOwner||!d)return b.prototype._MeasureOverride.call(this,a,c);var f=size.createInfinite();this.CanHorizontallyScroll||(f.Width=a.Width);this.CanVerticallyScroll||(f.Height=a.Height);d.Measure(f);d=d.DesiredSize;
this._UpdateExtents(a,d.Width,d.Height);d=size.copyTo(a);f=this._ScrollData;d.Width=Math.min(d.Width,f.ExtentWidth);d.Height=Math.min(d.Height,f.ExtentHeight);return d};c.prototype._ArrangeOverride=function(a,c){var d=this.ScrollOwner,f=this.XamlNode.ContentRoot;if(!d||!f)return b.prototype._ArrangeOverride.call(this,a,c);this._ClampOffsets()&&d.InvalidateScrollInfo();var e=f.DesiredSize,d=new Point(-this.HorizontalOffset,-this.VerticalOffset),e=size.copyTo(e);size.max(e,a);e=rect.fromSize(e);e.X=
d.X;e.Y=d.Y;f.Arrange(e);this._UpdateClip(a);f=this._ScrollData;this._UpdateExtents(a,f.ExtentWidth,f.ExtentHeight);return a};c.prototype._UpdateExtents=function(a,b,c){var d=this._ScrollData,f=d.ViewportWidth!==a.Width||d.ViewportHeight!==a.Height||d.ExtentWidth!==b||d.ExtentHeight!==c;d.ViewportWidth=a.Width;d.ViewportHeight=a.Height;d.ExtentWidth=b;d.ExtentHeight=c;this._ClampOffsets()&&(f=!0);f&&this.ScrollOwner.InvalidateScrollInfo()};c.prototype._ClampOffsets=function(){var a=!1,b=this._ScrollData,
c=this.CanHorizontallyScroll?Math.min(b.CachedOffsetX,b.ExtentWidth-b.ViewportWidth):0,c=Math.max(0,c);e(c,this.HorizontalOffset)||(b.OffsetX=c,a=!0);c=this.CanVerticallyScroll?Math.min(b.CachedOffsetY,b.ExtentHeight-b.ViewportHeight):0;c=Math.max(0,c);e(c,this.VerticalOffset)||(b.OffsetY=c,a=!0);return a};c.prototype._UpdateClip=function(a){this._IsClipPropertySet||(this.Clip=this._ClippingRectangle=new d.Media.RectangleGeometry,this._IsClipPropertySet=!0);var b;this.TemplateOwner instanceof d.Controls.ScrollViewer&&
(b=this.Content)&&(b instanceof d.Controls.Internal.TextBoxView||b instanceof d.Controls._RichTextBoxView)?this._ClippingRectangle.Rect=this._CalculateTextBoxClipRect(a):this._ClippingRectangle.Rect=rect.fromSize(a)};c.prototype._CalculateTextBoxClipRect=function(b){var c=0,d=0,f=this._ScrollData,e=f.ExtentWidth,g=f.ViewportWidth,f=f.OffsetX,l;this.TemplateOwner instanceof a.ScrollViewer&&(l=this.TemplateOwner);var q=l.TemplateOwner,r=a.TextWrapping.NoWrap,t=a.ScrollBarVisibility.Disabled;q instanceof
a.TextBox?(r=q.TextWrapping,t=q.HorizontalScrollBarVisibility):q instanceof a.RichTextBox&&(r=q.TextWrapping,t=q.HorizontalScrollBarVisibility);l=l.Padding;if(r!==a.TextWrapping.Wrap){if(g>e||0===f)c=l.Left+1;if(g>e||t!==a.ScrollBarVisibility.Disabled&&1>=Math.abs(e-f+g))d=l.Right+1}else c=l.Left+1,d=l.Right+1;c=Math.max(0,c);d=Math.max(0,d);e=new rect;rect.set(e,-c,0,b.Width+c+d,b.Height);return e};return c}(a.ContentPresenter);a.ScrollContentPresenter=c;Nullstone.RegisterType(c,"ScrollContentPresenter",
[a.Primitives.IScrollInfo_])})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype._OrientationChanged=function(a){a=this.XamlNode.LayoutUpdater;a.InvalidateMeasure();a.InvalidateArrange()};c.prototype._MeasureOverride=function(a,c){var h=size.createInfinite(),e=new size,g=this.Orientation===d.Orientation.Vertical;if(g){h.Width=a.Width;var p=this.Width;isNaN(p)||(h.Width=p);h.Width=Math.min(h.Width,this.MaxWidth);h.Width=Math.max(h.Width,this.MinWidth)}else h.Height=a.Height,
p=this.Height,isNaN(p)||(h.Height=p),h.Height=Math.min(h.Height,this.MaxHeight),h.Height=Math.max(h.Height,this.MinHeight);for(var p=this.Children.GetEnumerator(),k;p.MoveNext();)k=p.Current,k=k.XamlNode,k=k.LayoutUpdater,k._Measure(h,c),k=k.DesiredSize,g?(e.Height+=k.Height,e.Width=Math.max(e.Width,k.Width)):(e.Width+=k.Width,e.Height=Math.max(e.Height,k.Height));return e};c.prototype._ArrangeOverride=function(a,c){var h=size.copyTo(a),e=this.Orientation===d.Orientation.Vertical;e?h.Height=0:h.Width=
0;for(var g=this.Children.GetEnumerator(),p;g.MoveNext();){p=g.Current;p=p.XamlNode;p=p.LayoutUpdater;var k=size.copyTo(p.DesiredSize);if(e){k.Width=a.Width;var m=rect.fromSize(k);m.Y=h.Height;rect.isEmpty(m)&&rect.clear(m);p._Arrange(m,c);h.Width=Math.max(h.Width,k.Width);h.Height+=k.Height}else k.Height=a.Height,m=rect.fromSize(k),m.X=h.Width,rect.isEmpty(m)&&rect.clear(m),p._Arrange(m,c),h.Width+=k.Width,h.Height=Math.max(h.Height,k.Height)}e?h.Height=Math.max(h.Height,a.Height):h.Width=Math.max(h.Width,
a.Width);return h};c.OrientationProperty=DependencyProperty.Register("Orientation",function(){return new Enum(d.Orientation)},c,d.Orientation.Vertical,function(a,c){return a._OrientationChanged(c)});return c}(a.Panel);a.StackPanel=g;Nullstone.RegisterType(g,"StackPanel")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function b(b){a.call(this,b);this._ActualHeight=this._ActualWidth=0;this._Layout=new d.Text.TextLayout;this._Dirty=this._WasSet=!0;this._Font=new Font;this._SetsValue=!0;this.LayoutUpdater.CanHitElement=!0}__extends(b,a);b.prototype.GetInheritedEnumerator=function(){var a=this.XObject.Inlines;if(a)return a.GetNodeEnumerator()};b.prototype.ComputeBounds=function(a,b){rect.copyTo(this._Layout.RenderExtents,b.Extents);var c=this.XObject.Padding;c&&(b.Extents.X+=
c.Left,b.Extents.Y+=c.Top);rect.copyTo(b.Extents,b.ExtentsWithChildren);b.IntersectBoundsWithClipPath(b.Bounds,b.AbsoluteXform);rect.copyTo(b.Bounds,b.BoundsWithChildren);b.ComputeGlobalBounds();b.ComputeSurfaceBounds()};b.prototype.Measure=function(a){this.Layout(a);return size.fromRaw(this._ActualWidth,this._ActualHeight)};b.prototype.Arrange=function(a,b){this.Layout(a);var c=size.fromRaw(this._ActualWidth,this._ActualHeight);size.max(c,a);this._Layout.AvailableWidth=a.Width;b&&size.growByThickness(c,
b)};b.prototype.Layout=function(a){this._WasSet?(this._Layout.MaxWidth=a.Width,this._Layout.Layout(),a=this._Layout.ActualExtents,this._ActualWidth=a.Width,this._ActualHeight=a.Height):this._ActualWidth=this._ActualHeight=0;this._Dirty=!1};b.prototype.ComputeActualSize=function(a,b){var c=a.CoerceSize(size.createInfinite());void 0!==a.PreviousConstraint||void 0!==a.LayoutSlot?(this._Layout.Layout(),c=this._Layout.ActualExtents,this._ActualWidth=c.Width,this._ActualHeight=c.Height):(b&&size.shrinkByThickness(c,
b),this.Layout(c));c=size.fromRaw(this._ActualWidth,this._ActualHeight);b&&size.growByThickness(c,b);return c};b.prototype._FontChanged=function(a){this._UpdateFonts(!1);this._InvalidateDirty()};b.prototype._TextChanged=function(a){this._SetsValue?(this._SetTextInternal(a.NewValue),this._UpdateLayoutAttributes(),this._InvalidateDirty(!0)):this._UpdateLayoutAttributes()};b.prototype._LineStackingStrategyChanged=function(a){this._Dirty=this._Layout.SetLineStackingStategy(a.NewValue);this._InvalidateDirty()};
b.prototype._LineHeightChanged=function(a){this._Dirty=this._Layout.SetLineHeight(a.NewValue);this._InvalidateDirty()};b.prototype._TextAlignmentChanged=function(a){this._Dirty=this._Layout.SetTextAlignment(a.NewValue);this._InvalidateDirty()};b.prototype._TextTrimmingChanged=function(a){this._Dirty=this._Layout.SetTextTrimming(a.NewValue);this._InvalidateDirty()};b.prototype._TextWrappingChanged=function(a){this._Dirty=this._Layout.SetTextWrapping(a.NewValue);this._InvalidateDirty()};b.prototype._InvalidateDirty=
function(a){a&&(this._Dirty=!0);a=this.LayoutUpdater;this._Dirty&&(a.InvalidateMeasure(),a.InvalidateArrange(),a.UpdateBounds(!0));a.Invalidate()};b.prototype._UpdateFont=function(a){var b=this._Font,c=this.XObject;b.Family=c.FontFamily;b.Stretch=c.FontStretch;b.Style=c.FontStyle;b.Weight=c.FontWeight;b.Size=c.FontSize;return b.IsChanged||a};b.prototype._UpdateFonts=function(a){if(!this._UpdateFont(a))return!1;a=this.LayoutUpdater;a.InvalidateMeasure();a.InvalidateArrange();a.UpdateBounds(!0);return this._Dirty=
!0};b.prototype._UpdateLayoutAttributes=function(){var a=this.XObject,b=a.Inlines,c=this.LayoutUpdater;c.InvalidateMeasure();c.InvalidateArrange();this._UpdateFont(!1);for(var c=0,d=[],e=b.Count,b=b.GetEnumerator();b.MoveNext();)c=this._UpdateLayoutAttributesForInline(b.Current,c,d);0<e&&(this._WasSet=!0);this._Layout.Text=a.Text;this._Layout.TextAttributes=d};b.prototype._UpdateLayoutAttributesForInline=function(a,b,c){if(a instanceof d.Documents.Run){var e=a.Text;e&&e.length&&(c.push(new d.Text.TextLayoutAttributes(a,
b)),b+=e.length)}else if(a instanceof d.Documents.LineBreak)c.push(new d.Text.TextLayoutAttributes(a,b)),b+=1;else if(a instanceof d.Documents.Span)for(a=a.Inlines.GetEnumerator();a.MoveNext();)b=this._UpdateLayoutAttributesForInline(a.Current,b,c);return b};b.prototype._GetTextInternal=function(a){if(!a)return"";var b="";for(a=a.GetEnumerator();a.MoveNext();)b+=a.Current._SerializeText();return b};b.prototype._SetTextInternal=function(a){this._SetsValue=!1;var b=null,c=this.XObject,e=c.Inlines;if(a){var g=
e.Count,k=null;if(0<g&&(b=e.GetValueAt(0))&&b instanceof d.Documents.Run)if(k=b,k.Autogen)for(;1<g;)e.RemoveAt(g-1),g--;else k=null;k||(e.Clear(),k=new d.Documents.Run,k.Autogen=!0,e.Add(k));k.Text=a;d.Providers.InheritedStore.PropagateInheritedOnAdd(c,k.XamlNode)}else e.Clear(),c.Text="";this._SetsValue=!0};b.prototype.InlinesChanged=function(a,b){if(this._SetsValue){var c=this.XObject;b&&d.Providers.InheritedStore.PropagateInheritedOnAdd(c,a.XamlNode);var g=c.Inlines;this._SetsValue=!1;c.SetStoreValue(e.TextProperty,
this._GetTextInternal(g));this._SetsValue=!0;this._UpdateLayoutAttributes();c=this.LayoutUpdater;c.InvalidateMeasure();c.InvalidateArrange();c.UpdateBounds(!0);c.Invalidate()}};return b}(d.FENode);a.TextBlockNode=g;Nullstone.RegisterType(g,"TextBlockNode");var e=function(c){function b(){c.call(this);var a=new d.Documents.InlineCollection;a.AttachTo(this);Object.defineProperty(this,"Inlines",{value:a,writable:!1});a.Listen(this.XamlNode)}__extends(b,c);b.prototype.CreateNode=function(){return new g(this)};
b.prototype._MeasureOverride=function(a,b){var c=size.copyTo(a),d=this.Padding;d&&size.shrinkByThickness(c,d);c=this.XamlNode.Measure(c);d&&size.growByThickness(c,d);return c};b.prototype._ArrangeOverride=function(a,b){var c=size.copyTo(a),d=this.Padding;d&&size.shrinkByThickness(c,d);this.XamlNode.Arrange(c,d);return a};b.prototype.Render=function(a,b,c){a.Save();b.RenderLayoutClip(a);b=this.Padding;c=null;b&&(c=new Point(b.Left,b.Top));this.FlowDirection===d.FlowDirection.RightToLeft&&NotImplemented("TextBlock._Render: Right to left");
this.XamlNode._Layout.Render(a,null,c);a.Restore()};b.prototype.ComputeActualSize=function(a,b){return this.XamlNode.ComputeActualSize(b,this.Padding)};b.prototype.FontChanged=function(a){var b=this.XamlNode;if(a.Property===d.InheritableOwner.TextDecorationsProperty)b._InvalidateDirty();else if(a.Property===d.InheritableOwner.ForegroundProperty){var c=b.LayoutUpdater;a=a.NewValue;this._ForegroundListener&&this._ForegroundListener.Detach();this._ForegroundListener=null;a&&(this._ForegroundListener=
a.Listen(function(a){return c.Invalidate()}));c.Invalidate()}else this.XamlNode._FontChanged(a)};b.PaddingProperty=DependencyProperty.RegisterCore("Padding",function(){return Thickness},b,void 0,function(a,b){return a.XamlNode._InvalidateDirty(!0)});b.FontFamilyProperty=d.InheritableOwner.FontFamilyProperty.ExtendTo(b);b.FontSizeProperty=d.InheritableOwner.FontSizeProperty.ExtendTo(b);b.FontStretchProperty=d.InheritableOwner.FontStretchProperty.ExtendTo(b);b.FontStyleProperty=d.InheritableOwner.FontStyleProperty.ExtendTo(b);
b.FontWeightProperty=d.InheritableOwner.FontWeightProperty.ExtendTo(b);b.ForegroundProperty=d.InheritableOwner.ForegroundProperty.ExtendTo(b);b.TextDecorationsProperty=d.InheritableOwner.TextDecorationsProperty.ExtendTo(b);b.TextProperty=DependencyProperty.Register("Text",function(){return String},b,"",function(a,b){return a.XamlNode._TextChanged(b)});b.LineStackingStrategyProperty=DependencyProperty.RegisterCore("LineStackingStrategy",function(){return new Enum(d.LineStackingStrategy)},b,d.LineStackingStrategy.MaxHeight,
function(a,b){return a.XamlNode._LineStackingStrategyChanged(b)});b.LineHeightProperty=DependencyProperty.RegisterCore("LineHeight",function(){return Number},b,NaN,function(a,b){return a.XamlNode._LineHeightChanged(b)});b.TextAlignmentProperty=DependencyProperty.RegisterCore("TextAlignment",function(){return new Enum(d.TextAlignment)},b,d.TextAlignment.Left,function(a,b){return a.XamlNode._TextAlignmentChanged(b)});b.TextTrimmingProperty=DependencyProperty.RegisterCore("TextTrimming",function(){return new Enum(a.TextTrimming)},
b,a.TextTrimming.None,function(a,b){return a.XamlNode._TextTrimmingChanged(b)});b.TextWrappingProperty=DependencyProperty.RegisterCore("TextWrapping",function(){return new Enum(a.TextWrapping)},b,a.TextWrapping.NoWrap,function(a,b){return a.XamlNode._TextWrappingChanged(b)});b.Annotations={ContentProperty:"Inlines"};return b}(d.FrameworkElement);a.TextBlock=e;Nullstone.RegisterType(e,"TextBlock")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){a[a.Nothing=0]="Nothing";a[a.TextAlignment=1]="TextAlignment";a[a.TextWrapping=2]="TextWrapping";a[a.Selection=3]="Selection";a[a.Brush=4]="Brush";a[a.Font=5]="Font";a[a.Text=6]="Text"})(a.TextBoxModelChangedType||(a.TextBoxModelChangedType={}));var g=a.TextBoxModelChangedType;(function(a){a[a.NOTHING=0]="NOTHING";a[a.SELECTION=1]="SELECTION";a[a.TEXT=2]="TEXT"})(a.TextBoxEmitChangedType||(a.TextBoxEmitChangedType={}));var e=a.TextBoxEmitChangedType,c=d.Input.Key,
b=function(b){function h(a,c){b.call(this);this._Undo=[];this._Redo=[];this._Buffer="";this._Emit=e.NOTHING;this._Captured=this._Selecting=this._NeedIMReset=!1;this._SettingValue=!0;this._SelectionAnchor=this._SelectionCursor=0;this._Font=new Font;this._Batch=this._CursorOffset=0;this.$AcceptsReturn=this.$IsFocused=this.$IsReadOnly=!1;this.$MaxLength=0;this.$HasOffset=!1;this._ModelListener=null;this._EventsMask=a;this._TextProperty=c}__extends(h,b);Object.defineProperty(h.prototype,"Cursor",{get:function(){var a=
this.GetValue(d.FrameworkElement.CursorProperty);return a===d.CursorType.Default?d.CursorType.IBeam:a},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"SelectionCursor",{get:function(){return this._SelectionCursor},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"HasSelectedText",{get:function(){return this._SelectionCursor!==this._SelectionAnchor},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"CaretBrush",{get:function(){},enumerable:!0,configurable:!0});
Object.defineProperty(h.prototype,"TextAlignment",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"TextWrapping",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"SelectionStart",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"SelectionLength",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"DisplayText",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"SelectionBackground",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"Background",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"SelectionForeground",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"Foreground",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"Font",{get:function(){return this._Font},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"Direction",{get:function(){},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"TextDecorations",{get:function(){return d.TextDecorations.None},enumerable:!0,configurable:!0});h.prototype.OnApplyTemplate=function(){b.prototype.OnApplyTemplate.call(this);var c=this.$ContentElement=this.GetTemplateChild("ContentElement");if(c){var d=this.$View;d&&d.SetTextBox(null);d=this.$View=new a.Internal.TextBoxView;d.SetEnableCursor(!this.$IsReadOnly);d.SetTextBox(this);c instanceof a.ContentPresenter?
c.SetValue(a.ContentPresenter.ContentProperty,d):c instanceof a.ContentControl?c.SetValue(a.ContentControl.ContentProperty,d):c instanceof a.Border?c.SetValue(a.Border.ChildProperty,d):c instanceof a.Panel?c.Children.Add(d):(Warn("TextBox does not have a valid content element."),d.SetTextBox(null),this.$View=null)}};h.prototype.Listen=function(a){this._ModelListener=a};h.prototype.Unlisten=function(a){this._ModelListener===a&&(this._ModelListener=null)};h.prototype._ModelChanged=function(a,b){var c=
this._ModelListener;c&&c.OnTextModelChanged({Changed:a,NewValue:b})};h.prototype._SelectedTextChanged=function(a){if(this._SettingValue&&(a=a||"")){var b=Math.abs(this._SelectionCursor-this._SelectionAnchor),c=Math.min(this._SelectionAnchor,this._SelectionCursor),f;0<b?(f=new d.Text.TextBoxUndoActionReplace(this._SelectionAnchor,this._SelectionCursor,this._Buffer,c,b,a),this._Buffer=d.Text.TextBuffer.Replace(this._Buffer,c,b,a)):0<a.length&&(f=new d.Text.TextBoxUndoActionInsert(this._SelectionAnchor,
this._SelectionCursor,c,a),this._Buffer=d.Text.TextBuffer.Insert(this._Buffer,c,a));f&&(this._Emit|=e.TEXT,this._Undo.push(f),this._Redo=[],this.ClearSelection(c+a.length),this._ResetIMContext(),this._SyncAndEmit())}};h.prototype._SelectionStartChanged=function(a){var b=g.Nothing,c=Math.abs(this._SelectionCursor-this._SelectionAnchor);a>this._Buffer.length?this.SelectionStart=this._Buffer.length:(a+c>this._Buffer.length&&(this._BatchPush(),this.SelectionLength=c=this._Buffer.length-a,this._BatchPop()),
this._SelectionAnchor!=a&&(b=g.Selection,this.$HasOffset=!1),this._SelectionCursor=a+c,this._SelectionAnchor=a,this._Emit|=e.SELECTION,this._SyncAndEmit(),b!==g.Nothing&&this._ModelChanged(b,a))};h.prototype._SelectionLengthChanged=function(a){var b=g.Nothing,c=Math.min(this._SelectionAnchor,this._SelectionCursor),d=a;c+d>this._Buffer.length?this.SelectionLength=d=this._Buffer.length-c:(this._SelectionCursor!=c+d&&(b=g.Selection,this.$HasOffset=!1),this._SelectionCursor=c+d,this._SelectionAnchor=
c,this._Emit|=e.SELECTION,this._SyncAndEmit(),b!==g.Nothing&&this._ModelChanged(b,a))};h.prototype._TextChanged=function(a){var b=a||"";if(this._SettingValue&&b){var c;0<this._Buffer.length?(c=new d.Text.TextBoxUndoActionReplace(this._SelectionAnchor,this._SelectionCursor,this._Buffer,0,this._Buffer.length,b),this._Buffer=d.Text.TextBuffer.Replace(this._Buffer,0,this._Buffer.length,b)):(c=new d.Text.TextBoxUndoActionInsert(this._SelectionAnchor,this._SelectionCursor,0,b),this._Buffer=b+this._Buffer);
this._Undo.push(c);this._Redo=[];this._Emit|=e.TEXT;this.ClearSelection(0);this._ResetIMContext();this._SyncAndEmit(!1)}this._ModelChanged(g.Text,a)};h.prototype._BatchPush=function(){this._Batch++};h.prototype._BatchPop=function(){1>this._Batch?Warn("TextBoxBase._Batch underflow"):this._Batch--};h.prototype._SyncAndEmit=function(a){void 0===a&&(a=!0);0==this._Batch&&this._Emit!==e.NOTHING&&(a&&this._Emit&e.TEXT&&this._SyncText(),this._Emit&e.SELECTION&&this._SyncSelectedText(),this.XamlNode.IsLoaded&&
(this._Emit&=this._EventsMask,this._Emit&e.TEXT&&this._EmitTextChanged(),this._Emit&e.SELECTION&&this._EmitSelectionChanged()),this._Emit=e.NOTHING)};h.prototype._SyncText=function(){this._SettingValue=!1;this.SetStoreValue(this._TextProperty,this._Buffer);this._SettingValue=!0};h.prototype._EmitTextChanged=function(){};h.prototype.SelectAll=function(){this.Select(0,this._Buffer.length)};h.prototype.ClearSelection=function(a){this._BatchPush();this.SelectionStart=a;this.SelectionLength=0;this._BatchPop()};
h.prototype.Select=function(a,b){if(0>a)throw new ArgumentException("start < 0");if(0>b)throw new ArgumentException("length < 0");a>this._Buffer.length&&(a=this._Buffer.length);b>this._Buffer.length-a&&(b=this._Buffer.length-a);this._BatchPush();this.SelectionStart=a;this.SelectionLength=b;this._BatchPop();this._ResetIMContext();this._SyncAndEmit();return!0};h.prototype._SyncSelectedText=function(){if(this._SelectionCursor!==this._SelectionAnchor){var a=Math.min(this._SelectionAnchor,this._SelectionCursor),
b=Math.abs(this._SelectionCursor-this._SelectionAnchor),a=this._Buffer?this._Buffer.substr(a,b):"";this._SettingValue=!1;this._SelectedText=a;this._SelectedTextChanged(a)}else this._SettingValue=!1,this._SelectedText="",this._SelectedTextChanged("");this._SettingValue=!0};h.prototype._EmitSelectionChanged=function(){};h.prototype._ResetIMContext=function(){this._NeedIMReset&&(this._NeedIMReset=!1)};h.prototype.CanUndo=function(){return 0<this._Undo.length};h.prototype.Undo=function(){if(!(1>this._Undo.length)){var a=
this._Undo.pop();10<this._Redo.push(a)&&this._Redo.shift();a.Undo(this);var b=a.SelectionAnchor,a=a.SelectionCursor;this._BatchPush();this.SelectionStart=Math.min(b,a);this.SelectionLength=Math.abs(a-b);this._Emit=e.TEXT|e.SELECTION;this._SelectionAnchor=b;this._SelectionCursor=a;this._BatchPop();this._SyncAndEmit()}};h.prototype.CanRedo=function(){return 0<this._Redo.length};h.prototype.Redo=function(){if(!(1>this._Redo.length)){var a=this._Redo.pop();10<this._Undo.push(a)&&this._Undo.shift();a=
a.Redo(this);this._BatchPush();this.SelectionStart=Math.min(a,a);this.SelectionLength=Math.abs(a-a);this._Emit=e.TEXT|e.SELECTION;this._SelectionCursor=this._SelectionAnchor=a;this._BatchPop();this._SyncAndEmit()}};h.prototype.OnLostFocus=function(a){this.$IsFocused=!1;this.$View&&this.$View.OnLostFocus(a);this.$IsReadOnly||(this._NeedIMReset=!0)};h.prototype.OnGotFocus=function(a){this.$IsFocused=!0;this.$View&&this.$View.OnGotFocus(a);this.$IsReadOnly||(this._NeedIMReset=!0)};h.prototype.OnMouseLeftButtonDown=
function(a){a.Handled=!0;this.Focus();this.$View&&(a=a.GetPosition(this.$View),a=this.$View.GetCursorFromXY(a.X,a.Y),this._ResetIMContext(),this._Captured=this.CaptureMouse(),this._Selecting=!0,this._BatchPush(),this._Emit=e.NOTHING,this.SelectionStart=a,this.SelectionLength=0,this._BatchPop(),this._SyncAndEmit())};h.prototype.OnMouseLeftButtonUp=function(a){this._Captured&&this.ReleaseMouseCapture();a.Handled=!0;this._Captured=this._Selecting=!1};h.prototype.OnMouseMove=function(a){var b=this._SelectionAnchor,
c=this._SelectionCursor;this._Selecting&&(c=a.GetPosition(this.$View),a.Handled=!0,c=this.$View.GetCursorFromXY(c.X,c.Y),this._BatchPush(),this._Emit=e.NOTHING,this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._BatchPop(),this._SyncAndEmit())};h.prototype.CursorDown=function(a,b){return a};h.prototype.CursorUp=function(a,b){return a};h.prototype.CursorNextWord=function(a){return a};h.prototype.CursorPrevWord=function(a){return a};
h.prototype.CursorLineBegin=function(a){return a};h.prototype.CursorLineEnd=function(a){return a};h.prototype._EmitCursorPositionChanged=function(a,b,c){};h.prototype.OnKeyDown=function(a){switch(a.Key){case c.Shift:case c.Ctrl:case c.Alt:return}var b=!1;this._Emit=e.NOTHING;this._BatchPush();switch(a.Key){case c.Back:if(this.$IsReadOnly)break;b=this._KeyDownBackSpace(a.Modifiers);break;case c.Delete:if(this.$IsReadOnly)break;b=a.Modifiers.Shift?!0:this._KeyDownDelete(a.Modifiers);break;case c.Insert:a.Modifiers.Shift?
b=!0:a.Modifiers.Ctrl&&(b=!0);break;case c.PageDown:b=this._KeyDownPageDown(a.Modifiers);break;case c.PageUp:b=this._KeyDownPageUp(a.Modifiers);break;case c.Home:b=this._KeyDownHome(a.Modifiers);break;case c.End:b=this._KeyDownEnd(a.Modifiers);break;case c.Left:b=this._KeyDownLeft(a.Modifiers);break;case c.Right:b=this._KeyDownRight(a.Modifiers);break;case c.Down:b=this._KeyDownDown(a.Modifiers);break;case c.Up:b=this._KeyDownUp(a.Modifiers);break;default:if(a.Modifiers.Ctrl)switch(a.Key){case c.A:b=
!0;this.SelectAll();break;case c.C:b=!0;break;case c.X:if(this.$IsReadOnly)break;this._SelectedText="";this._SelectedTextChanged("");b=!0;break;case c.Y:this.$IsReadOnly||(b=!0,this.Redo());break;case c.Z:this.$IsReadOnly||(b=!0,this.Undo())}}b&&(a.Handled=b,this._ResetIMContext());this._BatchPop();this._SyncAndEmit();a.Handled||this.PostOnKeyDown(a)};h.prototype.PostOnKeyDown=function(a){a.Handled||(this.$IsReadOnly||a.Modifiers.Alt||a.Modifiers.Ctrl)||(this._Emit=e.NOTHING,this._BatchPush(),a.Key===
c.Enter?this._KeyDownChar("\r"):null==a.Char||(a.Modifiers.Ctrl||a.Modifiers.Alt)||this._KeyDownChar(a.Char),this._BatchPop(),this._SyncAndEmit())};h.prototype._KeyDownBackSpace=function(a){if(a.Shift||a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,f=0,h=0;c!==b?(h=Math.abs(c-b),f=Math.min(b,c)):a.Ctrl?(f=this.CursorPrevWord(c),h=c-f):0<c&&(2<=c&&this._Buffer&&"\r"===this._Buffer.charAt(c-2)&&"\n"===this._Buffer.charAt(c-1)?(f=c-2,h=2):(f=c-1,h=1));0<h&&(this._Undo.push(new d.Text.TextBoxUndoActionDelete(this._SelectionAnchor,
this._SelectionCursor,this._Buffer,f,h)),this._Redo=[],this._Buffer=d.Text.TextBuffer.Cut(this._Buffer,f,h),this._Emit|=e.TEXT,c=b=f);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION;return!0};h.prototype._KeyDownDelete=function(a){if(a.Shift||a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,f=0,h=0,g=!1;c!==b?(h=Math.abs(c-b),f=Math.min(b,
c)):a.Ctrl?(h=this.CursorNextWord(c)-c,f=c):this._Buffer&&c<this._Buffer.length&&(h="\r"===this._Buffer.charAt(c)&&"\n"===this._Buffer.charAt(c+1)?2:1,f=c);0<h&&(this._Undo.push(new d.Text.TextBoxUndoActionDelete(this._SelectionAnchor,this._SelectionCursor,this._Buffer,f,h)),this._Redo=[],this._Buffer=d.Text.TextBuffer.Cut(this._Buffer,f,h),this._Emit|=e.TEXT,g=!0);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=
b,this._SelectionCursor=c,this._Emit|=e.SELECTION,g=!0;return g};h.prototype._KeyDownPageDown=function(a){if(a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,c=this.CursorDown(c,!0),d=this.$HasOffset;a.Shift||(b=c);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,this.$HasOffset=d;return!0};h.prototype._KeyDownPageUp=function(a){if(a.Alt)return!1;
var b=this._SelectionAnchor,c=this._SelectionCursor,c=this.CursorUp(c,!0),d=this.$HasOffset;a.Shift||(b=c);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,this.$HasOffset=d;return!0};h.prototype._KeyDownHome=function(a){if(a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,d=!1,c=a.Ctrl?0:this.CursorLineBegin(c);a.Shift||(b=c);if(this._SelectionAnchor!==
b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,this.$HasOffset=!1,d=!0;return d};h.prototype._KeyDownEnd=function(a){if(a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,d=!1,c=a.Ctrl?this._Buffer.length:this.CursorLineEnd(c);a.Shift||(b=c);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-
b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,this.$HasOffset=!1,d=!0;return d};h.prototype._KeyDownLeft=function(a){if(a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,d=!1;a.Ctrl?c=this.CursorPrevWord(c):a.Shift||b===c?2<=c&&this._Buffer&&"\r"===this._Buffer.charAt(c-2)&&"\n"===this._Buffer.charAt(c-1)?c-=2:0<c&&c--:c=Math.min(b,c);a.Shift||(b=c);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=
Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,d=!0;return d};h.prototype._KeyDownRight=function(a){if(a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,d=!1;a.Ctrl?c=this.CursorNextWord(c):a.Shift||b===c?this._Buffer&&"\r"===this._Buffer.charAt(c)&&"\n"===this._Buffer.charAt(c+1)?c+=2:c<this._Buffer.length&&c++:c=Math.max(b,c);a.Shift||(b=c);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=
Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,d=!0;return d};h.prototype._KeyDownDown=function(a){if(a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,d=!1,c=this.CursorDown(c,!1),f=this.$HasOffset;a.Shift||(b=c);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,this.$HasOffset=f,d=!0;return d};h.prototype._KeyDownUp=
function(a){if(a.Alt)return!1;var b=this._SelectionAnchor,c=this._SelectionCursor,d=!1,c=this.CursorUp(c,!1),f=this.$HasOffset;a.Shift||(b=c);if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION,this.$HasOffset=f,d=!0;return d};h.prototype._KeyDownChar=function(a){var b=this._SelectionAnchor,c=this._SelectionCursor,f=Math.abs(c-b),h=Math.min(b,c);if(0<this.$MaxLength&&
this._Buffer.length>=this.$MaxLength||"\r"===a&&!this.$AcceptsReturn)return!1;if(0<f)this._Undo.push(new d.Text.TextBoxUndoActionReplace(b,c,this._Buffer,h,f,a)),this._Redo=[],this._Buffer=d.Text.TextBuffer.Replace(this._Buffer,h,f,a);else{var f=null,g=this._Undo[this._Undo.length-1];g instanceof d.Text.TextBoxUndoActionInsert&&(f=g,f.Insert(h,a)||(f=null));f||(f=new d.Text.TextBoxUndoActionInsert(b,c,h,a),this._Undo.push(f));this._Redo=[];this._Buffer=d.Text.TextBuffer.Insert(this._Buffer,h,a)}this._Emit|=
e.TEXT;b=c=h+1;if(this._SelectionAnchor!==b||this._SelectionCursor!==c)this.SelectionStart=Math.min(b,c),this.SelectionLength=Math.abs(c-b),this._SelectionAnchor=b,this._SelectionCursor=c,this._Emit|=e.SELECTION;return!0};return h}(a.Control);a.TextBoxBase=b;Nullstone.RegisterType(b,"TextBoxBase")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(a){function c(d){a.call(this,d)}__extends(c,a);return c}(d.FENode);g.TextBoxViewNode=e;Nullstone.RegisterType(e,"TextBoxViewNode");var c=function(b){function c(){b.apply(this,arguments);this._Cursor=new rect;this._Layout=new d.Text.TextLayout;this._CursorVisible=this._HadSelectedText=this._SelectionChanged=!1;this._EnableCursor=!0;this._BlinkTimeout=0;this._TextBox=null;this._Dirty=!1}__extends(c,b);c.prototype.CreateNode=function(){return new e(this)};
c.prototype.SetTextBox=function(a){this._TextBox!==a&&(this._TextBox&&this._TextBox.Unlisten(this),(this._TextBox=a)?(a.Listen(this),this._Layout.TextAttributes=[new d.Text.TextLayoutAttributes(a)],this._Layout.TextAlignment=a.TextAlignment,this._Layout.TextWrapping=a.TextWrapping,this._HadSelectedText=a.HasSelectedText,this._SelectionChanged=!0,this._UpdateText()):(this._Layout.TextAttributes=null,this._Layout.Text=null),a=this.XamlNode.LayoutUpdater,a.UpdateBounds(!0),a.InvalidateMeasure(),a.Invalidate(),
this._Dirty=!0)};c.prototype.SetEnableCursor=function(a){this._EnableCursor!==a&&((this._EnableCursor=a)?this._ResetCursorBlink(!1):this._EndCursorBlink())};c.prototype._Blink=function(){var a;this._CursorVisible?(a=2,this._HideCursor()):(a=4,this._ShowCursor());this._ConnectBlinkTimeout(a);return!1};c.prototype._ConnectBlinkTimeout=function(a){var b=this;this.XamlNode.IsAttached&&(a=this._GetCursorBlinkTimeout()*a/3,this._BlinkTimeout=setTimeout(function(){return b._Blink()},a))};c.prototype._DisconnectBlinkTimeout=
function(){0!==this._BlinkTimeout&&this.XamlNode.IsAttached&&(clearTimeout(this._BlinkTimeout),this._BlinkTimeout=0)};c.prototype._GetCursorBlinkTimeout=function(){return 900};c.prototype._ResetCursorBlink=function(a){this._TextBox.$IsFocused&&!this._TextBox.HasSelectedText?this._EnableCursor?a?this._DelayCursorBlink():this._BeginCursorBlink():this._UpdateCursor(!1):this._EndCursorBlink()};c.prototype._DelayCursorBlink=function(){this._DisconnectBlinkTimeout();this._ConnectBlinkTimeout(3);this._UpdateCursor(!0);
this._ShowCursor()};c.prototype._BeginCursorBlink=function(){0===this._BlinkTimeout&&(this._ConnectBlinkTimeout(4),this._UpdateCursor(!0),this._ShowCursor())};c.prototype._EndCursorBlink=function(){this._DisconnectBlinkTimeout();this._CursorVisible&&this._HideCursor()};c.prototype._InvalidateCursor=function(){var a=this.XamlNode.LayoutUpdater;a.Invalidate(rect.transform(this._Cursor,a.AbsoluteXform))};c.prototype._ShowCursor=function(){this._CursorVisible=!0;this._InvalidateCursor()};c.prototype._HideCursor=
function(){this._CursorVisible=!1;this._InvalidateCursor()};c.prototype._UpdateCursor=function(a){var b=this._TextBox.SelectionCursor,c=this._Cursor;a&&this._CursorVisible&&this._InvalidateCursor();this._Cursor=this._Layout.GetSelectionCursor(null,b);rect.isEqual(this._Cursor,c)||this._TextBox._EmitCursorPositionChanged(this._Cursor.Height,this._Cursor.X,this._Cursor.Y);a&&this._CursorVisible&&this._InvalidateCursor()};c.prototype._UpdateText=function(){var a=this._TextBox.DisplayText;this._Layout.Text=
a?a:"";-1};c.prototype.ComputeActualSize=function(a,b){if(void 0!==b.LayoutSlot)return a.call(b);this.Layout(size.createInfinite());return this._Layout.ActualExtents};c.prototype._MeasureOverride=function(a,b){this.Layout(a);var c=size.copyTo(this._Layout.ActualExtents);isFinite(a.Width)||(c.Width=Math.max(c.Width,11));size.min(c,a);return c};c.prototype._ArrangeOverride=function(a,b){this.Layout(a);var c=size.copyTo(this._Layout.ActualExtents);size.max(c,a);return c};c.prototype.Layout=function(a){this._Layout.MaxWidth=
a.Width;this._Layout.Layout();this._Dirty=!1};c.prototype.GetBaselineOffset=function(){return this._Layout.GetBaselineOffset()};c.prototype.GetLineFromY=function(a){return this._Layout.GetLineFromY(null,a)};c.prototype.GetLineFromIndex=function(a){return this._Layout.GetLineFromIndex(a)};c.prototype.GetCursorFromXY=function(a,b){return this._Layout.GetCursorFromXY(null,a,b)};c.prototype.Render=function(a,b,c){var d=b.RenderSize;this._UpdateCursor(!1);this._SelectionChanged&&(this._Layout.Select(this._TextBox.SelectionStart,
this._TextBox.SelectionLength),this._SelectionChanged=!1);a.Save();b.RenderLayoutClip(a);this._Layout.AvailableWidth=d.Width;this._RenderImpl(a,c);a.Restore()};c.prototype._RenderImpl=function(a,b){a.Save();this._Layout.Render(a);if(this._CursorVisible){var c=a.CanvasContext,d=this._Cursor;c.beginPath();c.moveTo(d.X+0.5,d.Y);c.lineTo(d.X+0.5,d.Y+d.Height);c.lineWidth=1;var f=this._TextBox.CaretBrush;f?(f.SetupBrush(c,d),c.strokeStyle=f.ToHtml5Object()):c.strokeStyle="#000000";c.stroke()}a.Restore()};
c.prototype.OnLostFocus=function(a){this._EndCursorBlink()};c.prototype.OnGotFocus=function(a){this._ResetCursorBlink(!1)};c.prototype.OnMouseLeftButtonDown=function(a){this._TextBox.OnMouseLeftButtonDown(a)};c.prototype.OnMouseLeftButtonUp=function(a){this._TextBox.OnMouseLeftButtonUp(a)};c.prototype.OnTextModelChanged=function(b){var c=this.XamlNode.LayoutUpdater;switch(b.Changed){case a.TextBoxModelChangedType.TextAlignment:this._Layout.SetTextAlignment(b.NewValue)&&(this._Dirty=!0);break;case a.TextBoxModelChangedType.TextWrapping:this._Layout.SetTextWrapping(b.NewValue)&&
(this._Dirty=!0);break;case a.TextBoxModelChangedType.Selection:if(this._HadSelectedText||this._TextBox.HasSelectedText)this._HadSelectedText=this._TextBox.HasSelectedText,this._SelectionChanged=!0,this._ResetCursorBlink(!1);else{this._ResetCursorBlink(!0);return}break;case a.TextBoxModelChangedType.Brush:break;case a.TextBoxModelChangedType.Font:this._Layout.ResetState();this._Dirty=!0;break;case a.TextBoxModelChangedType.Text:this._UpdateText();this._Dirty=!0;break;default:return}this._Dirty&&(c.InvalidateMeasure(),
c.UpdateBounds(!0));c.Invalidate()};return c}(d.FrameworkElement);g.TextBoxView=c;Nullstone.RegisterType(c,"TextBoxView")})(a.Internal||(a.Internal={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function b(b){a.call(this,b);this._IsParsing=!1;this.LayoutUpdater.BreaksLayoutClipRender=!0;this.LayoutUpdater.SetContainerMode(!0)}__extends(b,a);b.prototype.GetDefaultTemplate=function(){var a=this.XObject.constructor.__TemplateJson;if(a)return this._IsParsing=!0,d.JsonParser.ParseUserControl(a,this)};return b}(a.ControlNode);a.UCNode=g;Nullstone.RegisterType(g,"UCNode");var e=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.CreateNode=
function(){return new g(this)};b.prototype.InitializeComponent=function(){this.ApplyTemplate()};b.prototype._InvalidateContent=function(a){var b=this.XamlNode;if(!b._IsParsing){var c=new BError;a.OldValue instanceof d.UIElement&&b.DetachVisualChild(a.OldValue,c);a.NewValue instanceof d.UIElement&&b.AttachVisualChild(a.NewValue,c);c.Message&&c.ThrowException();b.LayoutUpdater.UpdateBounds()}};b.prototype._MeasureOverride=function(a,b){var c;a=size.copyTo(a);var d=this.Padding,e=this.BorderThickness,
g=null;(g=d?e?d.Plus(e):d:e)&&size.shrinkByThickness(a,g);for(d=this.XamlNode.GetVisualTreeEnumerator();d.MoveNext();)c=d.Current.LayoutUpdater,c._Measure(a,b),c=size.copyTo(c.DesiredSize);c||(c=new size);g&&size.growByThickness(c,g);return c};b.prototype._ArrangeOverride=function(a,b){for(var c=this.Padding,d=this.BorderThickness,e=null,e=c?d?c.Plus(d):c:d,d=null,c=this.XamlNode.GetVisualTreeEnumerator();c.MoveNext();){var d=c.Current.LayoutUpdater,g=rect.fromSize(a);e&&rect.shrinkByThickness(g,
e);d._Arrange(g,b);d=size.fromRect(g);e&&size.growByThickness(d,e)}return d?d:a};b.ContentProperty=DependencyProperty.Register("Content",function(){return Object},b,void 0,function(a,b){return a._InvalidateContent(b)});b.Annotations={ContentProperty:b.ContentProperty};return b}(a.Control);a.UserControl=e;Nullstone.RegisterType(e,"UserControl")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.apply(this,arguments);this._ICG=null}__extends(c,e);Object.defineProperty(c.prototype,"ItemContainerGenerator",{get:function(){return this._ICG=this._ICG||this.CreateItemContainerGenerator()},enumerable:!0,configurable:!0});c.prototype.CreateItemContainerGenerator=function(){var b=a.ItemsControl.GetItemsOwner(this);if(!b)throw new InvalidOperationException("VirtualizingPanels must be in the Template of an ItemsControl in order to generate items");
b=b.ItemContainerGenerator;b.ItemsChanged.Subscribe(this.OnItemContainerGeneratorChanged,this);return b};c.prototype.AddInternalChild=function(a){this.Children.Add(a)};c.prototype.InsertInternalChild=function(a,c){this.Children.Insert(a,c)};c.prototype.RemoveInternalChildRange=function(a,c){for(var d=this.Children,e=0;e<c;e++)d.RemoveAt(a)};c.prototype.BringIndexIntoView=function(a){};c.prototype.OnClearChildren=function(){};c.prototype.OnItemContainerGeneratorChanged=function(a,c){this.XamlNode.LayoutUpdater.InvalidateMeasure();
c.Action===d.Collections.NotifyCollectionChangedAction.Reset&&(this.Children.Clear(),this.ItemContainerGenerator.RemoveAll(),this.OnClearChildren())};return c}(a.Panel);a.VirtualizingPanel=g;Nullstone.RegisterType(g,"VirtualizingPanel")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){a[a.Standard=0]="Standard";a[a.Recycling=1]="Recycling"})(a.VirtualizationMode||(a.VirtualizationMode={}));var g=a.VirtualizationMode,e=function(a){function c(d,f){a.call(this);this.Cancel=!1;Object.defineProperty(this,"UIElement",{value:d,writable:!1});Object.defineProperty(this,"Value",{value:f,writable:!1})}__extends(c,a);return c}(d.RoutedEventArgs);a.CleanUpVirtualizedItemEventArgs=e;var c=function(b){function c(){b.apply(this,arguments);this._CanVerticallyScroll=
this._CanHorizontallyScroll=!1;this._ViewportHeight=this._ViewportWidth=this._ExtentHeight=this._ExtentWidth=this._VerticalOffset=this._HorizontalOffset=0;this.CleanUpVirtualizedItemEvent=new d.RoutedEvent}__extends(c,b);Object.defineProperty(c.prototype,"CanHorizontallyScroll",{get:function(){return this._CanHorizontallyScroll},set:function(a){this._CanHorizontallyScroll=a;this.XamlNode.LayoutUpdater.InvalidateMeasure()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"CanVerticallyScroll",
{get:function(){return this._CanVerticallyScroll},set:function(a){this._CanVerticallyScroll=a;this.XamlNode.LayoutUpdater.InvalidateMeasure()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ExtentWidth",{get:function(){return this._ExtentWidth},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ExtentHeight",{get:function(){return this._ExtentHeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ViewportWidth",{get:function(){return this._ViewportWidth},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ViewportHeight",{get:function(){return this._ViewportHeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"HorizontalOffset",{get:function(){return this._HorizontalOffset},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"VerticalOffset",{get:function(){return this._VerticalOffset},enumerable:!0,configurable:!0});c.prototype.LineUp=function(){this.Orientation===d.Orientation.Horizontal?this.SetVerticalOffset(this._VerticalOffset-
14.7):this.SetVerticalOffset(this._VerticalOffset-1)};c.prototype.LineDown=function(){this.Orientation===d.Orientation.Horizontal?this.SetVerticalOffset(this._VerticalOffset+14.7):this.SetVerticalOffset(this._VerticalOffset+1)};c.prototype.LineLeft=function(){this.Orientation===d.Orientation.Vertical?this.SetHorizontalOffset(this._HorizontalOffset-14.7):this.SetHorizontalOffset(this._HorizontalOffset-1)};c.prototype.LineRight=function(){this.Orientation===d.Orientation.Vertical?this.SetHorizontalOffset(this._HorizontalOffset+
14.7):this.SetHorizontalOffset(this._HorizontalOffset+1)};c.prototype.MouseWheelUp=function(){this.Orientation===d.Orientation.Horizontal?this.SetVerticalOffset(this._VerticalOffset-14.7*3):this.SetVerticalOffset(this._VerticalOffset-3)};c.prototype.MouseWheelDown=function(){this.Orientation===d.Orientation.Horizontal?this.SetVerticalOffset(this._VerticalOffset+14.7*3):this.SetVerticalOffset(this._VerticalOffset+3)};c.prototype.MouseWheelLeft=function(){this.Orientation===d.Orientation.Vertical?this.SetHorizontalOffset(this._HorizontalOffset-
14.7*3):this.SetHorizontalOffset(this._HorizontalOffset-3)};c.prototype.MouseWheelRight=function(){this.Orientation===d.Orientation.Vertical?this.SetHorizontalOffset(this._HorizontalOffset+14.7*3):this.SetHorizontalOffset(this._HorizontalOffset+3)};c.prototype.PageUp=function(){this.SetVerticalOffset(this._VerticalOffset-this._ViewportHeight)};c.prototype.PageDown=function(){this.SetVerticalOffset(this._VerticalOffset+this._ViewportHeight)};c.prototype.PageLeft=function(){this.SetHorizontalOffset(this._HorizontalOffset-
this._ViewportWidth)};c.prototype.PageRight=function(){this.SetHorizontalOffset(this._HorizontalOffset+this._ViewportWidth)};c.prototype.MakeVisible=function(a,b){for(var c=new rect,f=a.XamlNode,e=this.Orientation===d.Orientation.Vertical,g=this.Children.GetEnumerator();g.MoveNext();){var l=g.Current.XamlNode,q=l.LayoutUpdater.RenderSize;if(f===l)return e?(b.X!==this._HorizontalOffset&&this.SetHorizontalOffset(b.X),c.Width=Math.min(q.Width,this._ViewportWidth),c.Height=q.Height,c.X=this._HorizontalOffset):
(b.Y!==this._VerticalOffset&&this.SetVerticalOffset(b.Y),c.Height=Math.min(q.Height,this._ViewportHeight),c.Width=q.Width,c.Y=this._VerticalOffset),c;e?c.Y+=q.Height:c.X+=q.Width}throw new ArgumentException("Visual is not a child of this Panel");};c.prototype.SetHorizontalOffset=function(a){0>a||this._ViewportWidth>=this._ExtentWidth?a=0:a+this._ViewportWidth>=this._ExtentWidth&&(a=this._ExtentWidth-this._ViewportWidth);this._HorizontalOffset!==a&&(this._HorizontalOffset=a,this.Orientation===d.Orientation.Horizontal?
this.XamlNode.LayoutUpdater.InvalidateMeasure():this.XamlNode.LayoutUpdater.InvalidateArrange(),(a=this.ScrollOwner)&&a.InvalidateScrollInfo())};c.prototype.SetVerticalOffset=function(a){0>a||this._ViewportHeight>=this._ExtentHeight?a=0:a+this._ViewportHeight>=this._ExtentHeight&&(a=this._ExtentHeight-this._ViewportHeight);this._VerticalOffset!==a&&(this._VerticalOffset=a,this.Orientation===d.Orientation.Vertical?this.XamlNode.LayoutUpdater.InvalidateMeasure():this.XamlNode.LayoutUpdater.InvalidateArrange(),
(a=this.ScrollOwner)&&a.InvalidateScrollInfo())};c.GetIsVirtualizing=function(a){return a.GetValue(c.IsVirtualizingProperty)};c.SetIsVirtualizing=function(a,b){a.SetValue(c.IsVirtualizingProperty,b)};c.GetVirtualizationMode=function(a){return a.GetValue(c.VirtualizationModeProperty)};c.SetVirtualizationMode=function(a,b){a.SetValue(c.VirtualizationModeProperty,b)};c.prototype._MeasureOverride=function(b,e){var g=a.ItemsControl.GetItemsOwner(this),p=new size,k=!1,m=0,l=0,q,r=this.Orientation===d.Orientation.Horizontal;
q=r?Math.floor(this._HorizontalOffset):Math.floor(this._VerticalOffset);var t=g.Items.Count,u=this.ItemContainerGenerator;if(0<t){var x=this.Children,v=size.copyTo(b);if(this._CanHorizontallyScroll||r)v.Width=Number.POSITIVE_INFINITY;if(this._CanVerticallyScroll||!r)v.Height=Number.POSITIVE_INFINITY;var A=u.GeneratorPositionFromIndex(q),y=0===A.Offset?A.Index:A.Index+1,A=u.StartAt(A,!0,!0);try{for(var w={Value:!1},z,B,D=0;D<t&&2>l;D++,y++){z=u.GenerateNext(w);B=z.XamlNode.LayoutUpdater;if(w.Value||
y>=x.Count||x.GetValueAt(y)!==z)y<x.Count?this.InsertInternalChild(y,z):this.AddInternalChild(z),u.PrepareItemContainer(z);z.Measure(v);var C=B.DesiredSize;m++;r?(p.Height=Math.max(p.Height,C.Height),p.Width+=C.Width,p.Width>b.Width&&l++):(p.Width=Math.max(p.Width,C.Width),p.Height+=C.Height,p.Height>b.Height&&l++)}}finally{A.Dispose()}}c.SetIsVirtualizing(g,!0);0<m&&this.RemoveUnusedContainers(q,m);m-=l;r?(this._ExtentHeight!==p.Height&&(this._ExtentHeight=p.Height,k=!0),this._ExtentWidth!==t&&(this._ExtentWidth=
t,k=!0),this._ViewportHeight!==b.Height&&(this._ViewportHeight=b.Height,k=!0),this._ViewportWidth!==m&&(this._ViewportWidth=m,k=!0)):(this._ExtentHeight!==t&&(this._ExtentHeight=t,k=!0),this._ExtentWidth!==p.Width&&(this._ExtentWidth=p.Width,k=!0),this._ViewportHeight!==m&&(this._ViewportHeight=m,k=!0),this._ViewportWidth!=b.Width&&(this._ViewportWidth=b.Width,k=!0));g=this.ScrollOwner;k&&null!=g&&g.InvalidateScrollInfo();return p};c.prototype._ArrangeOverride=function(a,b){var c=size.copyTo(a),f=
this.Orientation===d.Orientation.Horizontal;f?c.Width=0:c.Height=0;for(var e=this.Children.GetEnumerator();e.MoveNext();){var g=e.Current.XamlNode,l=g.LayoutUpdater,q=l.DesiredSize;if(f)q.Height=a.Height,r=rect.fromSize(q),rect.isEmpty(r)?rect.clear(r):(r.X=c.Width,r.Y=-this._VerticalOffset),g.XObject.Arrange(r),c.Width+=q.Width,c.Height=Math.max(c.Height,q.Height);else{q.Width=a.Width;var r=rect.fromSize(q);rect.isEmpty(r)?rect.clear(r):(r.X=-this._HorizontalOffset,r.Y=c.Height);l._Arrange(r,b);
c.Width=Math.max(c.Width,q.Width);c.Height+=q.Height}}f?c.Width=Math.max(c.Width,a.Width):c.Height=Math.max(c.Height,a.Height);return c};c.prototype.RemoveUnusedContainers=function(b,d){for(var e=this.ItemContainerGenerator,p=a.ItemsControl.GetItemsOwner(this),k=c.GetVirtualizationMode(this),m=b+d-1,l,q=this.Children,r={Index:q.Count-1,Offset:0};0<=r.Index;){l=e.IndexFromGeneratorPosition(r);if(l<b||l>m)l=this.OnCleanUpVirtualizedItem(q.GetValueAt(r.Index),p.Items.GetValueAt(l)),l.Cancel||(this.RemoveInternalChildRange(r.Index,
1),k===g.Recycling?e.Recycle(r,1):e.Remove(r,1));r.Index--}};c.prototype.OnCleanUpVirtualizedItem=function(a,b){var c=new e(a,b);this.CleanUpVirtualizedItemEvent.Raise(this,c);return c};c.prototype.OnClearChildren=function(){b.prototype.OnClearChildren.call(this);this._VerticalOffset=this._HorizontalOffset=0;this.XamlNode.LayoutUpdater.InvalidateMeasure();var a=this.ScrollOwner;a&&a.InvalidateScrollInfo()};c.prototype.OnItemContainerGeneratorChanged=function(c,f){b.prototype.OnItemContainerGeneratorChanged.call(this,
c,f);var e=this.ItemContainerGenerator,g=a.ItemsControl.GetItemsOwner(this),k=this.Orientation,m,l;switch(f.Action){case d.Collections.NotifyCollectionChangedAction.Add:e=e.IndexFromGeneratorPosition(f.Position);m=k===d.Orientation.Horizontal?this.HorizontalOffset:this.VerticalOffset;e<=m&&(m+=f.ItemCount);k===d.Orientation.Horizontal?this.SetHorizontalOffset(m):this.SetVerticalOffset(m);break;case d.Collections.NotifyCollectionChangedAction.Remove:e=e.IndexFromGeneratorPosition(f.Position);k===d.Orientation.Horizontal?
(m=this.HorizontalOffset,l=this.ViewportWidth):(m=this.VerticalOffset,l=this.ViewportHeight);e<m&&(m=Math.max(m-f.ItemCount,0));m=Math.min(m,g.Items.Count-l);m=Math.max(m,0);k===d.Orientation.Horizontal?this.SetHorizontalOffset(m):this.SetVerticalOffset(m);this.RemoveInternalChildRange(f.Position.Index,f.ItemUICount);break;case d.Collections.NotifyCollectionChangedAction.Replace:this.RemoveInternalChildRange(f.Position.Index,f.ItemUICount)}this.XamlNode.LayoutUpdater.InvalidateMeasure();(g=this.ScrollOwner)&&
g.InvalidateScrollInfo()};c.OrientationProperty=DependencyProperty.Register("Orientation",function(){return new Enum(d.Orientation)},c,d.Orientation.Vertical,function(a,b){return a.XamlNode.LayoutUpdater.InvalidateMeasure()});c.IsVirtualizingProperty=DependencyProperty.RegisterAttached("IsVirtualizing",function(){return new Boolean},c,!1);c.VirtualizationModeProperty=DependencyProperty.RegisterAttached("VirtualizationMode",function(){return new Enum(g)},c,g.Recycling);return c}(a.VirtualizingPanel);
a.VirtualizingStackPanel=c;Nullstone.RegisterType(c,"VirtualizingStackPanel",[a.Primitives.IScrollInfo_])})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(b){function c(){b.apply(this,arguments);this._VerticalOffset=this._HorizontalOffset=0;this._IsCatchingClick=this._IsVisible=!1;this._Catcher=null}__extends(c,b);c.prototype.GetInheritedEnumerator=function(){var a=this.XObject;return a&&a.Child?d.ArrayEx.GetEnumerator([a.Child.XamlNode]):d.ArrayEx.EmptyEnumerator};c.prototype.ComputeBounds=function(a,b){};c.prototype.OnIsAttachedChanged=function(a){b.prototype.OnIsAttachedChanged.call(this,a);!a&&
this.XObject.IsOpen&&(this.XObject.IsOpen=!1)};c.prototype._ChildChanged=function(a,b){var c=this.XObject;this._Hide();a&&d.Providers.InheritedStore.ClearInheritedOnRemove(c,a.XamlNode);this._PrepareVisualChild(b);b&&(d.Providers.InheritedStore.PropagateInheritedOnAdd(c,b.XamlNode),c.IsOpen&&this._Show())};c.prototype._PrepareVisualChild=function(b){if(b)if(this._IsCatchingClick){var c=this._VisualChild;if(c)c.Children.RemoveAt(1);else{var c=new a.Canvas,f=new a.Canvas;f.Background=d.Media.SolidColorBrush.FromColor(Color.FromRgba(255,
255,255,0));f.LayoutUpdated.Subscribe(this._UpdateCatcher,this);f.MouseLeftButtonDown.Subscribe(this._RaiseClickedOutside,this);c.Children.Add(f);this._Catcher=f;this._VisualChild=c}c.Children.Add(b)}else this._VisualChild=b};c.prototype.CatchClickedOutside=function(){this._IsCatchingClick||(this._VisualChild=null);this._IsCatchingClick=!0;this._PrepareVisualChild(this.XObject.Child)};c.prototype._UpdateCatcher=function(){var a=this._VisualChild;if(a){var b=this._Surface.Extents;a.Width=b.Width;a.Height=
b.Height;if(b=this._Catcher)b.Width=a.Width,b.Height=a.Height}};c.prototype._RaiseClickedOutside=function(a,b){this.XObject.ClickedOutside.Raise(this,EventArgs.Empty)};c.prototype.PostCompute=function(a,b){var c=this.XObject.Child;if(c){var c=c.XamlNode.LayoutUpdater,d=this.XObject;if(a.TotalRenderProjection){var f=mat4.clone(a.AbsoluteProjection),d=mat4.createTranslate(d.HorizontalOffset,d.VerticalOffset,0);mat4.multiply(d,f,f);c.CarrierProjection=f;c.CarrierXform=null;c.UpdateProjection()}else f=
mat3.clone(a.AbsoluteXform),mat3.translate(f,d.HorizontalOffset,d.VerticalOffset),c.CarrierProjection=null,c.CarrierXform=f,c.UpdateTransform()}};c.prototype.OnHorizontalOffsetChanged=function(a){var b=this.XObject.Child;if(b){var b=b.XamlNode.LayoutUpdater,c=a.NewValue-this._HorizontalOffset;0!==c&&(this._HorizontalOffset=a.NewValue,b.CarrierProjection?(a=mat4.createTranslate(c,0,0),mat4.multiply(a,b.CarrierProjection,b.CarrierProjection)):b.CarrierXform&&mat3.translate(b.CarrierXform,c,0),this._VisualChild.InvalidateMeasure())}};
c.prototype.OnVerticalOffsetChanged=function(a){var b=this.XObject.Child;if(b){var b=b.XamlNode.LayoutUpdater,c=a.NewValue-this._VerticalOffset;0!==c&&(this._VerticalOffset=a.NewValue,b.CarrierProjection?(a=mat4.createTranslate(0,c,0),mat4.multiply(a,b.CarrierProjection,b.CarrierProjection)):b.CarrierXform&&mat3.translate(b.CarrierXform,0,c),this._VisualChild.InvalidateMeasure())}};c.prototype._Hide=function(){var a=this._VisualChild;this._IsVisible&&a&&(this._IsVisible=!1,this.LayoutUpdater.ShouldSkipHitTest=
!0,this._Surface.DetachLayer(a))};c.prototype._Show=function(){this._UpdateCatcher();var a=this._VisualChild;!this._IsVisible&&a&&(this._IsVisible=!0,this.LayoutUpdater.ShouldSkipHitTest=!1,this._Surface.AttachLayer(a))};return c}(d.FENode);g.PopupNode=e;Nullstone.RegisterType(e,"PopupNode");var c=function(a){function c(){a.apply(this,arguments);this.Opened=new MulticastEvent;this.Closed=new MulticastEvent;this.ClickedOutside=new MulticastEvent}__extends(c,a);c.prototype.CreateNode=function(){return new e(this)};
c.prototype._OnChildChanged=function(a){var b;a.OldValue instanceof d.FrameworkElement&&(b=a.OldValue);var c;a.NewValue instanceof d.FrameworkElement&&(c=a.NewValue);this.XamlNode._ChildChanged(b,c)};c.prototype._OnIsOpenChanged=function(a){a.NewValue?(this.XamlNode._Show(),this.Opened.RaiseAsync(this,EventArgs.Empty)):(this.XamlNode._Hide(),this.Closed.RaiseAsync(this,EventArgs.Empty))};c.ChildProperty=DependencyProperty.Register("Child",function(){return d.UIElement},c,void 0,function(a,b){return a._OnChildChanged(b)});
c.HorizontalOffsetProperty=DependencyProperty.Register("HorizontalOffset",function(){return Number},c,0,function(a,b){return a.XamlNode.OnHorizontalOffsetChanged(b)});c.VerticalOffsetProperty=DependencyProperty.Register("VerticalOffset",function(){return Number},c,0,function(a,b){return a.XamlNode.OnVerticalOffsetChanged(b)});c.IsOpenProperty=DependencyProperty.Register("IsOpen",function(){return Boolean},c,!1,function(a,b){return a._OnIsOpenChanged(b)});c.Annotations={ContentProperty:c.ChildProperty};
return c}(d.FrameworkElement);g.Popup=c;Nullstone.RegisterType(c,"Popup")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){function e(a,b){if(a===b)return!0;var c=1.11022302462516E-16*(Math.abs(a)+Math.abs(b)+10),d=a-b;return-c<d&&c>d}function c(a){return"number"!==typeof a||isNaN(a)||!isFinite(a)?!1:!0}var b=function(a){function b(){a.apply(this,arguments);this._RequestedVal=this._RequestedMax=this._InitialVal=this._InitialMax=this._LevelsFromRootCall=0;this.ValueChanged=new d.RoutedPropertyChangedEvent}__extends(b,a);b.prototype._OnMinimumChanged=function(a){if(!c(a.NewValue))throw new ArgumentException("Invalid double value for Minimum property.");
0===this._LevelsFromRootCall&&(this._InitialMax=this.Maximum,this._InitialVal=this.Value);this._LevelsFromRootCall++;this._CoerceMaximum();this._CoerceValue();this._LevelsFromRootCall--;0===this._LevelsFromRootCall&&(this.OnMinimumChanged(a.OldValue,a.OldValue),a=this.Maximum,e(this._InitialMax,a)||this.OnMaximumChanged(this._InitialMax,a),a=this.Value,e(this._InitialVal,a)||this.RaiseValueChanged(this._InitialVal,a))};b.prototype._OnMaximumChanged=function(a){if(!c(a.NewValue))throw new ArgumentException("Invalid double value for Maximum property.");
0===this._LevelsFromRootCall&&(this._RequestedMax=a.NewValue,this._InitialMax=a.OldValue,this._InitialVal=this.Value);this._LevelsFromRootCall++;this._CoerceMaximum();this._CoerceValue();this._LevelsFromRootCall--;0===this._LevelsFromRootCall&&(a=this.Maximum,e(this._InitialMax,a)||this.OnMaximumChanged(this._InitialMax,a),a=this.Value,e(this._InitialVal,a)||this.RaiseValueChanged(this._InitialVal,a))};b.prototype._OnLargeChangeChanged=function(a){if(!(c(a.NewValue)&&0<=a.NewValue))throw new ArgumentException("Invalid Large Change Value.");
};b.prototype._OnSmallChangeChanged=function(a){if(!(c(a.NewValue)&&0<=a.NewValue))throw new ArgumentException("Invalid Small Change Value.");};b.prototype._OnValueChanged=function(a){if(!c(a.NewValue))throw new ArgumentException("Invalid double value for Value property.");0===this._LevelsFromRootCall&&(this._RequestedVal=a.NewValue,this._InitialVal=a.OldValue);this._LevelsFromRootCall++;this._CoerceValue();this._LevelsFromRootCall--;0===this._LevelsFromRootCall&&(a=this.Value,e(this._InitialVal,
a)||this.RaiseValueChanged(this._InitialVal,a))};b.prototype._CoerceMaximum=function(){var a=this.Minimum,b=this.Maximum;!e(this._RequestedMax,b)&&this._RequestedMax>=a?this.Maximum=this._RequestedMax:b<a&&(this.Maximum=a)};b.prototype._CoerceValue=function(){var a=this.Minimum,b=this.Maximum,c=this.Value;!e(this._RequestedVal,c)&&this._RequestedVal>=a&&this._RequestedVal<=b?this.Value=this._RequestedVal:(c<a&&(this.Value=a),c>b&&(this.Value=b))};b.prototype.OnMinimumChanged=function(a,b){};b.prototype.OnMaximumChanged=
function(a,b){};b.prototype.RaiseValueChanged=function(a,b){this.ValueChanged.Raise(this,new d.RoutedPropertyChangedEventArgs(a,b));this.OnValueChanged(a,b)};b.prototype.OnValueChanged=function(a,b){};b.MinimumProperty=DependencyProperty.Register("Minimum",function(){return Number},b,0,function(a,b){return a._OnMinimumChanged(b)});b.MaximumProperty=DependencyProperty.Register("Maximum",function(){return Number},b,1,function(a,b){return a._OnMaximumChanged(b)});b.LargeChangeProperty=DependencyProperty.Register("LargeChange",
function(){return Number},b,1,function(a,b){return a._OnLargeChangeChanged(b)});b.SmallChangeProperty=DependencyProperty.Register("SmallChange",function(){return Number},b,0.1,function(a,b){return a._OnSmallChangeChanged(b)});b.ValueProperty=DependencyProperty.Register("Value",function(){return Number},b,0,function(a,b){return a._OnValueChanged(b)});return b}(d.Controls.Control);a.RangeBase=b;Nullstone.RegisterType(b,"RangeBase")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||
(Fayde={}));
(function(d){(function(a){(function(a){var e=function(c){function b(){c.call(this);this._DragValue=0;this.Scroll=new d.RoutedEvent;this.DefaultStyleKey=this.constructor;this.SizeChanged.Subscribe(this._HandleSizeChanged,this)}__extends(b,c);Object.defineProperty(b.prototype,"IsDragging",{get:function(){return this.$HorizontalThumb?this.$HorizontalThumb.IsDragging:this.$VerticalThumb?this.$VerticalThumb.IsDragging:!1},enumerable:!0,configurable:!0});b.prototype._GetChildOfType=function(a,b){var c=
this.GetTemplateChild(a);if(c instanceof b)return c};b.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this);this.$HorizontalTemplate=this._GetChildOfType("HorizontalRoot",d.FrameworkElement);this.$HorizontalLargeIncrease=this._GetChildOfType("HorizontalLargeIncrease",a.RepeatButton);this.$HorizontalLargeDecrease=this._GetChildOfType("HorizontalLargeDecrease",a.RepeatButton);this.$HorizontalSmallIncrease=this._GetChildOfType("HorizontalSmallIncrease",a.RepeatButton);this.$HorizontalSmallDecrease=
this._GetChildOfType("HorizontalSmallDecrease",a.RepeatButton);this.$HorizontalThumb=this._GetChildOfType("HorizontalThumb",a.Thumb);this.$VerticalTemplate=this._GetChildOfType("VerticalRoot",d.FrameworkElement);this.$VerticalLargeIncrease=this._GetChildOfType("VerticalLargeIncrease",a.RepeatButton);this.$VerticalLargeDecrease=this._GetChildOfType("VerticalLargeDecrease",a.RepeatButton);this.$VerticalSmallIncrease=this._GetChildOfType("VerticalSmallIncrease",a.RepeatButton);this.$VerticalSmallDecrease=
this._GetChildOfType("VerticalSmallDecrease",a.RepeatButton);this.$VerticalThumb=this._GetChildOfType("VerticalThumb",a.Thumb);this.$HorizontalThumb&&(this.$HorizontalThumb.DragStarted.Subscribe(this._OnThumbDragStarted,this),this.$HorizontalThumb.DragDelta.Subscribe(this._OnThumbDragDelta,this),this.$HorizontalThumb.DragCompleted.Subscribe(this._OnThumbDragCompleted,this));this.$HorizontalLargeIncrease&&this.$HorizontalLargeIncrease.Click.Subscribe(this._LargeIncrement,this);this.$HorizontalLargeDecrease&&
this.$HorizontalLargeDecrease.Click.Subscribe(this._LargeDecrement,this);this.$HorizontalSmallIncrease&&this.$HorizontalSmallIncrease.Click.Subscribe(this._SmallIncrement,this);this.$HorizontalSmallDecrease&&this.$HorizontalSmallDecrease.Click.Subscribe(this._SmallDecrement,this);this.$VerticalThumb&&(this.$VerticalThumb.DragStarted.Subscribe(this._OnThumbDragStarted,this),this.$VerticalThumb.DragDelta.Subscribe(this._OnThumbDragDelta,this),this.$VerticalThumb.DragCompleted.Subscribe(this._OnThumbDragCompleted,
this));this.$VerticalLargeIncrease&&this.$VerticalLargeIncrease.Click.Subscribe(this._LargeIncrement,this);this.$VerticalLargeDecrease&&this.$VerticalLargeDecrease.Click.Subscribe(this._LargeDecrement,this);this.$VerticalSmallIncrease&&this.$VerticalSmallIncrease.Click.Subscribe(this._SmallIncrement,this);this.$VerticalSmallDecrease&&this.$VerticalSmallDecrease.Click.Subscribe(this._SmallDecrement,this);this._OnOrientationChanged();this.UpdateVisualState(!1)};b.prototype.OnMaximumChanged=function(a,
b){var d=this._GetTrackLength();c.prototype.OnMaximumChanged.call(this,a,b);this._UpdateTrackLayout(d)};b.prototype.OnMinimumChanged=function(a,b){var d=this._GetTrackLength();c.prototype.OnMinimumChanged.call(this,a,b);this._UpdateTrackLayout(d)};b.prototype.OnValueChanged=function(a,b){var d=this._GetTrackLength();c.prototype.OnValueChanged.call(this,a,b);this._UpdateTrackLayout(d)};b.prototype._OnThumbDragStarted=function(a,b){this._DragValue=this.Value};b.prototype._OnThumbDragDelta=function(b,
c){var e=0,s=this.Maximum,p=this.Minimum,k=s-p,m=this._GetTrackLength(),l=this.Orientation===d.Orientation.Horizontal;this.$VerticalThumb&&!l&&(e=1*c.VerticalChange/(m-this.$VerticalThumb.ActualHeight)*k);this.$HorizontalThumb&&l&&(e=1*c.HorizontalChange/(m-this.$HorizontalThumb.ActualWidth)*k);!isNaN(e)&&isFinite(e)&&(this._DragValue+=e,e=Math.min(s,Math.max(p,this._DragValue)),e!==this.Value&&(this.Value=e,this._RaiseScroll(a.ScrollEventType.ThumbTrack)))};b.prototype._OnThumbDragCompleted=function(b,
c){this._RaiseScroll(a.ScrollEventType.EndScroll)};b.prototype._SmallDecrement=function(b,c){var d=this.Value,e=Math.max(d-this.SmallChange,this.Minimum);d!==e&&(this.Value=e,this._RaiseScroll(a.ScrollEventType.SmallDecrement))};b.prototype._SmallIncrement=function(b,c){var d=this.Value,e=Math.min(d+this.SmallChange,this.Maximum);d!==e&&(this.Value=e,this._RaiseScroll(a.ScrollEventType.SmallIncrement))};b.prototype._LargeDecrement=function(b,c){var d=this.Value,e=Math.max(d-this.LargeChange,this.Minimum);
d!==e&&(this.Value=e,this._RaiseScroll(a.ScrollEventType.LargeDecrement))};b.prototype._LargeIncrement=function(b,c){var d=this.Value,e=Math.min(d+this.LargeChange,this.Maximum);d!==e&&(this.Value=e,this._RaiseScroll(a.ScrollEventType.LargeIncrement))};b.prototype._HandleSizeChanged=function(a,b){this._UpdateTrackLayout(this._GetTrackLength())};b.prototype._OnOrientationChanged=function(){var a=this.Orientation===d.Orientation.Horizontal;this.$HorizontalTemplate&&(this.$HorizontalTemplate.Visibility=
a?d.Visibility.Visible:d.Visibility.Collapsed);this.$VerticalTemplate&&(this.$VerticalTemplate.Visibility=a?d.Visibility.Collapsed:d.Visibility.Visible);this._UpdateTrackLayout(this._GetTrackLength())};b.prototype._UpdateTrackLayout=function(a){var b=this.Minimum,b=(this.Value-b)/(this.Maximum-b),c=this._UpdateThumbSize(a),e=this.Orientation===d.Orientation.Horizontal;e&&this.$HorizontalLargeDecrease&&this.$HorizontalThumb?this.$HorizontalLargeDecrease.Width=Math.max(0,b*(a-c)):!e&&(this.$VerticalLargeDecrease&&
this.$VerticalThumb)&&(this.$VerticalLargeDecrease.Height=Math.max(0,b*(a-c)))};b.prototype._UpdateThumbSize=function(a){var b=Number.NaN,c=0>=a;if(0<a){var e=this.Orientation===d.Orientation.Horizontal,g=this.Maximum,k=this.Minimum;e&&this.$HorizontalThumb?(0!==g-k&&(b=Math.max(this.$HorizontalThumb.MinWidth,this._ConvertViewportSizeToDisplayUnits(a))),0===g-k||b>this.ActualWidth||a<=this.$HorizontalThumb.MinWidth?c=!0:(this.$HorizontalThumb.Visibility=d.Visibility.Visible,this.$HorizontalThumb.Width=
b)):!e&&this.$VerticalThumb&&(0!==g-k&&(b=Math.max(this.$VerticalThumb.MinHeight,this._ConvertViewportSizeToDisplayUnits(a))),0===g-k||b>this.ActualHeight||a<=this.$VerticalThumb.MinHeight?c=!0:(this.$VerticalThumb.Visibility=d.Visibility.Visible,this.$VerticalThumb.Height=b))}c&&(this.$HorizontalThumb&&(this.$HorizontalThumb.Visibility=d.Visibility.Collapsed),this.$VerticalThumb&&(this.$VerticalThumb.Visibility=d.Visibility.Collapsed));return b};b.prototype._GetTrackLength=function(){var a=NaN;if(this.Orientation===
d.Orientation.Horizontal){a=this.ActualWidth;if(this.$HorizontalSmallDecrease)var b=this.$HorizontalSmallDecrease.Margin,a=a-(this.$HorizontalSmallDecrease.ActualWidth+b.Left+b.Right);this.$HorizontalSmallIncrease&&(b=this.$HorizontalSmallIncrease.Margin,a-=this.$HorizontalSmallIncrease.ActualWidth+b.Left+b.Right)}else a=this.ActualHeight,this.$VerticalSmallDecrease&&(b=this.$VerticalSmallDecrease.Margin,a-=this.$VerticalSmallDecrease.ActualHeight+b.Top+b.Bottom),this.$VerticalSmallIncrease&&(b=this.$VerticalSmallIncrease.Margin,
a-=this.$VerticalSmallIncrease.ActualHeight+b.Top+b.Bottom);return a};b.prototype._ConvertViewportSizeToDisplayUnits=function(a){var b=this.ViewportSize;return a*b/(b+this.Maximum-this.Minimum)};b.prototype._RaiseScroll=function(b){b=new a.ScrollEventArgs(b,this.Value);b.OriginalSource=this;this.Scroll.Raise(this,b)};b.OrientationProperty=DependencyProperty.Register("Orientation",function(){return new Enum(d.Orientation)},b,d.Orientation.Horizontal,function(a,b){return a._OnOrientationChanged()});
b.ViewportSizeProperty=DependencyProperty.Register("ViewportSize",function(){return Number},b,0,function(a,b){return a._UpdateTrackLayout(a._GetTrackLength())});return b}(a.RangeBase);a.ScrollBar=e;Nullstone.RegisterType(e,"ScrollBar")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.call(this);this.SelectionChanged=new d.RoutedEvent;this._SelectedItems=new d.Collections.ObservableCollection;this._SelectedItemsIsInvalid=this._Initializing=!1;this._SelectedValueWalker=this.$TemplateScrollViewer=null;this._Selection=new g.SelectorSelection(this)}__extends(b,c);Object.defineProperty(b.prototype,"SynchronizeWithCurrentItem",{get:function(){return Nullstone.ImplementsInterface(this.ItemsSource,d.Data.ICollectionView_)?
!1!==this.IsSynchronizedWithCurrentItem:!1},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"SelectedItems",{get:function(){this._SelectedItemsIsInvalid&&this._Selection.RepopulateSelectedItems();return this._SelectedItems},enumerable:!0,configurable:!0});b.prototype._OnIsSynchronizedWithCurrentItemChanged=function(a){if(!0===a.NewValue)throw new ArgumentException("Setting IsSynchronizedWithCurrentItem to 'true' is not supported");null==a.NewValue&&Nullstone.ImplementsInterface(this.ItemsSource,
d.Data.ICollectionView_)?this.SelectedItem=this.ItemsSource.CurrentItem:this.SelectedItem=null};b.prototype._OnSelectedIndexChanged=function(a){if(!this._Selection.IsUpdating&&!this._Initializing){var b=this.Items;0>a.NewValue||a.NewValue>=b.Count?this._Selection.ClearSelection():this._Selection.Select(b.GetValueAt(a.NewValue))}};b.prototype._OnSelectedItemChanged=function(a){this._Selection.IsUpdating||this._Initializing||(null==a.NewValue?this._Selection.ClearSelection():-1!=this.Items.IndexOf(a.NewValue)?
this._Selection.Select(a.NewValue):-1!=this.Items.IndexOf(a.OldValue)?this._Selection.Select(a.OldValue):this._Selection.ClearSelection())};b.prototype._OnSelectedValueChanged=function(a){this._Selection.IsUpdating||this._Initializing||this._SelectItemFromValue(a.NewValue,!1)};b.prototype._OnSelectedValuePathChanged=function(a){this._SelectedValueWalker=a.NewValue?new d.Data.PropertyPathWalker(a.NewValue):null;this._Initializing||this._SelectItemFromValue(this.SelectedValue,!0)};b.prototype.OnApplyTemplate=
function(){c.prototype.OnApplyTemplate.call(this);var b=this.GetTemplateChild("ScrollViewer");if(this.$TemplateScrollViewer=b=b instanceof a.ScrollViewer?b:null)b.$TemplatedParentHandlesScrolling=!0,b.HorizontalScrollBarVisibility=d.Controls.ScrollViewer.GetHorizontalScrollBarVisibility(this),b.VerticalScrollBarVisibility=d.Controls.ScrollViewer.GetVerticalScrollBarVisibility(this)};b.prototype.OnItemsChanged=function(b){if(!this._Initializing){var e;switch(b.Action){case d.Collections.NotifyCollectionChangedAction.Add:b.NewItems[0]instanceof
a.ListBoxItem&&(e=b.NewItems[0]);null!=e&&e.IsSelected&&!this.SelectedItems.Contains(e)?this._Selection.Select(e):null!=this.SelectedItem&&this._Selection.Select(this.SelectedItem);break;case d.Collections.NotifyCollectionChangedAction.Reset:e=this.ItemsSource;e=Nullstone.ImplementsInterface(e,d.Data.ICollectionView_)&&this.SynchronizeWithCurrentItem?e.CurrentItem:this.SelectedItem;this.Items.Contains(e)?this._Selection.Select(e):this._Selection.ClearSelection();break;case d.Collections.NotifyCollectionChangedAction.Remove:e=
b.OldItems[0];this.SelectedItems.Contains(e)?this._Selection.Unselect(e):b.OldStartingIndex<=this.SelectedIndex&&this._Selection.Select(this.SelectedItem);break;case d.Collections.NotifyCollectionChangedAction.Replace:e=b.OldItems[0];this._Selection.Unselect(e);break;default:throw new NotSupportedException("Collection changed action '"+b.Action+"' not supported");}}c.prototype.OnItemsChanged.call(this,b)};b.prototype.OnItemsSourceChanged=function(a){c.prototype.OnItemsSourceChanged.call(this,a);var b;
Nullstone.ImplementsInterface(a.OldValue,d.Data.ICollectionView_)&&(b=a.OldValue);b&&b.CurrentChanged.Unsubscribe(this._OnCurrentItemChanged,this);Nullstone.ImplementsInterface(a.NewValue,d.Data.ICollectionView_)&&(b=a.NewValue);b?(b.CurrentChanged.Subscribe(this._OnCurrentItemChanged,this),this.SynchronizeWithCurrentItem?this._Selection.SelectOnly(b.CurrentItem):this._Selection.ClearSelection()):this._Selection.ClearSelection()};b.prototype.OnItemContainerStyleChanged=function(a,b){};b.prototype.ClearContainerForItem=
function(a,b){c.prototype.ClearContainerForItem.call(this,a,b);a.ParentSelector=null;a!==b&&(a.Content=null)};b.prototype.PrepareContainerForItem=function(a,b){c.prototype.PrepareContainerForItem.call(this,a,b);a.ParentSelector=this;this.SelectedItems.Contains(b)&&(a.IsSelected=!0);a.IsSelected&&!this.SelectedItems.Contains(b)&&this._Selection.Select(b)};b.prototype._GetValueFromItem=function(a){return null==this._SelectedValueWalker||null==a?a:this._SelectedValueWalker.GetValue(a)};b.prototype._SelectItemFromValue=
function(a,b){if(null!=a)for(var c=this.Items,d=c.Count,e=0;e<d;e++){var g=c.GetValueAt(e),m=this._GetValueFromItem(g);if(Nullstone.Equals(a,m)){this.SelectedItems.Contains(g)||this._Selection.Select(g,b);return}}this._Selection.ClearSelection(b)};b.prototype._OnCurrentItemChanged=function(a,b){if(!this._Selection.IsUpdating&&this.SynchronizeWithCurrentItem){var c=this.ItemsSource;Nullstone.Equals(c.CurrentItem,this.SelectedItem)||this._Selection.SelectOnly(c.CurrentItem)}};b.prototype._RaiseSelectionChanged=
function(b,c){b||(b=[]);c||(c=[]);for(var d,e=b.length,p,k=0;k<e;k++)if(p=b[k],null!=p&&(d=null,p instanceof a.ListBoxItem&&(d=p),d=d||this.ItemContainerGenerator.ContainerFromItem(p)))d.IsSelected=!1;e=c.length;for(k=0;k<e;k++)if(p=c[k],null!=p&&(d=null,p instanceof a.ListBoxItem&&(d=p),d=d||this.ItemContainerGenerator.ContainerFromItem(p)))d.IsSelected=!0,d.Focus();d=new g.SelectionChangedEventArgs(b,c);this.OnSelectionChanged(d);this.SelectionChanged.Raise(this,d)};b.prototype.OnSelectionChanged=
function(a){};b.prototype.NotifyListItemClicked=function(a){this._Selection.Select(this.ItemContainerGenerator.ItemFromContainer(a))};b.prototype.NotifyListItemLoaded=function(a){this.ItemContainerGenerator.ItemFromContainer(a)===this.SelectedItem&&(a.IsSelected=!0,a.Focus())};b.prototype.NotifyListItemGotFocus=function(a){};b.prototype.NotifyListItemLostFocus=function(a){};b.IsSynchronizedWithCurrentItemProperty=DependencyProperty.Register("IsSynchronizedWithCurrentItem",function(){return Boolean},
b,null,function(a,b){return a._OnIsSynchronizedWithCurrentItemChanged(b)});b.SelectedIndexProperty=DependencyProperty.Register("SelectedIndex",function(){return Number},b,-1,function(a,b){return a._OnSelectedIndexChanged(b)});b.SelectedItemProperty=DependencyProperty.Register("SelectedItem",function(){return Object},b,void 0,function(a,b){return a._OnSelectedItemChanged(b)});b.SelectedValueProperty=DependencyProperty.Register("SelectedValue",function(){return Object},b,void 0,function(a,b){return a._OnSelectedValueChanged(b)});
b.SelectedValuePathProperty=DependencyProperty.Register("SelectedValuePath",function(){return String},b,"",function(a,b){return a._OnSelectedValuePathChanged(b)});b.IsSelectionActiveProperty=DependencyProperty.RegisterReadOnlyCore("IsSelectionActive",function(){return Boolean},b);return b}(a.ItemsControl);g.Selector=e;Nullstone.RegisterType(e,"Selector")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(a){function b(){a.call(this);this._Origin=this._PreviousPosition=null;this.DragCompleted=new d.RoutedEvent;this.DragDelta=new d.RoutedEvent;this.DragStarted=new d.RoutedEvent;this.DefaultStyleKey=this.constructor}__extends(b,a);b.prototype.OnApplyTemplate=function(){a.prototype.OnApplyTemplate.call(this);this.UpdateVisualState(!1)};b.prototype.OnDraggingChanged=function(a){this.UpdateVisualState()};b.prototype.OnGotFocus=function(b){a.prototype.OnGotFocus.call(this,
b);this._FocusChanged(this.XamlNode._HasFocus())};b.prototype.OnLostFocus=function(b){a.prototype.OnLostFocus.call(this,b);this._FocusChanged(this.XamlNode._HasFocus())};b.prototype._FocusChanged=function(a){this.SetStoreValue(b.IsFocusedProperty,a);this.UpdateVisualState()};b.prototype.OnLostMouseCapture=function(a){this.IsDragging&&this.IsEnabled&&(this.SetStoreValue(b.IsDraggingProperty,!1),this._RaiseDragCompleted(!1))};b.prototype.OnMouseEnter=function(a){this.IsEnabled&&this.UpdateVisualState()};
b.prototype.OnMouseLeave=function(a){this.IsEnabled&&this.UpdateVisualState()};b.prototype.OnMouseLeftButtonDown=function(d){a.prototype.OnMouseLeftButtonDown.call(this,d);if(!d.Handled&&!this.IsDragging&&this.IsEnabled){d.Handled=!0;this.CaptureMouse();this.SetStoreValue(b.IsDraggingProperty,!0);var e=this.XamlNode.VisualParentNode;this._Origin=this._PreviousPosition=d.GetPosition(e?e.XObject:void 0);d=!1;try{this._RaiseDragStarted(),d=!0}finally{d||this.CancelDrag()}}};b.prototype.OnMouseMove=function(a){if(this.IsDragging){var b=
this.XamlNode.VisualParentNode;a=a.GetPosition(b?b.XObject:void 0);Point.Equals(a,this._PreviousPosition)||(this._RaiseDragDelta(a.X-this._PreviousPosition.X,a.Y-this._PreviousPosition.Y),this._PreviousPosition=a)}};b.prototype.CancelDrag=function(){this.IsDragging&&(this.SetStoreValue(b.IsDraggingProperty,!1),this._RaiseDragCompleted(!0))};b.prototype._RaiseDragStarted=function(){this.DragStarted.Raise(this,new g.DragStartedEventArgs(this._Origin.X,this._Origin.Y))};b.prototype._RaiseDragDelta=function(a,
b){this.DragDelta.Raise(this,new g.DragDeltaEventArgs(a,b))};b.prototype._RaiseDragCompleted=function(a){this.DragCompleted.Raise(this,new g.DragCompletedEventArgs(this._PreviousPosition.X-this._Origin.X,this._PreviousPosition.Y-this._Origin.Y,a))};b.prototype.GetVisualStateCommon=function(){return this.IsEnabled?this.IsDragging?"Pressed":this.IsMouseOver?"MouseOver":"Normal":"Disabled"};b.IsDraggingProperty=DependencyProperty.RegisterReadOnly("IsDragging",function(){return Boolean},b,!1,function(a,
b){return a.OnDraggingChanged(b)});b.IsFocusedProperty=DependencyProperty.RegisterReadOnly("IsFocused",function(){return Boolean},b);return b}(a.Control);g.Thumb=e;Nullstone.RegisterType(e,"Thumb")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(a){c||(c=[d,d.Controls,d.Media,d.Controls.Primitives,d.Shapes,window]);for(var b=c.length,e=0;e<b;e++){var g=c[e][a];if(g)return g}return eval(a)}function e(a){if(!(a.index>=a.end)){for(var b=!1;"0"===a.path.charAt(a.index);)b=!0,a.index++;a.i=parseInt(a.path.substr(a.index),10);isNaN(a.i)||(a.index+=a.i.toString().length);isNaN(a.i)&&b&&(a.i=0);if("]"!==a.path.charAt(a.index)||"."!==a.path.charAt(a.index+1))return!0;a.prop=a.path=a.path.substr(a.index+2);a.index=
0;a.end=a.path.length;b=null;if(a.expressionFound&&(a.expressionFound=!1,null==(b=a.lu.GetValue(a.res))))return!1;if(b instanceof d.XamlObjectCollection)a.collection=b;else return a.collection=null,!1;if(null==(b=a.collection.GetValueAt(a.i)))return!1;if(b instanceof d.DependencyObject)a.lu=b;else return a.lu=null,!1;return!0}}var c,b=function(){function a(b,c){this._Propd=null;this._Path=b;this._ExpandedPath=c}a.CreateFromParameter=function(b){var c=new a;b instanceof DependencyProperty&&(c._Propd=
b);c._Path=null;b instanceof String&&(c._Path=b);return c};a.prototype.TryResolveDependencyProperty=function(b,c){if(this._Propd)return this._Propd;var d=b.Value,e=a.ResolvePropertyPath(b,this,c);d===b.Value&&(this._Propd=e);return e};Object.defineProperty(a.prototype,"Path",{get:function(){return this._Path},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ExpandedPath",{get:function(){return this._ExpandedPath},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"ParsePath",{get:function(){return this._Propd?"(0)":this._ExpandedPath?this._ExpandedPath:this._Path},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"HasDependencyProperty",{get:function(){return null!=this._Propd},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"DependencyProperty",{get:function(){return this._Propd},enumerable:!0,configurable:!0});a.ResolvePropertyPath=function(a,b,c){var f=b.Path,k=b.ExpandedPath;null!=k&&(f=k);for(c={index:0,i:0,end:f.length,
path:f,parenOpen:!1,tickOpen:!1,prop:f,res:null,cloned:!1,expressionFound:!1,lu:a.Value,collection:null,promotedValues:c,explicitType:!1,type:null};c.index<c.end;){f=!0;k=c.path.charAt(c.index);c.index++;if("("===k)c.parenOpen=!0;else if(")"===k)c.parenOpen=!1;else if("'"===k)b.ExpandedPath?c.tickOpen=!c.tickOpen:Warn("The ' character is not legal in property paths.");else if("."===k)a:{f=c;if(!f.tickOpen){if(null!=f.res){var m=null;if(null==(m=f.lu.GetValue(f.res))||!(m instanceof d.DependencyObject)){f=
!1;break a}k=m;!f.promotedValues||(null!=f.promotedValues[m._ID]||m instanceof d.UIElement)||(m=d.Clone(m),m instanceof d.DependencyObject&&(k=m,f.lu.SetStoreValue(f.res,m),m=f.lu.GetValue(f.res),f.promotedValues[m._ID]=m));f.lu=k}f.expressionFound=!1;f.prop=f.path.substr(f.index)}f=!0}else if("["===k)f=e(c);else a:{f=c;f.expressionFound=!0;k=f.index-1;for(m=void 0;f.index<f.end;){m=f.path.charAt(f.index);if("."===m&&!f.tickOpen||f.parenOpen&&")"===m||"["===m)break;f.index++;if("'"===m&&(f.tickOpen=
!f.tickOpen,!f.tickOpen))break}if(f.index===f.end)f.type=f.lu.constructor;else{m=f.path.charAt(f.index);if("."===m){11===f.index-k&&"textelement"===f.path.substr(k,11).toLowerCase()?(f.type=d.Controls.TextBlock,f.explicitType=!0):(m=f.index,"'"!==f.path.charAt(f.index-1)||f.tickOpen||(m=f.index-1),k=f.path.slice(k,m),f.type=g(k),f.explicitType=!0,f.type||(f.type=f.lu.constructor));f.index++;for(k=f.index;f.index<f.end;){m=f.path.charAt(f.index);if(f.parenOpen&&")"===m||"."===m&&!f.tickOpen)break;
f.index++;if("'"===m&&(f.tickOpen=!f.tickOpen,!f.tickOpen))break}if(f.index===k){f=!1;break a}}else f.type=f.lu.constructor,f.explicitType=!1;m=f.path.charAt(f.index);if(")"!==m&&f.parenOpen||null==f.type){f=!1;break a}}k=f.path.slice(k,f.index);null==(f.res=DependencyProperty.GetDependencyProperty(f.type,k))&&f.lu&&(f.res=DependencyProperty.GetDependencyProperty(f.lu.constructor,k));f=null==f.res||!(f.res.IsAttached||f.lu instanceof f.type)&&null==(f.res=DependencyProperty.GetDependencyProperty(f.lu.constructor,
k))||f.res.IsAttached&&f.explicitType&&!f.parenOpen?!1:!0}if(!f)return a.Value=null}a.Value=c.lu;return c.res};a.prototype.Clone=function(){return new a(this._Path,this._ExpandedPath)};return a}();a.PropertyPath=b;Nullstone.RegisterType(b,"PropertyPath")})(d.Data||(d.Data={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);this.Stretch=d.Media.Stretch.Fill}__extends(c,e);c.prototype._BuildPath=function(){var b=this.Stretch,c=null!=this._Stroke?this.StrokeThickness:0,e=new rect;e.Width=this.ActualWidth;e.Height=this.ActualHeight;switch(b){case d.Media.Stretch.None:e.Width=e.Height=0;break;case d.Media.Stretch.Uniform:e.Width=e.Height=Math.min(e.Width,e.Height);break;case d.Media.Stretch.UniformToFill:e.Width=e.Height=Math.max(e.Width,e.Height)}c>=
e.Width||c>=e.Height?(e.Width=Math.max(e.Width,c+0.001*c),e.Height=Math.max(e.Height,c+0.001*c),this._ShapeFlags=a.ShapeFlags.Degenerate):this._ShapeFlags=a.ShapeFlags.Normal;b=-c/2;rect.growBy(e,b,b,b,b);b=new d.Shapes.RawPath;b.Ellipse(e.X,e.Y,e.Width,e.Height);return b};c.prototype._ComputeStretchBounds=function(){return this._ComputeShapeBounds(!1)};c.prototype._ComputeShapeBounds=function(b){b=new rect;b.Width=this.ActualWidth;b.Height=this.ActualHeight;this._ShapeFlags=a.ShapeFlags.Normal;var c=
this.Width,e=this.Height;if(0>b.Width||(0>b.Height||0>=c||0>=e)||this.XamlNode.VisualParentNode instanceof d.Controls.CanvasNode&&isNaN(c)!==isNaN(e))return this._ShapeFlags=a.ShapeFlags.Empty,new rect;c=null!=this._Stroke?this.StrokeThickness:0;switch(this.Stretch){case d.Media.Stretch.None:b.Width=b.Height=0;break;case d.Media.Stretch.Uniform:b.Width=b.Height=Math.min(b.Width,b.Height);break;case d.Media.Stretch.UniformToFill:b.Width=b.Height=Math.max(b.Width,b.Height)}c>=b.Width||c>=b.Height?(b.Width=
Math.max(b.Width,c+0.001*c),b.Height=Math.max(b.Height,c+0.001*c),this._ShapeFlags=a.ShapeFlags.Degenerate):this._ShapeFlags=a.ShapeFlags.Normal;return b};c.prototype._ComputeShapeBoundsImpl=function(a,c){var d=new rect;a&&(d.Width=1,d.Height=1);return d};return c}(a.Shape);a.Ellipse=g;Nullstone.RegisterType(g,"Ellipse")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype._BuildPath=function(){this._ShapeFlags=a.ShapeFlags.Normal;var b=this.X1,c=this.Y1,d=this.X2,e=this.Y2,g=new a.RawPath;g.Move(b,c);g.Line(d,e);return g};c.prototype._ComputeShapeBounds=function(a){var c=new rect,d=0;a||(d=this.StrokeThickness);if(0>=d&&!a)return c;a=this.X1;var d=this.Y1,e=this.X2,g=this.Y2;rect.set(c,Math.min(a,e),Math.min(d,g),Math.abs(e-a),Math.abs(g-d));return c};c.X1Property=
DependencyProperty.Register("X1",function(){return Number},c,0,function(a,c){return a._InvalidateNaturalBounds()});c.Y1Property=DependencyProperty.Register("Y1",function(){return Number},c,0,function(a,c){return a._InvalidateNaturalBounds()});c.X2Property=DependencyProperty.Register("X2",function(){return Number},c,0,function(a,c){return a._InvalidateNaturalBounds()});c.Y2Property=DependencyProperty.Register("Y2",function(){return Number},c,0,function(a,c){return a._InvalidateNaturalBounds()});return c}(a.Shape);
a.Line=d;Nullstone.RegisterType(d,"Line")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.apply(this,arguments)}__extends(c,e);c._DataCoercer=function(a,c,e){return"string"===typeof e?d.Media.ParseGeometry(e):e};c.prototype._GetFillRule=function(){var a=this.Data;return a?a.FillRule:e.prototype._GetFillRule.call(this)};c.prototype._DrawPath=function(a){var c=this.Data;c&&c.Draw(a)};c.prototype._ComputeShapeBoundsImpl=function(b,c){var d=this.Data;return d?b?d.GetBounds():d.GetBounds(b||null!=this._Stroke?0:this.StrokeThickness):
(this._ShapeFlags=a.ShapeFlags.Empty,new rect)};c.DataProperty=DependencyProperty.RegisterFull("Data",function(){return d.Media.Geometry},c,void 0,function(a,c){return a._InvalidateNaturalBounds()},c._DataCoercer);return c}(a.Shape);a.Path=g;Nullstone.RegisterType(g,"Path")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c._PointsCoercer=function(b,c,d){"string"===typeof d&&(d=a.PointCollection.FromData(d));d instanceof Array&&(d=a.PointCollection.FromArray(d));return d};c.prototype._PointsChanged=function(b){var c=b.OldValue;b=b.NewValue;c instanceof a.PointCollection&&(c.Owner=null);b instanceof a.PointCollection&&(b.Owner=this);this._InvalidateNaturalBounds()};c.prototype._BuildPath=function(){var b=this.Points,c;if(!b||
2>(c=b.Count))this._ShapeFlags=a.ShapeFlags.Empty;else{this._ShapeFlags=a.ShapeFlags.Normal;var d=new a.RawPath,e=b.GetEnumerator();e.MoveNext();b=e.Current;if(2===c){e.MoveNext();c=e.Current;var e=b,g=this.StrokeThickness,p=5*g,k=e.X-c.X,m=e.Y-c.Y;if(0===m)p-=g/2,0<k?(e.X+=p,c.X-=p):(e.X-=p,c.X+=p);else{if(0===k)p-=g/2;else{var g=Math.atan2(m,k),l=Math.abs(Math.sin(g)*p);0<k?(e.X+=l,c.X-=l):(e.X-=l,c.X+=l);p*=Math.abs(Math.sin(Math.PI/2-g))}0<m?(e.Y+=p,c.Y-=p):(e.Y-=p,c.Y+=p)}d.Move(b.X,b.Y);d.Line(c.X,
c.Y)}else for(d.Move(b.X,b.Y);e.MoveNext();)b=e.Current,d.Line(b.X,b.Y);d.Close();return d}};c.prototype._FillRuleChanged=function(a){this.XamlNode.LayoutUpdater.Invalidate()};c.FillRuleProperty=DependencyProperty.RegisterCore("FillRule",function(){return new Enum(a.FillRule)},c,a.FillRule.EvenOdd,function(a,c){return a._FillRuleChanged(c)});c.PointsProperty=DependencyProperty.RegisterFull("Points",function(){return a.PointCollection},c,void 0,function(a,c){return a._PointsChanged(c)},c._PointsCoercer);
return c}(a.Shape);a.Polygon=d;Nullstone.RegisterType(d,"Polygon")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c._PointsCoercer=function(b,c,d){"string"===typeof d&&(d=a.PointCollection.FromData(d));d instanceof Array&&(d=a.PointCollection.FromArray(d));return d};c.prototype._PointsChanged=function(b){var c=b.OldValue;b=b.NewValue;c instanceof a.PointCollection&&(c.Owner=null);b instanceof a.PointCollection&&(b.Owner=this);this._InvalidateNaturalBounds()};c.prototype._BuildPath=function(){var b=this.Points;if(!b||
2>b.Count)this._ShapeFlags=a.ShapeFlags.Empty;else{this._ShapeFlags=a.ShapeFlags.Normal;var c=new a.RawPath,b=b.GetEnumerator();b.MoveNext();var d=b.Current;for(c.Move(d.X,d.Y);b.MoveNext();)d=b.Current,c.Line(d.X,d.Y);c.Close();return c}};c.prototype._FillRuleChanged=function(a){this.XamlNode.LayoutUpdater.Invalidate()};c.FillRuleProperty=DependencyProperty.RegisterCore("FillRule",function(){return new Enum(a.FillRule)},c,a.FillRule.EvenOdd,function(a,c){return a._FillRuleChanged(c)});c.PointsProperty=
DependencyProperty.RegisterFull("Points",function(){return a.PointCollection},c,void 0,function(a,c){return a._PointsChanged(c)},c._PointsCoercer);return c}(a.Shape);a.Polyline=d;Nullstone.RegisterType(d,"Polyline")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);this.Stretch=d.Media.Stretch.Fill}__extends(c,e);c.prototype._BuildPath=function(){var b=this.Stretch,c=null!=this._Stroke?this.StrokeThickness:0,e=new rect;e.Width=this.ActualWidth;e.Height=this.ActualHeight;switch(b){case d.Media.Stretch.None:e.Width=e.Height=0;break;case d.Media.Stretch.Uniform:e.Width=e.Height=Math.min(e.Width,e.Height);break;case d.Media.Stretch.UniformToFill:e.Width=e.Height=Math.max(e.Width,e.Height)}0===
e.Width&&(e.X=0.5*c);0===e.Height&&(e.Y=0.5*c);c>=e.Width||c>=e.Height?(b=0.001*c,rect.growBy(e,b,b,b,b),this._ShapeFlags=a.ShapeFlags.Degenerate):(b=0.5*-c,rect.growBy(e,b,b,b,b),this._ShapeFlags=a.ShapeFlags.Normal);b=Math.min(Math.abs(this.RadiusX),e.Width/2);isNaN(b)&&(b=0);c=Math.min(Math.abs(this.RadiusY),e.Height/2);isNaN(c)&&(b=0);var g=new a.RawPath;g.RoundedRect(e.X,e.Y,e.Width,e.Height,b,c);return g};c.prototype._ComputeShapeBounds=function(b){b=new rect;b.Width=this.ActualWidth;b.Height=
this.ActualHeight;this._ShapeFlags=a.ShapeFlags.Normal;var c=this.Width,e=this.Height;if(0>b.Width||(0>b.Height||0>=c||0>=e)||this.XamlNode.VisualParentNode instanceof d.Controls.CanvasNode&&isNaN(c)!==isNaN(e))return this._ShapeFlags=a.ShapeFlags.Empty,new rect;c=null!=this._Stroke?this.StrokeThickness:0;switch(this.Stretch){case d.Media.Stretch.None:b.Width=b.Height=0;break;case d.Media.Stretch.Uniform:b.Width=b.Height=Math.min(b.Width,b.Height);break;case d.Media.Stretch.UniformToFill:b.Width=
b.Height=Math.max(b.Width,b.Height)}0===b.Width&&(b.X=0.5*c);0===b.Height&&(b.Y=0.5*c);c>=b.Width||c>=b.Height?(c*=0.5005,rect.growBy(b,c,c,c,c),this._ShapeFlags=a.ShapeFlags.Degenerate):this._ShapeFlags=a.ShapeFlags.Normal;return b};c.prototype._ComputeShapeBoundsImpl=function(a,c){var d=new rect;a&&(d.Width=1,d.Height=1);return d};c.prototype._ComputeStretchBounds=function(){return this._ComputeShapeBounds(!1)};c.prototype._RadiusChanged=function(a){a=this.XamlNode.LayoutUpdater;a.InvalidateMeasure();
this._InvalidatePathCache();a.Invalidate()};c.RadiusXProperty=DependencyProperty.Register("RadiusX",function(){return Number},c,0,function(a,c){return a._RadiusChanged(c)});c.RadiusYProperty=DependencyProperty.Register("RadiusY",function(){return Number},c,0,function(a,c){return a._RadiusChanged(c)});return c}(a.Shape);a.Rectangle=g;Nullstone.RegisterType(g,"Rectangle")})(d.Shapes||(d.Shapes={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(a,f){if(a instanceof d.UIElement){var g;a instanceof c&&(g=a.XamlNode,null==g.VisualParentNode&&(g=g.LayoutUpdater,g.UpdateTransform(),g.InvalidateArrange()));if(a.XamlNode.VisualParentNode instanceof e){g=a.XamlNode;g=g.LayoutUpdater;var n=rect.fromSize(g.DesiredSize);n.X=c.GetLeft(a);n.Y=c.GetTop(a);a.UseLayoutRounding&&(n.X=Math.round(n.X),n.Y=Math.round(n.Y),n.Width=Math.round(n.Width),n.Height=Math.round(n.Height));g.LayoutSlot=n;g.InvalidateArrange()}}}var e=
function(a){function c(d){a.call(this,d);this.LayoutUpdater.BreaksLayoutClipRender=!0}__extends(c,a);c.prototype.AttachVisualChild=function(c,d){if(!a.prototype.AttachVisualChild.call(this,c,d))return!1;this._UpdateIsLayoutContainerOnAdd(c)};c.prototype.DetachVisualChild=function(c,d){if(!a.prototype.DetachVisualChild.call(this,c,d))return!1;this._UpdateIsLayoutContainerOnRemove(c)};c.prototype._UpdateIsLayoutContainerOnAdd=function(a){var b=this.LayoutUpdater;if(!b.IsLayoutContainer){a=d.DeepTreeWalker(a.XamlNode);
for(var e;e=a.Step();)if(!(e instanceof c)&&e.LayoutUpdater.IsLayoutContainer){b.IsLayoutContainer=!0;break}}};c.prototype._UpdateIsLayoutContainerOnRemove=function(a){a=this.LayoutUpdater;if(a.IsLayoutContainer){for(var b=d.DeepTreeWalker(this),e;e=b.Step();)if(!(e instanceof c)&&e.LayoutUpdater.IsLayoutContainer){a.IsLayoutContainer=!0;break}a.IsLayoutContainer=!1}};c.prototype.ComputeBounds=function(c,d){var f=this._Surface;f&&this.IsAttached&&this.IsTopLevel?(f=f.Extents,rect.set(d.Extents,0,
0,f.Width,f.Height),rect.copyTo(d.Extents,d.ExtentsWithChildren),rect.copyTo(d.Extents,d.Bounds),rect.copyTo(d.Bounds,d.BoundsWithChildren),d.ComputeGlobalBounds(),d.ComputeSurfaceBounds()):a.prototype.ComputeBounds.call(this,c,d)};return c}(a.PanelNode);a.CanvasNode=e;Nullstone.RegisterType(e,"CanvasNode");var c=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.GetTop=function(a){return a.GetValue(c.TopProperty)};c.SetTop=function(a,b){a.SetValue(c.TopProperty,b)};c.GetLeft=function(a){return a.GetValue(c.LeftProperty)};
c.SetLeft=function(a,b){a.SetValue(c.LeftProperty,b)};c.prototype._MeasureOverride=function(a,b){for(var c=size.createInfinite(),d=this.XamlNode.GetVisualTreeEnumerator();d.MoveNext();)d.Current.LayoutUpdater._Measure(c,b);return new size};c.prototype._ArrangeOverride=function(a,b){for(var d=this.XamlNode.GetVisualTreeEnumerator();d.MoveNext();){var e=d.Current,g=e.LayoutUpdater,m=rect.fromSize(g.DesiredSize);m.X=c.GetLeft(e.XObject);m.Y=c.GetTop(e.XObject);g._Arrange(m,b)}return a};c.TopProperty=
DependencyProperty.RegisterAttached("Top",function(){return Number},c,0,g);c.LeftProperty=DependencyProperty.RegisterAttached("Left",function(){return Number},c,0,g);return c}(a.Panel);a.Canvas=c;Nullstone.RegisterType(c,"Canvas")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);this.DropDownOpened=new MulticastEvent;this.DropDownClosed=new MulticastEvent;this.$SelectionBoxItemTemplate=this.$SelectionBoxItem=this.$DisplayedItem=null;this._FocusedIndex=-1;this.DefaultStyleKey=this.constructor}__extends(c,e);c.prototype._IsDropDownOpenChanged=function(b){b=b.NewValue;null!=this.$Popup&&(this.$Popup.IsOpen=b);null!=this.$DropDownToggle&&(this.$DropDownToggle.IsChecked=b);if(b){this._FocusedIndex=0<this.Items.Count?
Math.max(this.SelectedIndex,0):-1;if(-1<this._FocusedIndex){var c=this.ItemContainerGenerator.ContainerFromIndex(this._FocusedIndex);c instanceof a.ComboBoxItem&&c.Focus()}this.LayoutUpdated.Subscribe(this._UpdatePopupSizeAndPosition,this);this.DropDownOpened.Raise(this,EventArgs.Empty)}else this.Focus(),this.LayoutUpdated.Unsubscribe(this._UpdatePopupSizeAndPosition,this),this.DropDownClosed.Raise(this,EventArgs.Empty);c=this.SelectedItem;this._UpdateDisplayedItem(b&&c instanceof d.UIElement?null:
c);this.UpdateVisualState(!0)};c.prototype._MaxDropDownHeightChanged=function(a){this._UpdatePopupMaxHeight(a.NewValue)};c.prototype._GetChildOfType=function(a,c){var d=this.GetTemplateChild(a);if(d instanceof c)return d};c.prototype.OnApplyTemplate=function(){e.prototype.OnApplyTemplate.call(this);this.UpdateVisualState(!1);this.$ContentPresenter=this._GetChildOfType("ContentPresenter",a.ContentPresenter);this.$Popup=this._GetChildOfType("Popup",a.Primitives.Popup);this.$DropDownToggle=this._GetChildOfType("DropDownToggle",
a.Primitives.ToggleButton);null!=this.$ContentPresenter&&(this._NullSelFallback=this.$ContentPresenter.Content);if(null!=this.$Popup){this._UpdatePopupMaxHeight(this.MaxDropDownHeight);this.$Popup.XamlNode.CatchClickedOutside();this.$Popup.ClickedOutside.Subscribe(this._PopupClickedOutside,this);var b=this.$Popup.Child;null!=b&&(b.KeyDown.Subscribe(this._OnChildKeyDown,this),b.SizeChanged.Subscribe(this._UpdatePopupSizeAndPosition,this))}null!=this.$DropDownToggle&&(this.$DropDownToggle.Checked.Subscribe(this._OnToggleChecked,
this),this.$DropDownToggle.Unchecked.Subscribe(this._OnToggleUnchecked,this));this.UpdateVisualState(!1);this._UpdateDisplayedItem(this.SelectedItem)};c.prototype.OnItemContainerStyleChanged=function(a){a=a.NewValue;for(var c=this.Items,d=c.Count,e=this.ItemContainerGenerator,g=0;g<d;g++){var p=c.GetValueAt(g),k=e.ContainerFromIndex(g);k&&p!==k&&(k.Style=a)}};c.prototype.IsItemItsOwnContainer=function(b){return b instanceof a.ComboBoxItem};c.prototype.GetContainerForItem=function(){return new a.ComboBoxItem};
c.prototype.PrepareContainerForItem=function(a,c){e.prototype.PrepareContainerForItem.call(this,a,c);if(a!==c){var d=this.ItemContainerStyle;!a.Style&&d&&(a.Style=d)}};c.prototype.GetVisualStateFocus=function(){var a=this.IsEnabled;return this.IsDropDownOpen&&a?"FocusedDropDown":this.IsFocused&&a?"Focused":"Unfocused"};c.prototype.OnIsEnabledChanged=function(a){e.prototype.OnIsEnabledChanged.call(this,a);this.IsEnabled||(this.IsDropDownOpen=!1)};c.prototype.OnMouseLeftButtonDown=function(a){e.prototype.OnMouseLeftButtonDown.call(this,
a);a.Handled||(a.Handled=!0,this.SetValueInternal(c.IsSelectionActiveProperty,!0),this.IsDropDownOpen=!this.IsDropDownOpen)};c.prototype.OnMouseEnter=function(a){e.prototype.OnMouseEnter.call(this,a);this.UpdateVisualState(!0)};c.prototype.OnMouseLeave=function(a){e.prototype.OnMouseLeave.call(this,a);this.UpdateVisualState(!0)};c.prototype.OnKeyDown=function(a){e.prototype.OnKeyDown.call(this,a);if(!a.Handled){a.Handled=!0;var c=a.Key;this.FlowDirection===d.FlowDirection.RightToLeft&&(c===d.Input.Key.Left?
c=d.Input.Key.Right:c===d.Input.Key.Right&&(c=d.Input.Key.Left));switch(c){case d.Input.Key.Escape:this.IsDropDownOpen=!1;break;case d.Input.Key.Enter:case d.Input.Key.Space:this.IsDropDownOpen&&this._FocusedIndex!==this.SelectedIndex?(this.SelectedIndex=this._FocusedIndex,this.IsDropDownOpen=!1):this.IsDropDownOpen=!0;break;case d.Input.Key.Right:case d.Input.Key.Down:this.IsDropDownOpen?this._FocusedIndex<this.Items.Count-1&&(this._FocusedIndex++,this.ItemContainerGenerator.ContainerFromIndex(this._FocusedIndex).Focus()):
this.SelectedIndex=Math.min(this.SelectedIndex+1,this.Items.Count-1);break;case d.Input.Key.Left:case d.Input.Key.Up:this.IsDropDownOpen?0<this._FocusedIndex&&(this._FocusedIndex--,this.ItemContainerGenerator.ContainerFromIndex(this._FocusedIndex).Focus()):this.SelectedIndex=Math.max(this.SelectedIndex-1,0);break;default:a.Handled=!1}}};c.prototype.OnGotFocus=function(a){e.prototype.OnGotFocus.call(this,a);this.UpdateVisualState(!0)};c.prototype.OnLostFocus=function(a){e.prototype.OnLostFocus.call(this,
a);this.SetValueInternal(c.IsSelectionActiveProperty,null==this.$Popup?!1:this.$Popup.IsOpen);this.UpdateVisualState(!0)};c.prototype._OnChildKeyDown=function(a,c){this.OnKeyDown(c)};c.prototype.OnSelectionChanged=function(a){this.IsDropDownOpen||this._UpdateDisplayedItem(this.SelectedItem)};c.prototype._OnToggleChecked=function(a,c){this.IsDropDownOpen=!0};c.prototype._OnToggleUnchecked=function(a,c){this.IsDropDownOpen=!1};c.prototype._PopupClickedOutside=function(){this.IsDropDownOpen=!1};c.prototype._UpdateDisplayedItem=
function(b){if(this.$ContentPresenter)if(null!=this.$DisplayedItem&&(this.$DisplayedItem.Content=this.$ContentPresenter.Content,this.$DisplayedItem=null),this.$ContentPresenter.Content=null,null==b)this.$ContentPresenter.Content=this._NullSelFallback,this.$SelectionBoxItemTemplate=this.$SelectionBoxItem=this.$ContentPresenter.ContentTemplate=null;else{var c=b;c instanceof a.ComboBoxItem&&(c=c.Content);b=this.ItemContainerGenerator;var e=this.SelectedIndex,g=b.ContainerFromIndex(e);g instanceof a.ComboBoxItem&&
(this.$DisplayedItem=g);this.$SelectionBoxItem=c;this.$SelectionBoxItemTemplate=this.ItemTemplate;if(null!=this.$DisplayedItem)this.$SelectionBoxItemTemplate=this.$DisplayedItem.ContentTemplate,c instanceof d.UIElement?this.$DisplayedItem.Content=null:this.$DisplayedItem=null;else{var g=b.ContainerFromIndex(e),s;g instanceof a.ComboBoxItem&&(s=g);if(!s){c=b.GeneratorPositionFromIndex(e);c=b.StartAt(c,!1,!0);try{g=b.GenerateNext({Value:null}),g instanceof a.ComboBoxItem&&(s=g)}finally{c.Dispose()}b.PrepareItemContainer(s)}this.$SelectionBoxItemTemplate=
s.ContentTemplate}this.$ContentPresenter.Content=this.$SelectionBoxItem;this.$ContentPresenter.ContentTemplate=this.$SelectionBoxItemTemplate}};c.prototype._UpdatePopupSizeAndPosition=function(a,c){var e=this.$Popup;if(e){var g=e.Child;if(g instanceof d.FrameworkElement){g.MinWidth=this.ActualWidth;var s=d.VisualTreeHelper.GetRoot(this);if(s){try{var p=this.TransformToVisual(null)}catch(k){return}var m=new Point(0,this.ActualHeight),l=new Point(m.X+g.ActualWidth,m.Y+g.ActualHeight),q=p.Transform(m),
l=p.Transform(l);if(p=this.FlowDirection===d.FlowDirection.RightToLeft){var r=l.X;l.X=q.X;q.X=r}var r=new Point,t=s.ActualWidth;r.X=l.X>t?t-l.X:0>q.X?m.X-q.X:m.X;p&&(r.X=-r.X);r.Y=l.Y>s.ActualHeight?-g.ActualHeight:this.RenderSize.Height;e.HorizontalOffset=r.X;e.VerticalOffset=r.Y;this._UpdatePopupMaxHeight(this.MaxDropDownHeight)}}}};c.prototype._UpdatePopupMaxHeight=function(a){var c;this.$Popup&&((c=this.$Popup.Child)&&c instanceof d.FrameworkElement)&&(a===Number.POSITIVE_INFINITY&&(a=App.Current.MainSurface.Extents.Height/
2),c.MaxHeight=a)};c.IsDropDownOpenProperty=DependencyProperty.Register("IsDropDownOpen",function(){return Boolean},c,!1,function(a,c){return a._IsDropDownOpenChanged(c)});c.ItemContainerStyleProperty=DependencyProperty.RegisterCore("ItemContainerStyle",function(){return d.Style},c,void 0,function(a,c){return a.OnItemContainerStyleChanged(c)});c.MaxDropDownHeightProperty=DependencyProperty.Register("MaxDropDownHeight",function(){return Number},c,Number.POSITIVE_INFINITY,function(a,c){return a._MaxDropDownHeightChanged(c)});
c.IsSelectionActiveProperty=a.Primitives.Selector.IsSelectionActiveProperty;return c}(a.Primitives.Selector);a.ComboBox=g;Nullstone.RegisterType(g,"ComboBox")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(c){function b(a){c.call(this,a)}__extends(b,c);b.prototype.GetDefaultVisualTree=function(){var b=this.XObject.Content;if(b instanceof d.UIElement)return b;b=new a.ContentPresenter;b.TemplateOwner=this.XObject;b.SetValue(a.ContentPresenter.ContentProperty,new d.TemplateBindingExpression(e.ContentProperty,a.ContentPresenter.ContentProperty,"Content"));b.SetValue(a.ContentPresenter.ContentTemplateProperty,new d.TemplateBindingExpression(e.ContentTemplateProperty,
a.ContentPresenter.ContentTemplateProperty,"ContentTemplate"));return b};return b}(a.ControlNode);a.ContentControlNode=g;Nullstone.RegisterType(g,"ContentControlNode");var e=function(a){function b(){a.apply(this,arguments);this._ContentSetsParent=!0}__extends(b,a);b.prototype.CreateNode=function(){return new g(this)};b.prototype.OnContentChanged=function(a,b){};b.prototype.OnContentTemplateChanged=function(a,b){};b.ContentProperty=DependencyProperty.Register("Content",function(){return Object},b,
void 0,function(a,b){return a.OnContentChanged(b.OldValue,b.NewValue)});b.ContentTemplateProperty=DependencyProperty.Register("ContentTemplate",function(){return d.DataTemplate},b,void 0,function(a,b){return a.OnContentTemplateChanged(b.OldValue,b.NewValue)});b.Annotations={ContentProperty:b.ContentProperty};return b}(a.Control);a.ContentControl=e;Nullstone.RegisterType(e,"ContentControl")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(a){function c(){a.call(this);this.Loaded.Subscribe(this._FrameLoaded,this)}__extends(c,a);c.prototype.Navigate=function(a){var c=this;this._Request=new d.AjaxJsonRequest(function(a){return c._HandleSuccessfulResponse(a)},function(a){return c._HandleErrorResponse(a)});this._Request.Get(a.toString())};c.prototype.GoForward=function(){};c.prototype.GoBackward=function(){};c.prototype.StopLoading=function(){this._Request&&(this._Request.Cancel(),this._Request=
null)};c.prototype._FrameLoaded=function(a,c){this._NavService=App.Current.NavService;this.IsDeepLinked&&(this._NavService.LocationChanged.Subscribe(this._HandleDeepLink,this),this._HandleDeepLink())};c.prototype._HandleDeepLink=function(){this.SetValueInternal(c.CurrentSourceProperty,this._NavService.Href+"#"+this._NavService.Hash);this._LoadContent(this._NavService.Href,this._NavService.Hash)};c.prototype._LoadContent=function(a,c){var e=this;this.StopLoading();this._Resolver=new d.XamlResolver(function(a,
b){return e._HandleSuccessfulResponse(a)},function(a,b){return e._HandleSuccessfulSubResponse(a)},function(a){return e._HandleErrorResponse(a)});this._Resolver.Load(a,c)};c.prototype._HandleSuccessfulResponse=function(a){if(a=d.JsonParser.ParsePage(a.CreateJson()))document.title=a.Title,this.Content=a;this._Request=null};c.prototype._HandleSuccessfulSubResponse=function(a){a=a.CreateJson();a.ParseType.__TemplateJson=a};c.prototype._HandleErrorResponse=function(a){this._Resolver=null};c.prototype.SourcePropertyChanged=
function(a){this.Navigate(a.NewValue)};c.IsDeepLinkedProperty=DependencyProperty.Register("IsDeepLinked",function(){return Boolean},c,!0);c.CurrentSourceProperty=DependencyProperty.RegisterReadOnly("CurrentSource",function(){return Uri},c);c.SourceProperty=DependencyProperty.Register("Source",function(){return Uri},c,void 0,function(a,c){return a.SourcePropertyChanged(c)});return c}(a.ContentControl);a.Frame=g;Nullstone.RegisterType(g,"Frame")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(b,c,d,e){null==b&&(b=0);null==c&&(c=0);null==d&&(d=Number.POSITIVE_INFINITY);null==e&&(e=a.GridUnitType.Pixel);b<c?b=c:b>d&&(b=d);return{DesiredSize:0,OfferedSize:b,OriginalSize:b,Min:c,Max:d,Stars:0,Type:e,Clamp:function(a){return a<this.Min?this.Min:a>this.Max?this.Max:a},SetOfferedToDesired:function(){return this.OfferedSize=this.DesiredSize},SetDesiredToOffered:function(){return this.DesiredSize=this.OfferedSize}}}var e=function(a){function c(d){a.call(this,
d)}__extends(c,a);c.prototype.ComputeBounds=function(c,d){a.prototype.ComputeBounds.call(this,c,d);this.XObject.ShowGridLines&&(rect.set(d.Extents,0,0,d.ActualWidth,d.ActualHeight),rect.union(d.ExtentsWithChildren,d.Extents),d.IntersectBoundsWithClipPath(d.Bounds,d.AbsoluteXform),rect.union(d.BoundsWithChildren,d.Bounds),d.ComputeGlobalBounds(),d.ComputeSurfaceBounds())};return c}(a.PanelNode);a.GridNode=e;Nullstone.RegisterType(e,"GridNode");var c=function(b){function f(){b.call(this);var c=new a.ColumnDefinitionCollection;
c.Listen(this);Object.defineProperty(this,"ColumnDefinitions",{value:c,writable:!1});c=new a.RowDefinitionCollection;c.Listen(this);Object.defineProperty(this,"RowDefinitions",{value:c,writable:!1})}__extends(f,b);f.prototype.CreateNode=function(){return new e(this)};f._AttachedPropChanged=function(a,b){var c=a.XamlNode,d=c.VisualParentNode;d&&d.LayoutUpdater.InvalidateMeasure();c.LayoutUpdater.InvalidateMeasure()};f.GetColumn=function(a){return a.GetValue(f.ColumnProperty)};f.SetColumn=function(a,
b){a.SetValue(f.ColumnProperty,b)};f.GetColumnSpan=function(a){return a.GetValue(f.ColumnSpanProperty)};f.SetColumnSpan=function(a,b){a.SetValue(f.ColumnSpanProperty,b)};f.GetRow=function(a){return a.GetValue(f.RowProperty)};f.SetRow=function(a,b){a.SetValue(f.RowProperty,b)};f.GetRowSpan=function(a){return a.GetValue(f.RowSpanProperty)};f.SetRowSpan=function(a,b){a.SetValue(f.RowSpanProperty,b)};f.prototype._MeasureOverride=function(b,e){var s,p=size.copyTo(b);s=this.ColumnDefinitions;var k=this.RowDefinitions,
m=s?s.Count:0,l=k?k.Count:0,q=new size,r=0===l,t=0===m,u=0<this.Children.Count;r&&(l=1);t&&(m=1);this._CreateMatrices(l,m);var x=this._RowMatrix,v=this._ColMatrix,A=new a.GridLength(1,a.GridUnitType.Star),y=0,w=null;if(r)w=g(0,0,Number.POSITIVE_INFINITY,a.GridUnitType.Star),w.Stars=1,x[0][0]=w,q.Height+=1;else for(var y=0,k=k.GetEnumerator(),z=r=null;k.MoveNext();)r=k.Current,(z=r.Height)||(z=A),r.SetValueInternal(a.RowDefinition.ActualHeightProperty,Number.POSITIVE_INFINITY),w=g(0,r.MinHeight,r.MaxHeight,
z.Type),z.Type===a.GridUnitType.Pixel?(w.OfferedSize=w.Clamp(z.Value),r.SetValueInternal(a.RowDefinition.ActualHeightProperty,w.SetDesiredToOffered())):z.Type===a.GridUnitType.Star?(w.Stars=z.Value,q.Height+=z.Value):z.Type===a.GridUnitType.Auto&&(w.OfferedSize=w.Clamp(0),w.SetDesiredToOffered()),x[y][y]=w,y++;if(t)w=g(0,0,Number.POSITIVE_INFINITY,a.GridUnitType.Star),w.Stars=1,v[0][0]=w,q.Width+=1;else for(y=0,s=s.GetEnumerator(),k=t=null;s.MoveNext();)t=s.Current,(k=t.Width)||(k=A),t.SetValueInternal(a.ColumnDefinition.ActualWidthProperty,
Number.POSITIVE_INFINITY),w=g(0,t.MinWidth,t.MaxWidth,k.Type),k.Type===a.GridUnitType.Pixel?(w.OfferedSize=w.Clamp(k.Value),t.SetValueInternal(a.ColumnDefinition.ActualWidthProperty,w.SetDesiredToOffered())):k.Type===a.GridUnitType.Star?(w.Stars=k.Value,q.Width+=k.Value):k.Type===a.GridUnitType.Auto&&(w.OfferedSize=w.Clamp(0),w.SetDesiredToOffered()),v[y][y]=w,y++;q=[];A={Matrix:null,Row:0,Col:0,Size:0,Cell:null};q.push(A);var B=w=0,B=0,D=null,D=B=null,C=new size,I=!1,F=!1,H=!1,J=!1,G=0,E=0,M=0,N=
0,C=null,z=r=y=!1,L=0,K=0,O=1,D=1;s=x.length;t=v.length;r=null;for(k=this.XamlNode.GetVisualTreeEnumerator(d.VisualTreeDirection.Logical);k.MoveNext();){r=k.Current;D=r.XObject;z=r=!1;L=Math.min(c.GetColumn(D),t-1);K=Math.min(c.GetRow(D),s-1);O=Math.min(c.GetColumnSpan(D),t-L);D=Math.min(c.GetRowSpan(D),s-K);for(G=K;G<K+D;G++)z=z||x[G][G].Type===a.GridUnitType.Auto;for(K=L;K<L+O;K++)r=r||v[K][K].Type===a.GridUnitType.Star;y=y||z&&r}s=y;for(y=0;6>y;y++){t=0===y;k=1===y;r=2===y;z=3===y;L=4===y;O=5===
y;u&&(this._ExpandStarCols(p),this._ExpandStarRows(p));for(K=this.XamlNode.GetVisualTreeEnumerator();K.MoveNext();){D=K.Current;B=D.XObject;D=D.LayoutUpdater;C=new size;J=H=F=I=!1;G=Math.min(f.GetColumn(B),m-1);E=Math.min(f.GetRow(B),l-1);M=Math.min(f.GetColumnSpan(B),m-G);N=Math.min(f.GetRowSpan(B),l-E);for(B=E;B<E+N;B++)F=F||x[B][B].Type===a.GridUnitType.Star,J=J||x[B][B].Type===a.GridUnitType.Auto;for(B=G;B<G+M;B++)I=I||v[B][B].Type===a.GridUnitType.Star,H=H||v[B][B].Type===a.GridUnitType.Auto;
if(J&&H&&!F&&!I){if(!t)continue;C.Width=Number.POSITIVE_INFINITY;C.Height=Number.POSITIVE_INFINITY}else if(F&&H&&!I){if(!k&&!z)continue;k&&s&&(C.Height=Number.POSITIVE_INFINITY);C.Width=Number.POSITIVE_INFINITY}else if(J&&I&&!F){if(!r)continue;C.Height=Number.POSITIVE_INFINITY}else if((J||H)&&!F&&!I){if(!L)continue;J&&(C.Height=Number.POSITIVE_INFINITY);H&&(C.Width=Number.POSITIVE_INFINITY)}else if(!F&&!I){if(!L)continue}else if(!O)continue;for(B=E;B<E+N;B++)C.Height+=x[B][B].OfferedSize;for(B=G;B<
G+M;B++)C.Width+=v[B][B].OfferedSize;D._Measure(C,e);k||(C={Matrix:x,Row:E+N-1,Col:E,Size:D.DesiredSize.Height},C.Row===C.Col?q.splice(w+1,0,C):(q.splice(w,0,C),w++));C={Matrix:v,Row:G+M-1,Col:G,Size:D.DesiredSize.Width};C.Row===C.Col?q.splice(w+1,0,C):(q.splice(w,0,C),w++)}for(q.splice(w,1);C=q.pop();)w=C.Matrix[C.Row][C.Col],w.DesiredSize=Math.max(w.DesiredSize,C.Size),this._AllocateDesiredSize(l,m);w=q.push(A)-1}this._SaveMeasureResults();p=new size;for(B=0;B<m;B++)p.Width+=v[B][B].DesiredSize;
for(B=0;B<l;B++)p.Height+=x[B][B].DesiredSize;return p};f.prototype._ArrangeOverride=function(b,c){var d=this.ColumnDefinitions,e=this.RowDefinitions;this._RestoreMeasureResults();for(var g=0,g=0,m=new size,l=this._ColMatrix,g=0;g<l.length;g++)m.Width+=l[g][g].SetOfferedToDesired();for(var q=this._RowMatrix,g=0;g<q.length;g++)m.Height+=q[g][g].SetOfferedToDesired();m.Width!==b.Width&&this._ExpandStarCols(b);m.Height!==b.Height&&this._ExpandStarRows(b);g=0;for(d=d.GetEnumerator();d.MoveNext();)d.Current.SetValueInternal(a.ColumnDefinition.ActualWidthProperty,
l[g][g].OfferedSize),g++;g=0;for(e=e.GetEnumerator();e.MoveNext();)e.Current.SetValueInternal(a.RowDefinition.ActualHeightProperty,q[g][g].OfferedSize),g++;for(e=this.XamlNode.GetVisualTreeEnumerator();e.MoveNext();){for(var d=e.Current,g=d.XObject,r=Math.min(f.GetColumn(g),l.length-1),m=Math.min(f.GetRow(g),q.length-1),t=Math.min(f.GetColumnSpan(g),l.length-r),u=Math.min(f.GetRowSpan(g),q.length-m),x=new rect,g=0;g<r;g++)x.X+=l[g][g].OfferedSize;for(g=r;g<r+t;g++)x.Width+=l[g][g].OfferedSize;for(g=
0;g<m;g++)x.Y+=q[g][g].OfferedSize;for(g=m;g<m+u;g++)x.Height+=q[g][g].OfferedSize;d.LayoutUpdater._Arrange(x,c)}return b};f.prototype.Render=function(a,b,c){var d=this.Background,f=this.ShowGridLines;if(d||f)if(c=b.CoerceSize(size.fromRaw(b.ActualWidth,b.ActualHeight)),!(0>=c.Width||0>=c.Height)){var e=rect.fromSize(c);a.Save();b.RenderLayoutClip(a);d&&a.FillRect(d,e);if(f){b=a.CanvasContext;d=-1;if(f=this.ColumnDefinitions)for(f=f.GetEnumerator();f.MoveNext();)d+=f.Current.ActualWidth,b.beginPath(),
a.SetLineDash([5]),b.moveTo(d,0),b.lineTo(d,c.Height),b.stroke();if(f=this.RowDefinitions)for(d=-1,f=f.GetEnumerator();f.MoveNext();)d+=f.Current.ActualHeight,b.beginPath(),a.SetLineDash([5]),b.moveTo(0,d),b.lineTo(c.Width,d),b.stroke()}a.Restore()}};f.prototype._ExpandStarRows=function(b){b=size.copyTo(b);for(var c=this.RowDefinitions,d=this._RowMatrix,f=0,e=null,f=0;f<d.length;f++)e=d[f][f],e.Type===a.GridUnitType.Star?e.OfferedSize=0:b.Height=Math.max(b.Height-e.OfferedSize,0);b.Height=this._AssignSize(d,
0,d.length-1,b.Height,a.GridUnitType.Star,!1);b=null;f=0;for(c=c.GetEnumerator();c.MoveNext();)b=c.Current,e=d[f][f],e.Type===a.GridUnitType.Star&&b.SetValueInternal(a.RowDefinition.ActualHeightProperty,e.OfferedSize),f++};f.prototype._ExpandStarCols=function(b){b=size.copyTo(b);for(var c=this.ColumnDefinitions,d=0,f=null,e=this._ColMatrix,d=0;d<e.length;d++)f=e[d][d],f.Type===a.GridUnitType.Star?f.OfferedSize=0:b.Width=Math.max(b.Width-f.OfferedSize,0);b.Width=this._AssignSize(e,0,e.length-1,b.Width,
a.GridUnitType.Star,!1);b=null;d=0;for(c=c.GetEnumerator();c.MoveNext();)b=c.Current,f=e[d][d],f.Type===a.GridUnitType.Star&&b.SetValueInternal(a.ColumnDefinition.ActualWidthProperty,f.OfferedSize),d++};f.prototype._AllocateDesiredSize=function(b,c){for(var d,f=0;2>f;f++){d=0===f?this._RowMatrix:this._ColMatrix;for(var e=(0===f?b:c)-1;0<=e;e--)for(var g=e;0<=g;g--){for(var l=!1,q=e;q>=g;q--)l=l||d[q][q].Type===a.GridUnitType.Star;for(var q=d[e][g].DesiredSize,r=0,t=e;t>=g;t--)r+=d[t][t].DesiredSize;
r<q&&(q-=r,l?this._AssignSize(d,g,e,q,a.GridUnitType.Star,!0):(q=this._AssignSize(d,g,e,q,a.GridUnitType.Pixel,!0),this._AssignSize(d,g,e,q,a.GridUnitType.Auto,!0)))}}d=this._RowMatrix;for(f=0;f<d.length;f++)d[f][f].OfferedSize=d[f][f].DesiredSize;d=this._ColMatrix;for(f=0;f<d.length;f++)d[f][f].OfferedSize=d[f][f].DesiredSize};f.prototype._AssignSize=function(b,c,d,f,e,g){for(var l=0,q=!1,r=0,t=0,u=null,t=c;t<=d;t++)u=b[t][t],r=g?u.DesiredSize:u.OfferedSize,r<u.Max&&(l+=e===a.GridUnitType.Star?u.Stars:
1);do for(var q=!1,x=f/l,t=c;t<=d;t++)if(u=b[t][t],r=g?u.DesiredSize:u.OfferedSize,u.Type===e&&r<u.Max){var v=r,v=v+x*(e===a.GridUnitType.Star?u.Stars:1),v=Math.min(v,u.Max),q=q||v>r;f-=v-r;g?u.DesiredSize=v:u.OfferedSize=v}while(q);return f};f.prototype._CreateMatrices=function(a,b){for(var c=this._RowMatrix=[],d=0;d<a;d++){c.push([]);for(var f=0;f<=d;f++)c[d].push(g())}c=this._ColMatrix=[];for(d=0;d<b;d++)for(c.push([]),f=0;f<=d;f++)c[d].push(g())};f.prototype._SaveMeasureResults=function(){var a,
b,c=this._RowMatrix;for(a=0;a<c.length;a++)for(b=0;b<=a;b++)c[a][b].OriginalSize=c[a][b].OfferedSize;c=this._ColMatrix;for(a=0;a<c.length;a++)for(b=0;b<=a;b++)c[a][b].OriginalSize=c[a][b].OfferedSize};f.prototype._RestoreMeasureResults=function(){var a,b,c=this._RowMatrix;for(a=0;a<c.length;a++)for(b=0;b<=a;b++)c[a][b].OfferedSize=c[a][b].OriginalSize;c=this._ColMatrix;for(a=0;a<c.length;a++)for(b=0;b<=a;b++)c[a][b].OfferedSize=c[a][b].OriginalSize};f.prototype._ShowGridLinesChanged=function(a){a=
this.XamlNode.LayoutUpdater;a.Invalidate();a.InvalidateMeasure()};f.prototype.RowDefinitionsChanged=function(a){this.XamlNode.LayoutUpdater.InvalidateMeasure()};f.prototype.ColumnDefinitionsChanged=function(a){this.XamlNode.LayoutUpdater.InvalidateMeasure()};f.ColumnProperty=DependencyProperty.RegisterAttached("Column",function(){return Number},f,0,f._AttachedPropChanged);f.ColumnSpanProperty=DependencyProperty.RegisterAttached("ColumnSpan",function(){return Number},f,1,f._AttachedPropChanged);f.RowProperty=
DependencyProperty.RegisterAttached("Row",function(){return Number},f,0,f._AttachedPropChanged);f.RowSpanProperty=DependencyProperty.RegisterAttached("RowSpan",function(){return Number},f,1,f._AttachedPropChanged);f.ShowGridLinesProperty=DependencyProperty.Register("ShowGridLines",function(){return Boolean},f,!1,function(a,b){return a._ShowGridLinesChanged(b)});return f}(a.Panel);a.Grid=c;Nullstone.RegisterType(c,"Grid")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.apply(this,arguments);this._FocusedIndex=0}__extends(c,e);c.prototype.SelectAll=function(){this._Selection.SelectAll(this.Items.ToArray())};c.prototype.ScrollIntoView=function(b){var c=this.$TemplateScrollViewer;if(c&&this.Items.Contains(b)){var d={Value:null},e={Value:null},g=a.VirtualizingStackPanel.GetIsVirtualizing(this);this._IsOnCurrentPage(b,d,e)||(b=d.Value,e=e.Value,this._GetIsVerticalOrientation()?g?c.ScrollToVerticalOffset(this.SelectedIndex):
(g=c.VerticalOffset,d=0,b.GetBottom()<e.GetBottom()&&(d=e.GetBottom()-b.GetBottom(),g+=d),e.Y-d<b.Y&&(g-=b.Y-(e.Y-d)),c.ScrollToVerticalOffset(g)):g?c.ScrollToHorizontalOffset(this.SelectedIndex):(g=c.HorizontalOffset,d=0,b.GetRight()<e.GetRight()&&(d=e.GetRight()-b.GetRight(),g+=d),b.X-d<b.X&&(g-=b.X-(e.X-d)),c.ScrollToHorizontalOffset(g)))}};c.prototype._NavigateByPage=function(a){var c=this.$TemplateScrollViewer,d=-1,d=-1!==this._FocusedIndex?this.Items.GetValueAt(this._FocusedIndex):null;null==
d||this._IsOnCurrentPage(d)||(this.ScrollIntoView(d),null!=c&&c.UpdateLayout());null==d?d=this._GetFirstItemOnCurrentPage(this._FocusedIndex,a):(d=this._GetFirstItemOnCurrentPage(this._FocusedIndex,a),d===this._FocusedIndex&&(null!=c&&(this._GetIsVerticalOrientation()?c.ScrollToVerticalOffset(Math.max(0,Math.min(c.ScrollableHeight,c.VerticalOffset+c.ViewportHeight*(a?1:-1)))):c.ScrollToHorizontalOffset(Math.max(0,Math.min(c.ScrollableWidth,c.HorizontalOffset+c.ViewportWidth*(a?1:-1)))),c.UpdateLayout()),
d=this._GetFirstItemOnCurrentPage(this._FocusedIndex,a)));return d};c.prototype._ScrollInDirection=function(a){this.$TemplateScrollViewer&&this.$TemplateScrollViewer.ScrollInDirection(a)};c.prototype._IsOnCurrentPage=function(b,c,e){c||(c={Value:null});e||(e={Value:null});var g=d.VisualTreeHelper.GetChild(d.VisualTreeHelper.GetChild(this,0),0),s=this.$TemplateScrollViewer;null!=s&&(g=s,null!=s.$ScrollContentPresenter&&(g=s.$ScrollContentPresenter));g instanceof d.FrameworkElement||(g=null);c=c.Value=
new rect;e=e.Value=new rect;if(!g)return!1;c.Width=g.RenderSize.Width;c.Height=g.RenderSize.Height;b=this.ItemContainerGenerator.ContainerFromItem(b);if(!b)return!1;e.Width=b.RenderSize.Width;e.Height=b.RenderSize.Height;g instanceof a.Control&&(s=g.Padding)&&(c.X+=s.Left,c.Y+=s.Top,c.Width=c.Width-s.Left-s.Right,c.Height=c.Height-s.Top-s.Bottom);s=b.TransformToVisual(g);null!=s&&(g=s.Transform(new Point),b=s.Transform(new Point(b.RenderSize.Width,b.RenderSize.Height)),e.X=Math.min(g.X,b.X),e.Y=Math.min(g.Y,
b.Y),e.Width=Math.abs(g.X-b.X),e.Height=Math.abs(g.Y-b.Y));return this._GetIsVerticalOrientation()?c.X<=e.Y&&rect.getBottom(c)>=rect.getBottom(e):c.X<=e.X&&rect.getRight(c)>=rect.getRight(e)};c.prototype._GetFirstItemOnCurrentPage=function(a,c){for(var d=c?1:-1,e=-1,g=a,p=this.Items,k=p.Count;0<=g&&g<k&&!this._IsOnCurrentPage(p.GetValueAt(g));)e=g,g+=d;for(;0<=g&&g<k&&this._IsOnCurrentPage(p.GetValueAt(g));)e=g,g+=d;return e};c.prototype.OnItemContainerStyleChanged=function(a){var c=a.OldValue;a=
a.NewValue;for(var d=this.Items.Count,e=0;e<d;e++){var g=this.ItemContainerGenerator.ContainerFromIndex(e);null!=g&&g.Style===c&&(g.Style=a)}};c.prototype.OnKeyDown=function(b){if(!b.Handled){var c=!1,e=-1;switch(b.Key){case d.Input.Key.Space:case d.Input.Key.Enter:if((d.Input.Key.Enter!==b.Key||d.Input.KeyboardNavigation.GetAcceptsReturn(this))&&!d.Input.Keyboard.HasAlt()){var g=this.XamlNode.GetFocusedElement(),s;g instanceof a.ListBoxItem&&(s=g);s&&(d.Input.Keyboard.HasControl()&&s.IsSelected?
this.SelectedItem=null:this.SelectedItem=this.ItemContainerGenerator.ItemFromContainer(s),c=!0)}break;case d.Input.Key.Home:e=0;break;case d.Input.Key.End:e=this.Items.Count-1;break;case d.Input.Key.PageUp:e=this._NavigateByPage(!1);break;case d.Input.Key.PageDown:e=this._NavigateByPage(!0);break;case d.Input.Key.Left:this._GetIsVerticalOrientation()?this._ScrollInDirection(d.Input.Key.Left):e=this._FocusedIndex-1;break;case d.Input.Key.Up:this._GetIsVerticalOrientation()?e=this._FocusedIndex-1:this._ScrollInDirection(d.Input.Key.Up);
break;case d.Input.Key.Right:this._GetIsVerticalOrientation()?this._ScrollInDirection(d.Input.Key.Right):e=this._FocusedIndex+1;break;case d.Input.Key.Down:this._GetIsVerticalOrientation()?e=this._FocusedIndex+1:this._ScrollInDirection(d.Input.Key.Down)}-1!==e&&(-1!==this._FocusedIndex&&e!==this._FocusedIndex&&0<=e&&e<this.Items.Count)&&(c=this.ItemContainerGenerator,s=c.ContainerFromIndex(e),e=c.ItemFromContainer(s),this.ScrollIntoView(e),d.Input.Keyboard.HasControl()?s.Focus():this.SelectedItem=
e,c=!0);c&&(b.Handled=!0)}};c.prototype._GetIsVerticalOrientation=function(){var b=this.Panel;return b instanceof a.StackPanel||b instanceof a.VirtualizingStackPanel?b.Orientation===d.Orientation.Vertical:!0};c.prototype.IsItemItsOwnContainer=function(b){return b instanceof a.ListBoxItem};c.prototype.GetContainerForItem=function(){var b=new a.ListBoxItem,c=this.ItemContainerStyle;null!=c&&(b.Style=c);return b};c.prototype.PrepareContainerForItem=function(a,c){e.prototype.PrepareContainerForItem.call(this,
a,c);var d=this.ItemContainerStyle;!a.Style&&d&&(a.Style=d)};c.prototype.OnGotFocus=function(a){e.prototype.OnGotFocus.call(this,a);this.SetValueInternal(c.IsSelectionActiveProperty,!0)};c.prototype.OnLostFocus=function(a){e.prototype.OnLostFocus.call(this,a);this.SetValueInternal(c.IsSelectionActiveProperty,!1)};c.prototype.NotifyListItemGotFocus=function(a){this._FocusedIndex=this.ItemContainerGenerator.IndexFromContainer(a)};c.prototype.NotifyListItemLostFocus=function(a){this._FocusedIndex=-1};
c.ItemContainerStyleProperty=DependencyProperty.RegisterCore("ItemContainerStyle",function(){return d.Style},c,void 0,function(a,c){return a.OnItemContainerStyleChanged(c)});c.SelectionModeProperty=DependencyProperty.Register("SelectionMode",function(){return new Enum(a.SelectionMode)},c,void 0,function(a,c){return a._Selection.Mode=c.NewValue});c.IsSelectionActiveProperty=a.Primitives.Selector.IsSelectionActiveProperty;return c}(a.Primitives.Selector);a.ListBox=g;Nullstone.RegisterType(g,"ListBox")})(d.Controls||
(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.call(this);this.ParentSelectorChanged=new MulticastEvent;this.DefaultStyleKey=this.constructor}__extends(c,d);Object.defineProperty(c.prototype,"ParentSelector",{get:function(){return this._ParentSelector},set:function(a){this._ParentSelector!==a&&(this._ParentSelector=a,this.ParentSelectorChanged.Raise(this,EventArgs.Empty))},enumerable:!0,configurable:!0});c.prototype.OnApplyTemplate=function(){d.prototype.OnApplyTemplate.call(this);this.UpdateVisualState(!1)};
c.prototype.OnMouseLeftButtonDown=function(a){a.Handled||(a.Handled=!0,this.XamlNode.Focus(!0)&&null!=this._ParentSelector&&this._ParentSelector.NotifyListItemClicked(this))};c.prototype.OnMouseEnter=function(a){d.prototype.OnMouseEnter.call(this,a);this.UpdateVisualState()};c.prototype.OnMouseLeave=function(a){d.prototype.OnMouseLeave.call(this,a);this.UpdateVisualState()};c.prototype.OnGotFocus=function(a){d.prototype.OnGotFocus.call(this,a);this.UpdateVisualState();null!=this._ParentSelector&&
this._ParentSelector.NotifyListItemGotFocus(this)};c.prototype.OnLostFocus=function(a){d.prototype.OnLostFocus.call(this,a);this.UpdateVisualState();null!=this._ParentSelector&&this._ParentSelector.NotifyListItemLostFocus(this)};c.prototype.GetVisualStateNamesToActivate=function(){var a=d.prototype.GetVisualStateNamesToActivate.call(this);a.push(this.GetVisualStateSelection());return a};c.prototype.GetVisualStateCommon=function(){return this.IsEnabled?this.IsMouseOver?"MouseOver":"Normal":this.Content instanceof
a.Control?"Normal":"Disabled"};c.prototype.GetVisualStateSelection=function(){return this.IsSelected?this.IsFocused?"Selected":"SelectedUnfocused":"Unselected"};c.prototype.OnIsSelectedChanged=function(a){this.UpdateVisualState()};c.IsSelectedProperty=DependencyProperty.RegisterCore("IsSelected",function(){return Boolean},c,null,function(a,c){return a.OnIsSelectedChanged(c)});return c}(a.ContentControl);a.ListBoxItem=d;Nullstone.RegisterType(d,"ListBoxItem")})(d.Controls||(d.Controls={}))})(Fayde||
(Fayde={}));(function(d){(function(a){var d=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.TitleProperty=DependencyProperty.Register("Title",function(){return String},c);return c}(a.UserControl);a.Page=d;Nullstone.RegisterType(d,"Page")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(a,b,d){return"number"!==typeof d?!1:0<=d}var e=function(c){function b(){c.call(this,a.TextBoxEmitChangedType.TEXT,b.PasswordProperty);this.PasswordChangedEvent=new d.RoutedEvent;this.DefaultStyleKey=this.constructor}__extends(b,c);Object.defineProperty(b.prototype,"DisplayText",{get:function(){for(var a="",b=this._Buffer.length,c=this.PasswordChar;0<b;)b&1&&(a+=c),b>>=1,c+=c;return a},enumerable:!0,configurable:!0});b.prototype.CursorDown=function(a,b){return this._Buffer.length};
b.prototype.CursorUp=function(a,b){return 0};b.prototype.CursorNextWord=function(a){return this._Buffer.length};b.prototype.CursorPrevWord=function(a){return 0};b.prototype.CursorLineBegin=function(a){return 0};b.prototype.CursorLineEnd=function(a){return this._Buffer.length};b.prototype._EmitTextChanged=function(){this.PasswordChangedEvent.RaiseAsync(this,new d.RoutedEventArgs)};b.prototype._SelectionBackgroundChanged=function(b){var c=this,d=b.NewValue;this._SelectionBackgroundListener&&this._SelectionBackgroundListener.Detach();
this._SelectionBackgroundListener=null;d&&(this._SelectionBackgroundListener=d.Listen(function(b){c._ModelChanged(a.TextBoxModelChangedType.Brush,d);c.XamlNode.LayoutUpdater.Invalidate()}));this._ModelChanged(a.TextBoxModelChangedType.Brush,d);this.XamlNode.LayoutUpdater.Invalidate()};b.prototype._SelectionForegroundChanged=function(b){var c=this,d=b.NewValue;this._SelectionForegroundListener&&this._SelectionForegroundListener.Detach();this._SelectionForegroundListener=null;d&&(this._SelectionForegroundListener=
d.Listen(function(b){c._ModelChanged(a.TextBoxModelChangedType.Brush,d);c.XamlNode.LayoutUpdater.Invalidate()}));this._ModelChanged(a.TextBoxModelChangedType.Brush,d);this.XamlNode.LayoutUpdater.Invalidate()};b.BaselineOffsetProperty=DependencyProperty.Register("BaselineOffset",function(){return Number},b);b.CaretBrushProperty=DependencyProperty.RegisterCore("CaretBrush",function(){return d.Media.Brush},b);b.MaxLengthProperty=DependencyProperty.RegisterFull("MaxLength",function(){return Number},b,
0,function(a,b){return a.$MaxLength=b.NewValue},void 0,void 0,g);b.PasswordCharProperty=DependencyProperty.Register("PasswordChar",function(){return String},b,String.fromCharCode(9679),function(b,c){return b._ModelChanged(a.TextBoxModelChangedType.Text,c.NewValue)});b.PasswordProperty=DependencyProperty.Register("Password",function(){return String},b,void 0,function(a,b){return a._TextChanged(b.NewValue)});b.SelectionForegroundProperty=DependencyProperty.RegisterCore("SelectionForeground",function(){return d.Media.Brush},
b,void 0,function(a,b){return a._SelectionForegroundChanged(b)});b.SelectionBackgroundProperty=DependencyProperty.RegisterCore("SelectionBackground",function(){return d.Media.Brush},b,void 0,function(a,b){return a._SelectionBackgroundChanged(b)});return b}(a.TextBoxBase);a.PasswordBox=e;Nullstone.RegisterType(e,"PasswordBox")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);this.DefaultStyleKey=this.constructor}__extends(c,e);c.prototype.OnApplyTemplate=function(){e.prototype.OnApplyTemplate.call(this);var a=this._Track;a&&a.SizeChanged.Unsubscribe(this._OnTrackSizeChanged,this);a=this._Track=this.GetTemplateChild("ProgressBarTrack");this._Indicator=this.GetTemplateChild("ProgressBarIndicator");a&&a.SizeChanged.Subscribe(this._OnTrackSizeChanged,this);this.UpdateVisualState(!1)};c.prototype.OnValueChanged=
function(a,c){e.prototype.OnValueChanged.call(this,a,c);this._UpdateIndicator()};c.prototype._OnTrackSizeChanged=function(a,c){this._UpdateIndicator()};c.prototype._IsIndeterminateChanged=function(a){this.UpdateVisualState();this._UpdateIndicator()};c.prototype._UpdateIndicator=function(){var b=this.Minimum,c=this.Maximum,e=this.Value;if(this._Track&&!this._Indicator){var g=d.VisualTreeHelper.GetParent(this);if(g){var s=this._Indicator.Margin.Left+this._Indicator.Margin.Right,p=null;g instanceof a.Border?
p=g.Padding:g instanceof a.Control&&(p=g.Padding);p&&(s+=p.Left,s+=p.Right);b=this.IsIndeterminate||(c===b?1:(e-b)/(c-b));g=Math.max(0,g.ActualWidth-s);this._Indicator.Width=g*b}}};c.prototype.GetVisualStateNamesToActivate=function(){return this.IsIndeterminate?["Indeterminate"]:["Determinate"]};c.IsIndeterminateProperty=DependencyProperty.Register("IsIndeterminate",function(){return Boolean},c,!1,function(a,c){return a._IsIndeterminateChanged(c)});return c}(a.Primitives.RangeBase);a.ProgressBar=
g;Nullstone.RegisterType(g,"ProgressBar")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(a,b){if(a===b)return!0;var d=1.11022302462516E-16*(Math.abs(a)+Math.abs(b)+10),e=a-b;return-d<e&&d>e}var e=function(c){function b(){c.call(this);this.$TemplatedParentHandlesScrolling=!1;this.DefaultStyleKey=this.constructor}__extends(b,c);b._ScrollBarVisibilityChanged=function(c,d){if(c)if(c instanceof b){c.XamlNode.LayoutUpdater.InvalidateMeasure();var e=c.ScrollInfo;e&&(e.CanHorizontallyScroll=c.HorizontalScrollBarVisibility!==a.ScrollBarVisibility.Disabled,
e.CanVerticallyScroll=c.VerticalScrollBarVisibility!==a.ScrollBarVisibility.Disabled);c._UpdateScrollBarVisibility()}else c instanceof a.ListBox&&c.$TemplateScrollViewer&&c.$TemplateScrollViewer.SetValue(d.Property,d.NewValue)};b.GetHorizontalScrollBarVisibility=function(a){return a.GetValue(b.HorizontalScrollBarVisibilityProperty)};b.SetHorizontalScrollBarVisibility=function(a,c){a.SetValue(b.HorizontalScrollBarVisibilityProperty,c)};Object.defineProperty(b.prototype,"HorizontalScrollBarVisibility",
{get:function(){return this.GetValue(b.HorizontalScrollBarVisibilityProperty)},set:function(a){this.SetValue(b.HorizontalScrollBarVisibilityProperty,a)},enumerable:!0,configurable:!0});b.GetVerticalScrollBarVisibility=function(a){return a.GetValue(b.VerticalScrollBarVisibilityProperty)};b.SetVerticalScrollBarVisibility=function(a,c){a.SetValue(b.VerticalScrollBarVisibilityProperty,c)};Object.defineProperty(b.prototype,"VerticalScrollBarVisibility",{get:function(){return this.GetValue(b.VerticalScrollBarVisibilityProperty)},
set:function(a){this.SetValue(b.VerticalScrollBarVisibilityProperty,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"ScrollInfo",{get:function(){return this._ScrollInfo},set:function(b){if(this._ScrollInfo=b)b.CanHorizontallyScroll=this.HorizontalScrollBarVisibility!==a.ScrollBarVisibility.Disabled,b.CanVerticallyScroll=this.VerticalScrollBarVisibility!==a.ScrollBarVisibility.Disabled},enumerable:!0,configurable:!0});b.prototype.InvalidateScrollInfo=function(){var a=this.ScrollInfo;
a&&(this.SetValueInternal(b.ExtentWidthProperty,a.ExtentWidth),this.SetValueInternal(b.ExtentHeightProperty,a.ExtentHeight),this.SetValueInternal(b.ViewportWidthProperty,a.ViewportWidth),this.SetValueInternal(b.ViewportHeightProperty,a.ViewportHeight),this._UpdateScrollBar(d.Orientation.Horizontal,a.HorizontalOffset),this._UpdateScrollBar(d.Orientation.Vertical,a.VerticalOffset),this._UpdateScrollBarVisibility());var a=this.XamlNode.LayoutUpdater,c=Math.max(0,this.ExtentWidth-this.ViewportWidth);
c!==this.ScrollableWidth&&(this.SetValueInternal(b.ScrollableWidthProperty,c),a.InvalidateMeasure());c=Math.max(0,this.ExtentHeight-this.ViewportHeight);c!==this.ScrollableHeight&&(this.SetValueInternal(b.ScrollableHeightProperty,c),a.InvalidateMeasure())};b.prototype._UpdateScrollBarVisibility=function(){var c=this.XamlNode.LayoutUpdater,e=this.ScrollInfo,g=d.Visibility.Visible;switch(this.HorizontalScrollBarVisibility){case a.ScrollBarVisibility.Visible:break;case a.ScrollBarVisibility.Disabled:case a.ScrollBarVisibility.Hidden:g=
d.Visibility.Collapsed;break;default:g=!e||e.ExtentWidth<=e.ViewportWidth?d.Visibility.Collapsed:d.Visibility.Visible}g!==this.ComputedHorizontalScrollBarVisibility&&(this.SetValueInternal(b.ComputedHorizontalScrollBarVisibilityProperty,g),c.InvalidateMeasure());g=d.Visibility.Visible;switch(this.VerticalScrollBarVisibility){case a.ScrollBarVisibility.Visible:break;case a.ScrollBarVisibility.Disabled:case a.ScrollBarVisibility.Hidden:g=d.Visibility.Collapsed;break;default:g=!e||e.ExtentHeight<=e.ViewportHeight?
d.Visibility.Collapsed:d.Visibility.Visible}g!==this.ComputedVerticalScrollBarVisibility&&(this.SetValueInternal(b.ComputedVerticalScrollBarVisibilityProperty,g),c.InvalidateMeasure())};b.prototype._UpdateScrollBar=function(a,c){a===d.Orientation.Horizontal?(this.SetValueInternal(b.HorizontalOffsetProperty,c),this.$HorizontalScrollBar&&(this.$HorizontalScrollBar.Value=c)):(this.SetValueInternal(b.VerticalOffsetProperty,c),this.$VerticalScrollBar&&(this.$VerticalScrollBar.Value=c))};b.prototype._GetChildOfType=
function(a,b){var c=this.GetTemplateChild(a);if(c instanceof b)return c};b.prototype.OnApplyTemplate=function(){var b=this;c.prototype.OnApplyTemplate.call(this);this.$ScrollContentPresenter=this._GetChildOfType("ScrollContentPresenter",a.ScrollContentPresenter);(this.$HorizontalScrollBar=this._GetChildOfType("HorizontalScrollBar",a.Primitives.ScrollBar))&&this.$HorizontalScrollBar.Scroll.Subscribe(function(a,c){return b._HandleScroll(d.Orientation.Horizontal,c)},this);(this.$VerticalScrollBar=this._GetChildOfType("VerticalScrollBar",
a.Primitives.ScrollBar))&&this.$VerticalScrollBar.Scroll.Subscribe(function(a,c){return b._HandleScroll(d.Orientation.Vertical,c)},this);this._UpdateScrollBarVisibility()};b.prototype.OnMouseLeftButtonDown=function(a){!a.Handled&&this.Focus()&&(a.Handled=!0);c.prototype.OnMouseLeftButtonDown.call(this,a)};b.prototype.OnMouseWheel=function(a){c.prototype.OnMouseWheel.call(this,a);if(!a.Handled){var b=this.ScrollInfo;b&&(0<a.Delta&&0!==b.VerticalOffset||0>a.Delta&&b.VerticalOffset<this.ScrollableHeight)&&
(0<=a.Delta?b.MouseWheelUp():b.MouseWheelDown(),a.Handled=!0)}};b.prototype.OnKeyDown=function(a){c.prototype.OnKeyDown.call(this,a);this._HandleKeyDown(a)};b.prototype._HandleKeyDown=function(b){if(!b.Handled&&this.$TemplatedParentHandlesScrolling){var c=d.Orientation.Vertical,e=a.Primitives.ScrollEventType.ThumbTrack;switch(b.Key){case d.Input.Key.PageUp:e=a.Primitives.ScrollEventType.LargeDecrement;break;case d.Input.Key.PageDown:e=a.Primitives.ScrollEventType.LargeIncrement;break;case d.Input.Key.End:b.Modifiers.Ctrl||
(c=d.Orientation.Horizontal);e=a.Primitives.ScrollEventType.Last;break;case d.Input.Key.Home:b.Modifiers.Ctrl||(c=d.Orientation.Horizontal);e=a.Primitives.ScrollEventType.First;break;case d.Input.Key.Left:c=d.Orientation.Horizontal;case d.Input.Key.Up:e=a.Primitives.ScrollEventType.SmallDecrement;break;case d.Input.Key.Right:c=d.Orientation.Horizontal;case d.Input.Key.Down:e=a.Primitives.ScrollEventType.SmallIncrement}e!==a.Primitives.ScrollEventType.ThumbTrack&&(this._HandleScroll(c,new a.Primitives.ScrollEventArgs(e,
0)),b.Handled=!0)}};b.prototype.ScrollInDirection=function(a){switch(a){case d.Input.Key.PageUp:this.PageUp();break;case d.Input.Key.PageDown:this.PageDown();break;case d.Input.Key.End:this.PageEnd();break;case d.Input.Key.Home:this.PageHome();break;case d.Input.Key.Left:this.LineLeft();break;case d.Input.Key.Up:this.LineUp();break;case d.Input.Key.Right:this.LineRight();break;case d.Input.Key.Down:this.LineDown()}};b.prototype.ScrollToHorizontalOffset=function(b){this._HandleHorizontalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.ThumbPosition,
b))};b.prototype.ScrollToVerticalOffset=function(b){this._HandleVerticalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.ThumbPosition,b))};b.prototype.LineUp=function(){this._HandleVerticalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.SmallDecrement,0))};b.prototype.LineDown=function(){this._HandleVerticalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.SmallIncrement,0))};b.prototype.LineLeft=function(){this._HandleHorizontalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.SmallDecrement,
0))};b.prototype.LineRight=function(){this._HandleHorizontalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.SmallIncrement,0))};b.prototype.PageHome=function(){this._HandleHorizontalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.First,0))};b.prototype.PageEnd=function(){this._HandleHorizontalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.Last,0))};b.prototype.PageUp=function(){this._HandleVerticalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.LargeDecrement,
0))};b.prototype.PageDown=function(){this._HandleVerticalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.LargeIncrement,0))};b.prototype.PageLeft=function(){this._HandleHorizontalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.LargeDecrement,0))};b.prototype.PageRight=function(){this._HandleHorizontalScroll(new a.Primitives.ScrollEventArgs(a.Primitives.ScrollEventType.LargeIncrement,0))};b.prototype._HandleScroll=function(a,b){a!==d.Orientation.Horizontal?
this._HandleVerticalScroll(b):this._HandleHorizontalScroll(b)};b.prototype._HandleHorizontalScroll=function(b){var c=this.ScrollInfo;if(c){var d=c.HorizontalOffset,e=d;switch(b.ScrollEventType){case a.Primitives.ScrollEventType.SmallDecrement:c.LineLeft();break;case a.Primitives.ScrollEventType.SmallIncrement:c.LineRight();break;case a.Primitives.ScrollEventType.LargeDecrement:c.PageLeft();break;case a.Primitives.ScrollEventType.LargeIncrement:c.PageRight();break;case a.Primitives.ScrollEventType.ThumbPosition:case a.Primitives.ScrollEventType.ThumbTrack:e=
b.Value;break;case a.Primitives.ScrollEventType.First:e=Number.NEGATIVE_INFINITY;break;case a.Primitives.ScrollEventType.Last:e=Number.POSITIVE_INFINITY}e=Math.max(e,0);e=Math.min(this.ScrollableWidth,e);g(d,e)||c.SetHorizontalOffset(e)}};b.prototype._HandleVerticalScroll=function(b){var c=this.ScrollInfo;if(c){var d=c.VerticalOffset,e=d;switch(b.ScrollEventType){case a.Primitives.ScrollEventType.SmallDecrement:c.LineUp();break;case a.Primitives.ScrollEventType.SmallIncrement:c.LineDown();break;case a.Primitives.ScrollEventType.LargeDecrement:c.PageUp();
break;case a.Primitives.ScrollEventType.LargeIncrement:c.PageDown();break;case a.Primitives.ScrollEventType.ThumbPosition:case a.Primitives.ScrollEventType.ThumbTrack:e=b.Value;break;case a.Primitives.ScrollEventType.First:e=Number.NEGATIVE_INFINITY;break;case a.Primitives.ScrollEventType.Last:e=Number.POSITIVE_INFINITY}e=Math.max(e,0);e=Math.min(this.ScrollableHeight,e);g(d,e)||c.SetVerticalOffset(e)}};b.HorizontalScrollBarVisibilityProperty=DependencyProperty.RegisterAttachedCore("HorizontalScrollBarVisibility",
function(){return new Enum(a.ScrollBarVisibility)},b,a.ScrollBarVisibility.Disabled,b._ScrollBarVisibilityChanged);b.VerticalScrollBarVisibilityProperty=DependencyProperty.RegisterAttachedCore("VerticalScrollBarVisibility",function(){return new Enum(a.ScrollBarVisibility)},b,a.ScrollBarVisibility.Disabled,b._ScrollBarVisibilityChanged);b.ComputedHorizontalScrollBarVisibilityProperty=DependencyProperty.RegisterReadOnlyCore("ComputedHorizontalScrollBarVisibility",function(){return new Enum(d.Visibility)},
b);b.ComputedVerticalScrollBarVisibilityProperty=DependencyProperty.RegisterReadOnlyCore("ComputedVerticalScrollBarVisibility",function(){return new Enum(d.Visibility)},b);b.HorizontalOffsetProperty=DependencyProperty.RegisterReadOnlyCore("HorizontalOffset",function(){return Number},b);b.VerticalOffsetProperty=DependencyProperty.RegisterReadOnlyCore("VerticalOffset",function(){return Number},b);b.ScrollableWidthProperty=DependencyProperty.RegisterReadOnlyCore("ScrollableWidth",function(){return Number},
b);b.ScrollableHeightProperty=DependencyProperty.RegisterReadOnlyCore("ScrollableHeight",function(){return Number},b);b.ViewportWidthProperty=DependencyProperty.RegisterReadOnlyCore("ViewportWidth",function(){return Number},b);b.ViewportHeightProperty=DependencyProperty.RegisterReadOnlyCore("ViewportHeight",function(){return Number},b);b.ExtentWidthProperty=DependencyProperty.RegisterReadOnlyCore("ExtentWidth",function(){return Number},b);b.ExtentHeightProperty=DependencyProperty.RegisterReadOnlyCore("ExtentHeight",
function(){return Number},b);return b}(a.ContentControl);a.ScrollViewer=e;Nullstone.RegisterType(e,"ScrollViewer")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.call(this);this._DragValue=0;this.DefaultStyleKey=this.constructor;this.SizeChanged.Subscribe(this._HandleSizeChanged,this)}__extends(c,e);c.prototype._GetChildOfType=function(a,c){var d=this.GetTemplateChild(a);if(d instanceof c)return d};c.prototype.OnApplyTemplate=function(){e.prototype.OnApplyTemplate.call(this);this.$HorizontalTemplate=this._GetChildOfType("HorizontalTemplate",d.FrameworkElement);this.$HorizontalLargeIncrease=this._GetChildOfType("HorizontalTrackLargeChangeIncreaseRepeatButton",
a.Primitives.RepeatButton);this.$HorizontalLargeDecrease=this._GetChildOfType("HorizontalTrackLargeChangeDecreaseRepeatButton",a.Primitives.RepeatButton);this.$HorizontalThumb=this._GetChildOfType("HorizontalThumb",a.Primitives.Thumb);this.$VerticalTemplate=this._GetChildOfType("VerticalTemplate",d.FrameworkElement);this.$VerticalLargeIncrease=this._GetChildOfType("VerticalTrackLargeChangeIncreaseRepeatButton",a.Primitives.RepeatButton);this.$VerticalLargeDecrease=this._GetChildOfType("VerticalTrackLargeChangeDecreaseRepeatButton",
a.Primitives.RepeatButton);this.$VerticalThumb=this._GetChildOfType("VerticalThumb",a.Primitives.Thumb);null!=this.$HorizontalThumb&&(this.$HorizontalThumb.DragStarted.Subscribe(this._OnThumbDragStarted,this),this.$HorizontalThumb.DragDelta.Subscribe(this._OnThumbDragDelta,this));null!=this.$HorizontalLargeDecrease&&this.$HorizontalLargeDecrease.Click.Subscribe(function(a,c){this.Focus();this.Value-=this.LargeChange},this);null!=this.$HorizontalLargeIncrease&&this.$HorizontalLargeIncrease.Click.Subscribe(function(a,
c){this.Focus();this.Value+=this.LargeChange},this);null!=this.$VerticalThumb&&(this.$VerticalThumb.DragStarted.Subscribe(this._OnThumbDragStarted,this),this.$VerticalThumb.DragDelta.Subscribe(this._OnThumbDragDelta,this));null!=this.$VerticalLargeDecrease&&this.$VerticalLargeDecrease.Click.Subscribe(function(a,c){this.Focus();this.Value-=this.LargeChange},this);null!=this.$VerticalLargeIncrease&&this.$VerticalLargeIncrease.Click.Subscribe(function(a,c){this.Focus();this.Value+=this.LargeChange},
this);this._OnOrientationChanged();this.UpdateVisualState(!1)};c.prototype.OnIsEnabledChanged=function(a){e.prototype.OnIsEnabledChanged.call(this,a);this.UpdateVisualState()};c.prototype.OnMinimumChanged=function(a,c){e.prototype.OnMinimumChanged.call(this,a,c);this._UpdateTrackLayout()};c.prototype.OnMaximumChanged=function(a,c){e.prototype.OnMaximumChanged.call(this,a,c);this._UpdateTrackLayout()};c.prototype.OnValueChanged=function(a,c){e.prototype.OnValueChanged.call(this,a,c);this._UpdateTrackLayout()};
c.prototype._HandleSizeChanged=function(a,c){this._UpdateTrackLayout()};c.prototype._OnOrientationChanged=function(){var a=this.Orientation===d.Orientation.Horizontal;null!=this.$HorizontalTemplate&&(this.$HorizontalTemplate.Visibility=a?d.Visibility.Visible:d.Visibility.Collapsed);null!=this.$VerticalTemplate&&(this.$VerticalTemplate.Visibility=a?d.Visibility.Collapsed:d.Visibility.Visible);this._UpdateTrackLayout()};c.prototype._UpdateTrackLayout=function(){var b=this.Maximum,c=this.Minimum,e=this.Value,
g=this.Orientation===d.Orientation.Horizontal,s=g?this.$HorizontalTemplate:this.$VerticalTemplate;if(s instanceof a.Grid){var p=this.IsDirectionReversed,k,m;if(g){var l=s.ColumnDefinitions,s=this.$HorizontalLargeDecrease;k=this.$HorizontalLargeIncrease;m=this.$HorizontalThumb;l&&3===l.Count&&(l.GetValueAt(0).Width=new a.GridLength(1,p?a.GridUnitType.Star:a.GridUnitType.Auto),l.GetValueAt(2).Width=new a.GridLength(1,p?a.GridUnitType.Auto:a.GridUnitType.Star),null!=s&&a.Grid.SetColumn(s,p?2:0),null!=
k&&a.Grid.SetColumn(k,p?0:2))}else l=s.RowDefinitions,s=this.$VerticalLargeDecrease,k=this.$VerticalLargeIncrease,m=this.$VerticalThumb,l&&3===l.Count&&(l.GetValueAt(0).Height=new a.GridLength(1,p?a.GridUnitType.Auto:a.GridUnitType.Star),l.GetValueAt(2).Height=new a.GridLength(1,p?a.GridUnitType.Star:a.GridUnitType.Auto),null!=s&&a.Grid.SetRow(s,p?0:2),null!=k&&a.Grid.SetRow(k,p?2:0));b!==c&&(b=e/(b-c),null!=s&&null!=m&&(g?s.Width=Math.max(0,b*(this.ActualWidth-m.ActualWidth)):s.Height=Math.max(0,
b*(this.ActualHeight-m.ActualHeight))))}};c.prototype._OnThumbDragStarted=function(a,c){this.Focus();this._DragValue=this.Value};c.prototype._OnThumbDragDelta=function(a,c){var e=0,g=this.Orientation===d.Orientation.Horizontal;g&&null!=this.$HorizontalThumb?e=c.HorizontalChange/(this.ActualWidth-this.$HorizontalThumb.ActualWidth)*(this.Maximum-this.Minimum):g||null==this.$VerticalThumb||(e=-c.VerticalChange/(this.ActualHeight-this.$VerticalThumb.ActualHeight)*(this.Maximum-this.Minimum));!isNaN(e)&&
isFinite(e)&&(this._DragValue+=this.IsDirectionReversed?-e:e,e=Math.min(this.Maximum,Math.max(this.Minimum,this._DragValue)),e!=this.Value&&(this.Value=e))};c.prototype.OnMouseEnter=function(a){e.prototype.OnMouseEnter.call(this,a);(this.Orientation===d.Orientation.Horizontal&&null!=this.$HorizontalThumb&&this.$HorizontalThumb.IsDragging||this.Orientation===d.Orientation.Vertical&&null!=this.$VerticalThumb&&this.$VerticalThumb.IsDragging)&&this.UpdateVisualState()};c.prototype.OnMouseLeave=function(a){e.prototype.OnMouseLeave.call(this,
a);(this.Orientation===d.Orientation.Horizontal&&null!=this.$HorizontalThumb&&this.$HorizontalThumb.IsDragging||this.Orientation===d.Orientation.Vertical&&null!=this.$VerticalThumb&&this.$VerticalThumb.IsDragging)&&this.UpdateVisualState()};c.prototype.OnMouseLeftButtonDown=function(a){e.prototype.OnMouseLeftButtonDown.call(this,a);a.Handled||(a.Handled=!0,this.Focus(),this.CaptureMouse())};c.prototype.OnLostMouseCapture=function(a){e.prototype.OnLostMouseCapture.call(this,a);this.UpdateVisualState()};
c.prototype.OnKeyDown=function(a){e.prototype.OnKeyDown.call(this,a);if(!a.Handled&&this.IsEnabled)switch(a.Key){case d.Input.Key.Left:case d.Input.Key.Down:this.Value+=this.IsDirectionReversed?this.SmallChange:-this.SmallChange;break;case d.Input.Key.Right:case d.Input.Key.Up:this.Value+=this.IsDirectionReversed?-this.SmallChange:this.SmallChange;break;case d.Input.Key.Home:this.Value=this.Minimum;break;case d.Input.Key.End:this.Value=this.Maximum}};c.prototype.OnGotFocus=function(a){e.prototype.OnGotFocus.call(this,
a);this.SetValueInternal(c.IsFocusedProperty,!0)};c.prototype.OnLostFocus=function(a){e.prototype.OnLostFocus.call(this,a);this.SetValueInternal(c.IsFocusedProperty,!1)};c.IsDirectionReversedProperty=DependencyProperty.RegisterCore("IsDirectionReversed",function(){return Boolean},c,!1,function(a,c){return a._UpdateTrackLayout()});c.IsFocusedProperty=DependencyProperty.RegisterReadOnlyCore("IsFocused",function(){return Boolean},c,!1,function(a,c){return a.UpdateVisualState()});c.OrientationProperty=
DependencyProperty.RegisterCore("Orientation",function(){return new Enum(d.Orientation)},c,d.Orientation.Horizontal,function(a,c){return a._OnOrientationChanged()});return c}(a.Primitives.RangeBase);a.Slider=g;Nullstone.RegisterType(g,"Slider")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){function g(a,b,d){return"number"!==typeof d?!1:0<=d}var e=function(c){function b(){c.call(this,a.TextBoxEmitChangedType.TEXT|a.TextBoxEmitChangedType.SELECTION,b.TextProperty);this.SelectionChanged=new d.RoutedEvent;this.TextChanged=new d.RoutedEvent;this.DefaultStyleKey=this.constructor}__extends(b,c);b.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this);var b=this.$ContentElement;if(b){var d=b.constructor,e=DependencyProperty.GetDependencyProperty(d,
"VerticalScrollBarVisibility",!0);e&&b.SetValueInternal(e,this.VerticalScrollBarVisibility);(e=DependencyProperty.GetDependencyProperty(d,"HorizontalScrollBarVisibility",!0))&&b.SetValueInternal(e,this.TextWrapping===a.TextWrapping.Wrap?a.ScrollBarVisibility.Disabled:this.HorizontalScrollBarVisibility)}};Object.defineProperty(b.prototype,"DisplayText",{get:function(){return this.Text},enumerable:!0,configurable:!0});b.prototype.CursorDown=function(a,b){return a};b.prototype.CursorUp=function(a,b){return a};
b.prototype.CursorNextWord=function(a){return a};b.prototype.CursorPrevWord=function(a){return a};b.prototype.CursorLineBegin=function(a){var b=this._Buffer,c=b.lastIndexOf("\r",a);a=b.lastIndexOf("\n",a);return Math.max(c,a,0)};b.prototype.CursorLineEnd=function(a){var b=this._Buffer,c=b.length,d=b.indexOf("\r",a);0>d&&(d=c);a=b.indexOf("\n",a);0>a&&(a=c);return Math.min(d,a)};b.prototype._EmitTextChanged=function(){this.TextChanged.RaiseAsync(this,new d.RoutedEventArgs)};b.prototype._EmitSelectionChanged=
function(){this.SelectionChanged.RaiseAsync(this,new d.RoutedEventArgs)};b.prototype._IsReadOnlyChanged=function(a){this.$IsReadOnly=!0===a.NewValue;this.$IsFocused&&this.$IsReadOnly&&this._ResetIMContext();this.$View&&this.$View.SetEnableCursor(!this.$IsReadOnly)};b.prototype._FontChanged=function(b){this._ModelChanged(a.TextBoxModelChangedType.Font,b.NewValue)};b.prototype._SelectionBackgroundChanged=function(b){var c=this,d=b.NewValue;this._SelectionBackgroundListener&&this._SelectionBackgroundListener.Detach();
this._SelectionBackgroundListener=null;d&&(this._SelectionBackgroundListener=d.Listen(function(b){c._ModelChanged(a.TextBoxModelChangedType.Brush,d);c.XamlNode.LayoutUpdater.Invalidate()}));this._ModelChanged(a.TextBoxModelChangedType.Brush,d);this.XamlNode.LayoutUpdater.Invalidate()};b.prototype._SelectionForegroundChanged=function(b){var c=this,d=b.NewValue;this._SelectionForegroundListener&&this._SelectionForegroundListener.Detach();this._SelectionForegroundListener=null;d&&(this._SelectionForegroundListener=
d.Listen(function(b){c._ModelChanged(a.TextBoxModelChangedType.Brush,d);c.XamlNode.LayoutUpdater.Invalidate()}));this._ModelChanged(a.TextBoxModelChangedType.Brush,d);this.XamlNode.LayoutUpdater.Invalidate()};b.prototype._TextAlignmentChanged=function(b){this._ModelChanged(a.TextBoxModelChangedType.TextAlignment,b.NewValue)};b.prototype._TextWrappingChanged=function(b){var c=this.$ContentElement;if(c){var d=DependencyProperty.GetDependencyProperty(c.constructor,"HorizontalScrollBarVisibility",!0);
d&&c.SetValueInternal(d,b.NewValue===a.TextWrapping.Wrap?a.ScrollBarVisibility.Disabled:this.HorizontalScrollBarVisibility)}this._ModelChanged(a.TextBoxModelChangedType.TextWrapping,b.NewValue)};b.prototype._HorizontalScrollBarVisibilityChanged=function(b){var c=this.$ContentElement;if(c){var d=DependencyProperty.GetDependencyProperty(c.constructor,"HorizontalScrollBarVisibility");d&&c.SetValueInternal(d,this.TextWrapping===a.TextWrapping.Wrap?a.ScrollBarVisibility.Disabled:b.NewValue)}};b.prototype._VerticalScrollBarVisibilityChanged=
function(a){var b=this.$ContentElement;if(b){var c=DependencyProperty.GetDependencyProperty(b.constructor,"VerticalScrollBarVisibility");c&&b.SetValueInternal(c,a.NewValue)}};b.prototype.OnMouseEnter=function(a){c.prototype.OnMouseEnter.call(this,a);this.UpdateVisualState()};b.prototype.OnMouseLeave=function(a){c.prototype.OnMouseLeave.call(this,a);this.UpdateVisualState()};b.prototype.OnGotFocus=function(a){c.prototype.OnGotFocus.call(this,a);this.UpdateVisualState()};b.prototype.OnLostFocus=function(a){c.prototype.OnLostFocus.call(this,
a);this.UpdateVisualState()};b.prototype.GetVisualStateCommon=function(){return this.IsEnabled?this.IsReadOnly?"ReadOnly":this.IsMouseOver?"MouseOver":"Normal":"Disabled"};b.AcceptsReturnProperty=DependencyProperty.Register("AcceptsReturn",function(){return Boolean},b,!1,function(a,b){return a.$AcceptsReturn=!0===b.NewValue});b.CaretBrushProperty=DependencyProperty.RegisterCore("CaretBrush",function(){return d.Media.Brush},b);b.MaxLengthProperty=DependencyProperty.RegisterFull("MaxLength",function(){return Number},
b,0,function(a,b){return a.$MaxLength=b.NewValue},void 0,void 0,g);b.IsReadOnlyProperty=DependencyProperty.Register("IsReadOnly",function(){return Boolean},b,void 0,function(a,b){return a._IsReadOnlyChanged(b)});b.SelectionForegroundProperty=DependencyProperty.RegisterCore("SelectionForeground",function(){return d.Media.Brush},b,void 0,function(a,b){return a._SelectionForegroundChanged(b)});b.SelectionBackgroundProperty=DependencyProperty.RegisterCore("SelectionBackground",function(){return d.Media.Brush},
b,void 0,function(a,b){return a._SelectionBackgroundChanged(b)});b.BaselineOffsetProperty=DependencyProperty.Register("BaselineOffset",function(){return Number},b);b.SelectionLengthProperty=DependencyProperty.RegisterFull("SelectionLength",function(){return Number},b,0,function(a,b){return a._SelectionLengthChanged(b.NewValue)},void 0,!0,g);b.SelectionStartProperty=DependencyProperty.RegisterFull("SelectionStart",function(){return Number},b,0,function(a,b){return a._SelectionStartChanged(b.NewValue)},
void 0,!0,g);b.TextProperty=DependencyProperty.Register("Text",function(){return String},b,void 0,function(a,b){return a._TextChanged(b.NewValue)});b.TextAlignmentProperty=DependencyProperty.Register("TextAlignment",function(){return new Enum(d.TextAlignment)},b,d.TextAlignment.Left,function(a,b){return a._TextAlignmentChanged(b)});b.TextWrappingProperty=DependencyProperty.Register("TextWrapping",function(){return new Enum(a.TextWrapping)},b,a.TextWrapping.NoWrap,function(a,b){return a._TextWrappingChanged(b)});
b.HorizontalScrollBarVisibilityProperty=DependencyProperty.Register("HorizontalScrollBarVisibility",function(){return new Enum(a.ScrollBarVisibility)},b,a.ScrollBarVisibility.Hidden,function(a,b){return a._HorizontalScrollBarVisibilityChanged(b)});b.VerticalScrollBarVisibilityProperty=DependencyProperty.Register("VerticalScrollBarVisibility",function(){return new Enum(a.ScrollBarVisibility)},b,a.ScrollBarVisibility.Hidden,function(a,b){return a._VerticalScrollBarVisibilityChanged(b)});return b}(a.TextBoxBase);
a.TextBox=e;Nullstone.RegisterType(e,"TextBox")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var g=function(e){function c(){e.apply(this,arguments)}__extends(c,e);c.HorizontalOffsetProperty=DependencyProperty.Register("HorizontalOffset",function(){return Number},c);c.VerticalOffsetProperty=DependencyProperty.Register("VerticalOffset",function(){return Number},c);c.IsOpenProperty=DependencyProperty.Register("IsOpen",function(){return Boolean},c);c.PlacementProperty=DependencyProperty.Register("Placement",function(){return new Enum(a.PlacementMode)},c);c.PlacementTargetProperty=
DependencyProperty.Register("PlacementTarget",function(){return d.UIElement},c);return c}(a.ContentControl);a.ToolTip=g;Nullstone.RegisterType(g,"ToolTip")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.call(this);this.Click=new d.RoutedEvent;this._IsSpaceKeyDown=this._IsMouseLeftButtonDown=this._IsMouseCaptured=!1;this._MousePosition=new Point;this._SuspendStateChanges=!1;this.IsTabStop=!0}__extends(b,c);b.prototype.OnIsPressedChanged=function(a){this.UpdateVisualState()};b.prototype.OnIsEnabledChanged=function(a){a=a.NewValue;this._SuspendStateChanges=!0;try{a||(this.SetValueInternal(b.IsFocusedProperty,!1),this.SetValueInternal(b.IsPressedProperty,
!1),this._IsMouseLeftButtonDown=this._IsSpaceKeyDown=this._IsMouseCaptured=!1)}finally{this._SuspendStateChanges=!1,this.UpdateVisualState()}};b.prototype.OnMouseEnter=function(d){c.prototype.OnMouseEnter.call(this,d);this._SuspendStateChanges=!0;try{this.ClickMode===a.ClickMode.Hover&&this.IsEnabled&&(this.SetValueInternal(b.IsPressedProperty,!0),this.OnClick())}finally{this._SuspendStateChanges=!1,this.UpdateVisualState()}};b.prototype.OnMouseLeave=function(d){c.prototype.OnMouseLeave.call(this,
d);this._SuspendStateChanges=!0;try{this.ClickMode===a.ClickMode.Hover&&this.IsEnabled&&this.SetValueInternal(b.IsPressedProperty,!1)}finally{this._SuspendStateChanges=!1,this.UpdateVisualState()}};b.prototype.OnMouseMove=function(d){c.prototype.OnMouseMove.call(this,d);this._MousePosition=d.GetPosition(this);this._IsMouseLeftButtonDown&&(this.IsEnabled&&this.ClickMode!==a.ClickMode.Hover&&this._IsMouseCaptured&&!this._IsSpaceKeyDown)&&this.SetValueInternal(b.IsPressedProperty,this._IsValidMousePosition())};
b.prototype.OnMouseLeftButtonDown=function(d){c.prototype.OnMouseLeftButtonDown.call(this,d);this._IsMouseLeftButtonDown=!0;if(this.IsEnabled){var e=this.ClickMode;if(e!==a.ClickMode.Hover){this._SuspendStateChanges=d.Handled=!0;try{this.Focus(),this._CaptureMouseInternal(),this._IsMouseCaptured&&this.SetValueInternal(b.IsPressedProperty,!0)}finally{this._SuspendStateChanges=!1,this.UpdateVisualState()}e===a.ClickMode.Press&&this.OnClick()}}};b.prototype.OnMouseLeftButtonUp=function(d){c.prototype.OnMouseLeftButtonDown.call(this,
d);this._IsMouseLeftButtonDown=!1;if(this.IsEnabled){var e=this.ClickMode;e!==a.ClickMode.Hover&&(d.Handled=!0,!this._IsSpaceKeyDown&&(this.IsPressed&&e===a.ClickMode.Release)&&this.OnClick(),this._IsSpaceKeyDown||(this._ReleaseMouseCaptureInternal(),this.SetValueInternal(b.IsPressedProperty,!1)))}};b.prototype.OnGotFocus=function(a){c.prototype.OnGotFocus.call(this,a);this.SetValueInternal(b.IsFocusedProperty,!0);this.UpdateVisualState()};b.prototype.OnLostFocus=function(d){c.prototype.OnLostFocus.call(this,
d);this.SetValueInternal(b.IsFocusedProperty,!1);this._SuspendStateChanges=!0;try{this.ClickMode!==a.ClickMode.Hover&&(this.SetValueInternal(b.IsPressedProperty,!1),this._ReleaseMouseCaptureInternal(),this._IsSpaceKeyDown=!1)}finally{this._SuspendStateChanges=!1,this.UpdateVisualState()}};b.prototype.OnClick=function(){var a=this.Command,b=this.CommandParameter;null!=a&&a.CanExecute(b)&&a.Execute(b);this.Click.Raise(this,new d.RoutedEventArgs)};b.prototype.UpdateVisualState=function(a){this._SuspendStateChanges||
c.prototype.UpdateVisualState.call(this,a)};b.prototype.GetVisualStateCommon=function(){return this.IsEnabled?this.IsPressed?"Pressed":this.IsMouseOver?"MouseOver":"Normal":"Disabled"};b.prototype._CaptureMouseInternal=function(){this._IsMouseCaptured||(this._IsMouseCaptured=this.CaptureMouse())};b.prototype._ReleaseMouseCaptureInternal=function(){this.ReleaseMouseCapture();this._IsMouseCaptured=!1};b.prototype._IsValidMousePosition=function(){var a=this._MousePosition;return 0<=a.X&&a.X<=this.ActualWidth&&
0<=a.Y&&a.Y<=this.ActualHeight};b.prototype.OnCommandChanged=function(a){var b;Nullstone.ImplementsInterface(a.OldValue,d.Input.ICommand_)&&(b=a.OldValue,b.CanExecuteChanged.Unsubscribe(this.OnCommandCanExecuteChanged,this));Nullstone.ImplementsInterface(a.NewValue,d.Input.ICommand_)&&(b=a.NewValue,b.CanExecuteChanged.Subscribe(this.OnCommandCanExecuteChanged,this),this.IsEnabled=b.CanExecute(this.CommandParameter))};b.prototype.OnCommandCanExecuteChanged=function(a,b){this.IsEnabled=this.Command.CanExecute(this.CommandParameter)};
b.prototype.OnCommandParameterChanged=function(a){var b=this.Command;b&&(this.IsEnabled=b.CanExecute(a.NewValue))};b.ClickModeProperty=DependencyProperty.Register("ClickMode",function(){return new Enum(a.ClickMode)},b,a.ClickMode.Release);b.IsPressedProperty=DependencyProperty.RegisterReadOnly("IsPressed",function(){return Boolean},b,!1,function(a,b){return a.OnIsPressedChanged(b)});b.IsFocusedProperty=DependencyProperty.RegisterReadOnly("IsFocused",function(){return Boolean},b,!1);b.CommandProperty=
DependencyProperty.RegisterCore("Command",function(){return d.Input.ICommand_},b,void 0,function(a,b){return a.OnCommandChanged(b)});b.CommandParameterProperty=DependencyProperty.RegisterCore("CommandParameter",function(){return Object},b,void 0,function(a,b){return a.OnCommandParameterChanged(b)});return b}(a.ContentControl);g.ButtonBase=e;Nullstone.RegisterType(e,"ButtonBase")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(g){var e=function(c){function b(){c.call(this);this._MouseCausingRepeat=this._KeyboardCausingRepeat=!1;this._ElementRoot=this._NewInterval=this._IntervalID=this._MousePosition=null;this.ClickMode=a.ClickMode.Press;this.DefaultStyleKey=this.constructor}__extends(b,c);b.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this);var a=this.GetTemplateChild("Root");a instanceof d.FrameworkElement&&(this._ElementRoot=a);this.UpdateVisualState(!1)};b.prototype.OnDelayChanged=
function(a){if(0>a.NewValue)throw new ArgumentException("Delay Property cannot be negative.");};b.prototype.OnIntervalChanged=function(a){if(0>a.NewValue)throw new ArgumentException("Interval Property cannot be negative.");this._NewInterval=a.NewValue};b.prototype.OnIsEnabledChanged=function(a){c.prototype.OnIsEnabledChanged.call(this,a);this._MouseCausingRepeat=this._KeyboardCausingRepeat=!1;this._UpdateRepeatState()};b.prototype.OnKeyDown=function(b){b.Key===d.Input.Key.Space&&this.ClickMode!==
a.ClickMode.Hover&&(this._KeyboardCausingRepeat=!0,this._UpdateRepeatState());c.prototype.OnKeyDown.call(this,b)};b.prototype.OnKeyUp=function(b){c.prototype.OnKeyUp.call(this,b);b.Key===d.Input.Key.Space&&this.ClickMode!==a.ClickMode.Hover&&(this._KeyboardCausingRepeat=!1,this._UpdateRepeatState());this.UpdateVisualState()};b.prototype.OnLostFocus=function(b){c.prototype.OnLostFocus.call(this,b);this.ClickMode!==a.ClickMode.Hover&&(this._MouseCausingRepeat=this._KeyboardCausingRepeat=!1,this._UpdateRepeatState())};
b.prototype.OnMouseEnter=function(b){c.prototype.OnMouseEnter.call(this,b);this.ClickMode===a.ClickMode.Hover&&(this._MouseCausingRepeat=!0,this._UpdateRepeatState());this.UpdateVisualState();this._UpdateMousePosition(b)};b.prototype.OnMouseLeave=function(b){c.prototype.OnMouseLeave.call(this,b);this.ClickMode===a.ClickMode.Hover&&(this._MouseCausingRepeat=!1,this._UpdateRepeatState());this.UpdateVisualState()};b.prototype.OnMouseLeftButtonDown=function(b){b.Handled||(c.prototype.OnMouseLeftButtonDown.call(this,
b),this.ClickMode!==a.ClickMode.Hover&&(this._MouseCausingRepeat=!0,this._UpdateRepeatState()))};b.prototype.OnMouseLeftButtonUp=function(b){b.Handled||(c.prototype.OnMouseLeftButtonUp.call(this,b),this.ClickMode!==a.ClickMode.Hover&&(this._MouseCausingRepeat=!1,this._UpdateRepeatState()),this.UpdateVisualState())};b.prototype.OnMouseMove=function(a){this._UpdateMousePosition(a)};b.prototype._UpdateMousePosition=function(a){for(var b=this.XamlNode,c=b;b instanceof d.FENode;)c=b,b=b.ParentNode;this._MousePosition=
a.GetPosition(c.XObject)};b.prototype._UpdateRepeatState=function(){var a=this;this._MouseCausingRepeat||this._KeyboardCausingRepeat?null==this._IntervalID&&(this._IntervalID=window.setInterval(function(){return a._StartRepeatingAfterDelay()},this.Delay)):(null!=this._IntervalID&&window.clearInterval(this._IntervalID),this._IntervalID=null)};b.prototype._StartRepeatingAfterDelay=function(){var a=this;window.clearInterval(this._IntervalID);this._IntervalID=window.setInterval(function(){return a._OnTimeout()},
this.Interval)};b.prototype._OnTimeout=function(){var a=this;null!=this._NewInterval&&(window.clearInterval(this._IntervalID),this._IntervalID=window.setInterval(function(){return a._OnTimeout()},this._NewInterval),this._NewInterval=null);if(this.IsPressed)if(this._KeyboardCausingRepeat)this.OnClick();else for(var b=this._ElementRoot,c=d.VisualTreeHelper.FindElementsInHostCoordinates(this._MousePosition,this),e=0;e<c.length;e++)c[e]===b&&this.OnClick()};b.DelayProperty=DependencyProperty.Register("Delay",
function(){return Number},b,500,function(a,b){return a.OnDelayChanged(b)});b.IntervalProperty=DependencyProperty.Register("Interval",function(){return Number},b,33,function(a,b){return a.OnIntervalChanged(b)});return b}(g.ButtonBase);g.RepeatButton=e;Nullstone.RegisterType(e,"RepeatButton")})(a.Primitives||(a.Primitives={}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){(function(a){var e=function(a){function b(){a.call(this);this.Checked=new d.RoutedEvent;this.Indeterminate=new d.RoutedEvent;this.Unchecked=new d.RoutedEvent;this.DefaultStyleKey=this.constructor}__extends(b,a);b.prototype.OnApplyTemplate=function(){a.prototype.OnApplyTemplate.call(this);this.UpdateVisualState(!1)};b.prototype.OnContentChanged=function(b,d){a.prototype.OnContentChanged.call(this,b,d);this.UpdateVisualState()};b.prototype.OnClick=function(){this.OnToggle();
a.prototype.OnClick.call(this)};b.prototype.UpdateVisualState=function(b){b=!1!==b;a.prototype.UpdateVisualState.call(this,b);var e=this.IsChecked,g=d.Media.VSM.VisualStateManager;!0===e?g.GoToState(this,"Checked",b):!1===e?g.GoToState(this,"Unchecked",b):g.GoToState(this,"Indeterminate",b)||g.GoToState(this,"Unchecked",b)};b.prototype.OnIsCheckedChanged=function(a){a=a.NewValue;this.UpdateVisualState();var b=new d.RoutedEventArgs;!0===a?this.Checked.Raise(this,b):!1===a?this.Unchecked.Raise(this,
b):this.Indeterminate.Raise(this,b)};b.prototype.OnToggle=function(){var a=this.IsChecked;this.IsChecked=!0===a?this.IsThreeState?null:!1:null!=a};b.IsCheckedProperty=DependencyProperty.RegisterCore("IsChecked",function(){return Boolean},b,!1,function(a,b){return a.OnIsCheckedChanged(b)});b.IsThreeStateProperty=DependencyProperty.RegisterCore("IsThreeState",function(){return Boolean},b,!1);return b}(a.ButtonBase);a.ToggleButton=e;Nullstone.RegisterType(e,"ToggleButton")})(a.Primitives||(a.Primitives=
{}))})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(a){function c(){a.call(this);this.DefaultStyleKey=this.constructor}__extends(c,a);c.prototype.OnApplyTemplate=function(){a.prototype.OnApplyTemplate.call(this);this.UpdateVisualState(!1)};c.prototype.OnIsEnabledChanged=function(b){a.prototype.OnIsEnabledChanged.call(this,b);this.IsTabStop=b.NewValue};return c}(a.Primitives.ButtonBase);a.Button=d;Nullstone.RegisterType(d,"Button")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(a){function c(){a.call(this);this.DefaultStyleKey=this.constructor}__extends(c,a);return c}(a.Primitives.ToggleButton);a.CheckBox=d;Nullstone.RegisterType(d,"CheckBox")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.call(this);this.DefaultStyleKey=this.constructor}__extends(c,d);c.prototype.OnMouseLeftButtonUp=function(b){d.prototype.OnMouseLeftButtonUp.call(this,b);this.ParentSelector instanceof a.ComboBox&&(this.ParentSelector.IsDropDownOpen=!1)};return c}(a.ListBoxItem);a.ComboBoxItem=d;Nullstone.RegisterType(d,"ComboBoxItem")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(d){function c(){d.call(this);this.DefaultStyleKey=this.constructor}__extends(c,d);c.prototype.OnApplyTemplate=function(){d.prototype.OnApplyTemplate.call(this);this.UpdateVisualState(!1)};c.prototype.OnClick=function(){d.prototype.OnClick.call(this);null!=this.NavigateUri&&this._Navigate()};c.prototype._Navigate=function(){var b=this.TargetName;b?this.FindName(b)instanceof a.Frame?window.location.href=this.NavigateUri.toString():window.open(this.NavigateUri.toString(),
b):window.location.href=this.NavigateUri.toString()};c.NavigateUriProperty=DependencyProperty.Register("NavigateUri",function(){return Uri},c);c.TargetNameProperty=DependencyProperty.Register("TargetName",function(){return String},c);return c}(a.Primitives.ButtonBase);a.HyperlinkButton=d;Nullstone.RegisterType(d,"HyperlinkButton")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
(function(d){(function(a){var d=function(a){function c(){a.call(this);c.Register("",this);this.DefaultStyleKey=this.constructor}__extends(c,a);c.Register=function(a,d){a||(a="");var e=c._GroupNameToElements[a];e||(e=[],c._GroupNameToElements[a]=e);e.push(d)};c.Unregister=function(a,d){a||(a="");var e=c._GroupNameToElements[a];if(e)for(var g=0;g<e.length;g++)if(d===e[g]){e.splice(g,1);break}};c.prototype.OnGroupNameChanged=function(a){c.Unregister(a.OldValue,this);c.Register(a.NewValue,this)};c.prototype.OnIsCheckedChanged=
function(b){!0===b.NewValue&&this.UpdateRadioButtonGroup();a.prototype.OnIsCheckedChanged.call(this,b)};c.prototype.OnToggle=function(){this.IsChecked=!0};c.prototype.UpdateRadioButtonGroup=function(){var a=this.GroupName||"",d=c._GroupNameToElements[a];if(d){var e=null;if(a)for(var g=this.XamlNode.GetVisualRoot(),a=0;a<d.length;a++)e=d[a],e!==this&&(e.IsChecked&&g===e.XamlNode.GetVisualRoot())&&(e.IsChecked=!1);else for(g=this.XamlNode.VisualParentNode,a=0;a<d.length;a++)e=d[a],e!==this&&(e.IsChecked&&
g===e.XamlNode.VisualParentNode)&&(e.IsChecked=!1)}};c.GroupNameProperty=DependencyProperty.RegisterReadOnly("GroupName",function(){return String},c,!1,function(a,c){return a.OnGroupNameChanged(c)});c._GroupNameToElements=[];return c}(a.Primitives.ToggleButton);a.RadioButton=d;Nullstone.RegisterType(d,"RadioButton")})(d.Controls||(d.Controls={}))})(Fayde||(Fayde={}));
